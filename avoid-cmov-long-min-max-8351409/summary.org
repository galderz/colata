#+STARTUP: overview
#+TODO: TODO IN-PROGRESS WAITING CANCELLED REASSIGNED DEFERRED DUPLICATE DONE

* 28.8.25
** reassociated basic
#+begin_src bash
#+end_src

#+begin_src asm
#+end_src
** unrolled howard
#+begin_src bash
Running
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
#+end_src
https://uica.uops.info/?code=.loop%3A%0D%0Amovq%09%090x28(%25rsi%2C%20%25r9%2C%208)%2C%20%25r11%0D%0Amovq%09%090x20(%25rsi%2C%20%25r9%2C%208)%2C%20%25r8%0D%0Amovq%09%090x10(%25rsi%2C%20%25r9%2C%208)%2C%20%25rcx%0D%0Amovq%09%090x18(%25rsi%2C%20%25r9%2C%208)%2C%20%25rbx%0D%0Acmpq%09%09%25rcx%2C%20%25rax%0D%0Acmovlq%09%09%25rcx%2C%20%25rax%0D%0Acmpq%09%09%25rbx%2C%20%25rax%0D%0Acmovlq%09%09%25rbx%2C%20%25rax%0D%0Acmpq%09%09%25r8%2C%20%25rax%0D%0Acmovlq%09%09%25r8%2C%20%25rax%0D%0Acmpq%09%09%25r11%2C%20%25rax%0D%0Acmovlq%09%09%25r11%2C%20%25rax%0D%0Aaddl%09%09%244%2C%20%25r9d%0D%0Acmpl%09%09%25r10d%2C%20%25r9d%0D%0Ajl%09%09.loop&syntax=asATT&uArchs=SKL&tools=uiCA&alignment=0&uiCAHtmlOptions=traceTable
#+begin_src asm
.loop:
movq		0x28(%rsi, %r9, 8), %r11
movq		0x20(%rsi, %r9, 8), %r8
movq		0x10(%rsi, %r9, 8), %rcx
movq		0x18(%rsi, %r9, 8), %rbx
cmpq		%rcx, %rax
cmovlq		%rcx, %rax
cmpq		%rbx, %rax
cmovlq		%rbx, %rax
cmpq		%r8, %rax
cmovlq		%r8, %rax
cmpq		%r11, %rax
cmovlq		%r11, %rax
addl		$4, %r9d
cmpl		%r10d, %r9d
jl		.loop
#+end_src
* 27.8.25
next steps:
- [ ] try out theoretical reassociation assembly and see how it performs
- [ ] try out emanuel hacked reassociation assembly and see how it performs
** latency bound v2 howard
#+begin_src asm
.loop:
movq	0x28(%rsi, %r9, 8), %r11
movq	0x20(%rsi, %r9, 8), %r8
movq	0x10(%rsi, %r9, 8), %rcx
movq	0x18(%rsi, %r9, 8), %rbx
cmpq	%rcx, %rax
cmovlq  %rcx, %rax
cmpq	%rbx, %rax
cmovlq	%rbx, %rax
cmpq	%r8, %rax
cmovlq	%r8, %rax
cmpq	%r11, %rax
cmovlq	%r11, %rax
addl	$4, %r9d
cmpl	%r10d, %r9d
jl	.loop
#+end_src
https://uica.uops.info/?code=.loop%3A%0D%0Amovq%090x28(%25rsi%2C%20%25r9%2C%208)%2C%20%25r11%0D%0Amovq%090x20(%25rsi%2C%20%25r9%2C%208)%2C%20%25r8%0D%0Amovq%090x10(%25rsi%2C%20%25r9%2C%208)%2C%20%25rcx%0D%0Amovq%090x18(%25rsi%2C%20%25r9%2C%208)%2C%20%25rbx%0D%0Acmpq%09%25rcx%2C%20%25rax%0D%0Acmovlq%20%20%25rcx%2C%20%25rax%0D%0Acmpq%09%25rbx%2C%20%25rax%0D%0Acmovlq%09%25rbx%2C%20%25rax%0D%0Acmpq%09%25r8%2C%20%25rax%0D%0Acmovlq%09%25r8%2C%20%25rax%0D%0Acmpq%09%25r11%2C%20%25rax%0D%0Acmovlq%09%25r11%2C%20%25rax%0D%0Aaddl%09%244%2C%20%25r9d%0D%0Acmpl%09%25r10d%2C%20%25r9d%0D%0Ajl%20%20%20%20%20%20.loop&syntax=asATT&uArchs=SKL&tools=uiCA&alignment=0&uiCAHtmlOptions=traceTable
** latency bound v1 chatgpt
#+begin_src asm
.loop4:
    mov     r8,  [rdi]
    mov     r9,  [rdi+8]
    mov     r10, [rdi+16]
    mov     r11, [rdi+24]
    cmp     rax, r8
    cmovl   rax, r8
    cmp     rax, r9
    cmovl   rax, r9
    cmp     rax, r10
    cmovl   rax, r10
    cmp     rax, r11
    cmovl   rax, r11
    add     rdi, 32
    sub     rcx, 4
    cmp     rcx, 4
    jae     .loop4
#+end_src
https://uica.uops.info/?code=.loop4%3A%0D%0A%20%20%20%20mov%20%20%20%20%20r8%2C%20%20%5Brdi%5D%0D%0A%20%20%20%20mov%20%20%20%20%20r9%2C%20%20%5Brdi%2B8%5D%0D%0A%20%20%20%20mov%20%20%20%20%20r10%2C%20%5Brdi%2B16%5D%0D%0A%20%20%20%20mov%20%20%20%20%20r11%2C%20%5Brdi%2B24%5D%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r8%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r8%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r9%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r9%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r10%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r10%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r11%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r11%0D%0A%20%20%20%20add%20%20%20%20%20rdi%2C%2032%0D%0A%20%20%20%20sub%20%20%20%20%20rcx%2C%204%0D%0A%20%20%20%20cmp%20%20%20%20%20rcx%2C%204%0D%0A%20%20%20%20jae%20%20%20%20%20.loop4&syntax=asIntel&uArchs=SKL&tools=uiCA&alignment=0&uiCAHtmlOptions=traceTable&uiCAHtmlOptions=dependencies
** latency bound v0
Sample assembly for
x = max(v3, max(v2, max(v1, max(v0, x))))
#+begin_src asm
mov     rax, rdi
cmp     rax, rsi
cmovl   rax, rsi
cmp     rax, rdx
cmovl   rax, rdx
cmp     rax, rcx
cmovl   rax, rcx
cmp     rax, r8
cmovl   rax, r8
#+end_src
uica: https://uica.uops.info/?code=mov%20%20%20%20%20rax%2C%20rdi%0D%0Acmp%20%20%20%20%20rax%2C%20rsi%0D%0Acmovl%20%20%20rax%2C%20rsi%0D%0Acmp%20%20%20%20%20rax%2C%20rdx%0D%0Acmovl%20%20%20rax%2C%20rdx%0D%0Acmp%20%20%20%20%20rax%2C%20rcx%0D%0Acmovl%20%20%20rax%2C%20rcx%0D%0Acmp%20%20%20%20%20rax%2C%20r8%0D%0Acmovl%20%20%20rax%2C%20r8&syntax=asIntel&uArchs=SKL&tools=uiCA&alignment=0
* 20-24.6.25
** simple 100
*** branch never
#+begin_src asm
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longReductionSimpleMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

   2.68%  │                ││       │   0x00007eff34b15e68:   movq		0x68(%rbp, %r10, 8), %r11
   1.13%  │                ││       │   0x00007eff34b15e6d:   movq		0x60(%rbp, %r10, 8), %r8
   0.18%  │                ││       │   0x00007eff34b15e72:   movq		0x58(%rbp, %r10, 8), %r9
   1.33%  │                ││       │   0x00007eff34b15e77:   movq		0x50(%rbp, %r10, 8), %rbx
   2.75%  │                ││       │   0x00007eff34b15e7c:   movq		0x48(%rbp, %r10, 8), %rdi
   1.27%  │                ││       │   0x00007eff34b15e81:   movq		0x40(%rbp, %r10, 8), %rdx
   0.17%  │                ││       │   0x00007eff34b15e86:   movq		0x38(%rbp, %r10, 8), %rsi
   1.25%  │                ││       │   0x00007eff34b15e8b:   movq		0x30(%rbp, %r10, 8), %rax
   2.62%  │                ││       │   0x00007eff34b15e90:   movq		0x28(%rbp, %r10, 8), %r13
   1.26%  │                ││       │   0x00007eff34b15e95:   movq		0x20(%rbp, %r10, 8), %r14
   0.17%  │                ││       │   0x00007eff34b15e9a:   cmpq		%r14, %rcx
          │  ╭             ││       │   0x00007eff34b15e9d:   jg		0x7eff34b15ea2
   1.31%  │  │             ││       │   0x00007eff34b15e9f:   movq		%r14, %rcx
   2.71%  │  ↘             ││       │   0x00007eff34b15ea2:   cmpq		%r13, %rcx
          │   ╭            ││       │   0x00007eff34b15ea5:   jg		0x7eff34b15eaa
   1.12%  │   │            ││       │   0x00007eff34b15ea7:   movq		%r13, %rcx
   0.16%  │   ↘            ││       │   0x00007eff34b15eaa:   cmpq		%rax, %rcx
          │    ╭           ││       │   0x00007eff34b15ead:   jg		0x7eff34b15eb2
   3.94%  │    │           ││       │   0x00007eff34b15eaf:   movq		%rax, %rcx
   0.08%  │    ↘           ││       │   0x00007eff34b15eb2:   cmpq		%rsi, %rcx
          │     ╭          ││       │   0x00007eff34b15eb5:   jg		0x7eff34b15eba
   1.16%  │     │          ││       │   0x00007eff34b15eb7:   movq		%rsi, %rcx
   0.10%  │     ↘          ││       │   0x00007eff34b15eba:   cmpq		%rdx, %rcx
          │      ╭         ││       │   0x00007eff34b15ebd:   jg		0x7eff34b15ec2
   4.05%  │      │         ││       │   0x00007eff34b15ebf:   movq		%rdx, %rcx
   0.08%  │      ↘         ││       │   0x00007eff34b15ec2:   cmpq		%rdi, %rcx
          │       ╭        ││       │   0x00007eff34b15ec5:   jg		0x7eff34b15eca
   1.20%  │       │        ││       │   0x00007eff34b15ec7:   movq		%rdi, %rcx
   0.16%  │       ↘        ││       │   0x00007eff34b15eca:   cmpq		%rbx, %rcx
          │        ╭       ││       │   0x00007eff34b15ecd:   jg		0x7eff34b15ed2
   3.89%  │        │       ││       │   0x00007eff34b15ecf:   movq		%rbx, %rcx
   0.12%  │        ↘       ││       │   0x00007eff34b15ed2:   cmpq		%r9, %rcx
          │         ╭      ││       │   0x00007eff34b15ed5:   jg		0x7eff34b15eda
   1.31%  │         │      ││       │   0x00007eff34b15ed7:   movq		%r9, %rcx
   0.21%  │         ↘      ││       │   0x00007eff34b15eda:   cmpq		%r8, %rcx
          │          ╭     ││       │   0x00007eff34b15edd:   jg		0x7eff34b15ee2
   3.73%  │          │     ││       │   0x00007eff34b15edf:   movq		%r8, %rcx
   0.13%  │          ↘     ││       │   0x00007eff34b15ee2:   cmpq		%r11, %rcx
          │           ╭    ││       │   0x00007eff34b15ee5:   jg		0x7eff34b15eea
   5.06%  │           │    ││       │   0x00007eff34b15ee7:   movq		%r11, %rcx
   0.13%  │           ↘    ││       │   0x00007eff34b15eea:   vmovq		%xmm8, %r11
   6.43%  │                ││       │   0x00007eff34b15eef:   cmpq		%r11, %rcx
          │            ╭   ││       │   0x00007eff34b15ef2:   jg		0x7eff34b15ef7
   0.31%  │            │   ││       │   0x00007eff34b15ef4:   movq		%r11, %rcx
   1.38%  │            ↘   ││       │   0x00007eff34b15ef7:   vmovq		%xmm7, %r11
   0.14%  │                ││       │   0x00007eff34b15efc:   cmpq		%r11, %rcx
          │             ╭  ││       │   0x00007eff34b15eff:   jg		0x7eff34b15f04
   7.54%  │             │  ││       │   0x00007eff34b15f01:   movq		%r11, %rcx
   0.11%  │             ↘  ││       │   0x00007eff34b15f04:   vmovq		%xmm6, %r11
   1.37%  │                ││       │   0x00007eff34b15f09:   cmpq		%r11, %rcx
          │              ╭ ││       │   0x00007eff34b15f0c:   jg		0x7eff34b15f11
   0.14%  │              │ ││       │   0x00007eff34b15f0e:   movq		%r11, %rcx
   3.82%  │              ↘ ││       │   0x00007eff34b15f11:   vmovq		%xmm5, %r11
   0.15%  │                ││       │   0x00007eff34b15f16:   cmpq		%r11, %rcx
          │               ╭││       │   0x00007eff34b15f19:   jg		0x7eff34b15f1e
   2.63%  │               │││       │   0x00007eff34b15f1b:   movq		%r11, %rcx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │               │││       │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 313)
          │               │││       │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
#+end_src
*** ool
#+begin_src asm
# OOL
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longReductionSimpleMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

   3.60%     ││││││  0x00007fb52cb17baa:   movq		0x68(%rsi, %r8, 8), %r11
             ││││││  0x00007fb52cb17baf:   movq		0x60(%rsi, %r8, 8), %r9
   1.15%     ││││││  0x00007fb52cb17bb4:   movq		0x58(%rsi, %r8, 8), %rcx
   0.01%     ││││││  0x00007fb52cb17bb9:   movq		0x50(%rsi, %r8, 8), %rbx
   3.36%     ││││││  0x00007fb52cb17bbe:   movq		0x48(%rsi, %r8, 8), %rdi
             ││││││  0x00007fb52cb17bc3:   movq		0x40(%rsi, %r8, 8), %rdx
   1.19%     ││││││  0x00007fb52cb17bc8:   movq		0x38(%rsi, %r8, 8), %rax
   0.01%     ││││││  0x00007fb52cb17bcd:   movq		0x30(%rsi, %r8, 8), %rbp
   3.46%     ││││││  0x00007fb52cb17bd2:   movq		0x28(%rsi, %r8, 8), %r13
             ││││││  0x00007fb52cb17bd7:   movq		0x20(%rsi, %r8, 8), %r14
   1.19%     ││││││  0x00007fb52cb17bdc:   cmpq		%r14, %r10
             ││││││  0x00007fb52cb17bdf:   jg		0x7fb52cb17e76
   0.16%     ││││││  0x00007fb52cb17be5:   cmpq		%r13, %r14
             ││││││  0x00007fb52cb17be8:   jg		0x7fb52cb17e6e
   3.46%     ││││││  0x00007fb52cb17bee:   cmpq		%rbp, %r13
             ││││││  0x00007fb52cb17bf1:   jg		0x7fb52cb17e66
             ││││││  0x00007fb52cb17bf7:   cmpq		%rax, %rbp
             ││││││  0x00007fb52cb17bfa:   jg		0x7fb52cb17e5e
   1.19%     ││││││  0x00007fb52cb17c00:   cmpq		%rdx, %rax
             ││││││  0x00007fb52cb17c03:   jg		0x7fb52cb17e56
   0.05%     ││││││  0x00007fb52cb17c09:   cmpq		%rdi, %rdx
             ││││││  0x00007fb52cb17c0c:   jg		0x7fb52cb17e4e
  13.21%     ││││││  0x00007fb52cb17c12:   cmpq		%rbx, %rdi
             ││││││  0x00007fb52cb17c15:   jg		0x7fb52cb17e46
   4.64%     ││││││  0x00007fb52cb17c1b:   cmpq		%rcx, %rbx
             ││││││  0x00007fb52cb17c1e:   jg		0x7fb52cb17e3e
   0.08%     ││││││  0x00007fb52cb17c24:   cmpq		%r9, %rcx
             ││││││  0x00007fb52cb17c27:   jg		0x7fb52cb17e36
   0.03%     ││││││  0x00007fb52cb17c2d:   cmpq		%r11, %r9
             ││││││  0x00007fb52cb17c30:   jg		0x7fb52cb17e2e
   6.88%     ││││││  0x00007fb52cb17c36:   vmovq		%xmm9, %r10
   2.28%     ││││││  0x00007fb52cb17c3b:   cmpq		%r10, %r11
             ││││││  0x00007fb52cb17c3e:   jg		0x7fb52cb17e26
   0.31%     ││││││  0x00007fb52cb17c44:   vmovq		%xmm8, %r11
   0.00%     ││││││  0x00007fb52cb17c49:   cmpq		%r11, %r10
             ││││││  0x00007fb52cb17c4c:   jg		0x7fb52cb17e1e
   6.94%     ││││││  0x00007fb52cb17c52:   vmovq		%xmm7, %r10
   2.21%     ││││││  0x00007fb52cb17c57:   cmpq		%r10, %r11
             ││││││  0x00007fb52cb17c5a:   jg		0x7fb52cb17e16
   0.21%     ││││││  0x00007fb52cb17c60:   vmovq		%xmm6, %r11
   0.01%     ││││││  0x00007fb52cb17c65:   cmpq		%r11, %r10
             ││││││  0x00007fb52cb17c68:   jg		0x7fb52cb17e0e      ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 313)
             ││││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
#+end_src
** clip range 90
*** branch never
#+begin_src asm
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 90, seed = 0, size = 1000)

   1.52%  │                        ││││  0x00007f81b0b17bf0:   movq		0x20(%rax, %r9, 8), %r10;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
   1.54%  │                        ││││  0x00007f81b0b17bf5:   movq		%rbp, %rdx
   1.56%  │                        ││││  0x00007f81b0b17bf8:   cmpq		%r10, %rdx
          │            ╭           ││││  0x00007f81b0b17bfb:   jg		0x7f81b0b17c00
   1.31%  │            │           ││││  0x00007f81b0b17bfd:   movq		%r10, %rdx
   1.65%  │            ↘           ││││  0x00007f81b0b17c00:   movq		%r8, %r10
   1.36%  │                        ││││  0x00007f81b0b17c03:   cmpq		%rdx, %r10
          │             ╭          ││││  0x00007f81b0b17c06:   jl		0x7f81b0b17c0b
   1.18%  │             │          ││││  0x00007f81b0b17c08:   movq		%rdx, %r10
   1.61%  │             ↘          ││││  0x00007f81b0b17c0b:   movq		%r10, 0x20(%r11, %r9, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
#+end_src

*** ool
#+begin_src asm
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 90, seed = 0, size = 1000)

   0.40%  │   ↗│││  0x00007fd238b181d2:   movq		0x10(%rax, %r11, 8), %r9;*laload {reexecute=0 rethrow=0 return_oop=0}
          │   ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
          │   ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
   5.07%  │   ││││  0x00007fd238b181d7:   cmpq		%r9, %rdx
          │   ││││  0x00007fd238b181da:   jg		0x7fd238b18496
   5.06%  │   ││││  0x00007fd238b181e0:   cmpq		%r9, %rbp
          │   ││││  0x00007fd238b181e3:   jl		0x7fd238b1848e
   1.20%  │   ││││  0x00007fd238b181e9:   movq		%r9, 0x10(%r14, %r11, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
          │   ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
          │   ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
#+end_src
* 18.6.25
** clipping range oddities
Actually things look fine with clipping range and branch-never.
The oddities from the previous day might be due using the wrong UseNewCode flag settings.

Initial command:
#+begin_src bash
TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping" MICRO="OPTIONS=-p range=100 -jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:-UseSuperWord -jvmArgs -XX:+UseNewCode -jvmArgs -XX:+UseNewCode2;FORK=1" CONF=slow LOG=warn make test
#+end_src

#+begin_src asm
// Branch never with GT
instruct maxL_reg_reg_gt(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(UseNewCode);
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg)); // src1 (b) > src2 (a) ?
    __ br(Assembler::GT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}

// Branch never with LT
instruct minL_reg_reg_lt(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(UseNewCode2);
  match(Set dst (MinL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg)); // src2 (b) < src1 (a) ?
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
highestLong: 9209124015426240512
lowestLong: -9215797459577170060
longs: [-3109364765729502342, -6688467811848818630, 2158390814503909950, ...

  0x00007fffe8ad3589:   movq            0x10(%r12, %r9, 8), %rdi
  0x00007fffe8ad358e:   movq            0x10(%rdx), %r11    ;*getfield highestLong {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@29 (line 260)
  0x00007fffe8ad3592:   movq            0x18(%rdx), %r8     ;*getfield lowestLong {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@22 (line 260)

r8             0x801ae909b3f49774  -9215797459577170060
r11            0x7fcd618000000000  9209124015426240512

  0x00007fffe8ad3596:   movq            %r8, %rax

rax            0x801ae909b3f49774  -9215797459577170060
Vrdi            0x0                 0

  0x00007fffe8ad3599:   cmpq            %rdi, %rax          ; Math.max(longs[i], lowestLong)
  0x00007fffe8ad359c:   jg              0x7fffe8ad35a1      ; lowestLong > longs[i] ? false
  0x00007fffe8ad359e:   movq            %rdi, %rax
  0x00007fffe8ad35a1:   movq            %r11, %rdi

rax            0x0                 0
rdi            0x7fcd618000000000  9209124015426240512

  0x00007fffe8ad35a4:   cmpq            %rax, %rdi          ; Math.min(longs[i], highestLong)
  0x00007fffe8ad35a7:   jl              0x7fffe8ad35ac      ; highestLong < longs[i] ? false
  0x00007fffe8ad35a9:   movq            %rax, %rdi
  0x00007fffe8ad35ac:   movq            %rdi, 0x10(%r12, %rsi, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 260)
#+end_src

#+begin_src asm
highestLong: 9209124015426240512
lowestLong: -9215797459577170060
longs: [-3109364765729502342, -6688467811848818630, 2158390814503909950, ...

rdx            0xa32dc9f64f1df03a  -6688467811848818630
rsi            0x801ae909b3f49774  -9215797459577170060

  0x00007fffe8ad3648:   cmpq            %rdx, %rsi          ; Math.max(longs[i], lowestLong)
  0x00007fffe8ad364b:   jg              0x7fffe8ad3650      ; lowestLong > longs[i] ? false
  0x00007fffe8ad364d:   movq            %rdx, %rsi
  0x00007fffe8ad3650:   movq            %r11, %rdx

rdx            0x7fcd618000000000  9209124015426240512
rsi            0xa32dc9f64f1df03a  -6688467811848818630

  0x00007fffe8ad3653:   cmpq            %rsi, %rdx          ; Math.min(longs[i], highestLong)
  0x00007fffe8ad3656:   jl              0x7fffe8ad365b      ; highestLong < longs[i] ? false
  0x00007fffe8ad3658:   movq            %rsi, %rdx
  0x00007fffe8ad365b:   movq            %rdx, 0x10(%r13, %rdi, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 260)
#+end_src
* 12.6.25
** clipping range (range=100) with branch never
The assembly looks slightly ood.
lowestLong seems very high?
The banch jumps to ~0x7fffe8ad2fd0~ when the branch never is designed not to jump
Next: print lowest/highest and array contents and then use that as guidance
#+begin_src java
@Benchmark
public long[] longClippingRange(RangeState state) {
    for (int i = 0; i < state.size; i++) {
        state.resultLongs[i] = Math.min(Math.max(state.longs[i], state.lowestLong), state.highestLong);
    }
    return state.resultLongs;
}
#+end_src
#+begin_src asm
  0x00007fffe8ad2fc0:   movq            0x10(%rbp, %rdi, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
  0x00007fffe8ad2fc5:   movq            %r8, %rsi

rdx            0xa32dc9f64f1df03a  -6688467811848818630     ; (a) state.longs[i]
rsi            0x7fe84a89b3f49775  9216698592703846261      ; (b) state.lowestLong

  0x00007fffe8ad2fc8:   cmpq            %rdx, %rsi          ; %rsi (b) > rdx (a) ? true
  0x00007fffe8ad2fcb:   jg              0x7fffe8ad2fd0      ; maxL_reg_reg_gt
  0x00007fffe8ad2fcd:   movq            %rdx, %rsi
  0x00007fffe8ad2fd0:   movq            %r11, %rdx          ; ...
  0x00007fffe8ad2fd3:   cmpq            %rsi, %rdx
  0x00007fffe8ad2fd6:   jl              0x7fffe8ad2fdb
  0x00007fffe8ad2fd8:   movq            %rsi, %rdx
  0x00007fffe8ad2fdb:   movq            %rdx, 0x10(%r13, %rdi, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
  0x00007fffe8ad2fe0:   movq            0x18(%rbp, %rdi, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
#+end_src
** clipping range (range=100)
Both "not taken" ~100% when branch always (-XX:-UseNewCode -XX:-UseNewCode2).
How does it compare with long reduction min/max with branch always?
Hard to say because the bytecode is opposite to the comparisons in the source:
ifgt for min, iflt for max
>= for max in source code
<= for min in source code

So instead run with branch never on gdb,
and see if branch never does actually happen for both max and min.
#+begin_src bash
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:     1552301
  invocation_counter:               1552301
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 416 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(1690) displacement(56)
                                    not taken(1550158)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(1550158) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:     1552136
  invocation_counter:               1552136
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 416 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(1540) displacement(56)
                                    not taken(1550214)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(1550214) displacement(24)
  10 lload_2
  11 lreturn
#+end_src
* 5.6.25
** clipping range aarch64 analysis
Branch always shows a decrease in performance.
*Branch never show an increase in performance of ~10%.*
** disable intrinsic aarch64 analysis
Clipping range branch never substantially better than disable intrinsic, 25-30%.
Branch always/never ~45% worse with loop at 50% probability.
Branch never 10% worse with loop at 80% probability.
Branch never equals with loop at 100% probability.
In reduction cases, branch never always wins no matter probability.
In reduction cases, branch always wins except in 100% probability.
** clipping range x64 analysis
Branch always shows a decrease in performance.
*Branch never show an decrease in performance of ~10%.*
** disable intrinsic x64 analysis
Branch always/never better performance all accross the board.
* 2.6.25
** aarch64 MMV longLoopMax
*** print method data, branch always, 50
#+begin_src bash
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:+UnlockDiagnosticVMOptions -XX:+PrintMethodData -XX:-UseSuperWord -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 50, size = 2048)

# Run progress: 0.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1:
maxLongA: [
3, 3, 0, 11, 8, 13, 18, 12, 27, 20, 27, 21, 29, 23, 32, 26, 25, 29, 35, 33, 31, 34, 27, 31, 28, 34, 29, 42, 49, 41, 42, 55, 58, 53, 56, 54, 54, 62, 63, 60, 58, 55, 61, 61, 68, 67, 70, 62, 64, 70, 63, 73, 76, 83, 74, 85, 91, 90, 84, 92, 92, 83, 93, 95, 99, 102, 109, 100, 117, 110, 109, 111, 109, 112, 122, 126, 129, 120, 125, 121, 137, 140, 131, 148, 157, 154, 151, 161, 169, 163, 173, 170, 165, 176, 185, 181, 188, 195, 199, 196, 200, 205, 202, 202, 212, 210, 216, 212, 207, 224, 224, 233, 239, 248, 244, 240, 255, 249, 253, 258, 259, 257, 257, 265, 257, 256, 261, 259, 268, 264, 259, 270, 266, 274, 270, 276, 271, 283, 292, 289, 295, 289, 296, 304, 299, 313, 309, 306, 312, 310, 317, 322, 319, 316, 317, 327, 326, 331, 329, 340, 337, 340, 339, 337, 345, 344, 345, 353, 348, 349, 349, 354, 354, 361, 362, 356, 357, 361, 367, 370, 376, 375, 377, 381, 383, 383, 387, 396, 400, 403, 403, 395, 399, 396, 396, 408, 405, 407, 399, 404, 401, 411, 409, 416, 423, 432, 427, 427, 431, 431, 440, 445, 453, 451, 460, 468, 469, 465, 477, 475, 473, 486, 491, 486, 482, 490, 488, 494, 497, 505, 498, 504, 512, 506, 521, 528, 531, 538, 534, 532, 546, 538, 541, 540, 549, 554, 549, 547, 561, 569, 561, 578, 574, 587, 578, 595, 593, 593, 594, 586, 586, 587, 595, 596, 605, 613, 611, 611, 610, 612, 608, 621, 626, 623, 617, 618, 633, 636, 633, 630, 644, 649, 652, 654, 662, 665, 667, 675, 679, 670, 680, 681, 672, 672, 673, 683, 675, 692, 684, 689, 692, 697, 698, 699, 698, 701, 692, 695, 703, 698, 699, 697, 703, 694, 709, 714, 705, 705, 719, 728, 730, 721, 721, 738, 735, 744, 741, 737, 739, 742, 735, 749, 750, 755, 747, 754, 761, 769, 774, 766, 779, 779, 770, 774, 773, 788, 780, 786, 784, 779, 790, 793, 784, 801, 801, 806, 801, 797, 804, 807, 798, 814, 808, 809, 808, 820, 823, 828, 836, 843, 838, 845, 846, 839, 854, 849, 853, 846, 852, 862, 867, 864, 863, 875, 867, 876, 880, 873, 883, 878, 874, 875, 879, 874, 890, 886, 889, 889, 888, 895, 886, 890, 888, 891, 896, 889, 901, 903, 894, 911, 909, 904, 913, 912, 915, 913, 913, 914, 915, 910, 922, 913, 924, 916, 928, 931, 922, 928, 935, 943, 943, 942, 935, 944, 943, 944, 943, 947, 955, 963, 972, 979, 974, 977, 974, 981, 988, 982, 983, 979, 980, 984, 996, 995, 994, 999, 1007, 1015, 1011, 1007, 1022, 1021, 1014, 1023, 1028, 1021, 1032, 1031, 1032, 1041, 1049, 1046, 1055, 1047, 1049, 1056, 1058, 1058, 1052, 1057, 1049, 1053, 1052, 1052, 1059, 1059, 1066, 1066, 1063, 1074, 1075, 1066, 1070, 1069, 1071, 1072, 1078, 1072, 1069, 1076, 1085, 1085, 1087, 1096, 1095, 1100, 1092, 1104, 1103, 1104, 1109, 1107, 1113, 1114, 1107, 1108, 1123, 1118, 1125, 1127, 1119, 1132, 1124, 1123, 1130, 1124, 1132, 1123, 1135, 1135, 1127, 1131, 1127, 1139, 1143, 1151, 1159, 1158, 1151, 1166, 1167, 1174, 1179, 1181, 1174, 1174, 1185, 1186, 1182, 1189, 1183, 1187, 1196, 1202, 1205, 1202, 1201, 1201, 1200, 1196, 1198, 1198, 1199, 1206, 1213, 1210, 1217, 1219, 1212, 1218, 1210, 1214, 1210, 1217, 1210, 1217, 1219, 1218, 1224, 1226, 1233, 1228, 1235, 1242, 1237, 1248, 1254, 1247, 1262, 1262, 1266, 1273, 1273, 1273, 1265, 1276, 1280, 1281, 1280, 1273, 1273, 1287, 1279, 1278, 1279, 1290, 1287, 1293, 1291, 1286, 1290, 1297, 1304, 1297, 1310, 1309, 1318, 1327, 1327, 1323, 1323, 1329, 1323, 1325, 1333, 1339, 1338, 1331, 1348, 1340, 1343, 1353, 1344, 1351, 1345, 1351, 1360, 1362, 1360, 1356, 1364, 1359, 1357, 1373, 1373, 1374, 1383, 1376, 1381, 1386, 1379, 1394, 1395, 1396, 1402, 1410, 1412, 1420, 1415, 1412, 1426, 1434, 1432, 1442, 1450, 1446, 1449, 1458, 1454, 1465, 1459, 1467, 1461, 1465, 1466, 1471, 1470, 1472, 1481, 1475, 1486, 1492, 1498, 1499, 1506, 1505, 1503, 1514, 1511, 1515, 1508, 1516, 1523, 1517, 1530, 1530, 1528, 1534, 1542, 1540, 1542, 1538, 1548, 1546, 1550, 1558, 1554, 1554, 1556, 1552, 1561, 1556, 1557, 1555, 1566, 1560, 1559, 1572, 1569, 1572, 1564, 1564, 1580, 1574, 1577, 1577, 1576, 1575, 1581, 1578, 1588, 1579, 1587, 1589, 1586, 1593, 1594, 1587, 1601, 1597, 1593, 1601, 1597, 1597, 1596, 1596, 1592, 1603, 1596, 1610, 1613, 1611, 1616, 1607, 1625, 1619, 1629, 1622, 1632, 1628, 1626, 1639, 1639, 1634, 1646, 1637, 1652, 1650, 1648, 1659, 1657, 1663, 1665, 1662, 1666, 1674, 1677, 1683, 1692, 1686, 1699, 1699, 1692, 1690, 1693, 1699, 1695, 1694, 1703, 1711, 1718, 1721, 1721, 1715, 1725, 1727, 1732, 1723, 1738, 1732, 1738, 1735, 1733, 1744, 1749, 1743, 1740, 1743, 1758, 1755, 1758, 1750, 1750, 1757, 1759, 1767, 1762, 1769, 1769, 1773, 1778, 1786, 1781, 1784, 1778, 1783, 1777, 1777, 1788, 1785, 1786, 1791, 1786, 1800, 1803, 1809, 1814, 1822, 1824, 1832, 1837, 1846, 1851, 1846, 1850, 1852, 1859, 1854, 1850, 1857, 1864, 1860, 1868, 1865, 1868, 1876, 1885, 1894, 1902, 1898, 1910, 1907, 1902, 1911, 1909, 1912, 1918, 1919, 1922, 1913, 1917, 1930, 1923, 1928, 1938, 1945, 1939, 1938, 1936, 1952, 1960, 1958, 1968, 1977, 1972, 1968, 1968, 1979, 1981, 1974, 1974, 1986, 1984, 1986, 1979, 1981, 1995, 1988, 1996, 1996, 2004, 2002, 2010, 2005, 2009, 2003, 2002, 2018, 2017, 2014, 2016, 2025, 2026, 2017, 2035, 2032, 2032, 2032, 2037, 2029, 2045, 2045, 2048, 2055, 2054, 2058, 2057, 2061, 2063, 2062, 2061, 2067, 2062, 2060, 2058, 2076, 2079, 2083, 2085, 2091, 2092, 2095, 2099, 2098, 2096, 2106, 2104, 2100, 2098, 2104, 2113, 2110, 2113, 2118, 2126, 2133, 2136, 2142, 2148, 2142, 2144, 2151, 2151, 2142, 2154, 2146, 2146, 2157, 2154, 2163, 2168, 2159, 2177, 2178, 2174, 2179, 2186, 2180, 2190, 2192, 2199, 2207, 2210, 2209, 2214, 2209, 2221, 2219, 2214, 2212, 2216, 2215, 2221, 2221, 2224, 2224, 2230, 2239, 2233, 2232, 2230, 2235, 2245, 2238, 2242, 2245, 2250, 2251, 2254, 2254, 2254, 2246, 2248, 2250, 2261, 2260, 2258, 2260, 2255, 2267, 2262, 2260, 2259, 2259, 2264, 2274, 2282, 2275, 2290, 2285, 2295, 2294, 2300, 2292, 2298, 2309, 2308, 2300, 2316, 2308, 2311, 2317, 2309, 2313, 2321, 2322, 2316, 2316, 2324, 2323, 2328, 2324, 2337, 2336, 2337, 2341, 2348, 2339, 2348, 2353, 2349, 2354, 2350, 2345, 2356, 2360, 2363, 2356, 2358, 2361, 2355, 2359, 2372, 2368, 2367, 2369, 2372, 2377, 2385, 2392, 2400, 2393, 2401, 2401, 2398, 2395, 2392, 2410, 2401, 2417, 2416, 2413, 2415, 2412, 2410, 2410, 2410, 2415, 2415, 2424, 2424, 2433, 2425, 2441, 2439, 2434, 2434, 2440, 2432, 2440, 2437, 2439, 2434, 2449, 2446, 2448, 2444, 2454, 2458, 2450, 2452, 2465, 2458, 2459, 2460, 2471, 2469, 2476, 2476, 2483, 2477, 2491, 2488, 2488, 2493, 2500, 2502, 2498, 2508, 2510, 2516, 2510, 2524, 2516, 2526, 2533, 2525, 2526, 2524, 2525, 2525, 2542, 2546, 2541, 2545, 2537, 2541, 2549, 2551, 2557, 2551, 2550, 2560, 2557, 2561, 2556, 2566, 2558, 2559, 2563, 2575, 2582, 2585, 2583, 2588, 2592, 2591, 2593, 2593, 2596, 2601, 2593, 2596, 2606, 2609, 2607, 2612, 2608, 2618, 2622, 2631, 2630, 2635, 2640, 2642, 2647, 2641, 2645, 2653, 2657, 2650, 2666, 2657, 2675, 2682, 2686, 2685, 2677, 2687, 2687, 2696, 2699, 2698, 2691, 2696, 2692, 2703, 2701, 2703, 2705, 2713, 2721, 2721, 2723, 2720, 2718, 2717, 2715, 2726, 2721, 2725, 2729, 2731, 2727, 2722, 2723, 2722, 2728, 2740, 2738, 2738, 2740, 2745, 2753, 2745, 2758, 2765, 2769, 2763, 2775, 2784, 2782, 2784, 2792, 2793, 2797, 2801, 2806, 2804, 2811, 2804, 2817, 2815, 2809, 2808, 2822, 2820, 2814, 2829, 2826, 2833, 2842, 2834, 2844, 2851, 2857, 2860, 2851, 2855, 2861, 2860, 2866, 2869, 2861, 2867, 2872, 2875, 2883, 2879, 2874, 2889, 2896, 2887, 2887, 2887, 2898, 2897, 2905, 2910, 2909, 2906, 2908, 2915, 2913, 2918, 2919, 2913, 2921, 2913, 2916, 2927, 2936, 2928, 2940, 2931, 2943, 2947, 2947, 2956, 2950, 2964, 2972, 2965, 2973, 2972, 2980, 2981, 2979, 2972, 2987, 2981, 2978, 2978, 2982, 2996, 3002, 3000, 3010, 3015, 3011, 3008, 3014, 3021, 3016, 3022, 3024, 3022, 3028, 3033, 3026, 3040, 3038, 3032, 3045, 3050, 3051, 3044, 3059, 3062, 3054, 3067, 3076, 3083, 3087, 3081, 3096, 3090, 3092, 3098, 3099, 3100, 3093, 3102, 3094, 3106, 3107, 3109, 3116, 3108, 3110, 3109, 3107, 3119, 3112, 3112, 3123, 3120, 3122, 3129, 3137, 3143, 3152, 3145, 3159, 3167, 3161, 3163, 3166, 3166, 3165, 3165, 3160, 3171, 3166, 3177, 3169, 3179, 3186, 3180, 3183, 3178, 3187, 3187, 3188, 3180, 3187, 3195, 3193, 3204, 3213, 3219, 3213, 3223, 3229, 3231, 3230, 3223, 3234, 3231, 3236, 3242, 3243, 3243, 3244, 3249, 3240, 3246, 3255, 3251, 3257, 3265, 3262, 3271, 3280, 3284, 3290, 3296, 3293, 3296, 3291, 3297, 3306, 3308, 3307, 3304, 3299, 3301, 3301, 3314, 3318, 3310, 3325, 3324, 3332, 3337, 3342, 3334, 3342, 3339, 3346, 3352, 3346, 3352, 3349, 3343, 3358, 3355, 3363, 3360, 3361, 3359, 3362, 3368, 3364, 3376, 3367, 3370, 3370, 3375, 3382, 3377, 3386, 3381, 3388, 3387, 3388, 3390, 3390, 3388, 3388, 3384, 3387, 3383, 3381, 3399, 3401, 3392, 3398, 3409, 3418, 3423, 3427, 3436, 3445, 3453, 3459, 3463, 3472, 3467, 3466, 3478, 3472, 3475, 3469, 3478, 3472, 3485, 3488, 3490, 3482, 3486, 3491, 3498, 3503, 3509, 3512, 3505, 3518, 3520, 3528, 3530, 3535, 3534, 3532, 3534, 3526, 3533, 3534, 3537, 3544, 3550, 3544, 3551, 3556, 3559, 3561, 3557, 3554, 3565, 3563, 3562, 3563, 3570, 3578, 3585, 3591, 3591, 3582, 3584, 3596, 3593, 3600, 3595, 3600, 3595, 3609, 3609, 3614, 3607, 3611, 3617, 3623, 3626, 3632, 3637, 3639, 3633, 3639, 3633, 3634, 3631, 3637, 3640, 3636, 3635, 3635, 3640, 3648, 3644, 3652, 3647, 3643, 3649, 3646, 3644, 3658, 3649, 3662, 3662, 3659, 3660, 3663, 3672, 3669, 3677, 3679, 3685, 3693, 3689, 3690, 3693, 3700, 3692, 3691, 3697, 3697, 3697, 3691, 3707, 3700, 3707, 3709, 3700, 3706, 3703, 3716, 3720, 3729, 3722, 3730, 3735, 3732, 3744, 3750, 3748, 3748, 3753, 3762, 3753, 3766, 3763, 3772, 3773, 3765, 3769, 3769, 3767, 3776, 3774, 3770, 3785, 3776, 3787, 3792, 3799, 3790, 3794, 3808, 3816, 3817, 3823, 3823, 3815, 3831, 3836, 3833, 3842, 3833, 3851, 3843, 3856, 3861, 3864, 3855, 3862, 3870, 3875, 3877, 3883, 3889, 3891, 3885, 3882, 3897, 3901, 3893, 3901, 3904, 3896, 3911, 3904, 3904, 3912, 3908, 3916, 3919, 3910, 3914, 3925, 3917, 3916, 3917, 3926, 3932, 3940, 3934, 3932, 3940, 3944, 3952, 3950, 3959, 3967, 3968, 3970, 3975, 3973, 3982, 3990, 3981, 3983, 3985, 3992, 3986, 3990, 3988, 3987, 3993, 3989, 3998, 4004, 4012, 4006, 4005, 4016, 4008, 4023, 4017, 4023, 4022, 4018, 4019, 4026, 4029, 4029, 4026, 4025, 4022, 4027, 4024, 4020, 4030, 4022, 4039, 4036, 4044, 4049, 4040, 4054, 4051, 4054, 4056, 4063, 4058, 4065, 4067, 4058, 4061, 4061, 4064, 4058, 4063, 4058, 4067, 4063, 4059, 4074, 4082, 4076, 4089, 4085, 4095, 4101, 4093, 4108, 4104, 4102, 4103, 4116, 4109, 4119, 4119, 4112, 4114, 4116, 4128, 4124, 4136, 4129, 4127, 4138, 4131, 4132, 4144, 4138, 4141, 4147, 4149, 4141, 4152, 4152, 4160, 4168, 4169, 4165, 4165, 4174, 4171, 4174, 4169, 4170, 4177, 4184, 4176, 4183, 4175, 4182, 4185, 4176, 4194, 4187, 4186, 4194, 4197, 4193, 4202, 4198, 4204, 4204, 4212, 4212, 4210, 4219, 4228, 4221, 4231, 4237, 4232, 4243, 4252, 4250, 4258, 4260, 4266, 4258, 4267, 4263, 4272, 4278, 4281, 4277, 4276, 4275, 4289, 4295, 4286, 4290, 4287, 4287, 4292, 4296, 4305, 4313, 4317, 4315, 4311, 4317, 4316, 4326, 4333, 4324, 4332, 4336, 4344, 4353, 4360, 4354, 4367, 4376, 4378, 4381, 4376, 4387, 4391, 4397, 4406, 4413, 4409, 4420, 4418, 4414, 4417, 4424, 4421, 4427, 4433, 4441, 4447, 4454, 4454, 4460, 4461, 4460, 4454, 4459, 4463, 4467, 4474, 4483, 4474, 4484, 4480, 4481, 4488, 4494, 4498, 4502, 4505, 4502, 4501, 4501, 4508, 4515, 4512, 4513, 4520, 4523, 4523, 4521, 4514, 4526, 4531, 4528, 4528, 4522, 4532, 4526, 4537, 4541, 4534, 4547, 4539, 4549, 4541, 4554, 4556, 4554, 4559, 4557, 4554, 4556, 4565, 4570, 4569, 4577, 4573, 4583, 4577, 4574, 4576, 4591, 4598, 4590, 4599, 4600, 4596, 4609, 4607, 4618, 4616, 4612, 4609, 4627, 4626, 4630, 4629, 4627, 4625, 4622, 4622, 4625, 4637, 4646, 4638, 4637, 4651, 4643, 4648, 4657, 4650, 4661, 4670, 4668, 4665, 4662, 4674, 4666, 4670, 4668, 4681, 4675, 4683, 4689, 4693, 4696, 4687, 4697, 4697, 4697, 4695, 4694, 4704, 4711, 4704, 4715, 4719, 4721, 4719, 4717, 4712, 4728, 4737, 4734, 4743, 4740, 4743, 4735, 4745]
maxLongB: [
2, 3, 3, 3, 11, 11, 13, 18, 18, 27, 27, 27, 27, 29, 29, 32, 32, 32, 32, 35, 35, 35, 35, 35, 35, 35, 35, 35, 42, 49, 49, 49, 55, 58, 58, 58, 58, 58, 62, 63, 63, 63, 63, 63, 63, 68, 68, 70, 70, 70, 70, 70, 73, 76, 83, 83, 85, 91, 91, 91, 92, 92, 92, 93, 95, 99, 102, 109, 109, 117, 117, 117, 117, 117, 117, 122, 126, 129, 129, 129, 129, 137, 140, 140, 148, 157, 157, 157, 161, 169, 169, 173, 173, 173, 176, 185, 185, 188, 195, 199, 199, 200, 205, 205, 205, 212, 212, 216, 216, 216, 224, 224, 233, 239, 248, 248, 248, 255, 255, 255, 258, 259, 259, 259, 265, 265, 265, 265, 265, 268, 268, 268, 270, 270, 274, 274, 276, 276, 283, 292, 292, 295, 295, 296, 304, 304, 313, 313, 313, 313, 313, 317, 322, 322, 322, 322, 327, 327, 331, 331, 340, 340, 340, 340, 340, 345, 345, 345, 353, 353, 353, 353, 354, 354, 361, 362, 362, 362, 362, 367, 370, 376, 376, 377, 381, 383, 383, 387, 396, 400, 403, 403, 403, 403, 403, 403, 408, 408, 408, 408, 408, 408, 411, 411, 416, 423, 432, 432, 432, 432, 432, 440, 445, 453, 453, 460, 468, 469, 469, 477, 477, 477, 486, 491, 491, 491, 491, 491, 494, 497, 505, 505, 505, 512, 512, 521, 528, 531, 538, 538, 538, 546, 546, 546, 546, 549, 554, 554, 554, 561, 569, 569, 578, 578, 587, 587, 595, 595, 595, 595, 595, 595, 595, 595, 596, 605, 613, 613, 613, 613, 613, 613, 621, 626, 626, 626, 626, 633, 636, 636, 636, 644, 649, 652, 654, 662, 665, 667, 675, 679, 679, 680, 681, 681, 681, 681, 683, 683, 692, 692, 692, 692, 697, 698, 699, 699, 701, 701, 701, 703, 703, 703, 703, 703, 703, 709, 714, 714, 714, 719, 728, 730, 730, 730, 738, 738, 744, 744, 744, 744, 744, 744, 749, 750, 755, 755, 755, 761, 769, 774, 774, 779, 779, 779, 779, 779, 788, 788, 788, 788, 788, 790, 793, 793, 801, 801, 806, 806, 806, 806, 807, 807, 814, 814, 814, 814, 820, 823, 828, 836, 843, 843, 845, 846, 846, 854, 854, 854, 854, 854, 862, 867, 867, 867, 875, 875, 876, 880, 880, 883, 883, 883, 883, 883, 883, 890, 890, 890, 890, 890, 895, 895, 895, 895, 895, 896, 896, 901, 903, 903, 911, 911, 911, 913, 913, 915, 915, 915, 915, 915, 915, 922, 922, 924, 924, 928, 931, 931, 931, 935, 943, 943, 943, 943, 944, 944, 944, 944, 947, 955, 963, 972, 979, 979, 979, 979, 981, 988, 988, 988, 988, 988, 988, 996, 996, 996, 999, 1007, 1015, 1015, 1015, 1022, 1022, 1022, 1023, 1028, 1028, 1032, 1032, 1032, 1041, 1049, 1049, 1055, 1055, 1055, 1056, 1058, 1058, 1058, 1058, 1058, 1058, 1058, 1058, 1059, 1059, 1066, 1066, 1066, 1074, 1075, 1075, 1075, 1075, 1075, 1075, 1078, 1078, 1078, 1078, 1085, 1085, 1087, 1096, 1096, 1100, 1100, 1104, 1104, 1104, 1109, 1109, 1113, 1114, 1114, 1114, 1123, 1123, 1125, 1127, 1127, 1132, 1132, 1132, 1132, 1132, 1132, 1132, 1135, 1135, 1135, 1135, 1135, 1139, 1143, 1151, 1159, 1159, 1159, 1166, 1167, 1174, 1179, 1181, 1181, 1181, 1185, 1186, 1186, 1189, 1189, 1189, 1196, 1202, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1206, 1213, 1213, 1217, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1224, 1226, 1233, 1233, 1235, 1242, 1242, 1248, 1254, 1254, 1262, 1262, 1266, 1273, 1273, 1273, 1273, 1276, 1280, 1281, 1281, 1281, 1281, 1287, 1287, 1287, 1287, 1290, 1290, 1293, 1293, 1293, 1293, 1297, 1304, 1304, 1310, 1310, 1318, 1327, 1327, 1327, 1327, 1329, 1329, 1329, 1333, 1339, 1339, 1339, 1348, 1348, 1348, 1353, 1353, 1353, 1353, 1353, 1360, 1362, 1362, 1362, 1364, 1364, 1364, 1373, 1373, 1374, 1383, 1383, 1383, 1386, 1386, 1394, 1395, 1396, 1402, 1410, 1412, 1420, 1420, 1420, 1426, 1434, 1434, 1442, 1450, 1450, 1450, 1458, 1458, 1465, 1465, 1467, 1467, 1467, 1467, 1471, 1471, 1472, 1481, 1481, 1486, 1492, 1498, 1499, 1506, 1506, 1506, 1514, 1514, 1515, 1515, 1516, 1523, 1523, 1530, 1530, 1530, 1534, 1542, 1542, 1542, 1542, 1548, 1548, 1550, 1558, 1558, 1558, 1558, 1558, 1561, 1561, 1561, 1561, 1566, 1566, 1566, 1572, 1572, 1572, 1572, 1572, 1580, 1580, 1580, 1580, 1580, 1580, 1581, 1581, 1588, 1588, 1588, 1589, 1589, 1593, 1594, 1594, 1601, 1601, 1601, 1601, 1601, 1601, 1601, 1601, 1601, 1603, 1603, 1610, 1613, 1613, 1616, 1616, 1625, 1625, 1629, 1629, 1632, 1632, 1632, 1639, 1639, 1639, 1646, 1646, 1652, 1652, 1652, 1659, 1659, 1663, 1665, 1665, 1666, 1674, 1677, 1683, 1692, 1692, 1699, 1699, 1699, 1699, 1699, 1699, 1699, 1699, 1703, 1711, 1718, 1721, 1721, 1721, 1725, 1727, 1732, 1732, 1738, 1738, 1738, 1738, 1738, 1744, 1749, 1749, 1749, 1749, 1758, 1758, 1758, 1758, 1758, 1758, 1759, 1767, 1767, 1769, 1769, 1773, 1778, 1786, 1786, 1786, 1786, 1786, 1786, 1786, 1788, 1788, 1788, 1791, 1791, 1800, 1803, 1809, 1814, 1822, 1824, 1832, 1837, 1846, 1851, 1851, 1851, 1852, 1859, 1859, 1859, 1859, 1864, 1864, 1868, 1868, 1868, 1876, 1885, 1894, 1902, 1902, 1910, 1910, 1910, 1911, 1911, 1912, 1918, 1919, 1922, 1922, 1922, 1930, 1930, 1930, 1938, 1945, 1945, 1945, 1945, 1952, 1960, 1960, 1968, 1977, 1977, 1977, 1977, 1979, 1981, 1981, 1981, 1986, 1986, 1986, 1986, 1986, 1995, 1995, 1996, 1996, 2004, 2004, 2010, 2010, 2010, 2010, 2010, 2018, 2018, 2018, 2018, 2025, 2026, 2026, 2035, 2035, 2035, 2035, 2037, 2037, 2045, 2045, 2048, 2055, 2055, 2058, 2058, 2061, 2063, 2063, 2063, 2067, 2067, 2067, 2067, 2076, 2079, 2083, 2085, 2091, 2092, 2095, 2099, 2099, 2099, 2106, 2106, 2106, 2106, 2106, 2113, 2113, 2113, 2118, 2126, 2133, 2136, 2142, 2148, 2148, 2148, 2151, 2151, 2151, 2154, 2154, 2154, 2157, 2157, 2163, 2168, 2168, 2177, 2178, 2178, 2179, 2186, 2186, 2190, 2192, 2199, 2207, 2210, 2210, 2214, 2214, 2221, 2221, 2221, 2221, 2221, 2221, 2221, 2221, 2224, 2224, 2230, 2239, 2239, 2239, 2239, 2239, 2245, 2245, 2245, 2245, 2250, 2251, 2254, 2254, 2254, 2254, 2254, 2254, 2261, 2261, 2261, 2261, 2261, 2267, 2267, 2267, 2267, 2267, 2267, 2274, 2282, 2282, 2290, 2290, 2295, 2295, 2300, 2300, 2300, 2309, 2309, 2309, 2316, 2316, 2316, 2317, 2317, 2317, 2321, 2322, 2322, 2322, 2324, 2324, 2328, 2328, 2337, 2337, 2337, 2341, 2348, 2348, 2348, 2353, 2353, 2354, 2354, 2354, 2356, 2360, 2363, 2363, 2363, 2363, 2363, 2363, 2372, 2372, 2372, 2372, 2372, 2377, 2385, 2392, 2400, 2400, 2401, 2401, 2401, 2401, 2401, 2410, 2410, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2424, 2424, 2433, 2433, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2449, 2449, 2449, 2449, 2454, 2458, 2458, 2458, 2465, 2465, 2465, 2465, 2471, 2471, 2476, 2476, 2483, 2483, 2491, 2491, 2491, 2493, 2500, 2502, 2502, 2508, 2510, 2516, 2516, 2524, 2524, 2526, 2533, 2533, 2533, 2533, 2533, 2533, 2542, 2546, 2546, 2546, 2546, 2546, 2549, 2551, 2557, 2557, 2557, 2560, 2560, 2561, 2561, 2566, 2566, 2566, 2566, 2575, 2582, 2585, 2585, 2588, 2592, 2592, 2593, 2593, 2596, 2601, 2601, 2601, 2606, 2609, 2609, 2612, 2612, 2618, 2622, 2631, 2631, 2635, 2640, 2642, 2647, 2647, 2647, 2653, 2657, 2657, 2666, 2666, 2675, 2682, 2686, 2686, 2686, 2687, 2687, 2696, 2699, 2699, 2699, 2699, 2699, 2703, 2703, 2703, 2705, 2713, 2721, 2721, 2723, 2723, 2723, 2723, 2723, 2726, 2726, 2726, 2729, 2731, 2731, 2731, 2731, 2731, 2731, 2740, 2740, 2740, 2740, 2745, 2753, 2753, 2758, 2765, 2769, 2769, 2775, 2784, 2784, 2784, 2792, 2793, 2797, 2801, 2806, 2806, 2811, 2811, 2817, 2817, 2817, 2817, 2822, 2822, 2822, 2829, 2829, 2833, 2842, 2842, 2844, 2851, 2857, 2860, 2860, 2860, 2861, 2861, 2866, 2869, 2869, 2869, 2872, 2875, 2883, 2883, 2883, 2889, 2896, 2896, 2896, 2896, 2898, 2898, 2905, 2910, 2910, 2910, 2910, 2915, 2915, 2918, 2919, 2919, 2921, 2921, 2921, 2927, 2936, 2936, 2940, 2940, 2943, 2947, 2947, 2956, 2956, 2964, 2972, 2972, 2973, 2973, 2980, 2981, 2981, 2981, 2987, 2987, 2987, 2987, 2987, 2996, 3002, 3002, 3010, 3015, 3015, 3015, 3015, 3021, 3021, 3022, 3024, 3024, 3028, 3033, 3033, 3040, 3040, 3040, 3045, 3050, 3051, 3051, 3059, 3062, 3062, 3067, 3076, 3083, 3087, 3087, 3096, 3096, 3096, 3098, 3099, 3100, 3100, 3102, 3102, 3106, 3107, 3109, 3116, 3116, 3116, 3116, 3116, 3119, 3119, 3119, 3123, 3123, 3123, 3129, 3137, 3143, 3152, 3152, 3159, 3167, 3167, 3167, 3167, 3167, 3167, 3167, 3167, 3171, 3171, 3177, 3177, 3179, 3186, 3186, 3186, 3186, 3187, 3187, 3188, 3188, 3188, 3195, 3195, 3204, 3213, 3219, 3219, 3223, 3229, 3231, 3231, 3231, 3234, 3234, 3236, 3242, 3243, 3243, 3244, 3249, 3249, 3249, 3255, 3255, 3257, 3265, 3265, 3271, 3280, 3284, 3290, 3296, 3296, 3296, 3296, 3297, 3306, 3308, 3308, 3308, 3308, 3308, 3308, 3314, 3318, 3318, 3325, 3325, 3332, 3337, 3342, 3342, 3342, 3342, 3346, 3352, 3352, 3352, 3352, 3352, 3358, 3358, 3363, 3363, 3363, 3363, 3363, 3368, 3368, 3376, 3376, 3376, 3376, 3376, 3382, 3382, 3386, 3386, 3388, 3388, 3388, 3390, 3390, 3390, 3390, 3390, 3390, 3390, 3390, 3399, 3401, 3401, 3401, 3409, 3418, 3423, 3427, 3436, 3445, 3453, 3459, 3463, 3472, 3472, 3472, 3478, 3478, 3478, 3478, 3478, 3478, 3485, 3488, 3490, 3490, 3490, 3491, 3498, 3503, 3509, 3512, 3512, 3518, 3520, 3528, 3530, 3535, 3535, 3535, 3535, 3535, 3535, 3535, 3537, 3544, 3550, 3550, 3551, 3556, 3559, 3561, 3561, 3561, 3565, 3565, 3565, 3565, 3570, 3578, 3585, 3591, 3591, 3591, 3591, 3596, 3596, 3600, 3600, 3600, 3600, 3609, 3609, 3614, 3614, 3614, 3617, 3623, 3626, 3632, 3637, 3639, 3639, 3639, 3639, 3639, 3639, 3639, 3640, 3640, 3640, 3640, 3640, 3648, 3648, 3652, 3652, 3652, 3652, 3652, 3652, 3658, 3658, 3662, 3662, 3662, 3662, 3663, 3672, 3672, 3677, 3679, 3685, 3693, 3693, 3693, 3693, 3700, 3700, 3700, 3700, 3700, 3700, 3700, 3707, 3707, 3707, 3709, 3709, 3709, 3709, 3716, 3720, 3729, 3729, 3730, 3735, 3735, 3744, 3750, 3750, 3750, 3753, 3762, 3762, 3766, 3766, 3772, 3773, 3773, 3773, 3773, 3773, 3776, 3776, 3776, 3785, 3785, 3787, 3792, 3799, 3799, 3799, 3808, 3816, 3817, 3823, 3823, 3823, 3831, 3836, 3836, 3842, 3842, 3851, 3851, 3856, 3861, 3864, 3864, 3864, 3870, 3875, 3877, 3883, 3889, 3891, 3891, 3891, 3897, 3901, 3901, 3901, 3904, 3904, 3911, 3911, 3911, 3912, 3912, 3916, 3919, 3919, 3919, 3925, 3925, 3925, 3925, 3926, 3932, 3940, 3940, 3940, 3940, 3944, 3952, 3952, 3959, 3967, 3968, 3970, 3975, 3975, 3982, 3990, 3990, 3990, 3990, 3992, 3992, 3992, 3992, 3992, 3993, 3993, 3998, 4004, 4012, 4012, 4012, 4016, 4016, 4023, 4023, 4023, 4023, 4023, 4023, 4026, 4029, 4029, 4029, 4029, 4029, 4029, 4029, 4029, 4030, 4030, 4039, 4039, 4044, 4049, 4049, 4054, 4054, 4054, 4056, 4063, 4063, 4065, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4074, 4082, 4082, 4089, 4089, 4095, 4101, 4101, 4108, 4108, 4108, 4108, 4116, 4116, 4119, 4119, 4119, 4119, 4119, 4128, 4128, 4136, 4136, 4136, 4138, 4138, 4138, 4144, 4144, 4144, 4147, 4149, 4149, 4152, 4152, 4160, 4168, 4169, 4169, 4169, 4174, 4174, 4174, 4174, 4174, 4177, 4184, 4184, 4184, 4184, 4184, 4185, 4185, 4194, 4194, 4194, 4194, 4197, 4197, 4202, 4202, 4204, 4204, 4212, 4212, 4212, 4219, 4228, 4228, 4231, 4237, 4237, 4243, 4252, 4252, 4258, 4260, 4266, 4266, 4267, 4267, 4272, 4278, 4281, 4281, 4281, 4281, 4289, 4295, 4295, 4295, 4295, 4295, 4295, 4296, 4305, 4313, 4317, 4317, 4317, 4317, 4317, 4326, 4333, 4333, 4333, 4336, 4344, 4353, 4360, 4360, 4367, 4376, 4378, 4381, 4381, 4387, 4391, 4397, 4406, 4413, 4413, 4420, 4420, 4420, 4420, 4424, 4424, 4427, 4433, 4441, 4447, 4454, 4454, 4460, 4461, 4461, 4461, 4461, 4463, 4467, 4474, 4483, 4483, 4484, 4484, 4484, 4488, 4494, 4498, 4502, 4505, 4505, 4505, 4505, 4508, 4515, 4515, 4515, 4520, 4523, 4523, 4523, 4523, 4526, 4531, 4531, 4531, 4531, 4532, 4532, 4537, 4541, 4541, 4547, 4547, 4549, 4549, 4554, 4556, 4556, 4559, 4559, 4559, 4559, 4565, 4570, 4570, 4577, 4577, 4583, 4583, 4583, 4583, 4591, 4598, 4598, 4599, 4600, 4600, 4609, 4609, 4618, 4618, 4618, 4618, 4627, 4627, 4630, 4630, 4630, 4630, 4630, 4630, 4630, 4637, 4646, 4646, 4646, 4651, 4651, 4651, 4657, 4657, 4661, 4670, 4670, 4670, 4670, 4674, 4674, 4674, 4674, 4681, 4681, 4683, 4689, 4693, 4696, 4696, 4697, 4697, 4697, 4697, 4697, 4704, 4711, 4711, 4715, 4719, 4721, 4721, 4721, 4721, 4728, 4737, 4737, 4743, 4743, 4743, 4743]
1325.511 ops/ms
# Warmup Iteration   2: 1333.368 ops/ms
# Warmup Iteration   3: 1429.237 ops/ms
Iteration   1: 1443.217 ops/ms
Iteration   2: 1366.159 ops/ms
Iteration   3: 1353.547 ops/ms
Iteration   4: 1389.852 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:     1185704
  invocation_counter:               1185704
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(584089) displacement(56)
                                    not taken(601104)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(601104) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
#+end_src
*** print method data, branch always, 100
#+begin_src bash
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:+UnlockDiagnosticVMOptions -XX:+PrintMethodData -XX:-UseSuperWord -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 0.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1:
maxLongA: [
8, 8, 17, 19, 24, 26, 35, 40, 49, 56, 60, 62, 66, 74, 74, 79, 86, 86, 87, 89, 93, 96, 102, 104, 105, 107, 109, 111, 115, 121, 130, 135, 143, 149, 157, 160, 166, 174, 183, 183, 183, 188, 196, 197, 199, 203, 211, 211, 216, 222, 231, 232, 240, 244, 252, 260, 266, 270, 279, 281, 282, 290, 298, 307, 308, 317, 322, 325, 327, 331, 337, 345, 351, 352, 353, 356, 362, 367, 373, 382, 390, 390, 397, 405, 408, 412, 418, 421, 425, 430, 438, 441, 448, 456, 458, 466, 470, 472, 475, 475, 476, 481, 482, 487, 491, 495, 496, 498, 506, 509, 516, 516, 524, 531, 533, 534, 540, 545, 551, 554, 554, 559, 560, 563, 569, 577, 584, 588, 591, 600, 601, 607, 615, 617, 623, 627, 630, 637, 638, 643, 649, 654, 658, 660, 662, 663, 670, 672, 676, 679, 688, 694, 702, 703, 707, 711, 717, 718, 720, 729, 729, 731, 740, 745, 745, 745, 747, 747, 754, 759, 767, 767, 772, 774, 775, 783, 784, 789, 789, 790, 794, 800, 801, 805, 807, 807, 816, 819, 827, 832, 840, 842, 844, 850, 858, 862, 862, 863, 865, 871, 879, 883, 889, 894, 894, 900, 905, 913, 918, 919, 927, 932, 939, 940, 948, 956, 961, 961, 961, 963, 970, 977, 977, 980, 983, 984, 987, 993, 1000, 1009, 1013, 1020, 1026, 1028, 1031, 1032, 1040, 1046, 1054, 1061, 1066, 1069, 1077, 1082, 1091, 1096, 1099, 1106, 1110, 1112, 1121, 1124, 1131, 1135, 1137, 1144, 1147, 1149, 1158, 1166, 1173, 1180, 1188, 1189, 1190, 1196, 1197, 1204, 1205, 1205, 1207, 1210, 1213, 1214, 1220, 1227, 1232, 1238, 1243, 1243, 1252, 1258, 1258, 1260, 1268, 1274, 1278, 1283, 1289, 1293, 1294, 1297, 1304, 1310, 1319, 1324, 1326, 1328, 1330, 1338, 1347, 1350, 1351, 1359, 1367, 1371, 1371, 1376, 1376, 1382, 1390, 1392, 1392, 1395, 1399, 1402, 1403, 1411, 1414, 1419, 1423, 1432, 1433, 1439, 1447, 1450, 1456, 1464, 1473, 1480, 1481, 1488, 1492, 1497, 1500, 1502, 1511, 1515, 1523, 1523, 1524, 1527, 1529, 1530, 1533, 1538, 1540, 1543, 1552, 1557, 1566, 1570, 1570, 1578, 1586, 1593, 1594, 1595, 1595, 1602, 1606, 1613, 1617, 1626, 1630, 1636, 1636, 1643, 1649, 1657, 1659, 1662, 1664, 1666, 1667, 1668, 1668, 1674, 1680, 1680, 1682, 1690, 1692, 1692, 1700, 1707, 1708, 1713, 1716, 1716, 1716, 1724, 1725, 1725, 1734, 1739, 1742, 1751, 1759, 1768, 1768, 1769, 1775, 1779, 1787, 1788, 1790, 1793, 1802, 1807, 1813, 1821, 1829, 1831, 1839, 1844, 1844, 1845, 1848, 1849, 1856, 1860, 1869, 1878, 1882, 1889, 1897, 1902, 1906, 1913, 1914, 1918, 1921, 1928, 1935, 1936, 1937, 1940, 1948, 1948, 1950, 1952, 1958, 1961, 1968, 1968, 1975, 1979, 1982, 1985, 1989, 1997, 2003, 2003, 2010, 2010, 2013, 2017, 2020, 2023, 2030, 2038, 2046, 2050, 2052, 2052, 2058, 2059, 2064, 2070, 2077, 2078, 2084, 2084, 2087, 2096, 2097, 2105, 2109, 2109, 2113, 2119, 2127, 2135, 2141, 2148, 2148, 2155, 2162, 2162, 2165, 2168, 2169, 2169, 2177, 2185, 2186, 2188, 2192, 2199, 2208, 2214, 2217, 2226, 2228, 2231, 2240, 2242, 2248, 2256, 2263, 2264, 2272, 2278, 2279, 2286, 2287, 2293, 2299, 2300, 2305, 2311, 2318, 2326, 2329, 2331, 2334, 2338, 2341, 2345, 2347, 2350, 2353, 2354, 2363, 2364, 2365, 2369, 2374, 2377, 2386, 2389, 2394, 2397, 2403, 2407, 2409, 2416, 2424, 2427, 2433, 2433, 2439, 2445, 2452, 2453, 2459, 2465, 2473, 2479, 2488, 2493, 2500, 2507, 2511, 2520, 2522, 2525, 2527, 2532, 2540, 2546, 2549, 2555, 2558, 2559, 2561, 2568, 2573, 2580, 2583, 2586, 2593, 2598, 2607, 2616, 2619, 2626, 2630, 2632, 2633, 2641, 2641, 2649, 2649, 2651, 2660, 2660, 2667, 2674, 2682, 2682, 2685, 2691, 2698, 2700, 2703, 2707, 2713, 2718, 2726, 2727, 2730, 2734, 2734, 2740, 2747, 2756, 2764, 2764, 2765, 2771, 2780, 2788, 2797, 2804, 2806, 2806, 2813, 2821, 2823, 2825, 2829, 2830, 2830, 2838, 2843, 2848, 2855, 2863, 2871, 2877, 2885, 2889, 2897, 2904, 2913, 2922, 2928, 2930, 2938, 2947, 2956, 2964, 2968, 2976, 2979, 2985, 2993, 2997, 3001, 3010, 3013, 3021, 3024, 3028, 3029, 3031, 3031, 3039, 3046, 3047, 3047, 3054, 3061, 3068, 3076, 3080, 3080, 3081, 3084, 3084, 3085, 3085, 3089, 3096, 3101, 3110, 3114, 3117, 3122, 3129, 3137, 3138, 3139, 3144, 3149, 3157, 3162, 3167, 3175, 3175, 3182, 3189, 3190, 3193, 3201, 3207, 3211, 3216, 3219, 3219, 3223, 3223, 3223, 3224, 3233, 3242, 3243, 3247, 3247, 3252, 3252, 3260, 3264, 3270, 3271, 3278, 3283, 3284, 3292, 3298, 3300, 3301, 3301, 3306, 3306, 3315, 3323, 3326, 3326, 3327, 3333, 3340, 3347, 3351, 3356, 3362, 3368, 3374, 3374, 3380, 3388, 3396, 3397, 3401, 3406, 3406, 3406, 3413, 3417, 3422, 3425, 3425, 3425, 3431, 3431, 3432, 3434, 3443, 3445, 3453, 3461, 3462, 3466, 3473, 3476, 3485, 3491, 3494, 3501, 3510, 3514, 3514, 3517, 3519, 3519, 3519, 3521, 3529, 3530, 3533, 3542, 3545, 3552, 3561, 3568, 3573, 3574, 3579, 3585, 3589, 3589, 3596, 3596, 3604, 3611, 3620, 3625, 3627, 3627, 3629, 3631, 3633, 3641, 3650, 3656, 3656, 3657, 3664, 3669, 3669, 3678, 3682, 3684, 3686, 3687, 3691, 3691, 3700, 3702, 3709, 3711, 3719, 3722, 3730, 3733, 3733, 3742, 3746, 3748, 3754, 3759, 3760, 3760, 3765, 3772, 3779, 3779, 3785, 3791, 3798, 3805, 3814, 3821, 3825, 3830, 3831, 3837, 3839, 3847, 3851, 3852, 3859, 3863, 3864, 3872, 3881, 3885, 3893, 3899, 3902, 3911, 3916, 3924, 3929, 3936, 3943, 3943, 3946, 3948, 3950, 3957, 3966, 3967, 3970, 3970, 3971, 3978, 3982, 3986, 3990, 3997, 4003, 4007, 4016, 4021, 4028, 4031, 4033, 4038, 4043, 4049, 4053, 4056, 4064, 4067, 4069, 4071, 4075, 4076, 4080, 4084, 4087, 4087, 4093, 4093, 4099, 4102, 4111, 4118, 4123, 4128, 4129, 4129, 4135, 4135, 4136, 4136, 4141, 4146, 4155, 4163, 4166, 4174, 4179, 4183, 4190, 4194, 4197, 4206, 4207, 4211, 4211, 4218, 4225, 4226, 4229, 4230, 4235, 4237, 4240, 4249, 4249, 4249, 4257, 4260, 4268, 4275, 4278, 4282, 4285, 4291, 4292, 4295, 4299, 4304, 4309, 4318, 4318, 4326, 4331, 4331, 4334, 4339, 4341, 4350, 4355, 4355, 4357, 4366, 4366, 4370, 4374, 4382, 4383, 4383, 4384, 4389, 4393, 4399, 4406, 4407, 4407, 4414, 4418, 4422, 4431, 4436, 4441, 4449, 4458, 4458, 4458, 4461, 4462, 4468, 4472, 4476, 4485, 4490, 4491, 4491, 4500, 4508, 4516, 4516, 4522, 4530, 4530, 4534, 4542, 4550, 4550, 4553, 4562, 4569, 4574, 4581, 4584, 4592, 4600, 4608, 4610, 4610, 4611, 4614, 4622, 4631, 4639, 4641, 4644, 4646, 4653, 4662, 4668, 4677, 4684, 4684, 4686, 4686, 4690, 4696, 4696, 4696, 4702, 4703, 4709, 4711, 4712, 4713, 4719, 4722, 4725, 4734, 4734, 4739, 4740, 4740, 4744, 4751, 4759, 4767, 4770, 4776, 4784, 4790, 4793, 4799, 4802, 4811, 4816, 4823, 4826, 4827, 4828, 4829, 4831, 4833, 4842, 4849, 4854, 4855, 4862, 4864, 4867, 4874, 4878, 4884, 4885, 4885, 4889, 4894, 4899, 4903, 4904, 4905, 4907, 4914, 4921, 4924, 4931, 4934, 4941, 4950, 4959, 4960, 4961, 4968, 4976, 4984, 4984, 4992, 4994, 4996, 4998, 4999, 5008, 5014, 5016, 5016, 5020, 5024, 5031, 5039, 5041, 5042, 5043, 5048, 5052, 5053, 5055, 5058, 5058, 5065, 5070, 5070, 5072, 5073, 5075, 5080, 5085, 5091, 5099, 5100, 5104, 5107, 5107, 5108, 5110, 5118, 5125, 5125, 5132, 5141, 5148, 5157, 5163, 5164, 5168, 5174, 5183, 5186, 5191, 5191, 5192, 5201, 5208, 5211, 5219, 5225, 5225, 5228, 5230, 5235, 5238, 5240, 5240, 5246, 5254, 5262, 5267, 5269, 5275, 5279, 5283, 5290, 5290, 5298, 5304, 5306, 5312, 5313, 5319, 5328, 5333, 5338, 5344, 5347, 5350, 5358, 5359, 5361, 5369, 5372, 5379, 5382, 5385, 5385, 5385, 5385, 5389, 5396, 5405, 5407, 5409, 5409, 5417, 5421, 5429, 5435, 5437, 5442, 5443, 5449, 5453, 5458, 5467, 5468, 5473, 5477, 5484, 5487, 5492, 5498, 5507, 5512, 5515, 5524, 5524, 5529, 5533, 5537, 5546, 5552, 5553, 5555, 5556, 5563, 5568, 5571, 5572, 5577, 5577, 5583, 5592, 5598, 5603, 5603, 5611, 5619, 5627, 5628, 5628, 5637, 5641, 5645, 5646, 5649, 5654, 5654, 5658, 5658, 5659, 5666, 5667, 5671, 5672, 5681, 5689, 5696, 5703, 5708, 5708, 5708, 5714, 5715, 5722, 5725, 5727, 5734, 5741, 5746, 5755, 5757, 5757, 5762, 5763, 5766, 5773, 5775, 5783, 5788, 5792, 5793, 5802, 5808, 5813, 5813, 5814, 5815, 5817, 5822, 5828, 5837, 5842, 5846, 5855, 5862, 5869, 5871, 5874, 5878, 5880, 5883, 5888, 5894, 5903, 5908, 5917, 5923, 5925, 5932, 5936, 5938, 5944, 5944, 5945, 5949, 5957, 5962, 5962, 5967, 5974, 5976, 5985, 5992, 5999, 6000, 6000, 6006, 6013, 6017, 6025, 6033, 6040, 6043, 6046, 6047, 6050, 6058, 6059, 6063, 6070, 6070, 6078, 6080, 6082, 6086, 6090, 6094, 6096, 6096, 6102, 6102, 6105, 6105, 6111, 6119, 6120, 6128, 6134, 6136, 6139, 6143, 6144, 6148, 6151, 6153, 6159, 6167, 6170, 6174, 6178, 6178, 6178, 6185, 6186, 6192, 6193, 6198, 6199, 6203, 6204, 6213, 6219, 6223, 6224, 6233, 6238, 6238, 6242, 6243, 6244, 6249, 6255, 6263, 6268, 6275, 6276, 6281, 6289, 6294, 6298, 6302, 6311, 6314, 6322, 6331, 6340, 6347, 6351, 6354, 6357, 6358, 6367, 6368, 6373, 6380, 6381, 6390, 6391, 6398, 6398, 6406, 6409, 6412, 6412, 6417, 6420, 6429, 6432, 6437, 6440, 6447, 6456, 6456, 6463, 6464, 6468, 6477, 6483, 6492, 6492, 6498, 6502, 6505, 6514, 6519, 6522, 6522, 6522, 6531, 6536, 6543, 6546, 6549, 6557, 6565, 6574, 6574, 6583, 6583, 6592, 6599, 6603, 6611, 6613, 6618, 6625, 6630, 6639, 6645, 6653, 6661, 6669, 6675, 6679, 6685, 6692, 6694, 6700, 6702, 6704, 6709, 6718, 6726, 6729, 6737, 6739, 6745, 6749, 6749, 6753, 6755, 6755, 6762, 6763, 6763, 6766, 6775, 6782, 6786, 6794, 6802, 6804, 6810, 6815, 6817, 6819, 6822, 6828, 6832, 6835, 6842, 6844, 6844, 6850, 6854, 6855, 6857, 6864, 6871, 6876, 6876, 6876, 6880, 6881, 6889, 6891, 6897, 6904, 6911, 6912, 6915, 6922, 6929, 6936, 6938, 6941, 6944, 6945, 6954, 6962, 6966, 6975, 6975, 6977, 6986, 6993, 6994, 7001, 7003, 7012, 7020, 7021, 7024, 7025, 7033, 7033, 7039, 7042, 7046, 7051, 7058, 7062, 7063, 7065, 7066, 7069, 7073, 7077, 7086, 7089, 7097, 7103, 7105, 7111, 7117, 7121, 7127, 7130, 7136, 7140, 7143, 7143, 7146, 7147, 7154, 7159, 7161, 7162, 7166, 7169, 7171, 7172, 7175, 7177, 7186, 7189, 7190, 7194, 7197, 7201, 7201, 7207, 7215, 7219, 7222, 7226, 7227, 7236, 7237, 7242, 7248, 7250, 7255, 7261, 7263, 7272, 7275, 7276, 7284, 7285, 7286, 7288, 7294, 7300, 7307, 7308, 7315, 7320, 7323, 7331, 7333, 7342, 7342, 7347, 7353, 7354, 7359, 7365, 7371, 7378, 7384, 7385, 7390, 7398, 7398, 7403, 7410, 7410, 7411, 7414, 7422, 7429, 7432, 7438, 7445, 7449, 7452, 7460, 7467, 7471, 7475, 7476, 7484, 7492, 7493, 7502, 7504, 7505, 7506, 7512, 7516, 7516, 7516, 7522, 7528, 7528, 7537, 7543, 7552, 7557, 7563, 7571, 7578, 7583, 7585, 7588, 7596, 7601, 7601, 7605, 7612, 7614, 7622, 7629, 7632, 7634, 7642, 7645, 7650, 7658, 7661, 7661, 7667, 7671, 7672, 7681, 7681, 7687, 7696, 7702, 7711, 7718, 7719, 7721, 7723, 7724, 7731, 7738, 7745, 7752, 7758, 7762, 7764, 7766, 7768, 7769, 7775, 7779, 7781, 7785, 7793, 7801, 7805, 7807, 7814, 7818, 7824, 7827, 7836, 7839, 7847, 7849, 7854, 7858, 7858, 7862, 7868, 7872, 7872, 7875, 7881, 7881, 7889, 7893, 7899, 7902, 7907, 7914, 7923, 7930, 7938, 7940, 7947, 7949, 7952, 7955, 7964, 7971, 7975, 7976, 7978, 7981, 7981, 7981, 7983, 7992, 7994, 7998, 8003, 8010, 8013, 8016, 8017, 8021, 8022, 8023, 8026, 8034, 8038, 8047, 8050, 8055, 8063, 8072, 8072, 8075, 8082, 8082, 8088, 8094, 8098, 8105, 8112, 8115, 8117, 8122, 8125, 8133, 8136, 8144, 8148, 8153, 8158, 8160, 8165, 8171, 8171, 8171, 8177, 8183, 8188, 8194, 8197, 8202, 8203, 8204, 8208, 8211, 8218, 8220, 8229, 8234, 8239, 8240, 8240, 8247, 8254, 8254, 8262, 8266, 8271, 8273, 8277, 8285, 8292, 8292, 8301, 8306, 8306, 8306, 8314, 8319, 8327, 8329, 8334, 8334, 8343, 8345, 8348, 8349, 8357, 8364, 8369, 8372, 8379, 8387, 8391, 8399, 8405, 8412, 8418, 8418, 8424, 8428, 8428, 8435, 8441, 8449, 8454, 8457, 8461, 8462, 8471, 8472, 8476, 8476, 8480, 8486, 8494, 8494, 8498, 8503, 8505, 8511, 8512, 8515, 8520, 8527, 8529, 8531, 8535, 8541, 8543, 8546, 8550, 8554, 8558, 8560, 8562, 8570, 8576, 8585, 8586, 8587, 8589, 8592, 8595, 8599, 8602, 8605, 8610, 8613, 8619, 8628, 8631, 8634, 8636, 8636, 8639, 8647, 8650, 8656, 8663, 8663, 8665, 8667, 8671, 8674, 8676, 8681, 8681, 8683, 8687, 8688, 8697, 8699, 8704, 8710, 8710, 8716, 8721, 8726, 8733, 8741, 8746, 8749, 8754, 8757, 8766, 8772, 8780, 8785, 8788, 8791, 8796, 8801, 8809, 8817, 8826, 8828, 8832, 8837, 8837, 8837, 8840, 8840, 8848, 8855, 8857, 8857, 8858, 8867, 8873, 8873, 8874, 8875, 8877, 8881, 8884, 8886, 8892, 8893, 8900, 8901, 8909, 8916, 8916, 8922, 8930, 8939, 8947, 8947, 8949, 8954, 8959, 8965, 8973, 8978, 8979, 8979, 8986, 8995, 8997, 9002]
maxLongB: [
7, 8, 8, 17, 19, 24, 26, 35, 40, 49, 56, 60, 62, 66, 74, 74, 79, 86, 86, 87, 89, 93, 96, 102, 104, 105, 107, 109, 111, 115, 121, 130, 135, 143, 149, 157, 160, 166, 174, 183, 183, 183, 188, 196, 197, 199, 203, 211, 211, 216, 222, 231, 232, 240, 244, 252, 260, 266, 270, 279, 281, 282, 290, 298, 307, 308, 317, 322, 325, 327, 331, 337, 345, 351, 352, 353, 356, 362, 367, 373, 382, 390, 390, 397, 405, 408, 412, 418, 421, 425, 430, 438, 441, 448, 456, 458, 466, 470, 472, 475, 475, 476, 481, 482, 487, 491, 495, 496, 498, 506, 509, 516, 516, 524, 531, 533, 534, 540, 545, 551, 554, 554, 559, 560, 563, 569, 577, 584, 588, 591, 600, 601, 607, 615, 617, 623, 627, 630, 637, 638, 643, 649, 654, 658, 660, 662, 663, 670, 672, 676, 679, 688, 694, 702, 703, 707, 711, 717, 718, 720, 729, 729, 731, 740, 745, 745, 745, 747, 747, 754, 759, 767, 767, 772, 774, 775, 783, 784, 789, 789, 790, 794, 800, 801, 805, 807, 807, 816, 819, 827, 832, 840, 842, 844, 850, 858, 862, 862, 863, 865, 871, 879, 883, 889, 894, 894, 900, 905, 913, 918, 919, 927, 932, 939, 940, 948, 956, 961, 961, 961, 963, 970, 977, 977, 980, 983, 984, 987, 993, 1000, 1009, 1013, 1020, 1026, 1028, 1031, 1032, 1040, 1046, 1054, 1061, 1066, 1069, 1077, 1082, 1091, 1096, 1099, 1106, 1110, 1112, 1121, 1124, 1131, 1135, 1137, 1144, 1147, 1149, 1158, 1166, 1173, 1180, 1188, 1189, 1190, 1196, 1197, 1204, 1205, 1205, 1207, 1210, 1213, 1214, 1220, 1227, 1232, 1238, 1243, 1243, 1252, 1258, 1258, 1260, 1268, 1274, 1278, 1283, 1289, 1293, 1294, 1297, 1304, 1310, 1319, 1324, 1326, 1328, 1330, 1338, 1347, 1350, 1351, 1359, 1367, 1371, 1371, 1376, 1376, 1382, 1390, 1392, 1392, 1395, 1399, 1402, 1403, 1411, 1414, 1419, 1423, 1432, 1433, 1439, 1447, 1450, 1456, 1464, 1473, 1480, 1481, 1488, 1492, 1497, 1500, 1502, 1511, 1515, 1523, 1523, 1524, 1527, 1529, 1530, 1533, 1538, 1540, 1543, 1552, 1557, 1566, 1570, 1570, 1578, 1586, 1593, 1594, 1595, 1595, 1602, 1606, 1613, 1617, 1626, 1630, 1636, 1636, 1643, 1649, 1657, 1659, 1662, 1664, 1666, 1667, 1668, 1668, 1674, 1680, 1680, 1682, 1690, 1692, 1692, 1700, 1707, 1708, 1713, 1716, 1716, 1716, 1724, 1725, 1725, 1734, 1739, 1742, 1751, 1759, 1768, 1768, 1769, 1775, 1779, 1787, 1788, 1790, 1793, 1802, 1807, 1813, 1821, 1829, 1831, 1839, 1844, 1844, 1845, 1848, 1849, 1856, 1860, 1869, 1878, 1882, 1889, 1897, 1902, 1906, 1913, 1914, 1918, 1921, 1928, 1935, 1936, 1937, 1940, 1948, 1948, 1950, 1952, 1958, 1961, 1968, 1968, 1975, 1979, 1982, 1985, 1989, 1997, 2003, 2003, 2010, 2010, 2013, 2017, 2020, 2023, 2030, 2038, 2046, 2050, 2052, 2052, 2058, 2059, 2064, 2070, 2077, 2078, 2084, 2084, 2087, 2096, 2097, 2105, 2109, 2109, 2113, 2119, 2127, 2135, 2141, 2148, 2148, 2155, 2162, 2162, 2165, 2168, 2169, 2169, 2177, 2185, 2186, 2188, 2192, 2199, 2208, 2214, 2217, 2226, 2228, 2231, 2240, 2242, 2248, 2256, 2263, 2264, 2272, 2278, 2279, 2286, 2287, 2293, 2299, 2300, 2305, 2311, 2318, 2326, 2329, 2331, 2334, 2338, 2341, 2345, 2347, 2350, 2353, 2354, 2363, 2364, 2365, 2369, 2374, 2377, 2386, 2389, 2394, 2397, 2403, 2407, 2409, 2416, 2424, 2427, 2433, 2433, 2439, 2445, 2452, 2453, 2459, 2465, 2473, 2479, 2488, 2493, 2500, 2507, 2511, 2520, 2522, 2525, 2527, 2532, 2540, 2546, 2549, 2555, 2558, 2559, 2561, 2568, 2573, 2580, 2583, 2586, 2593, 2598, 2607, 2616, 2619, 2626, 2630, 2632, 2633, 2641, 2641, 2649, 2649, 2651, 2660, 2660, 2667, 2674, 2682, 2682, 2685, 2691, 2698, 2700, 2703, 2707, 2713, 2718, 2726, 2727, 2730, 2734, 2734, 2740, 2747, 2756, 2764, 2764, 2765, 2771, 2780, 2788, 2797, 2804, 2806, 2806, 2813, 2821, 2823, 2825, 2829, 2830, 2830, 2838, 2843, 2848, 2855, 2863, 2871, 2877, 2885, 2889, 2897, 2904, 2913, 2922, 2928, 2930, 2938, 2947, 2956, 2964, 2968, 2976, 2979, 2985, 2993, 2997, 3001, 3010, 3013, 3021, 3024, 3028, 3029, 3031, 3031, 3039, 3046, 3047, 3047, 3054, 3061, 3068, 3076, 3080, 3080, 3081, 3084, 3084, 3085, 3085, 3089, 3096, 3101, 3110, 3114, 3117, 3122, 3129, 3137, 3138, 3139, 3144, 3149, 3157, 3162, 3167, 3175, 3175, 3182, 3189, 3190, 3193, 3201, 3207, 3211, 3216, 3219, 3219, 3223, 3223, 3223, 3224, 3233, 3242, 3243, 3247, 3247, 3252, 3252, 3260, 3264, 3270, 3271, 3278, 3283, 3284, 3292, 3298, 3300, 3301, 3301, 3306, 3306, 3315, 3323, 3326, 3326, 3327, 3333, 3340, 3347, 3351, 3356, 3362, 3368, 3374, 3374, 3380, 3388, 3396, 3397, 3401, 3406, 3406, 3406, 3413, 3417, 3422, 3425, 3425, 3425, 3431, 3431, 3432, 3434, 3443, 3445, 3453, 3461, 3462, 3466, 3473, 3476, 3485, 3491, 3494, 3501, 3510, 3514, 3514, 3517, 3519, 3519, 3519, 3521, 3529, 3530, 3533, 3542, 3545, 3552, 3561, 3568, 3573, 3574, 3579, 3585, 3589, 3589, 3596, 3596, 3604, 3611, 3620, 3625, 3627, 3627, 3629, 3631, 3633, 3641, 3650, 3656, 3656, 3657, 3664, 3669, 3669, 3678, 3682, 3684, 3686, 3687, 3691, 3691, 3700, 3702, 3709, 3711, 3719, 3722, 3730, 3733, 3733, 3742, 3746, 3748, 3754, 3759, 3760, 3760, 3765, 3772, 3779, 3779, 3785, 3791, 3798, 3805, 3814, 3821, 3825, 3830, 3831, 3837, 3839, 3847, 3851, 3852, 3859, 3863, 3864, 3872, 3881, 3885, 3893, 3899, 3902, 3911, 3916, 3924, 3929, 3936, 3943, 3943, 3946, 3948, 3950, 3957, 3966, 3967, 3970, 3970, 3971, 3978, 3982, 3986, 3990, 3997, 4003, 4007, 4016, 4021, 4028, 4031, 4033, 4038, 4043, 4049, 4053, 4056, 4064, 4067, 4069, 4071, 4075, 4076, 4080, 4084, 4087, 4087, 4093, 4093, 4099, 4102, 4111, 4118, 4123, 4128, 4129, 4129, 4135, 4135, 4136, 4136, 4141, 4146, 4155, 4163, 4166, 4174, 4179, 4183, 4190, 4194, 4197, 4206, 4207, 4211, 4211, 4218, 4225, 4226, 4229, 4230, 4235, 4237, 4240, 4249, 4249, 4249, 4257, 4260, 4268, 4275, 4278, 4282, 4285, 4291, 4292, 4295, 4299, 4304, 4309, 4318, 4318, 4326, 4331, 4331, 4334, 4339, 4341, 4350, 4355, 4355, 4357, 4366, 4366, 4370, 4374, 4382, 4383, 4383, 4384, 4389, 4393, 4399, 4406, 4407, 4407, 4414, 4418, 4422, 4431, 4436, 4441, 4449, 4458, 4458, 4458, 4461, 4462, 4468, 4472, 4476, 4485, 4490, 4491, 4491, 4500, 4508, 4516, 4516, 4522, 4530, 4530, 4534, 4542, 4550, 4550, 4553, 4562, 4569, 4574, 4581, 4584, 4592, 4600, 4608, 4610, 4610, 4611, 4614, 4622, 4631, 4639, 4641, 4644, 4646, 4653, 4662, 4668, 4677, 4684, 4684, 4686, 4686, 4690, 4696, 4696, 4696, 4702, 4703, 4709, 4711, 4712, 4713, 4719, 4722, 4725, 4734, 4734, 4739, 4740, 4740, 4744, 4751, 4759, 4767, 4770, 4776, 4784, 4790, 4793, 4799, 4802, 4811, 4816, 4823, 4826, 4827, 4828, 4829, 4831, 4833, 4842, 4849, 4854, 4855, 4862, 4864, 4867, 4874, 4878, 4884, 4885, 4885, 4889, 4894, 4899, 4903, 4904, 4905, 4907, 4914, 4921, 4924, 4931, 4934, 4941, 4950, 4959, 4960, 4961, 4968, 4976, 4984, 4984, 4992, 4994, 4996, 4998, 4999, 5008, 5014, 5016, 5016, 5020, 5024, 5031, 5039, 5041, 5042, 5043, 5048, 5052, 5053, 5055, 5058, 5058, 5065, 5070, 5070, 5072, 5073, 5075, 5080, 5085, 5091, 5099, 5100, 5104, 5107, 5107, 5108, 5110, 5118, 5125, 5125, 5132, 5141, 5148, 5157, 5163, 5164, 5168, 5174, 5183, 5186, 5191, 5191, 5192, 5201, 5208, 5211, 5219, 5225, 5225, 5228, 5230, 5235, 5238, 5240, 5240, 5246, 5254, 5262, 5267, 5269, 5275, 5279, 5283, 5290, 5290, 5298, 5304, 5306, 5312, 5313, 5319, 5328, 5333, 5338, 5344, 5347, 5350, 5358, 5359, 5361, 5369, 5372, 5379, 5382, 5385, 5385, 5385, 5385, 5389, 5396, 5405, 5407, 5409, 5409, 5417, 5421, 5429, 5435, 5437, 5442, 5443, 5449, 5453, 5458, 5467, 5468, 5473, 5477, 5484, 5487, 5492, 5498, 5507, 5512, 5515, 5524, 5524, 5529, 5533, 5537, 5546, 5552, 5553, 5555, 5556, 5563, 5568, 5571, 5572, 5577, 5577, 5583, 5592, 5598, 5603, 5603, 5611, 5619, 5627, 5628, 5628, 5637, 5641, 5645, 5646, 5649, 5654, 5654, 5658, 5658, 5659, 5666, 5667, 5671, 5672, 5681, 5689, 5696, 5703, 5708, 5708, 5708, 5714, 5715, 5722, 5725, 5727, 5734, 5741, 5746, 5755, 5757, 5757, 5762, 5763, 5766, 5773, 5775, 5783, 5788, 5792, 5793, 5802, 5808, 5813, 5813, 5814, 5815, 5817, 5822, 5828, 5837, 5842, 5846, 5855, 5862, 5869, 5871, 5874, 5878, 5880, 5883, 5888, 5894, 5903, 5908, 5917, 5923, 5925, 5932, 5936, 5938, 5944, 5944, 5945, 5949, 5957, 5962, 5962, 5967, 5974, 5976, 5985, 5992, 5999, 6000, 6000, 6006, 6013, 6017, 6025, 6033, 6040, 6043, 6046, 6047, 6050, 6058, 6059, 6063, 6070, 6070, 6078, 6080, 6082, 6086, 6090, 6094, 6096, 6096, 6102, 6102, 6105, 6105, 6111, 6119, 6120, 6128, 6134, 6136, 6139, 6143, 6144, 6148, 6151, 6153, 6159, 6167, 6170, 6174, 6178, 6178, 6178, 6185, 6186, 6192, 6193, 6198, 6199, 6203, 6204, 6213, 6219, 6223, 6224, 6233, 6238, 6238, 6242, 6243, 6244, 6249, 6255, 6263, 6268, 6275, 6276, 6281, 6289, 6294, 6298, 6302, 6311, 6314, 6322, 6331, 6340, 6347, 6351, 6354, 6357, 6358, 6367, 6368, 6373, 6380, 6381, 6390, 6391, 6398, 6398, 6406, 6409, 6412, 6412, 6417, 6420, 6429, 6432, 6437, 6440, 6447, 6456, 6456, 6463, 6464, 6468, 6477, 6483, 6492, 6492, 6498, 6502, 6505, 6514, 6519, 6522, 6522, 6522, 6531, 6536, 6543, 6546, 6549, 6557, 6565, 6574, 6574, 6583, 6583, 6592, 6599, 6603, 6611, 6613, 6618, 6625, 6630, 6639, 6645, 6653, 6661, 6669, 6675, 6679, 6685, 6692, 6694, 6700, 6702, 6704, 6709, 6718, 6726, 6729, 6737, 6739, 6745, 6749, 6749, 6753, 6755, 6755, 6762, 6763, 6763, 6766, 6775, 6782, 6786, 6794, 6802, 6804, 6810, 6815, 6817, 6819, 6822, 6828, 6832, 6835, 6842, 6844, 6844, 6850, 6854, 6855, 6857, 6864, 6871, 6876, 6876, 6876, 6880, 6881, 6889, 6891, 6897, 6904, 6911, 6912, 6915, 6922, 6929, 6936, 6938, 6941, 6944, 6945, 6954, 6962, 6966, 6975, 6975, 6977, 6986, 6993, 6994, 7001, 7003, 7012, 7020, 7021, 7024, 7025, 7033, 7033, 7039, 7042, 7046, 7051, 7058, 7062, 7063, 7065, 7066, 7069, 7073, 7077, 7086, 7089, 7097, 7103, 7105, 7111, 7117, 7121, 7127, 7130, 7136, 7140, 7143, 7143, 7146, 7147, 7154, 7159, 7161, 7162, 7166, 7169, 7171, 7172, 7175, 7177, 7186, 7189, 7190, 7194, 7197, 7201, 7201, 7207, 7215, 7219, 7222, 7226, 7227, 7236, 7237, 7242, 7248, 7250, 7255, 7261, 7263, 7272, 7275, 7276, 7284, 7285, 7286, 7288, 7294, 7300, 7307, 7308, 7315, 7320, 7323, 7331, 7333, 7342, 7342, 7347, 7353, 7354, 7359, 7365, 7371, 7378, 7384, 7385, 7390, 7398, 7398, 7403, 7410, 7410, 7411, 7414, 7422, 7429, 7432, 7438, 7445, 7449, 7452, 7460, 7467, 7471, 7475, 7476, 7484, 7492, 7493, 7502, 7504, 7505, 7506, 7512, 7516, 7516, 7516, 7522, 7528, 7528, 7537, 7543, 7552, 7557, 7563, 7571, 7578, 7583, 7585, 7588, 7596, 7601, 7601, 7605, 7612, 7614, 7622, 7629, 7632, 7634, 7642, 7645, 7650, 7658, 7661, 7661, 7667, 7671, 7672, 7681, 7681, 7687, 7696, 7702, 7711, 7718, 7719, 7721, 7723, 7724, 7731, 7738, 7745, 7752, 7758, 7762, 7764, 7766, 7768, 7769, 7775, 7779, 7781, 7785, 7793, 7801, 7805, 7807, 7814, 7818, 7824, 7827, 7836, 7839, 7847, 7849, 7854, 7858, 7858, 7862, 7868, 7872, 7872, 7875, 7881, 7881, 7889, 7893, 7899, 7902, 7907, 7914, 7923, 7930, 7938, 7940, 7947, 7949, 7952, 7955, 7964, 7971, 7975, 7976, 7978, 7981, 7981, 7981, 7983, 7992, 7994, 7998, 8003, 8010, 8013, 8016, 8017, 8021, 8022, 8023, 8026, 8034, 8038, 8047, 8050, 8055, 8063, 8072, 8072, 8075, 8082, 8082, 8088, 8094, 8098, 8105, 8112, 8115, 8117, 8122, 8125, 8133, 8136, 8144, 8148, 8153, 8158, 8160, 8165, 8171, 8171, 8171, 8177, 8183, 8188, 8194, 8197, 8202, 8203, 8204, 8208, 8211, 8218, 8220, 8229, 8234, 8239, 8240, 8240, 8247, 8254, 8254, 8262, 8266, 8271, 8273, 8277, 8285, 8292, 8292, 8301, 8306, 8306, 8306, 8314, 8319, 8327, 8329, 8334, 8334, 8343, 8345, 8348, 8349, 8357, 8364, 8369, 8372, 8379, 8387, 8391, 8399, 8405, 8412, 8418, 8418, 8424, 8428, 8428, 8435, 8441, 8449, 8454, 8457, 8461, 8462, 8471, 8472, 8476, 8476, 8480, 8486, 8494, 8494, 8498, 8503, 8505, 8511, 8512, 8515, 8520, 8527, 8529, 8531, 8535, 8541, 8543, 8546, 8550, 8554, 8558, 8560, 8562, 8570, 8576, 8585, 8586, 8587, 8589, 8592, 8595, 8599, 8602, 8605, 8610, 8613, 8619, 8628, 8631, 8634, 8636, 8636, 8639, 8647, 8650, 8656, 8663, 8663, 8665, 8667, 8671, 8674, 8676, 8681, 8681, 8683, 8687, 8688, 8697, 8699, 8704, 8710, 8710, 8716, 8721, 8726, 8733, 8741, 8746, 8749, 8754, 8757, 8766, 8772, 8780, 8785, 8788, 8791, 8796, 8801, 8809, 8817, 8826, 8828, 8832, 8837, 8837, 8837, 8840, 8840, 8848, 8855, 8857, 8857, 8858, 8867, 8873, 8873, 8874, 8875, 8877, 8881, 8884, 8886, 8892, 8893, 8900, 8901, 8909, 8916, 8916, 8922, 8930, 8939, 8947, 8947, 8949, 8954, 8959, 8965, 8973, 8978, 8979, 8979, 8986, 8995, 8997]
2256.606 ops/ms
# Warmup Iteration   2: 2291.044 ops/ms
# Warmup Iteration   3: 2398.906 ops/ms
Iteration   1: 2373.602 ops/ms
Iteration   2: 2141.584 ops/ms
Iteration   3: 2361.451 ops/ms
Iteration   4: 2067.729 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:     1311635
  invocation_counter:               1311635
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(1670) displacement(56)
                                    not taken(1309589)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(1309589) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
#+end_src
*** branch always
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 20.00% complete, ETA 00:12:33
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2136.389 ops/ms
# Warmup Iteration   2: 2138.615 ops/ms
# Warmup Iteration   3: 2221.330 ops/ms
Iteration   1: 2169.961 ops/ms
Iteration   2: 2165.302 ops/ms
Iteration   3: 2050.118 ops/ms
Iteration   4: 2004.827 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax":
  2097.552 ±(99.9%) 536.527 ops/ms [Average]
  (min, avg, max) = (2004.827, 2097.552, 2169.961), stdev = 83.028
  CI (99.9%): [1561.025, 2634.079] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax:asm":
PrintAssembly processed: 323879 total address lines.
Perf output processed (skipped 19.838 seconds):
 Column 1: sampled_pc (20050 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub, version 5, compile id 1028

                     0x000000010cf46d70:   sub		w11, w17, w1
                     0x000000010cf46d74:   csel		w12, wzr, w11, lt
                     0x000000010cf46d78:   mov		w8, #0x1f40
                     0x000000010cf46d7c:   cmp		w12, w8
                     0x000000010cf46d80:   csel		w11, w14, w12, hi
                     0x000000010cf46d84:   add		w12, w11, w1
                     0x000000010cf46d88:   nop
                     0x000000010cf46d8c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@10 (line 272)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.04%          ↗  0x000000010cf46d90:   sbfiz		x11, x1, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46d94:   add		x22, x5, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46d98:   add		x23, x6, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46d9c:   ldr		x7, [x22, #0x10]
                  │  0x000000010cf46da0:   add		x24, x4, x11
  13.18%          │  0x000000010cf46da4:   ldr		x21, [x23, #0x10]
                  │  0x000000010cf46da8:   mov		x11, x7
                  │  0x000000010cf46dac:   cmp		x7, x21
          ╭       │  0x000000010cf46db0:   b.ge		#0x10cf46db8
          │       │  0x000000010cf46db4:   mov		x11, x21
          ↘       │  0x000000010cf46db8:   str		x11, [x24, #0x10]
   0.01%          │  0x000000010cf46dbc:   ldr		x11, [x22, #0x18]
  13.15%          │  0x000000010cf46dc0:   ldr		x7, [x23, #0x18]
                  │  0x000000010cf46dc4:   mov		x21, x11
                  │  0x000000010cf46dc8:   cmp		x11, x7
           ╭      │  0x000000010cf46dcc:   b.ge		#0x10cf46dd4
           │      │  0x000000010cf46dd0:   mov		x21, x7
           ↘      │  0x000000010cf46dd4:   str		x21, [x24, #0x18]
   0.03%          │  0x000000010cf46dd8:   ldr		x11, [x22, #0x20]
   4.28%          │  0x000000010cf46ddc:   ldr		x7, [x23, #0x20]
                  │  0x000000010cf46de0:   mov		x21, x11
                  │  0x000000010cf46de4:   cmp		x11, x7
            ╭     │  0x000000010cf46de8:   b.ge		#0x10cf46df0
            │     │  0x000000010cf46dec:   mov		x21, x7
            ↘     │  0x000000010cf46df0:   str		x21, [x24, #0x20]
   0.04%          │  0x000000010cf46df4:   ldr		x11, [x22, #0x28]
  12.83%          │  0x000000010cf46df8:   ldr		x7, [x23, #0x28]
                  │  0x000000010cf46dfc:   mov		x21, x11
   0.01%          │  0x000000010cf46e00:   cmp		x11, x7
             ╭    │  0x000000010cf46e04:   b.ge		#0x10cf46e0c
             │    │  0x000000010cf46e08:   mov		x21, x7
             ↘    │  0x000000010cf46e0c:   str		x21, [x24, #0x28]
   0.01%          │  0x000000010cf46e10:   ldr		x11, [x22, #0x30]
  10.08%          │  0x000000010cf46e14:   ldr		x7, [x23, #0x30]
                  │  0x000000010cf46e18:   mov		x21, x11
   2.81%          │  0x000000010cf46e1c:   cmp		x11, x7
              ╭   │  0x000000010cf46e20:   b.ge		#0x10cf46e28
              │   │  0x000000010cf46e24:   mov		x21, x7
              ↘   │  0x000000010cf46e28:   str		x21, [x24, #0x30]
   0.01%          │  0x000000010cf46e2c:   ldr		x11, [x22, #0x38]
   5.98%          │  0x000000010cf46e30:   ldr		x7, [x23, #0x38]
                  │  0x000000010cf46e34:   mov		x21, x11
                  │  0x000000010cf46e38:   cmp		x11, x7
               ╭  │  0x000000010cf46e3c:   b.ge		#0x10cf46e44
               │  │  0x000000010cf46e40:   mov		x21, x7
               ↘  │  0x000000010cf46e44:   str		x21, [x24, #0x38]
   0.01%          │  0x000000010cf46e48:   ldr		x11, [x22, #0x40]
  12.60%          │  0x000000010cf46e4c:   ldr		x7, [x23, #0x40]
                  │  0x000000010cf46e50:   mov		x21, x11
                  │  0x000000010cf46e54:   cmp		x11, x7
                ╭ │  0x000000010cf46e58:   b.ge		#0x10cf46e60
                │ │  0x000000010cf46e5c:   mov		x21, x7
                ↘ │  0x000000010cf46e60:   str		x21, [x24, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.04%          │  0x000000010cf46e64:   ldr		x11, [x22, #0x48]
  11.74%          │  0x000000010cf46e68:   ldr		x7, [x23, #0x48]
                  │  0x000000010cf46e6c:   mov		x21, x11
                  │  0x000000010cf46e70:   cmp		x11, x7
                 ╭│  0x000000010cf46e74:   b.ge		#0x10cf46e7c
                 ││  0x000000010cf46e78:   mov		x21, x7
                 ↘│  0x000000010cf46e7c:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@31 (line 271)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  11.09%          │  0x000000010cf46e80:   str		x21, [x24, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46e84:   cmp		w1, w12
                  ╰  0x000000010cf46e88:   b.lt		#0x10cf46d90        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@7 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.70%             0x000000010cf46e8c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg0=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.11%             0x000000010cf46e90:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x000000010cf46e94:   cmp		w1, w17
                     0x000000010cf46e98:   b.lt		#0x10cf46d6c
                     0x000000010cf46e9c:   cmp		w1, w10
                     0x000000010cf46ea0:   b.lt		#0x10cf46c78
....................................................................................................
  98.77%  <total for region 1>
#+end_src
*** branch never
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:+UseNewCode -XX:+UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 20.00% complete, ETA 00:12:36
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2477.184 ops/ms
# Warmup Iteration   2: 2489.760 ops/ms
# Warmup Iteration   3: 2489.405 ops/ms
Iteration   1: 2492.004 ops/ms
Iteration   2: 2489.828 ops/ms
Iteration   3: 2489.923 ops/ms
Iteration   4: 2488.875 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax":
  2490.158 ±(99.9%) 8.522 ops/ms [Average]
  (min, avg, max) = (2488.875, 2490.158, 2492.004), stdev = 1.319
  CI (99.9%): [2481.635, 2498.680] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax:asm":
PrintAssembly processed: 326413 total address lines.
Perf output processed (skipped 19.778 seconds):
 Column 1: sampled_pc (20050 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub, version 5, compile id 1028

                     0x000000010ca0b170:   sub		w11, w17, w1
                     0x000000010ca0b174:   csel		w12, wzr, w11, lt
                     0x000000010ca0b178:   mov		w8, #0x1f40
                     0x000000010ca0b17c:   cmp		w12, w8
                     0x000000010ca0b180:   csel		w11, w14, w12, hi
                     0x000000010ca0b184:   add		w12, w11, w1
                     0x000000010ca0b188:   nop
                     0x000000010ca0b18c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@10 (line 272)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.01%          ↗  0x000000010ca0b190:   sbfiz		x11, x1, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b194:   add		x22, x5, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b198:   add		x23, x6, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b19c:   ldr		x7, [x22, #0x10]
                  │  0x000000010ca0b1a0:   add		x24, x4, x11
  12.87%          │  0x000000010ca0b1a4:   ldr		x21, [x23, #0x10]
                  │  0x000000010ca0b1a8:   mov		x11, x21
                  │  0x000000010ca0b1ac:   cmp		x21, x7
   2.94%  ╭       │  0x000000010ca0b1b0:   b.gt		#0x10ca0b1b8
          │       │  0x000000010ca0b1b4:   mov		x11, x7
          ↘       │  0x000000010ca0b1b8:   str		x11, [x24, #0x10]
   0.02%          │  0x000000010ca0b1bc:   ldr		x11, [x22, #0x18]
   9.75%          │  0x000000010ca0b1c0:   ldr		x7, [x23, #0x18]
                  │  0x000000010ca0b1c4:   mov		x21, x7
                  │  0x000000010ca0b1c8:   cmp		x7, x11
           ╭      │  0x000000010ca0b1cc:   b.gt		#0x10ca0b1d4
           │      │  0x000000010ca0b1d0:   mov		x21, x11
           ↘      │  0x000000010ca0b1d4:   str		x21, [x24, #0x18]
   0.00%          │  0x000000010ca0b1d8:   ldr		x11, [x22, #0x20]
   6.25%          │  0x000000010ca0b1dc:   ldr		x7, [x23, #0x20]
   3.16%          │  0x000000010ca0b1e0:   mov		x21, x7
                  │  0x000000010ca0b1e4:   cmp		x7, x11
   3.06%    ╭     │  0x000000010ca0b1e8:   b.gt		#0x10ca0b1f0
            │     │  0x000000010ca0b1ec:   mov		x21, x11
            ↘     │  0x000000010ca0b1f0:   str		x21, [x24, #0x20]
   0.01%          │  0x000000010ca0b1f4:   ldr		x11, [x22, #0x28]
   9.35%          │  0x000000010ca0b1f8:   ldr		x7, [x23, #0x28]
                  │  0x000000010ca0b1fc:   mov		x21, x7
                  │  0x000000010ca0b200:   cmp		x7, x11
             ╭    │  0x000000010ca0b204:   b.gt		#0x10ca0b20c
             │    │  0x000000010ca0b208:   mov		x21, x11
             ↘    │  0x000000010ca0b20c:   str		x21, [x24, #0x28]
   0.01%          │  0x000000010ca0b210:   ldr		x11, [x22, #0x30]
   9.62%          │  0x000000010ca0b214:   ldr		x7, [x23, #0x30]
   3.20%          │  0x000000010ca0b218:   mov		x21, x7
                  │  0x000000010ca0b21c:   cmp		x7, x11
              ╭   │  0x000000010ca0b220:   b.gt		#0x10ca0b228
              │   │  0x000000010ca0b224:   mov		x21, x11
              ↘   │  0x000000010ca0b228:   str		x21, [x24, #0x30]
   0.02%          │  0x000000010ca0b22c:   ldr		x11, [x22, #0x38]
   9.46%          │  0x000000010ca0b230:   ldr		x7, [x23, #0x38]
                  │  0x000000010ca0b234:   mov		x21, x7
   0.00%          │  0x000000010ca0b238:   cmp		x7, x11
               ╭  │  0x000000010ca0b23c:   b.gt		#0x10ca0b244
               │  │  0x000000010ca0b240:   mov		x21, x11
               ↘  │  0x000000010ca0b244:   str		x21, [x24, #0x38]
   0.01%          │  0x000000010ca0b248:   ldr		x11, [x22, #0x40]
  12.61%          │  0x000000010ca0b24c:   ldr		x7, [x23, #0x40]
                  │  0x000000010ca0b250:   mov		x21, x7
                  │  0x000000010ca0b254:   cmp		x7, x11
                ╭ │  0x000000010ca0b258:   b.gt		#0x10ca0b260
                │ │  0x000000010ca0b25c:   mov		x21, x11
                ↘ │  0x000000010ca0b260:   str		x21, [x24, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.02%          │  0x000000010ca0b264:   ldr		x11, [x22, #0x48]
   9.47%          │  0x000000010ca0b268:   ldr		x7, [x23, #0x48]
                  │  0x000000010ca0b26c:   mov		x21, x7
                  │  0x000000010ca0b270:   cmp		x7, x11
                 ╭│  0x000000010ca0b274:   b.gt		#0x10ca0b27c
                 ││  0x000000010ca0b278:   mov		x21, x11
                 ↘│  0x000000010ca0b27c:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@31 (line 271)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   6.08%          │  0x000000010ca0b280:   str		x21, [x24, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b284:   cmp		w1, w12
                  ╰  0x000000010ca0b288:   b.lt		#0x10ca0b190        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@7 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.81%             0x000000010ca0b28c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg0=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.12%             0x000000010ca0b290:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x000000010ca0b294:   cmp		w1, w17
                     0x000000010ca0b298:   b.lt		#0x10ca0b16c
                     0x000000010ca0b29c:   cmp		w1, w10
                     0x000000010ca0b2a0:   b.lt		#0x10ca0b078
....................................................................................................
  98.86%  <total for region 1>
#+end_src
*** base
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 20.00% complete, ETA 00:12:35
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2551.565 ops/ms
# Warmup Iteration   2: 2564.687 ops/ms
# Warmup Iteration   3: 2566.557 ops/ms
Iteration   1: 2565.658 ops/ms
Iteration   2: 2565.508 ops/ms
Iteration   3: 2566.056 ops/ms
Iteration   4: 2567.298 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax":
  2566.130 ±(99.9%) 5.249 ops/ms [Average]
  (min, avg, max) = (2565.508, 2566.130, 2567.298), stdev = 0.812
  CI (99.9%): [2560.881, 2571.379] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax:asm":
PrintAssembly processed: 323919 total address lines.
Perf output processed (skipped 19.874 seconds):
 Column 1: sampled_pc (20056 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub, version 5, compile id 1033

                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365b0:   ldr		x7, [x22, #0x10]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365b4:   cmp		x7, x21
            0x000000010ee365b8:   csel		x7, x21, x7, lt
            0x000000010ee365bc:   add		x21, x4, x11
            0x000000010ee365c0:   str		x7, [x21, #0x10]    ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.04%    0x000000010ee365c4:   ldr		x7, [x23, #0x18]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.02%    0x000000010ee365c8:   ldr		x11, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365cc:   cmp		x11, x7
   0.00%    0x000000010ee365d0:   csel		x11, x7, x11, lt
   0.01%    0x000000010ee365d4:   str		x11, [x21, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   1.76%    0x000000010ee365d8:   ldr		x7, [x23, #0x20]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  14.39%    0x000000010ee365dc:   ldr		x11, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365e0:   cmp		x11, x7
            0x000000010ee365e4:   csel		x11, x7, x11, lt
            0x000000010ee365e8:   str		x11, [x21, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.02%    0x000000010ee365ec:   ldr		x7, [x23, #0x28]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   2.87%    0x000000010ee365f0:   ldr		x11, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365f4:   cmp		x11, x7
            0x000000010ee365f8:   csel		x11, x7, x11, lt
   2.36%    0x000000010ee365fc:   str		x11, [x21, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.05%    0x000000010ee36600:   ldr		x7, [x23, #0x30]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.11%    0x000000010ee36604:   ldr		x11, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36608:   cmp		x11, x7
            0x000000010ee3660c:   csel		x11, x7, x11, lt
   0.01%    0x000000010ee36610:   str		x11, [x21, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   5.29%    0x000000010ee36614:   ldr		x7, [x22, #0x38]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   8.73%    0x000000010ee36618:   ldr		x11, [x23, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee3661c:   cmp		x11, x7
            0x000000010ee36620:   csel		x11, x7, x11, lt
   2.59%    0x000000010ee36624:   str		x11, [x21, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.05%    0x000000010ee36628:   ldr		x7, [x23, #0x40]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   6.23%    0x000000010ee3662c:   ldr		x11, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36630:   cmp		x11, x7
            0x000000010ee36634:   csel		x11, x7, x11, lt
   0.01%    0x000000010ee36638:   str		x11, [x21, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   3.36%    0x000000010ee3663c:   ldr		x7, [x23, #0x48]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  12.89%    0x000000010ee36640:   ldr		x11, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36644:   cmp		x11, x7
            0x000000010ee36648:   csel		x11, x7, x11, lt
            0x000000010ee3664c:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@31 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  36.97%    0x000000010ee36650:   str		x11, [x21, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36654:   cmp		w1, w12
            0x000000010ee36658:   b.lt		#0x10ee365a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@7 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   1.01%    0x000000010ee3665c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg0=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                      ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                      ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.16%    0x000000010ee36660:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                                                                      ;   {poll}
            0x000000010ee36664:   cmp		w1, w17
            0x000000010ee36668:   b.lt		#0x10ee36580
            0x000000010ee3666c:   cmp		w1, w10
            0x000000010ee36670:   b.lt		#0x10ee364a0
....................................................................................................
  98.95%  <total for region 1>
#+end_src
** aarch64 MMV longClippingRange 100
*** after fix
**** range 100
#+begin_src bash
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 50.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1:
longs max: 9209124104291632696
longs min: -9215797548442562244
highestLong: 9209124015426240512
lowestLong: -9215797459577170060
2714.931 ops/ms
# Warmup Iteration   2: 2484.168 ops/ms
# Warmup Iteration   3: 2529.183 ops/ms
Iteration   1: 2614.874 ops/ms
Iteration   2: 3149.880 ops/ms
Iteration   3: 3094.836 ops/ms
Iteration   4: 2723.413 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:      911765
  invocation_counter:                911765
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(901) displacement(56)
                                    not taken(910415)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(910415) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:      911390
  invocation_counter:                911390
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(1038) displacement(56)
                                    not taken(910077)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(910077) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
#+end_src
**** range 90
#+begin_src bash
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 90, seed = 0, size = 1000)

# Run progress: 0.00% complete, ETA 00:01:10
# Fork: 1 of 1
# Warmup Iteration   1:
longs max: 9209124104291632696
longs min: -9215797548442562244
highestLong: 8288211558908035072
lowestLong: -8294885003058964620
1798.486 ops/ms
# Warmup Iteration   2: 1835.557 ops/ms
# Warmup Iteration   3: 1791.000 ops/ms
Iteration   1: 1845.763 ops/ms
Iteration   2: 1843.493 ops/ms
Iteration   3: 1838.100 ops/ms
Iteration   4: 1843.386 ops/ms
...
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:      930323
  invocation_counter:                930323
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(41821) displacement(56)
                                    not taken(888150)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(888150) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:      923079
  invocation_counter:                923079
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(54551) displacement(56)
                                    not taken(868258)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(868258) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------

#+end_src
*** print method data, branch always
Min favouring taken but Max 50%, odd?
~highestLong~ was not being calculated properly.
#+begin_src bash
[nix-shell:~/src/colata/avoid-cmov-long-min-max-8351409]$ TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping" MICRO="OPTIONS=-jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:+PrintMethodData -jvmArgs -XX:-UseSuperWord -p includeEquals=true -p range=100 -jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:-UseNewCode -jvmArgs -XX:-UseNewCode2;FORK=1" CONF=release LOG=warn make test
pushd /Users/galder/src/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make -s
popd
touch /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
~/src/jdk-avoid-cmov-long-min-max ~/src/colata/avoid-cmov-long-min-max-8351409
Building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
Finished building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
~/src/colata/avoid-cmov-long-min-max-8351409
cd /Users/galder/src/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make exploded-test
make[1]: Entering directory '/Users/galder/src/jdk-avoid-cmov-long-min-max'
Building target 'exploded-test' in configuration 'release-darwin-arm64'
Running tests using MICRO control variable 'OPTIONS=-jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:+PrintMethodData -jvmArgs -XX:-UseSuperWord -p includeEquals=true -p range=100 -jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:-UseNewCode -jvmArgs -XX:-UseNewCode2;FORK=1'
Test selection 'micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping', will run:
 micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping

Running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping'
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:+UnlockDiagnosticVMOptions -XX:+PrintMethodData -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 0.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1: 2770.433 ops/ms
# Warmup Iteration   2: 2491.741 ops/ms
# Warmup Iteration   3: 2522.839 ops/ms
Iteration   1: 2437.901 ops/ms
Iteration   2: 2370.382 ops/ms
Iteration   3: 2422.815 ops/ms
Iteration   4: 2522.072 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:      990641
  invocation_counter:                990641
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(519161) displacement(56)
                                    not taken(466718)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(466718) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:      990239
  invocation_counter:                990239
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(984476) displacement(56)
                                    not taken(871)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(871) displacement(24)
  10 lload_2
  11 lreturn
#+end_src
*** branch always
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 5.00% complete, ETA 00:14:59
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2712.330 ops/ms
# Warmup Iteration   2: 2758.255 ops/ms
# Warmup Iteration   3: 2675.996 ops/ms
Iteration   1: 2767.759 ops/ms
Iteration   2: 2767.288 ops/ms
Iteration   3: 2462.637 ops/ms
Iteration   4: 2772.031 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange":
  2692.428 ±(99.9%) 990.038 ops/ms [Average]
  (min, avg, max) = (2462.637, 2692.428, 2772.031), stdev = 153.209
  CI (99.9%): [1702.391, 3682.466] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange:asm":
PrintAssembly processed: 324995 total address lines.
Perf output processed (skipped 19.914 seconds):
 Column 1: sampled_pc (20050 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub, version 5, compile id 1023

                             0x000000010b3e4600:   cmp		w16, w0
                             0x000000010b3e4604:   sub		w12, w16, w0
                             0x000000010b3e4608:   csel		w11, wzr, w12, lt
                             0x000000010b3e460c:   mov		w8, #0x1f40
                             0x000000010b3e4610:   cmp		w11, w8
                             0x000000010b3e4614:   csel		w12, w10, w11, hi
                             0x000000010b3e4618:   add		w11, w12, w0
                             0x000000010b3e461c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@10 (line 256)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.07%                  ↗  0x000000010b3e4620:   sbfiz		x12, x0, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000010b3e4624:   add		x22, x5, x12
   6.93%                  │  0x000000010b3e4628:   ldr		x21, [x22, #0x10]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.17%                  │  0x000000010b3e462c:   add		x23, x4, x12
   0.00%                  │  0x000000010b3e4630:   mov		x12, x21
   0.13%                  │  0x000000010b3e4634:   cmp		x21, x6
   0.01%  ╭               │  0x000000010b3e4638:   b.ge		#0x10b3e4640
   3.30%  │               │  0x000000010b3e463c:   mov		x12, x6
   4.87%  ↘               │  0x000000010b3e4640:   mov		x21, x12
   0.05%                  │  0x000000010b3e4644:   cmp		x12, x7
   0.28%   ╭              │  0x000000010b3e4648:   b.le		#0x10b3e4650
           │              │  0x000000010b3e464c:   mov		x21, x7
           ↘              │  0x000000010b3e4650:   str		x21, [x23, #0x10]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   2.01%                  │  0x000000010b3e4654:   ldr		x12, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.01%                  │  0x000000010b3e4658:   mov		x21, x12
   0.06%                  │  0x000000010b3e465c:   cmp		x12, x6
   0.24%    ╭             │  0x000000010b3e4660:   b.ge		#0x10b3e4668
   3.19%    │             │  0x000000010b3e4664:   mov		x21, x6
   4.65%    ↘             │  0x000000010b3e4668:   mov		x12, x21
   0.01%                  │  0x000000010b3e466c:   cmp		x21, x7
   0.32%     ╭            │  0x000000010b3e4670:   b.le		#0x10b3e4678
             │            │  0x000000010b3e4674:   mov		x12, x7
             ↘            │  0x000000010b3e4678:   str		x12, [x23, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   1.94%                  │  0x000000010b3e467c:   ldr		x12, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.21%                  │  0x000000010b3e4680:   mov		x21, x12
   0.04%                  │  0x000000010b3e4684:   cmp		x12, x6
   0.04%      ╭           │  0x000000010b3e4688:   b.ge		#0x10b3e4690
   2.99%      │           │  0x000000010b3e468c:   mov		x21, x6
   4.34%      ↘           │  0x000000010b3e4690:   mov		x12, x21
   0.07%                  │  0x000000010b3e4694:   cmp		x21, x7
   0.13%       ╭          │  0x000000010b3e4698:   b.le		#0x10b3e46a0
               │          │  0x000000010b3e469c:   mov		x12, x7
               ↘          │  0x000000010b3e46a0:   str		x12, [x23, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.49%                  │  0x000000010b3e46a4:   ldr		x12, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.22%                  │  0x000000010b3e46a8:   mov		x21, x12
   0.05%                  │  0x000000010b3e46ac:   cmp		x12, x6
   0.01%        ╭         │  0x000000010b3e46b0:   b.ge		#0x10b3e46b8
   3.11%        │         │  0x000000010b3e46b4:   mov		x21, x6
   4.58%        ↘         │  0x000000010b3e46b8:   mov		x12, x21
   0.05%                  │  0x000000010b3e46bc:   cmp		x21, x7
   0.14%         ╭        │  0x000000010b3e46c0:   b.le		#0x10b3e46c8
                 │        │  0x000000010b3e46c4:   mov		x12, x7
                 ↘        │  0x000000010b3e46c8:   str		x12, [x23, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.17%                  │  0x000000010b3e46cc:   ldr		x12, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.45%                  │  0x000000010b3e46d0:   mov		x21, x12
   0.01%                  │  0x000000010b3e46d4:   cmp		x12, x6
                  ╭       │  0x000000010b3e46d8:   b.ge		#0x10b3e46e0
   3.03%          │       │  0x000000010b3e46dc:   mov		x21, x6
   4.98%          ↘       │  0x000000010b3e46e0:   mov		x12, x21
                          │  0x000000010b3e46e4:   cmp		x21, x7
   0.23%           ╭      │  0x000000010b3e46e8:   b.le		#0x10b3e46f0
                   │      │  0x000000010b3e46ec:   mov		x12, x7
                   ↘      │  0x000000010b3e46f0:   str		x12, [x23, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.55%                  │  0x000000010b3e46f4:   ldr		x12, [x22, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.33%                  │  0x000000010b3e46f8:   mov		x21, x12
                          │  0x000000010b3e46fc:   cmp		x12, x6
   0.01%            ╭     │  0x000000010b3e4700:   b.ge		#0x10b3e4708
   3.28%            │     │  0x000000010b3e4704:   mov		x21, x6
   5.07%            ↘     │  0x000000010b3e4708:   mov		x12, x21
   0.00%                  │  0x000000010b3e470c:   cmp		x21, x7
   0.23%             ╭    │  0x000000010b3e4710:   b.le		#0x10b3e4718
                     │    │  0x000000010b3e4714:   mov		x12, x7
                     ↘    │  0x000000010b3e4718:   str		x12, [x23, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   2.16%                  │  0x000000010b3e471c:   ldr		x12, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.39%                  │  0x000000010b3e4720:   mov		x21, x12
   0.07%                  │  0x000000010b3e4724:   cmp		x12, x6
   0.02%              ╭   │  0x000000010b3e4728:   b.ge		#0x10b3e4730
   3.18%              │   │  0x000000010b3e472c:   mov		x21, x6
   4.75%              ↘   │  0x000000010b3e4730:   mov		x12, x21
   0.00%                  │  0x000000010b3e4734:   cmp		x21, x7
   0.24%               ╭  │  0x000000010b3e4738:   b.le		#0x10b3e4740
                       │  │  0x000000010b3e473c:   mov		x12, x7
                       ↘  │  0x000000010b3e4740:   str		x12, [x23, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.17%                  │  0x000000010b3e4744:   ldr		x12, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.24%                  │  0x000000010b3e4748:   mov		x21, x12
                          │  0x000000010b3e474c:   cmp		x12, x6
   0.12%                ╭ │  0x000000010b3e4750:   b.ge		#0x10b3e4758
   3.52%                │ │  0x000000010b3e4754:   mov		x21, x6
   4.72%                ↘ │  0x000000010b3e4758:   mov		x12, x21
   0.01%                  │  0x000000010b3e475c:   cmp		x21, x7
   0.20%                 ╭│  0x000000010b3e4760:   b.le		#0x10b3e4768
                         ││  0x000000010b3e4764:   mov		x12, x7
                         ↘│  0x000000010b3e4768:   add		w0, w0, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@36 (line 255)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.10%                  │  0x000000010b3e476c:   str		x12, [x23, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.38%                  │  0x000000010b3e4770:   cmp		w0, w11
                          ╰  0x000000010b3e4774:   b.lt		#0x10b3e4620        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000010b3e4778:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {r13=Oop r15=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop r19=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.05%                     0x000000010b3e477c:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000010b3e4780:   cmp		w0, w16
                             0x000000010b3e4784:   b.lt		#0x10b3e4600
   0.00%                     0x000000010b3e4788:   cmp		w0, w14
                             0x000000010b3e478c:   b.lt		#0x10b3e450c
                             0x000000010b3e4790:   b		#0x10b3e454c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000010b3e4794:   mov		w1, #-0x92
                             0x000000010b3e4798:   mov		x29, x3
                             0x000000010b3e479c:   stp		x13, x20, [sp, #0x10]
                             0x000000010b3e47a0:   stp		x2, x15, [sp, #0x20]
                             0x000000010b3e47a4:   str		w14, [sp, #0x30]
                             0x000000010b3e47a8:   str		x19, [sp, #0x60]
....................................................................................................
  98.46%  <total for region 1>
#+end_src
*** branch never
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:+UseNewCode -XX:+UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 5.00% complete, ETA 00:15:01
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 1853.599 ops/ms
# Warmup Iteration   2: 2117.903 ops/ms
# Warmup Iteration   3: 2068.980 ops/ms
Iteration   1: 1984.366 ops/ms
Iteration   2: 1751.037 ops/ms
Iteration   3: 2021.892 ops/ms
Iteration   4: 2011.108 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange":
  1942.101 ±(99.9%) 829.389 ops/ms [Average]
  (min, avg, max) = (1751.037, 1942.101, 2021.892), stdev = 128.349
  CI (99.9%): [1112.711, 2771.490] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange:asm":
PrintAssembly processed: 320833 total address lines.
Perf output processed (skipped 19.734 seconds):
 Column 1: sampled_pc (20039 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub, version 5, compile id 1009

                             0x000000012fafc340:   cmp		w16, w0
                             0x000000012fafc344:   sub		w12, w16, w0
                             0x000000012fafc348:   csel		w11, wzr, w12, lt
                             0x000000012fafc34c:   mov		w8, #0x1f40
                             0x000000012fafc350:   cmp		w11, w8
                             0x000000012fafc354:   csel		w12, w10, w11, hi
                             0x000000012fafc358:   add		w11, w12, w0
                             0x000000012fafc35c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@10 (line 256)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.09%                  ↗  0x000000012fafc360:   sbfiz		x12, x0, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc364:   add		x22, x5, x12
   5.67%                  │  0x000000012fafc368:   ldr		x21, [x22, #0x10]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc36c:   add		x23, x4, x12
                          │  0x000000012fafc370:   mov		x12, x6
                          │  0x000000012fafc374:   cmp		x6, x21
          ╭               │  0x000000012fafc378:   b.gt		#0x12fafc380
   1.75%  │               │  0x000000012fafc37c:   mov		x12, x21
   4.02%  ↘               │  0x000000012fafc380:   mov		x21, x7
                          │  0x000000012fafc384:   cmp		x7, x12
   0.10%   ╭              │  0x000000012fafc388:   b.lt		#0x12fafc390
           │              │  0x000000012fafc38c:   mov		x21, x12
   0.50%   ↘              │  0x000000012fafc390:   str		x21, [x23, #0x10]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.45%                  │  0x000000012fafc394:   ldr		x12, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc398:   mov		x21, x6
   0.01%                  │  0x000000012fafc39c:   cmp		x6, x12
   0.34%    ╭             │  0x000000012fafc3a0:   b.gt		#0x12fafc3a8
   0.56%    │             │  0x000000012fafc3a4:   mov		x21, x12
   4.27%    ↘             │  0x000000012fafc3a8:   mov		x12, x7
   0.25%                  │  0x000000012fafc3ac:   cmp		x7, x21
   0.00%     ╭            │  0x000000012fafc3b0:   b.lt		#0x12fafc3b8
             │            │  0x000000012fafc3b4:   mov		x12, x21
   1.40%     ↘            │  0x000000012fafc3b8:   str		x12, [x23, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.29%                  │  0x000000012fafc3bc:   ldr		x12, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc3c0:   mov		x21, x6
                          │  0x000000012fafc3c4:   cmp		x6, x12
              ╭           │  0x000000012fafc3c8:   b.gt		#0x12fafc3d0
   0.82%      │           │  0x000000012fafc3cc:   mov		x21, x12
   5.04%      ↘           │  0x000000012fafc3d0:   mov		x12, x7
   0.01%                  │  0x000000012fafc3d4:   cmp		x7, x21
   0.02%       ╭          │  0x000000012fafc3d8:   b.lt		#0x12fafc3e0
               │          │  0x000000012fafc3dc:   mov		x12, x21
   0.91%       ↘          │  0x000000012fafc3e0:   str		x12, [x23, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   4.74%                  │  0x000000012fafc3e4:   ldr		x12, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc3e8:   mov		x21, x6
                          │  0x000000012fafc3ec:   cmp		x6, x12
                ╭         │  0x000000012fafc3f0:   b.gt		#0x12fafc3f8
   1.08%        │         │  0x000000012fafc3f4:   mov		x21, x12
   4.45%        ↘         │  0x000000012fafc3f8:   mov		x12, x7
   0.05%                  │  0x000000012fafc3fc:   cmp		x7, x21
   0.05%         ╭        │  0x000000012fafc400:   b.lt		#0x12fafc408
                 │        │  0x000000012fafc404:   mov		x12, x21
   0.89%         ↘        │  0x000000012fafc408:   str		x12, [x23, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   4.12%                  │  0x000000012fafc40c:   ldr		x12, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc410:   mov		x21, x6
                          │  0x000000012fafc414:   cmp		x6, x12
                  ╭       │  0x000000012fafc418:   b.gt		#0x12fafc420
   1.27%          │       │  0x000000012fafc41c:   mov		x21, x12
   4.44%          ↘       │  0x000000012fafc420:   mov		x12, x7
   0.04%                  │  0x000000012fafc424:   cmp		x7, x21
   0.06%           ╭      │  0x000000012fafc428:   b.lt		#0x12fafc430
                   │      │  0x000000012fafc42c:   mov		x12, x21
   0.50%           ↘      │  0x000000012fafc430:   str		x12, [x23, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.26%                  │  0x000000012fafc434:   ldr		x12, [x22, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc438:   mov		x21, x6
                          │  0x000000012fafc43c:   cmp		x6, x12
   0.01%            ╭     │  0x000000012fafc440:   b.gt		#0x12fafc448
   0.69%            │     │  0x000000012fafc444:   mov		x21, x12
   4.31%            ↘     │  0x000000012fafc448:   mov		x12, x7
   0.06%                  │  0x000000012fafc44c:   cmp		x7, x21
   0.00%             ╭    │  0x000000012fafc450:   b.lt		#0x12fafc458
                     │    │  0x000000012fafc454:   mov		x12, x21
   0.75%             ↘    │  0x000000012fafc458:   str		x12, [x23, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   6.34%                  │  0x000000012fafc45c:   ldr		x12, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc460:   mov		x21, x6
                          │  0x000000012fafc464:   cmp		x6, x12
                      ╭   │  0x000000012fafc468:   b.gt		#0x12fafc470
   0.25%              │   │  0x000000012fafc46c:   mov		x21, x12
   4.18%              ↘   │  0x000000012fafc470:   mov		x12, x7
   0.00%                  │  0x000000012fafc474:   cmp		x7, x21
                       ╭  │  0x000000012fafc478:   b.lt		#0x12fafc480
                       │  │  0x000000012fafc47c:   mov		x12, x21
   1.67%               ↘  │  0x000000012fafc480:   str		x12, [x23, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.51%                  │  0x000000012fafc484:   ldr		x12, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc488:   mov		x21, x6
                          │  0x000000012fafc48c:   cmp		x6, x12
                        ╭ │  0x000000012fafc490:   b.gt		#0x12fafc498
   1.37%                │ │  0x000000012fafc494:   mov		x21, x12
   4.17%                ↘ │  0x000000012fafc498:   mov		x12, x7
   0.04%                  │  0x000000012fafc49c:   cmp		x7, x21
                         ╭│  0x000000012fafc4a0:   b.lt		#0x12fafc4a8
                         ││  0x000000012fafc4a4:   mov		x12, x21
   0.66%                 ↘│  0x000000012fafc4a8:   add		w0, w0, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@36 (line 255)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   4.75%                  │  0x000000012fafc4ac:   str		x12, [x23, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.02%                  │  0x000000012fafc4b0:   cmp		w0, w11
                          ╰  0x000000012fafc4b4:   b.lt		#0x12fafc360        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000012fafc4b8:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {r13=Oop r15=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop r19=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000012fafc4bc:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000012fafc4c0:   cmp		w0, w16
                             0x000000012fafc4c4:   b.lt		#0x12fafc340
   0.03%                     0x000000012fafc4c8:   cmp		w0, w14
                             0x000000012fafc4cc:   b.lt		#0x12fafc24c
                             0x000000012fafc4d0:   b		#0x12fafc28c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000012fafc4d4:   mov		w1, #-0x92
                             0x000000012fafc4d8:   mov		x29, x3
                             0x000000012fafc4dc:   stp		x13, x20, [sp, #0x10]
                             0x000000012fafc4e0:   stp		x2, x15, [sp, #0x20]
                             0x000000012fafc4e4:   str		w14, [sp, #0x30]
                             0x000000012fafc4e8:   str		x19, [sp, #0x60]
....................................................................................................
  98.35%  <total for region 1>
#+end_src
*** base
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 5.00% complete, ETA 00:14:56
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 3396.942 ops/ms
# Warmup Iteration   2: 3398.561 ops/ms
# Warmup Iteration   3: 3265.272 ops/ms
Iteration   1: 3406.769 ops/ms
Iteration   2: 3404.903 ops/ms
Iteration   3: 3403.476 ops/ms
Iteration   4: 3407.549 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange":
  3405.674 ±(99.9%) 11.881 ops/ms [Average]
  (min, avg, max) = (3403.476, 3405.674, 3407.549), stdev = 1.839
  CI (99.9%): [3393.793, 3417.555] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange:asm":
PrintAssembly processed: 320923 total address lines.
Perf output processed (skipped 19.788 seconds):
 Column 1: sampled_pc (20055 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub, version 5, compile id 1015

            0x000000010eed62ac:   cmp		x4, x21
            0x000000010eed62b0:   csel		x21, x21, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62b4:   cmp		x7, x21
            0x000000010eed62b8:   csel		x21, x7, x21, lt
            0x000000010eed62bc:   add		x23, x5, x12
            0x000000010eed62c0:   str		x21, [x23, #0x10]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.03%    0x000000010eed62c4:   ldr		x12, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62c8:   cmp		x4, x12
            0x000000010eed62cc:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62d0:   cmp		x7, x12
            0x000000010eed62d4:   csel		x12, x7, x12, lt
            0x000000010eed62d8:   str		x12, [x23, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.05%    0x000000010eed62dc:   ldr		x12, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62e0:   cmp		x4, x12
            0x000000010eed62e4:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62e8:   cmp		x7, x12
            0x000000010eed62ec:   csel		x12, x7, x12, lt
   0.00%    0x000000010eed62f0:   str		x12, [x23, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   6.59%    0x000000010eed62f4:   ldr		x12, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62f8:   cmp		x4, x12
            0x000000010eed62fc:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6300:   cmp		x7, x12
            0x000000010eed6304:   csel		x12, x7, x12, lt
   4.09%    0x000000010eed6308:   str		x12, [x23, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.57%    0x000000010eed630c:   ldr		x12, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6310:   cmp		x4, x12
            0x000000010eed6314:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6318:   cmp		x7, x12
            0x000000010eed631c:   csel		x12, x7, x12, lt
   1.45%    0x000000010eed6320:   str		x12, [x23, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   8.85%    0x000000010eed6324:   ldr		x12, [x22, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6328:   cmp		x4, x12
            0x000000010eed632c:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6330:   cmp		x7, x12
            0x000000010eed6334:   csel		x12, x7, x12, lt
   1.91%    0x000000010eed6338:   str		x12, [x23, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   9.41%    0x000000010eed633c:   ldr		x12, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.01%    0x000000010eed6340:   cmp		x4, x12
            0x000000010eed6344:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6348:   cmp		x7, x12
   0.10%    0x000000010eed634c:   csel		x12, x7, x12, lt
   2.09%    0x000000010eed6350:   str		x12, [x23, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
  11.78%    0x000000010eed6354:   ldr		x12, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6358:   cmp		x4, x12
            0x000000010eed635c:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6360:   cmp		x7, x12
            0x000000010eed6364:   csel		x12, x7, x12, lt
   0.01%    0x000000010eed6368:   add		w0, w0, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@36 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
  46.10%    0x000000010eed636c:   str		x12, [x23, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6370:   cmp		w0, w11
            0x000000010eed6374:   b.lt		#0x10eed62a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   2.36%    0x000000010eed6378:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {r14=Oop r16=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                      ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                      ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.16%    0x000000010eed637c:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                                                                      ;   {poll}
            0x000000010eed6380:   cmp		w0, w17
            0x000000010eed6384:   b.lt		#0x10eed6278
            0x000000010eed6388:   cmp		w0, w10
            0x000000010eed638c:   b.lt		#0x10eed61ac
....................................................................................................
  98.58%  <total for region 1>
#+end_src
* 31.5.25
** x64
*** Branch Always
#+begin_src bash
Benchmark                                           (SIZE)  (seed)  Mode  Cnt     Score     Error  Units
VectorReduction2.NoSuperword.longMaxBig               2048       0  avgt    3  1890.767 ±   4.540  ns/op
VectorReduction2.NoSuperword.longMaxDotProduct        2048       0  avgt    3  1046.512 ±   1.133  ns/op
VectorReduction2.NoSuperword.longMaxSimple            2048       0  avgt    3  2031.456 ± 138.297  ns/op
VectorReduction2.NoSuperword.longMinBig               2048       0  avgt    3  1816.064 ±   5.052  ns/op
VectorReduction2.NoSuperword.longMinDotProduct        2048       0  avgt    3  1046.672 ±   9.161  ns/op
VectorReduction2.NoSuperword.longMinSimple            2048       0  avgt    3  2114.277 ±  22.698  ns/op

Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  813.993 ± 1.021  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  813.945 ± 2.029  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  481.846 ± 1.261  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  479.440 ± 1.206  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  475.989 ± 0.780  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  492.811 ± 3.597  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  495.543 ± 0.892  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  498.346 ± 2.156  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  542.344 ± 5.254  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  465.214 ± 8.848  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  454.522 ± 1.704  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  541.074 ± 9.068  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  471.498 ± 0.446  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  454.386 ± 3.790  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  677.083 ± 2.696  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  527.350 ± 6.642  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  443.924 ± 2.065  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  674.479 ± 5.151  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  530.964 ± 0.369  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  442.352 ± 0.705  ops/ms
#+end_src
*** Branch Never
#+begin_src bash
Benchmark                                           (SIZE)  (seed)  Mode  Cnt     Score   Error  Units
VectorReduction2.NoSuperword.longMaxBig               2048       0  avgt    3  1820.021 ± 3.422  ns/op
VectorReduction2.NoSuperword.longMaxDotProduct        2048       0  avgt    3  1049.035 ± 1.802  ns/op
VectorReduction2.NoSuperword.longMaxSimple            2048       0  avgt    3  1318.178 ± 6.469  ns/op
VectorReduction2.NoSuperword.longMinBig               2048       0  avgt    3  1851.642 ± 3.587  ns/op
VectorReduction2.NoSuperword.longMinDotProduct        2048       0  avgt    3  1048.639 ± 3.909  ns/op
VectorReduction2.NoSuperword.longMinSimple            2048       0  avgt    3  1301.550 ± 1.316  ns/op

Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  609.251 ±  6.097  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  607.633 ±  6.307  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  477.443 ±  5.811  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  471.952 ±  1.358  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  453.011 ±  0.288  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  489.187 ±  3.778  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  471.255 ±  0.400  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  452.829 ±  0.174  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  555.183 ±  4.501  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  804.219 ± 26.194  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  806.359 ±  0.248  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  543.978 ±  3.841  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  796.142 ± 11.700  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  806.155 ±  0.509  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  667.616 ± 16.511  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  845.777 ± 18.214  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  803.849 ±  1.924  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  669.383 ± 13.667  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  847.445 ±  6.842  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  804.134 ±  0.097  ops/ms
#+end_src
*** Base
#+begin_src bash
Benchmark                                           (SIZE)  (seed)  Mode  Cnt     Score     Error  Units
VectorReduction2.NoSuperword.longMaxBig               2048       0  avgt    3  3218.615 ±  32.983  ns/op
VectorReduction2.NoSuperword.longMaxDotProduct        2048       0  avgt    3  2453.535 ±  34.069  ns/op
VectorReduction2.NoSuperword.longMaxSimple            2048       0  avgt    3  2162.658 ±   0.792  ns/op
VectorReduction2.NoSuperword.longMinBig               2048       0  avgt    3  3400.878 ± 100.669  ns/op
VectorReduction2.NoSuperword.longMinDotProduct        2048       0  avgt    3  2423.487 ±   2.783  ns/op
VectorReduction2.NoSuperword.longMinSimple            2048       0  avgt    3  2170.823 ±   7.199  ns/op

Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  1015.845 ± 1.364  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  1016.091 ± 0.479  ops/ms
MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4   475.024 ± 0.904  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4   480.322 ± 1.493  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4   475.868 ± 1.941  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4   498.872 ± 0.522  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4   499.268 ± 0.516  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4   499.222 ± 0.466  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4   407.063 ± 0.106  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4   407.018 ± 0.314  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4   407.024 ± 0.201  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4   416.266 ± 0.099  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4   416.315 ± 0.200  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4   416.214 ± 0.678  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4   462.110 ± 0.683  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4   462.084 ± 0.128  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4   462.095 ± 0.144  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4   461.138 ± 0.583  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4   460.996 ± 0.618  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4   461.160 ± 0.113  ops/ms
#+end_src
* 28.5.25
** x64
*** Branch Always
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  810.317 ± 19.651  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  812.737 ± 10.827  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  478.382 ±  1.741  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  478.321 ±  3.565  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  479.080 ±  0.669  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  489.841 ±  8.777  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  489.451 ±  0.250  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  497.766 ±  1.781  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  547.915 ± 10.069  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  465.298 ±  7.290  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  454.280 ±  1.682  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  545.224 ±  2.922  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  469.390 ±  8.481  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  454.493 ±  2.126  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  672.689 ±  4.652  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  526.829 ±  0.175  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  440.721 ±  4.548  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  670.943 ±  5.984  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  531.528 ±  7.258  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  444.621 ±  9.428  ops/ms
#+end_src
*** Branch Never
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  611.909 ±  4.630  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  606.295 ±  5.306  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  477.903 ±  6.093  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  470.040 ±  0.250  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  452.954 ±  0.647  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  491.931 ±  1.390  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  468.428 ± 10.378  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  452.678 ±  0.682  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  547.431 ±  7.687  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  815.973 ±  1.070  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  806.168 ±  1.344  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  545.896 ± 12.850  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  806.190 ±  2.317  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  806.394 ±  0.793  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  657.436 ± 11.986  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  851.211 ±  3.109  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  804.118 ±  0.368  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  663.646 ±  9.127  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  856.981 ± 28.753  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  803.959 ±  0.313  ops/ms
#+end_src
*** Base
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  1015.866 ± 0.176  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  1015.821 ± 0.101  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4   472.297 ± 0.506  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4   483.762 ± 1.793  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4   475.726 ± 1.771  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4   492.836 ± 0.608  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4   498.717 ± 0.350  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4   498.592 ± 0.723  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4   407.045 ± 0.033  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4   406.975 ± 0.653  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4   406.956 ± 0.119  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4   416.190 ± 0.521  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4   416.239 ± 0.180  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4   416.207 ± 0.157  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4   462.053 ± 0.448  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4   462.013 ± 0.999  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4   462.043 ± 0.182  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4   461.122 ± 0.083  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4   461.028 ± 0.862  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4   461.071 ± 0.234  ops/ms
#+end_src
** CANCELLED aarch64
Not recorded due to WIP.
* 27.5.25
** max x64
Virtually all long reduction benchmarks in MinMaxVector improve performance with any % branch data distribution compared to conditional moves.
At 80% and 100% not jumping in the branch has a positive effect performance wise.
*** branch always
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  544.485 ±  3.167  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  453.718 ±  8.108  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  455.514 ±  0.568  ops/ms
MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  674.529 ± 10.887  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  524.918 ±  3.587  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  443.354 ±  0.682  ops/ms
#+end_src
*** branch never
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  550.314 ±  7.797  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  798.261 ± 21.014  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  806.434 ±  0.369  ops/ms
MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  664.959 ±  0.414  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  856.510 ±  1.719  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  803.530 ±  0.669  ops/ms
#+end_src
*** base cmov
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  406.990 ± 0.041  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  407.015 ± 0.517  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  406.988 ± 0.159  ops/ms
MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  459.669 ± 0.229  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  461.972 ± 1.972  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  462.036 ± 0.307  ops/ms
#+end_src
** max aarch64
All long reduction benchmarks in MinMaxVector improve performance with any % branch data distribution compared to conditional moves.
At 80% and 100% not jumping in the branch has a positive effect performance wise.
*** branch always
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  1352.907 ± 471.995  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  1371.852 ±  25.425  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  2207.767 ± 535.992  ops/ms

MinMaxVector.longReductionMultiplyMax                false             50    2048  thrpt    4  1433.367 ± 280.042  ops/ms
MinMaxVector.longReductionMultiplyMax                false             80    2048  thrpt    4  1299.261 ±  70.791  ops/ms
MinMaxVector.longReductionMultiplyMax                false            100    2048  thrpt    4  2224.932 ± 370.813  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  1854.791 ± 537.771  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  1589.238 ±  68.795  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  2606.079 ± 380.352  ops/ms

MinMaxVector.longReductionSimpleMax                  false             50    2048  thrpt    4  1776.709 ± 418.660  ops/ms
MinMaxVector.longReductionSimpleMax                  false             80    2048  thrpt    4  1619.377 ± 117.706  ops/ms
MinMaxVector.longReductionSimpleMax                  false            100    2048  thrpt    4  2771.337 ± 832.902  ops/ms
#+end_src
*** branch never
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  1252.789 ± 683.299  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  2218.447 ± 621.461  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  2852.912 ±  14.451  ops/ms

MinMaxVector.longReductionMultiplyMax                false             50    2048  thrpt    4  1320.753 ± 265.500  ops/ms
MinMaxVector.longReductionMultiplyMax                false             80    2048  thrpt    4  2116.813 ± 434.699  ops/ms
MinMaxVector.longReductionMultiplyMax                false            100    2048  thrpt    4  2843.011 ±  52.647  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  1755.199 ± 644.619  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  2786.104 ± 295.432  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  3665.906 ±  39.052  ops/ms

MinMaxVector.longReductionSimpleMax                  false             50    2048  thrpt    4  1723.100 ± 234.202  ops/ms
MinMaxVector.longReductionSimpleMax                  false             80    2048  thrpt    4  2730.444 ± 499.676  ops/ms
MinMaxVector.longReductionSimpleMax                  false            100    2048  thrpt    4  3672.656 ±  16.798  ops/ms
#+end_src
*** base cmov
Default implementation is assuming ~includeEquals=true~
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4   979.671 ±  9.396  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  1010.492 ± 73.768  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1032.041 ± 50.020  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  1080.417 ± 24.963  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  1074.590 ± 43.227  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1083.453 ± 44.043  ops/ms
#+end_src
* 26.5.25
** x64
*** branch always
#+begin_src asm
r10            0x2c                44
r11            0x2c                44

=> 0x00007fffe8ad22db:   cmpq            %r11, %r10
   0x00007fffe8ad22de:   jge             0x7fffe8ad22e3
   0x00007fffe8ad22e0:   movq            %r11, %r10
   0x00007fffe8ad22e3:   cmpq            %r10, %rdx

=> 0x00007fffe8ad22de:   jge             0x7fffe8ad22e3                                                                                               |  }
   0x00007fffe8ad22e0:   movq            %r11, %r10
   0x00007fffe8ad22e3:   cmpq            %r10, %rdx

rdx            0x6e                110
r10            0x2c                44

=> 0x00007fffe8ad22e3:   cmpq            %r10,%rdx
   0x00007fffe8ad22e6:   jge             0x7fffe8ad22eb
   0x00007fffe8ad22e8:   movq            %r10, %rdx
   0x00007fffe8ad22eb:   cmpq            %rdx, %r14

=> 0x00007fffe8ad22e6:   jge             0x7fffe8ad22eb
   0x00007fffe8ad22e8:   movq            %r10, %rdx
   0x00007fffe8ad22eb:   cmpq            %rdx, %r14

rdx            0x6e                110
r14            0x8f                143

=> 0x00007fffe8ad22eb:   cmpq            %rdx, %r14
#+end_src
** aarch64
*** branch never
#+begin_src java
@Benchmark
public long longReductionMultiplyMax(LoopState state) {
    long result = 0;
    for (int i = 0; i < state.size; i++) {
        final long v = 11 * state.maxLongA[i];
        result = Math.max(v, result);
    }
    return result;
}
#+end_src

#+begin_src asm
// Branch never with GT
instruct maxL_reg_reg_gt(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(UseNewCode);
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg)); // src1 (b) > src2 (a) ?
    __ br(Assembler::GT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
        x1 = 22276352384
        x5 = 99
       x12 = 99

->  0x10d81af2c: mov    x1, x5
    0x10d81af30: cmp    x5, x12
    0x10d81af34: b.gt   0x10d81af3c
    0x10d81af38: mov    x1, x12

        x1 = 99
        x5 = 99
       x12 = 99

->  0x10d81af30: cmp    x5, x12
    0x10d81af34: b.gt   0x10d81af3c
    0x10d81af38: mov    x1, x12
    0x10d81af3c: mul    x11, x11, x4

->  0x10d81af34: b.gt   0x10d81af3c
    0x10d81af38: mov    x1, x12
    0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x1

->  0x10d81af38: mov    x1, x12
    0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x1
    0x10d81af44: cmp    x1, x13

        x1 = 99
       x12 = 99
       x13 = 198

->  0x10d81af40: mov    x12, x1
    0x10d81af44: cmp    x1, x13
    0x10d81af48: b.gt   0x10d81af50
    0x10d81af4c: mov    x12, x13

        x1 = 99
       x12 = 99
       x13 = 198

->  0x10d81af44: cmp    x1, x13
    0x10d81af48: b.gt   0x10d81af50
    0x10d81af4c: mov    x12, x13
    0x10d81af50: mov    x13, x12

->  0x10d81af48: b.gt   0x10d81af50
    0x10d81af4c: mov    x12, x13
    0x10d81af50: mov    x13, x12
    0x10d81af54: cmp    x12, x14

->  0x10d81af50: mov    x13, x12
    0x10d81af54: cmp    x12, x14
    0x10d81af58: b.gt   0x10d81af60
    0x10d81af5c: mov    x13, x14

       x12 = 198
       x13 = 198
#+end_src
* 22.5.25
** aarch64
*** branch always
#+begin_src java
@Benchmark
public long longReductionMultiplyMax(LoopState state) {
    long result = 0;
    for (int i = 0; i < state.size; i++) {
        final long v = 11 * state.maxLongA[i];
        result = Math.max(v, result);
    }
    return result;
}
#+end_src

#+begin_src asm
// Branch always with GE
instruct maxL_reg_reg_ge(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(!UseNewCode);
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg)); // src1 (a) >= src2 (b) ?
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
        x1 = 22276352408
        x5 = 44
       x12 = 44

->  0x10d81af2c: mov    x1, x12
    0x10d81af30: cmp    x12, x5
    0x10d81af34: b.ge   0x10d81af3c
    0x10d81af38: mov    x1, x5

        x1 = 44
        x5 = 44
       x12 = 44

->  0x10d81af30: cmp    x12, x5       ;; x12 (44) >= x5 (44) ? true
    0x10d81af34: b.ge   0x10d81af3c
    0x10d81af38: mov    x1, x5
    0x10d81af3c: mul    x11, x11, x4

->  0x10d81af34: b.ge   0x10d81af3c
    0x10d81af38: mov    x1, x5
    0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x13

->  0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x13
    0x10d81af44: cmp    x13, x1
    0x10d81af48: b.ge   0x10d81af50

...

        x1 = 44
       x12 = 44
       x13 = 66

->  0x10d81af40: mov    x12, x13
    0x10d81af44: cmp    x13, x1
    0x10d81af48: b.ge   0x10d81af50
    0x10d81af4c: mov    x12, x1

        x1 = 44
       x12 = 66
       x13 = 66

->  0x10d81af44: cmp    x13, x1      ;; x13 (66) >= x1 (44) ? true
    0x10d81af48: b.ge   0x10d81af50
    0x10d81af4c: mov    x12, x1
    0x10d81af50: mov    x13, x14

->  0x10d81af48: b.ge   0x10d81af50
    0x10d81af4c: mov    x12, x1
    0x10d81af50: mov    x13, x14
    0x10d81af54: cmp    x14, x12

->  0x10d81af50: mov    x13, x14
    0x10d81af54: cmp    x14, x12
    0x10d81af58: b.ge   0x10d81af60
    0x10d81af5c: mov    x13, x12
#+end_src
*** branch always (dubious)
#+begin_src java
@Benchmark
public long longReductionMultiplyMax(LoopState state) {
    long result = 0;
    for (int i = 0; i < state.size; i++) {
        final long v = 11 * state.maxLongA[i];
        result = Math.max(v, result);
    }
    return result;
}
#+end_src
#+begin_src asm
// Branch always
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg)); // src1 (a) >= src2 (b) ?
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
#+begin_src asm
;; Data: [9, 14, ...]
;; src1 = v = 14
;; src2 = result = 9

        x1 = 0x000000052fa0e950
        x5 = 0x0000000000000063 (99)
       x12 = 0x000000000000009a

->  0x10d81b2ac: mov    x1, x5
    0x10d81b2b0: cmp    x5, x12
    0x10d81b2b4: b.ge   0x10d81b2bc
    0x10d81b2b8: mov    x1, x12

(lldb) re r/d

        x1 = 0x0000000000000063 (99)
        x5 = 0x0000000000000063 (99)
       x12 = 0x000000000000009a (154)

        x1 = 99 (9 * 11)
        x5 = 99
       x12 = 154 (14 * 11)

->  0x10d81b2b0: cmp    x5, x12         ;; x5 (99) >= x12 (154) ? false
    0x10d81b2b4: b.ge   0x10d81b2bc
    0x10d81b2b8: mov    x1, x12
    0x10d81b2bc: mul    x11, x11, x4

->  0x10d81b2b4: b.ge   0x10d81b2bc
    0x10d81b2b8: mov    x1, x12
    0x10d81b2bc: mul    x11, x11, x4
    0x10d81b2c0: mov    x12, x1

->  0x10d81b2b8: mov    x1, x12
    0x10d81b2bc: mul    x11, x11, x4
    0x10d81b2c0: mov    x12, x1
    0x10d81b2c4: cmp    x1, x13

        x1 = 154
        x5 = 99
       x12 = 154
#+end_src
* 21.5.25
** aarch64 ge oddity
#+begin_src java
public static int max(int a, int b) {
    return (a >= b) ? a : b;
}
#+end_src

#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg)); // src1 (a) >= src2 (b) ?
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
p
#+begin_src bash
a = 11
b = 22
11 >= 22 ? 11 (a) : 22 (b);
# false, return 22 (b)
#+end_src

#+begin_src bash
a = 33
b = 33
33 >= 33 ? 33 (a) : 33 (b);
# true, return 33 (a)
#+end_src

#+begin_src bash
# Warmup Iteration   1: [6, 6, 6, 14, 21, 28, 28, 32, 34, 40, 45, 45, 52, 56, 57, 64, 70, 76, 78, 83, 86, 91, 96, 97, 97, 102, 106, 108, 108, 109, 111, 116, 124, 125, 133, 138, 139, 144, 145, 151, 151, 156, 160, 168, 168, 174, 183, 189, 196, 201, 208, 214, 218, 218, 219, 222, 230, 230, 234, 243, 243, 245, 245, 247, 248, 249, 253, 262, 266, 267, 274, 281, 282, 288, 297, 300, 300, 308, 310, 312, 313, 322, 328, 329, 337, 345, 351, 353, 360, 366, 370, 370, 374, 383, 385, 393, 393, 398, 399, 402, 409, 412, 416, 422, 424, 428, 433, 436, 443, 451, 460, 461, 470, 478, 480, 489, 498, 506, 512, 515, 515, 517, 520, 521, 530, 539, 548, 548, 549, 555, 557, 562, 564, 567, 570, 574, 583, 585, 589, 592, 598, 603, 604, 607, 615, 624, 626, 626, 628, 630, 636, 636, 643, 648, 654, 659, 660, 660, 667, 667, 675, 677, 677, 677, 681, 687, 688, 690, 690, 695, 697, 705, 713, 722, 723, 729, 736, 737, 743, 745, 747, 754, 762, 767, 776, 779, 780, 787, 795, 801, 803, 810, 818, 822, 830, 835, 843, 852, 860, 860, 869, 875, 876, 882, 887, 893, 899, 900, 908, 912, 915, 922, 925, 927, 927, 933, 941, 943, 944, 952, 959, 962, 964, 965, 969, 972, 978, 981, 983, 989, 997, 1003, 1009, 1011, 1020, 1024, 1028, 1031, 1033, 1041, 1047, 1050, 1057, 1063, 1066, 1072, 1075, 1081, 1086, 1091, 1095, 1099, 1108, 1115, 1117, 1118, 1125, 1127, 1134, 1138, 1145, 1153, 1159, 1159, 1160, 1163, 1166, 1166, 1167, 1175, 1175, 1180, 1187, 1193, 1198, 1202, 1211, 1216, 1223, 1230, 1236, 1243, 1249, 1253, 1253, 1258, 1266, 1273, 1275, 1280, 1285, 1286, 1295, 1301, 1307, 1307, 1309, 1310, 1315, 1322, 1324, 1326, 1327, 1334, 1338, 1340, 1349, 1349, 1351, 1358, 1363, 1363, 1366, 1373, 1380, 1385, 1394, 1396, 1400, 1408, 1412, 1412, 1412, 1419, 1419, 1420, 1423, 1432, 1440, 1442, 1449, 1454, 1454, 1457, 1461, 1463, 1464, 1468, 1468, 1471, 1478, 1480, 1480, 1487, 1493, 1498, 1501, 1506, 1507, 1511, 1517, 1522, 1529, 1534, 1541, 1544, 1546, 1546, 1552, 1555, 1562, 1566, 1569, 1573, 1573, 1575, 1579, 1588, 1593, 1599, 1604, 1607, 1614, 1619, 1622, 1625, 1626, 1626, 1634, 1642, 1651, 1655, 1656, 1665, 1668, 1672, 1675, 1680, 1682, 1684, 1684, 1687, 1692, 1697, 1699, 1701, 1704, 1708, 1708, 1710, 1716, 1719, 1722, 1731, 1739, 1742, 1750, 1758, 1765, 1766, 1774, 1775, 1780, 1782, 1791, 1796, 1805, 1814, 1817, 1820, 1825, 1834, 1840, 1842, 1849, 1857, 1858, 1858, 1867, 1876, 1882, 1887, 1894, 1896, 1902, 1903, 1910, 1918, 1922, 1923, 1923, 1925, 1926, 1930, 1931, 1931, 1932, 1939, 1943, 1951, 1952, 1954, 1962, 1969, 1972, 1975, 1980, 1989, 1992, 1993, 1996, 2002, 2003, 2003, 2004, 2008, 2015, 2023, 2026, 2034, 2042, 2042, 2050, 2059, 2067, 2073, 2080, 2086, 2092, 2092, 2096, 2103, 2109, 2118, 2120, 2128, 2129, 2135, 2140, 2140, 2143, 2146, 2149, 2156, 2156, 2162, 2171, 2173, 2181, 2190, 2195, 2200, 2205, 2212, 2220, 2225, 2232, 2241, 2249, 2253, 2262, 2262, 2265, 2271, 2274, 2282, 2282, 2282, 2289, 2293, 2298, 2299, 2301, 2305, 2311, 2318, 2325, 2328, 2331, 2339, 2342, 2345, 2349, 2349, 2350, 2352, 2360, 2367, 2372, 2372, 2375, 2383, 2392, 2399, 2402, 2410, 2419, 2419, 2423, 2430, 2434, 2435, 2438, 2447, 2456, 2460, 2466, 2470, 2475, 2475, 2479, 2486, 2487, 2489, 2498, 2501, 2507, 2513, 2513, 2518, 2526, 2530, 2535, 2540, 2548, 2550, 2551, 2555, 2564, 2571, 2574, 2575, 2577, 2584, 2590, 2592, 2597, 2606, 2614, 2614, 2621, 2622, 2623, 2628, 2635, 2640, 2648, 2649, 2649, 2656, 2662, 2667, 2667, 2671, 2671, 2679, 2685, 2693, 2700, 2701, 2702, 2710, 2711, 2717, 2722, 2725, 2733, 2734, 2743, 2746, 2749, 2749, 2757, 2758, 2758, 2766, 2771, 2773, 2773, 2782, 2791, 2796, 2798, 2801, 2803, 2803, 2804, 2808, 2808, 2817, 2823, 2824, 2831, 2838, 2838, 2839, 2843, 2847, 2851, 2856, 2857, 2860, 2860, 2865, 2869, 2872, 2877, 2878, 2878, 2884, 2888, 2893, 2899, 2903, 2908, 2916, 2916, 2916, 2922, 2929, 2934, 2937, 2946, 2953, 2961, 2967, 2968, 2977, 2980, 2989, 2989, 2994, 3001, 3010, 3017, 3023, 3031, 3040, 3040, 3046, 3054, 3059, 3060, 3067, 3072, 3076, 3076, 3078, 3083, 3083, 3092, 3093, 3095, 3102, 3108, 3114, 3122, 3124, 3125, 3125, 3134, 3141, 3143, 3151, 3160, 3166, 3175, 3178, 3187, 3188, 3189, 3198, 3203, 3210, 3217, 3218, 3225, 3225, 3233, 3238, 3246, 3247, 3248, 3249, 3258, 3263, 3268, 3274, 3274, 3276, 3280, 3284, 3292, 3296, 3298, 3300, 3306, 3311, 3312, 3318, 3325, 3332, 3335, 3343, 3351, 3352, 3360, 3367, 3370, 3378, 3384, 3385, 3391, 3392, 3393, 3398, 3407, 3409, 3415, 3417, 3424, 3431, 3435, 3440, 3448, 3454, 3463, 3468, 3468, 3477, 3485, 3490, 3495, 3502, 3503, 3511, 3518, 3518, 3519, 3520, 3522, 3522, 3531, 3534, 3537, 3537, 3545, 3547, 3556, 3562, 3566, 3575, 3578, 3585, 3591, 3591, 3593, 3597, 3604, 3613, 3618, 3627, 3629, 3630, 3637, 3637, 3638, 3645, 3648, 3656, 3664, 3666, 3671, 3676, 3684, 3686, 3687, 3694, 3701, 3702, 3702, 3703, 3710, 3712, 3712, 3718, 3723, 3729, 3737, 3746, 3746, 3754, 3761, 3761, 3769, 3775, 3776, 3779, 3787, 3792, 3792, 3800, 3802, 3809, 3818, 3820, 3821, 3828, 3832, 3834, 3840, 3847, 3851, 3854, 3858, 3864, 3867, 3867, 3873, 3876, 3879, 3879, 3886, 3889, 3892, 3899, 3900, 3909, 3913, 3920, 3923, 3928, 3933, 3935, 3938, 3947, 3956, 3956, 3963, 3970, 3973, 3982, 3985, 3993, 4000, 4004, 4006, 4009, 4009, 4017, 4020, 4026, 4032, 4034, 4037, 4037, 4040, 4049, 4056, 4060, 4061, 4065, 4074, 4079, 4084, 4086, 4092, 4096, 4102, 4111, 4120, 4124, 4124, 4131, 4135, 4140, 4140, 4143, 4146, 4155, 4164, 4167, 4172, 4173, 4180, 4185, 4190, 4199, 4201, 4208, 4210, 4211, 4216, 4217, 4217, 4226, 4232, 4237, 4243, 4244, 4253, 4259, 4268, 4277, 4280, 4289, 4296, 4297, 4301, 4305, 4308, 4312, 4315, 4324, 4324, 4327, 4332, 4337, 4346, 4353, 4356, 4361, 4368, 4369, 4375, 4381, 4389, 4398, 4407, 4408, 4412, 4414, 4415, 4416, 4423, 4425, 4431, 4433, 4435, 4443, 4443, 4447, 4452, 4455, 4464, 4466, 4467, 4475, 4478, 4487, 4496, 4503, 4504, 4512, 4514, 4517, 4522, 4527, 4528, 4534, 4543, 4550, 4550, 4553, 4556, 4560, 4566, 4574, 4581, 4589, 4597, 4605, 4610, 4619, 4620, 4621, 4624, 4624, 4626, 4626, 4634, 4636, 4638, 4645, 4653, 4658, 4666, 4674, 4674, 4680, 4687, 4692, 4699, 4703, 4711, 4720, 4722, 4724, 4726, 4734, 4741, 4743, 4748, 4757, 4764, 4766, 4774, 4783, 4792, 4792, 4794, 4799, 4807, 4811, 4815, 4821, 4828, 4837, 4838, 4847, 4854, 4858, 4865, 4865, 4869, 4878, 4886, 4895, 4898, 4903, 4910, 4915, 4918, 4920, 4920, 4920, 4922, 4929, 4936, 4944, 4949, 4951, 4960, 4963, 4968, 4976, 4980, 4989, 4995, 5004, 5013, 5018, 5022, 5029, 5034, 5039, 5048, 5050, 5056, 5062, 5062, 5069, 5074, 5076, 5077, 5084, 5086, 5088, 5093, 5097, 5099, 5100, 5109, 5109, 5112, 5118, 5126, 5130, 5139, 5145, 5150, 5153, 5160, 5166, 5172, 5179, 5186, 5194, 5197, 5203, 5204, 5210, 5211, 5214, 5216, 5225, 5229, 5230, 5237, 5246, 5253, 5257, 5263, 5263, 5268, 5272, 5278, 5286, 5288, 5295, 5304, 5311, 5314, 5315, 5320, 5321, 5322, 5331, 5334, 5338, 5345, 5354, 5358, 5364, 5366, 5372, 5380, 5382, 5383, 5383, 5387, 5395, 5395, 5400, 5404, 5405, 5413, 5422, 5430, 5438, 5444, 5453, 5456, 5465, 5474, 5479, 5488, 5497, 5501, 5501, 5502, 5503, 5505, 5506, 5508, 5512, 5520, 5524, 5525, 5525, 5525, 5534, 5541, 5549, 5549, 5558, 5560, 5567, 5570, 5577, 5585, 5589, 5593, 5602, 5605, 5605, 5611, 5611, 5616, 5625, 5629, 5632, 5640, 5646, 5653, 5659, 5668, 5674, 5682, 5690, 5692, 5692, 5695, 5702, 5711, 5716, 5723, 5728, 5731, 5731, 5733, 5741, 5741, 5749, 5758, 5764, 5769, 5769, 5775, 5779, 5787, 5793, 5799, 5800, 5803, 5810, 5810, 5819, 5827, 5832, 5833, 5836, 5844, 5848, 5853, 5856, 5861, 5861, 5865, 5867, 5870, 5873, 5874, 5880, 5883, 5890, 5895, 5897, 5906, 5912, 5917, 5923, 5926, 5930, 5937, 5944, 5953, 5955, 5964, 5971, 5973, 5980, 5989, 5991, 5998, 6000, 6003, 6007, 6014, 6019, 6027, 6029, 6035, 6042, 6043, 6047, 6048, 6054, 6055, 6055, 6060, 6060, 6065, 6071, 6074, 6074, 6083, 6088, 6093, 6099, 6102, 6105, 6113, 6120, 6123, 6127, 6128, 6130, 6130, 6138, 6146, 6154, 6161, 6170, 6176, 6176, 6184, 6191, 6196, 6197, 6203, 6210, 6212, 6219, 6223, 6230, 6236, 6245, 6247, 6250, 6252, 6261, 6265, 6267, 6271, 6273, 6278, 6278, 6282, 6284, 6288, 6294, 6301, 6305, 6306, 6309, 6315, 6318, 6323, 6327, 6333, 6333, 6341, 6346, 6354, 6363, 6372, 6375, 6383, 6391, 6400, 6407, 6410, 6418, 6419, 6420, 6423, 6432, 6441, 6449, 6453, 6457, 6461, 6469, 6471, 6473, 6482, 6489, 6489, 6497, 6499, 6504, 6504, 6508, 6517, 6523, 6523, 6527, 6535, 6541, 6545, 6553, 6562, 6566, 6566, 6570, 6570, 6573, 6575, 6583, 6592, 6597, 6601, 6602, 6606, 6614, 6615, 6615, 6624, 6633, 6639, 6646, 6655, 6655, 6664, 6666, 6672, 6676, 6678, 6683, 6690, 6698, 6701, 6703, 6703, 6711, 6719, 6728, 6731, 6736, 6741, 6741, 6742, 6748, 6750, 6759, 6760, 6762, 6765, 6768, 6774, 6782, 6783, 6784, 6793, 6793, 6800, 6809, 6812, 6814, 6819, 6826, 6830, 6833, 6837, 6844, 6851, 6860, 6869, 6872, 6876, 6880, 6880, 6884, 6886, 6891, 6891, 6896, 6898, 6904, 6913, 6916, 6918, 6921, 6926, 6932, 6938, 6942, 6951, 6960, 6968, 6972, 6973, 6973, 6980, 6983, 6990, 6995, 7003, 7004, 7011, 7015, 7016, 7019, 7020, 7021, 7024, 7026, 7032, 7036, 7043, 7045, 7051, 7051, 7057, 7065, 7068, 7072, 7078, 7080, 7083, 7090, 7093, 7098, 7102, 7104, 7110, 7112, 7121, 7130, 7135, 7137, 7143, 7152, 7157, 7166, 7170, 7179, 7187, 7188, 7190, 7194, 7194, 7194, 7194, 7198, 7204, 7207, 7208, 7209, 7215, 7218, 7218, 7223, 7227, 7230, 7230, 7234, 7234, 7243, 7247, 7250, 7256, 7257, 7259, 7265, 7270, 7275, 7283, 7285, 7294, 7300, 7309, 7316, 7321, 7323, 7330, 7337, 7337, 7339, 7346, 7347, 7348, 7356, 7363, 7366, 7371, 7379, 7379, 7386, 7395, 7398, 7400, 7405, 7413, 7420, 7426, 7433, 7436, 7444, 7452, 7461, 7469, 7470, 7479, 7487, 7494, 7502, 7504, 7511, 7519, 7524, 7528, 7529, 7537, 7546, 7553, 7558, 7564, 7566, 7572, 7573, 7582, 7589, 7593, 7598, 7607, 7612, 7613, 7621, 7630, 7638, 7639, 7643, 7646, 7652, 7658, 7658, 7667, 7668, 7673, 7681, 7690, 7694, 7699, 7706, 7715, 7724, 7731, 7731, 7733, 7735, 7738, 7743, 7747, 7755, 7759, 7764, 7769, 7769, 7776, 7782, 7787, 7790, 7792, 7792, 7796, 7803, 7811, 7819, 7826, 7835, 7841, 7843, 7848, 7852, 7855, 7855, 7860, 7861, 7861, 7866, 7867, 7869, 7878, 7884, 7892, 7900, 7908, 7917, 7925, 7932, 7934, 7941, 7943, 7949, 7958, 7963, 7967, 7974, 7979, 7985, 7993, 8002, 8011, 8017, 8022, 8027, 8034, 8036, 8037, 8041, 8044, 8051, 8053, 8053, 8053, 8056, 8056, 8059, 8060, 8064, 8068, 8076, 8078, 8078, 8084, 8090, 8099, 8104, 8110, 8113, 8120, 8123, 8132, 8140, 8141, 8145, 8151, 8156, 8160, 8160, 8166, 8168, 8177, 8179, 8185, 8191, 8199, 8206, 8211, 8216, 8225, 8232, 8237, 8246, 8252, 8260, 8263, 8269, 8273, 8277, 8282, 8283, 8287, 8291, 8298, 8304, 8308, 8311, 8320, 8322, 8330, 8332, 8335, 8340, 8343, 8348, 8356, 8360, 8367, 8373, 8375, 8383, 8388, 8389, 8398, 8405, 8410, 8413, 8418, 8418, 8424, 8433, 8438, 8445, 8447, 8452, 8461, 8461, 8469, 8471, 8471, 8477, 8486, 8495, 8498, 8500, 8507, 8509, 8516, 8521, 8530, 8532, 8541, 8550, 8557, 8561, 8561, 8566, 8574, 8578, 8580, 8583, 8587, 8590, 8592, 8592, 8601, 8604, 8610, 8613, 8619, 8620, 8627, 8632, 8639, 8643, 8643, 8644, 8650, 8657, 8663, 8663, 8663, 8670, 8677, 8685, 8686, 8695, 8701, 8704, 8710, 8715, 8715, 8717, 8720, 8728, 8734, 8735, 8740, 8745, 8749, 8754, 8754, 8756, 8763, 8772, 8777, 8786, 8786, 8795, 8800, 8802, 8811, 8818, 8822, 8826, 8835, 8839, 8846, 8847, 8848, 8856, 8862, 8864, 8870, 8870, 8878, 8882, 8886, 8895, 8896, 8898, 8905, 8910, 8917, 8926, 8935, 8937, 8937, 8942, 8944, 8948, 8955, 8959, 8967, 8967, 8969, 8973, 8979, 8984, 8991, 9000, 9000, 9009, 9017, 9019, 9019, 9027, 9035, 9035, 9044, 9053, 9061, 9067, 9072, 9079, 9080, 9085, 9092, 9095, 9096, 9104, 9105, 9106, 9109, 9110, 9117, 9118, 9123, 9129, 9133, 9142, 9148, 9156, 9157, 9161, 9161, 9164, 9167, 9172, 9177, 9186, 9195, 9202, 9203, 9205, 9207, 9211, 9212, 9219, 9225, 9225, 9227, 9231, 9236, 9237, 9244, 9244, 9246, 9246, 9253, 9261, 9264, 9271, 9271, 9273, 9280, 9286, 9290, 9296, 9302, 9304, 9309, 9317, 9325, 9327, 9328, 9331, 9338, 9338, 9344, 9349, 9351, 9360, 9364, 9372, 9375, 9378, 9383, 9389, 9390, 9394, 9398, 9403, 9409, 9417, 9423, 9431, 9432, 9436, 9439, 9447, 9450, 9453, 9462, 9465, 9469, 9475, 9478, 9480, 9487, 9494, 9499, 9508, 9515, 9519]

        x5 = 0x0000000000000042 (66 = 6 * 11)
       x12 = 0x0000000000000042 (66 = 6 * 11)

    0x10d70666c: mov	x1, x12
->  0x10d706670: cmp    x12, x5
    0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5

->  0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5
    0x10d70667c: mul    x11, x11, x4

->  0x10d70667c: mul    x11, x11, x4

...
       x12 = 0x0000000000000042 (66 = 6 * 11)
       x14 = 0x000000000000009a (154 = 14 * 11)

->  0x10d706694: cmp    x14, x12
    0x10d706698: b.ge   0x10d7066a0
    0x10d70669c: mov    x13, x12

->  0x10d706698: b.ge   0x10d7066a0
    0x10d70669c: mov    x13, x12
    0x10d7066a0: add    w16, w16, #0x4

->  0x10d7066a0: add    w16, w16, #0x4
#+end_src

#+begin_src asm
# Warmup Iteration   1: [6, 6, 6, 14, 21, 28, ...]

        x1 = 0x0000000000000042 (66)
        x5 = 0x00000000000000e7 (231 = 21)
       x12 = 0x0000000000000134 (308 = 28 * 11)

->  0x10d70666c: mov    x1, x12
    0x10d706670: cmp    x12, x5
    0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5

        x1 = 0x0000000000000134 (308 = 28 * 11) updated by `mov    x1, x12`
        x5 = 0x00000000000000e7 (231 = 21)
       x12 = 0x0000000000000134 (308 = 28 * 11)

->  0x10d706670: cmp    x12, x5
    0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5
    0x10d70667c: mul    x11, x11, x4

->  0x10d706674: b.ge   0x10d70667c   ;; x12 >= x5 ? true so jump
    0x10d706678: mov    x1, x5
    0x10d70667c: mul    x11, x11, x4
    0x10d706680: mov    x12, x13

->  0x10d70667c: mul    x11, x11, x4

#+end_src
* 20.5.25
** cmov vs ge maxL x64
*** cmov asm
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4  407.010 ± 0.234  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  407.059 ± 0.265  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  407.024 ± 0.206  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  462.064 ± 0.195  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  462.055 ± 0.090  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  459.613 ± 0.047  ops/ms
#+end_src
*** ge asm
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4  526.915 ±  2.700  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  441.186 ±  3.792  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  406.867 ±  0.416  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  654.393 ± 10.653  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  768.750 ± 24.447  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  756.554 ± 30.098  ops/ms
#+end_src
* 19.5.25
** cmov vs ge maxL aarch64
*** cmov asm
#+begin_src
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4   993.081 ± 69.733  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  1062.870 ± 41.268  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1087.507 ± 23.149  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  1096.705 ± 73.282  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  1090.925 ± 46.719  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1095.871 ± 28.535  ops/ms
#+end_src
*** ge asm
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score      Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4  1108.687 ±  656.966  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  1356.974 ±   59.563  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2273.733 ± 1105.439  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  1850.653 ±  597.958  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  2236.841 ±  248.953  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3665.151 ±  136.075  ops/ms
#+end_src
** lt CondBranch
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score    Error     Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    4   1446.449 ± 47.243    ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC               100    2048  thrpt           0.033               #/op
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt           0.034               #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt          ≈ 10⁻⁵           miss/brs
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt       11983.805               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt        2560.708               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt           0.214             #/insn
#+end_src
** ge CondBranch
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score    Error     Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    4   2354.700 ± 69.609    ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC               100    2048  thrpt           1.001               #/op
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt           1.002               #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt          ≈ 10⁻³           miss/brs
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt       11822.844               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt        2568.671               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt           0.217             #/insn
#+end_src
* 14.5.25
** linux/aarch64
*** ge probabilities
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax             50    2048  thrpt    8  1147.000 ±  98.397  ops/ms
MinMaxVector.longReductionMultiplyMax             80    2048  thrpt    8  1267.215 ±  74.334  ops/ms
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2327.224 ± 191.344  ops/ms
#+end_src
**** asm
*** ge perfnorm branch-misses/br_mis_pred,inst_retired
#+begin_src bash
Benchmark                                            (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                          100    2048  thrpt    4    268.964 ± 44.313     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                      100    2048  thrpt           0.533           clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                      100    2048  thrpt           1.875           insns/clk
MinMaxVector.longReductionMultiplyMax:br_mis_pred              100    2048  thrpt           1.182                #/op
MinMaxVector.longReductionMultiplyMax:branch-misses            100    2048  thrpt           1.182                #/op
MinMaxVector.longReductionMultiplyMax:cycles                   100    2048  thrpt        6334.979                #/op
MinMaxVector.longReductionMultiplyMax:inst_retired             100    2048  thrpt       11875.027                #/op
MinMaxVector.longReductionMultiplyMax:instructions             100    2048  thrpt       11875.025                #/op
#+end_src
*** lt perfnorm branch-misses/br_mis_pred,inst_retired
#+begin_src bash
Benchmark                                            (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                          100    2048  thrpt    4    141.539 ± 24.556     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                      100    2048  thrpt           0.991           clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                      100    2048  thrpt           1.009           insns/clk
MinMaxVector.longReductionMultiplyMax:br_mis_pred              100    2048  thrpt         222.361                #/op
MinMaxVector.longReductionMultiplyMax:branch-misses            100    2048  thrpt         222.361                #/op
MinMaxVector.longReductionMultiplyMax:cycles                   100    2048  thrpt       12038.018                #/op
MinMaxVector.longReductionMultiplyMax:inst_retired             100    2048  thrpt       12144.339                #/op
MinMaxVector.longReductionMultiplyMax:instructions             100    2048  thrpt       12144.342                #/op
#+end_src
*** ge llvm-mca bottleneck
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca --bottleneck-analysis ge-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


No resource or data dependency bottlenecks discovered.


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x6, x5
 1      1     1.00                        b.ge	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x21, x23
 1      1     1.00                        b.ge	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x22, x5
 1      1     1.00                        b.ge	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x4, x6
 1      1     1.00                        b.ge	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x5
1.00    -      -      -      -      -      -      -     b.ge	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x21, x23
1.00    -      -      -      -      -      -      -     b.ge	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x22, x5
1.00    -      -      -      -      -      -      -     b.ge	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x4, x6
1.00    -      -      -      -      -      -      -     b.ge	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** lt llvm-mca bottleneck
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca --bottleneck-analysis lt-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


No resource or data dependency bottlenecks discovered.


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x5, x6
 1      1     1.00                        b.lt	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x23, x21
 1      1     1.00                        b.lt	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x5, x22
 1      1     1.00                        b.lt	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x6, x4
 1      1     1.00                        b.lt	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x6
1.00    -      -      -      -      -      -      -     b.lt	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x23, x21
1.00    -      -      -      -      -      -      -     b.lt	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x22
1.00    -      -      -      -      -      -      -     b.lt	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x4
1.00    -      -      -      -      -      -      -     b.lt	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** ge llvm-mca
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca ge-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x6, x5
 1      1     1.00                        b.ge	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x21, x23
 1      1     1.00                        b.ge	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x22, x5
 1      1     1.00                        b.ge	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x4, x6
 1      1     1.00                        b.ge	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x5
1.00    -      -      -      -      -      -      -     b.ge	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x21, x23
1.00    -      -      -      -      -      -      -     b.ge	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x22, x5
1.00    -      -      -      -      -      -      -     b.ge	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x4, x6
1.00    -      -      -      -      -      -      -     b.ge	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** lt llvm-mca
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca lt-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x5, x6
 1      1     1.00                        b.lt	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x23, x21
 1      1     1.00                        b.lt	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x5, x22
 1      1     1.00                        b.lt	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x6, x4
 1      1     1.00                        b.lt	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x6
1.00    -      -      -      -      -      -      -     b.lt	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x23, x21
1.00    -      -      -      -      -      -      -     b.lt	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x22
1.00    -      -      -      -      -      -      -     b.lt	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x4
1.00    -      -      -      -      -      -      -     b.lt	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** ge assembly
#+begin_src asm
   add	x4, x7, w11, sxtw #3
   ldp		x6, x21, [x4, #0x10]
   ldr		x22, [x4, #0x20]
   mul		x6, x6, x0
   ldr		x4, [x4, #0x28]
   mul		x21, x21, x0
   mul		x22, x22, x0
   mov		x23, x6
   cmp		x6, x5
   b.ge	b1
   mov		x23, x5
b1:
   mul	x4, x4, x0
   mov		x5, x21
   cmp		x21, x23
   b.ge	b2
   mov		x5, x23
b2:
   mov	x6, x22
   cmp		x22, x5
   b.ge	b3
   mov		x6, x5
b3:
   add	w11, w11, #4
   mov		x5, x4
   cmp		x4, x6
   b.ge	b4
   mov		x5, x6
b4:
   cmp	w11, w13
   b.lt	#0xffff9caf6ab0
#+end_src
*** lt assembly
#+begin_src asm
   add		x4, x7, w11, sxtw #3
   ldp		x6, x21, [x4, #0x10]
   ldr		x22, [x4, #0x20]
   mul		x6, x6, x0
   ldr		x4, [x4, #0x28]
   mul		x21, x21, x0
   mul		x22, x22, x0
   mov		x23, x6
   cmp		x5, x6
   b.lt		b1
   mov		x23, x5
b1:
   mul		x4, x4, x0
   mov		x5, x21
   cmp		x23, x21
   b.lt		b2
   mov		x5, x23
b2:
   mov		x6, x22
   cmp		x5, x22
   b.lt		b3
   mov		x6, x5
b3:
   add		w11, w11, #4
   mov		x5, x4
   cmp		x6, x4
   b.lt		b4
   mov		x5, x6
b4:
   cmp		w11, w13
   b.lt		#0xffff88af49b0
#+end_src
*** ge perfnorm cycles/instructions
#+begin_src bash
Benchmark                                             (probability)  (size)   Mode  Cnt      Score   Error      Units
MinMaxVector.longReductionMultiplyMax                           100    2048  thrpt    4    271.768 ± 0.251     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                       100    2048  thrpt           0.527          clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                       100    2048  thrpt           1.899          insns/clk
MinMaxVector.longReductionMultiplyMax:cycles:u                  100    2048  thrpt        6232.475               #/op
MinMaxVector.longReductionMultiplyMax:instructions:u            100    2048  thrpt       11836.351               #/op
#+end_src
*** lt perfnorm
#+begin_src bash
Benchmark                                             (probability)  (size)   Mode  Cnt      Score   Error      Units
MinMaxVector.longReductionMultiplyMax                           100    2048  thrpt    4    150.169 ± 4.693     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                       100    2048  thrpt           0.935          clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                       100    2048  thrpt           1.069          insns/clk
MinMaxVector.longReductionMultiplyMax:cycles:u                  100    2048  thrpt       11254.151               #/op
MinMaxVector.longReductionMultiplyMax:instructions:u            100    2048  thrpt       12033.363               #/op
#+end_src
*** ge
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  272.786 ± 3.109  ops/ms
#+end_src
**** asm
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1058

                      0x0000ffff9caf69c4:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 128)
                      0x0000ffff9caf69c8:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 127)
                      0x0000ffff9caf69cc:   ldp		x29, x30, [sp, #0x40]
                      0x0000ffff9caf69d0:   add		sp, sp, #0x50
                      0x0000ffff9caf69d4:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                      0x0000ffff9caf69d8:   cmp		sp, x8
                      0x0000ffff9caf69dc:   b.hi		#0xffff9caf6c14
                      0x0000ffff9caf69e0:   ret
   0.04%   ↗          0x0000ffff9caf69e4:   mov		x5, x13             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                                    ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.01%   │          0x0000ffff9caf69e8:   add		x12, x7, w11, sxtw #3
           │          0x0000ffff9caf69ec:   ldr		x12, [x12, #0x10]
           │          0x0000ffff9caf69f0:   mul		x12, x12, x0
           │          0x0000ffff9caf69f4:   add		w11, w11, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           │                                                                    ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           │                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
           │          0x0000ffff9caf69f8:   mov		x13, x5
   0.03%   │          0x0000ffff9caf69fc:   cmp		x5, x12
          ╭│          0x0000ffff9caf6a00:   b.ge		#0xffff9caf6a08
          ││          0x0000ffff9caf6a04:   mov		x13, x12            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                                    ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ↘│          0x0000ffff9caf6a08:   cmp		w11, w14
           ╰          0x0000ffff9caf6a0c:   b.lt		#0xffff9caf69e4     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.15%              0x0000ffff9caf6a10:   ldarb		w12, [x2]           ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@32 (line 126)
   0.09%              0x0000ffff9caf6a14:   ldr		x14, [x28, #0x30]
                      0x0000ffff9caf6a18:   add		x20, x20, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 r19=Oop }
                                                                                ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                                                                                ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@35 (line 126)
   0.07%              0x0000ffff9caf6a1c:   ldr		wzr, [x14]          ;   {poll}
                      0x0000ffff9caf6a20:   cbnz		w12, #0xffff9caf6998;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@38 (line 127)
   0.00%              0x0000ffff9caf6a24:   ldr		w14, [x16, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@8 (line 284)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a28:   cmp		w14, #0
                      0x0000ffff9caf6a2c:   b.le		#0xffff9caf6b3c     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.01%              0x0000ffff9caf6a30:   ldr		w13, [x16, #0x2c]   ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@18 (line 285)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a34:   ldr		w5, [x13, #0xc]     ; implicit exception: dispatches to 0x0000ffff9caf6b44
                                                                                ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a38:   sxtw		x11, w14
                      0x0000ffff9caf6a3c:   sub		x12, x11, #3
                      0x0000ffff9caf6a40:   mov		x6, x12
   0.02%              0x0000ffff9caf6a44:   cmp		x12, x1
            ╭         0x0000ffff9caf6a48:   b.ge		#0xffff9caf6a50
            │         0x0000ffff9caf6a4c:   mov		x6, x1
            ↘         0x0000ffff9caf6a50:   mov		x7, x13             ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@18 (line 285)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a54:   sxtw		x4, w5
                      0x0000ffff9caf6a58:   sub		x11, x11, #1
                      0x0000ffff9caf6a5c:   mov		w12, w6
   0.01%              0x0000ffff9caf6a60:   cbz		w5, #0xffff9caf6b44
   0.01%              0x0000ffff9caf6a64:   cmp		x11, x4
                      0x0000ffff9caf6a68:   b.hs	#0xffff9caf6b44
   0.03%              0x0000ffff9caf6a6c:   ldr		x11, [x13, #0x10]
                      0x0000ffff9caf6a70:   mul		x11, x11, x0
                      0x0000ffff9caf6a74:   mov		x5, x11
                      0x0000ffff9caf6a78:   cmp		x11, x18
             ╭        0x0000ffff9caf6a7c:   b.ge	#0xffff9caf6a84
             │        0x0000ffff9caf6a80:   mov		x5, x18             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             │                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             │                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.05%     ↘        0x0000ffff9caf6a84:   cmp	w12, #1
                      0x0000ffff9caf6a88:   b.le	#0xffff9caf6b6c
                      0x0000ffff9caf6a8c:   mov		w11, #1
                   ↗  0x0000ffff9caf6a90:   cmp	w12, w11
                   │  0x0000ffff9caf6a94:   sub		w4, w12, w11
                   │  0x0000ffff9caf6a98:   csel	w13, wzr, w4, lt
   0.01%           │  0x0000ffff9caf6a9c:   cmp		w13, #0xfa0
                   │  0x0000ffff9caf6aa0:   csel	w4, w10, w13, hi
                   │  0x0000ffff9caf6aa4:   add		w13, w4, w11
                   │  0x0000ffff9caf6aa8:   nop
   0.04%           │  0x0000ffff9caf6aac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                   │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                  ↗│  0x0000ffff9caf6ab0:   add	x4, x7, w11, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                  ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
                  ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   8.46%          ││  0x0000ffff9caf6ab4:   ldp		x6, x21, [x4, #0x10]
   0.18%          ││  0x0000ffff9caf6ab8:   ldr		x22, [x4, #0x20]
                  ││  0x0000ffff9caf6abc:   mul		x6, x6, x0
   7.66%          ││  0x0000ffff9caf6ac0:   ldr		x4, [x4, #0x28]
                  ││  0x0000ffff9caf6ac4:   mul		x21, x21, x0
                  ││  0x0000ffff9caf6ac8:   mul		x22, x22, x0
                  ││  0x0000ffff9caf6acc:   mov		x23, x6
                  ││  0x0000ffff9caf6ad0:   cmp		x6, x5
              ╭   ││  0x0000ffff9caf6ad4:   b.ge	#0xffff9caf6adc
              │   ││  0x0000ffff9caf6ad8:   mov		x23, x5
   7.94%      ↘   ││  0x0000ffff9caf6adc:   mul	x4, x4, x0
                  ││  0x0000ffff9caf6ae0:   mov		x5, x21
                  ││  0x0000ffff9caf6ae4:   cmp		x21, x23
               ╭  ││  0x0000ffff9caf6ae8:   b.ge	#0xffff9caf6af0
               │  ││  0x0000ffff9caf6aec:   mov		x5, x23
  22.19%       ↘  ││  0x0000ffff9caf6af0:   mov	x6, x22
                  ││  0x0000ffff9caf6af4:   cmp		x22, x5
                ╭ ││  0x0000ffff9caf6af8:   b.ge	#0xffff9caf6b00
                │ ││  0x0000ffff9caf6afc:   mov		x6, x5
  24.20%        ↘ ││  0x0000ffff9caf6b00:   add	w11, w11, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
                  ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                  ││  0x0000ffff9caf6b04:   mov		x5, x4
                  ││  0x0000ffff9caf6b08:   cmp		x4, x6
                 ╭││  0x0000ffff9caf6b0c:   b.ge	#0xffff9caf6b14
                 │││  0x0000ffff9caf6b10:   mov		x5, x6              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                 │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
                 │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  26.47%         ↘││  0x0000ffff9caf6b14:   cmp	w11, w13
                  ╰│  0x0000ffff9caf6b18:   b.lt	#0xffff9caf6ab0     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                   │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.25%           │  0x0000ffff9caf6b1c:   ldr		x4, [x28, #0x30]    ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg7=Oop r19=Oop }
                   │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                   │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.27%           │  0x0000ffff9caf6b20:   ldr		wzr, [x4]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                   │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │                                                            ;   {poll}
                   │  0x0000ffff9caf6b24:   cmp		w11, w12
                   ╰  0x0000ffff9caf6b28:   b.lt	#0xffff9caf6a90
                      0x0000ffff9caf6b2c:   cmp		w11, w14
                      0x0000ffff9caf6b30:   b.lt	#0xffff9caf69e8
....................................................................................................
  98.20%  <total for region 1>
#+end_src
*** lt
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  150.761 ± 6.003  ops/ms
#+end_src
**** asm
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1053

   0.06%          0x0000ffff88af4984:   cmp		w12, #1
                  0x0000ffff88af4988:   b.le		#0xffff88af4a6c
                  0x0000ffff88af498c:   mov		w11, #1
               ↗  0x0000ffff88af4990:   cmp		w12, w11
               │  0x0000ffff88af4994:   sub		w4, w12, w11
               │  0x0000ffff88af4998:   csel		w13, wzr, w4, lt
               │  0x0000ffff88af499c:   cmp		w13, #0xfa0
               │  0x0000ffff88af49a0:   csel		w4, w10, w13, hi
               │  0x0000ffff88af49a4:   add		w13, w4, w11
               │  0x0000ffff88af49a8:   nop
   0.01%       │  0x0000ffff88af49ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   3.22%      ↗│  0x0000ffff88af49b0:   add		x4, x7, w11, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  12.69%      ││  0x0000ffff88af49b4:   ldp		x6, x21, [x4, #0x10]
   1.66%      ││  0x0000ffff88af49b8:   ldr		x22, [x4, #0x20]
              ││  0x0000ffff88af49bc:   mul		x6, x6, x0
   4.46%      ││  0x0000ffff88af49c0:   ldr		x4, [x4, #0x28]
              ││  0x0000ffff88af49c4:   mul		x21, x21, x0
              ││  0x0000ffff88af49c8:   mul		x22, x22, x0
              ││  0x0000ffff88af49cc:   mov		x23, x6
   0.01%      ││  0x0000ffff88af49d0:   cmp		x5, x6
          ╭   ││  0x0000ffff88af49d4:   b.lt		#0xffff88af49dc
   5.11%  │   ││  0x0000ffff88af49d8:   mov		x23, x5
  10.12%  ↘   ││  0x0000ffff88af49dc:   mul		x4, x4, x0
              ││  0x0000ffff88af49e0:   mov		x5, x21
              ││  0x0000ffff88af49e4:   cmp		x23, x21
           ╭  ││  0x0000ffff88af49e8:   b.lt		#0xffff88af49f0
   5.70%   │  ││  0x0000ffff88af49ec:   mov		x5, x23
  13.10%   ↘  ││  0x0000ffff88af49f0:   mov		x6, x22
              ││  0x0000ffff88af49f4:   cmp		x5, x22
            ╭ ││  0x0000ffff88af49f8:   b.lt		#0xffff88af4a00
   9.09%    │ ││  0x0000ffff88af49fc:   mov		x6, x5
  12.90%    ↘ ││  0x0000ffff88af4a00:   add		w11, w11, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
              ││  0x0000ffff88af4a04:   mov		x5, x4
              ││  0x0000ffff88af4a08:   cmp		x6, x4
             ╭││  0x0000ffff88af4a0c:   b.lt		#0xffff88af4a14
   5.00%     │││  0x0000ffff88af4a10:   mov		x5, x6              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  13.41%     ↘││  0x0000ffff88af4a14:   cmp		w11, w13
              ╰│  0x0000ffff88af4a18:   b.lt		#0xffff88af49b0     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.05%       │  0x0000ffff88af4a1c:   ldr		x4, [x28, #0x30]    ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg7=Oop r19=Oop }
               │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
               │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.03%       │  0x0000ffff88af4a20:   ldr		wzr, [x4]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               │                                                            ;   {poll}
               │  0x0000ffff88af4a24:   cmp		w11, w12
               ╰  0x0000ffff88af4a28:   b.lt		#0xffff88af4990
                  0x0000ffff88af4a2c:   cmp		w11, w14
                  0x0000ffff88af4a30:   b.lt		#0xffff88af48e8
....................................................................................................
  96.58%  <total for region 1>
#+end_src
* 7.5.25
** pipeline stalls
*** ge
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score     Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   2002.891 ± 622.302     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.977                 #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        1935.728                 #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.168            clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11507.732                 #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           5.945            insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt           0.717                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_IC                 100    2048  thrpt           0.151                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_ITLB               100    2048  thrpt           0.020                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL_DISPATCH                     100    2048  thrpt           0.160                 #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10244.432                 #/op
#+end_src
*** lt
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   1358.165 ± 71.286     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.060                #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        2903.718                #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.245           clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11831.397                #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           4.075           insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt         483.435                #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_IC                 100    2048  thrpt           0.803                #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_ITLB               100    2048  thrpt           0.134                #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL_DISPATCH                     100    2048  thrpt           0.790                #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10023.440                #/op
#+end_src
** pipeline cond branch
*** ge
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score     Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   2370.269 ± 894.659     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.989                 #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        1657.699                 #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.143            clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11600.537                 #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           6.998            insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt           0.562                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL                              100    2048  thrpt           0.316                 #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10740.165                 #/op
#+end_src
*** lt
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   1367.168 ± 22.211     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.025                #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        2886.518                #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.244           clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11839.732                #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           4.102           insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt         472.260                #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL                              100    2048  thrpt           0.415                #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10028.665                #/op
#+end_src
** Exploring performance monitoring counters in macos
Memory Order Violation Density:
<Ev ST_MEMORY_ORDER_VIOLATION_NONSPEC> / <Ev ST_UNIT_UOP>
Proportion retired stores that caused a pipeline flush
and replay of loads and subsequent instructions of all
stores.

ST_UNIT_UOP Uops that flowed through the Store Unit
ST_MEMORY_ORDER_VIOLATION_NONSPEC Retired stores that triggered memory order violations

MAP_DISPATCH_BUBBLE Cycles while the Map Unit was not stalled and Decode Unit did not send any uops
MAP_STALL Cycles while the Map Unit was stalled for any reason
SCHEDULE_UOP Uops issued by the scheduler to any execution unit
RETIRE_UOP All retired uops
CORE_ACTIVE_CYCLE Cycles while the core was active
IPC
BRANCH_COND_MISPRED_NONSPEC Retired conditional branch instructions that mispredicted
INST_ALL All retired instructions
* 6.5.25
** comparison
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2175.597 ± 128.123  ops/ms # ge, loop unroll
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1281.837 ±  82.221  ops/ms # le, loop unroll
#+end_src

asm, ge, loop unroll
#+begin_src bash
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820

                 0x000000010e96b290:   cmp		w17, w12
                 0x000000010e96b294:   sub		w11, w17, w12
                 0x000000010e96b298:   csel		w10, wzr, w11, lt
                 0x000000010e96b29c:   cmp		w10, #0xfa0
                 0x000000010e96b2a0:   csel		w11, w14, w10, hi
                 0x000000010e96b2a4:   add		w10, w11, w12
                 0x000000010e96b2a8:   nop
                 0x000000010e96b2ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      ↗  0x000000010e96b2b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      │  0x000000010e96b2b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010e96b2b8:   ldr		x23, [x11, #0x20]
              │  0x000000010e96b2bc:   mul		x21, x21, x16
  35.87%      │  0x000000010e96b2c0:   ldr		x11, [x11, #0x28]
              │  0x000000010e96b2c4:   mul		x22, x22, x16
              │  0x000000010e96b2c8:   mul		x23, x23, x16
              │  0x000000010e96b2cc:   mov		x24, x21
   1.32%      │  0x000000010e96b2d0:   cmp		x21, x7
          ╭   │  0x000000010e96b2d4:   b.ge		#0x10e96b2dc
          │   │  0x000000010e96b2d8:   mov		x24, x7
   7.22%  ↘   │  0x000000010e96b2dc:   mul		x11, x11, x16
              │  0x000000010e96b2e0:   mov		x7, x22
              │  0x000000010e96b2e4:   cmp		x22, x24
           ╭  │  0x000000010e96b2e8:   b.ge		#0x10e96b2f0
           │  │  0x000000010e96b2ec:   mov		x7, x24
  19.64%   ↘  │  0x000000010e96b2f0:   mov		x21, x23
   2.35%      │  0x000000010e96b2f4:   cmp		x23, x7
   1.13%    ╭ │  0x000000010e96b2f8:   b.ge		#0x10e96b300
            │ │  0x000000010e96b2fc:   mov		x21, x7
   6.24%    ↘ │  0x000000010e96b300:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010e96b304:   mov		x7, x11
              │  0x000000010e96b308:   cmp		x11, x21
             ╭│  0x000000010e96b30c:   b.ge		#0x10e96b314
             ││  0x000000010e96b310:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  24.82%     ↘│  0x000000010e96b314:   cmp		w12, w10
              ╰  0x000000010e96b318:   b.lt		#0x10e96b2b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.74%         0x000000010e96b31c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x000000010e96b320:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010e96b324:   cmp		w12, w17
                 0x000000010e96b328:   b.lt		#0x10e96b290
                 0x000000010e96b32c:   cmp		w12, w13
                 0x000000010e96b330:   b.lt		#0x10e96b1e8
#+end_src

asm, lt, loop unroll
#+begin_src bash
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842

                 0x000000010cde2690:   cmp		w17, w12
                 0x000000010cde2694:   sub		w11, w17, w12
                 0x000000010cde2698:   csel		w10, wzr, w11, lt
                 0x000000010cde269c:   cmp		w10, #0xfa0
                 0x000000010cde26a0:   csel		w11, w14, w10, hi
                 0x000000010cde26a4:   add		w10, w11, w12
                 0x000000010cde26a8:   nop
                 0x000000010cde26ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.90%      ↗  0x000000010cde26b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010cde26b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010cde26b8:   ldr		x23, [x11, #0x20]
              │  0x000000010cde26bc:   mul		x21, x21, x16
  20.85%      │  0x000000010cde26c0:   ldr		x11, [x11, #0x28]
              │  0x000000010cde26c4:   mul		x22, x22, x16
              │  0x000000010cde26c8:   mul		x23, x23, x16
              │  0x000000010cde26cc:   mov		x24, x21
   0.01%      │  0x000000010cde26d0:   cmp		x7, x21
   0.00%  ╭   │  0x000000010cde26d4:   b.lt		#0x10cde26dc
   0.88%  │   │  0x000000010cde26d8:   mov		x24, x7
  15.39%  ↘   │  0x000000010cde26dc:   mul		x11, x11, x16
              │  0x000000010cde26e0:   mov		x7, x22
              │  0x000000010cde26e4:   cmp		x24, x22
           ╭  │  0x000000010cde26e8:   b.lt		#0x10cde26f0
   1.63%   │  │  0x000000010cde26ec:   mov		x7, x24
  18.11%   ↘  │  0x000000010cde26f0:   mov		x21, x23
              │  0x000000010cde26f4:   cmp		x7, x23
            ╭ │  0x000000010cde26f8:   b.lt		#0x10cde2700
   2.03%    │ │  0x000000010cde26fc:   mov		x21, x7
  17.38%    ↘ │  0x000000010cde2700:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%      │  0x000000010cde2704:   mov		x7, x11
              │  0x000000010cde2708:   cmp		x21, x11
             ╭│  0x000000010cde270c:   b.lt		#0x10cde2714
   0.97%     ││  0x000000010cde2710:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  19.15%     ↘│  0x000000010cde2714:   cmp		w12, w10
   0.07%      ╰  0x000000010cde2718:   b.lt		#0x10cde26b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%         0x000000010cde271c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010cde2720:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010cde2724:   cmp		w12, w17
                 0x000000010cde2728:   b.lt		#0x10cde2690
                 0x000000010cde272c:   cmp		w12, w13
                 0x000000010cde2730:   b.lt		#0x10cde25e8
#+end_src
** ge
*** loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2175.597 ± 128.123  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 218848 total address lines.
Perf output processed (skipped 20.133 seconds):
 Column 1: sampled_pc (20047 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820

                 0x000000010e96b290:   cmp		w17, w12
                 0x000000010e96b294:   sub		w11, w17, w12
                 0x000000010e96b298:   csel		w10, wzr, w11, lt
                 0x000000010e96b29c:   cmp		w10, #0xfa0
                 0x000000010e96b2a0:   csel		w11, w14, w10, hi
                 0x000000010e96b2a4:   add		w10, w11, w12
                 0x000000010e96b2a8:   nop
                 0x000000010e96b2ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      ↗  0x000000010e96b2b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      │  0x000000010e96b2b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010e96b2b8:   ldr		x23, [x11, #0x20]
              │  0x000000010e96b2bc:   mul		x21, x21, x16
  35.87%      │  0x000000010e96b2c0:   ldr		x11, [x11, #0x28]
              │  0x000000010e96b2c4:   mul		x22, x22, x16
              │  0x000000010e96b2c8:   mul		x23, x23, x16
              │  0x000000010e96b2cc:   mov		x24, x21
   1.32%      │  0x000000010e96b2d0:   cmp		x21, x7
          ╭   │  0x000000010e96b2d4:   b.ge		#0x10e96b2dc
          │   │  0x000000010e96b2d8:   mov		x24, x7
   7.22%  ↘   │  0x000000010e96b2dc:   mul		x11, x11, x16
              │  0x000000010e96b2e0:   mov		x7, x22
              │  0x000000010e96b2e4:   cmp		x22, x24
           ╭  │  0x000000010e96b2e8:   b.ge		#0x10e96b2f0
           │  │  0x000000010e96b2ec:   mov		x7, x24
  19.64%   ↘  │  0x000000010e96b2f0:   mov		x21, x23
   2.35%      │  0x000000010e96b2f4:   cmp		x23, x7
   1.13%    ╭ │  0x000000010e96b2f8:   b.ge		#0x10e96b300
            │ │  0x000000010e96b2fc:   mov		x21, x7
   6.24%    ↘ │  0x000000010e96b300:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010e96b304:   mov		x7, x11
              │  0x000000010e96b308:   cmp		x11, x21
             ╭│  0x000000010e96b30c:   b.ge		#0x10e96b314
             ││  0x000000010e96b310:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  24.82%     ↘│  0x000000010e96b314:   cmp		w12, w10
              ╰  0x000000010e96b318:   b.lt		#0x10e96b2b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.74%         0x000000010e96b31c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x000000010e96b320:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010e96b324:   cmp		w12, w17
                 0x000000010e96b328:   b.lt		#0x10e96b290
                 0x000000010e96b32c:   cmp		w12, w13
                 0x000000010e96b330:   b.lt		#0x10e96b1e8
....................................................................................................
  99.42%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.42%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820
   0.35%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820
   0.04%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.03%    libsystem_kernel.dylib  thread_self_trap
   0.02%    libsystem_kernel.dylib  __psynch_cvwait
   0.01%                      dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%              libjvm.dylib  IntervalWalker::allocator() const
   0.00%              libjvm.dylib  CompileQueue::get(CompilerThread*)
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%               interpreter  invokevirtual  182 invokevirtual
   0.00%         libsystem_c.dylib  __sflush
   0.00%    libsystem_kernel.dylib  __psynch_mutexdrop
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
   0.00%                            <unknown>
....................................................................................................
 100.00%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.77%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820
   0.04%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.03%    libsystem_kernel.dylib  thread_self_trap
   0.02%    libsystem_kernel.dylib  __psynch_cvwait
   0.01%                      dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%               interpreter  invokevirtual  182 invokevirtual
   0.00%              libjvm.dylib  IntervalWalker::allocator() const
   0.00%    libsystem_kernel.dylib  __psynch_mutexdrop
   0.00%         libsystem_c.dylib  __sflush
   0.00%                            <unknown>
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%              libjvm.dylib  CompileQueue::get(CompilerThread*)
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
....................................................................................................
 100.00%  <totals>

....[Distribution by Source]........................................................................
  99.77%               C2, level 4
   0.17%    libsystem_kernel.dylib
   0.02%              libjvm.dylib
   0.01%                      dyld
   0.00%
   0.00%         libsystem_c.dylib
   0.00%               interpreter
   0.00%  libsystem_platform.dylib
....................................................................................................
 100.00%  <totals>



# Run complete. Total time: 00:00:53

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2042.190 ± 840.609  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN               ---
#+end_src
*** no loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1397.960 ± 19.726  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 209288 total address lines.
Perf output processed (skipped 18.708 seconds):
 Column 1: sampled_pc (20052 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810

                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
              0x000000010e8d8560:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
              0x000000010e8d8564:   ldp		x29, x30, [sp, #0x50]
              0x000000010e8d8568:   add		sp, sp, #0x60
              0x000000010e8d856c:   ldr		x8, [x28, #0x28]    ;   {poll_return}
              0x000000010e8d8570:   cmp		sp, x8
              0x000000010e8d8574:   b.hi		#0x10e8d86ec
              0x000000010e8d8578:   ret
              0x000000010e8d857c:   nop
   0.18%   ↗  0x000000010e8d8580:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%   │  0x000000010e8d8584:   add		x4, x5, w11, sxtw #3
  57.74%   │  0x000000010e8d8588:   ldr		x4, [x4, #0x10]
           │  0x000000010e8d858c:   mul		x4, x4, x17
   0.01%   │  0x000000010e8d8590:   add		w11, w11, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
           │  0x000000010e8d8594:   mov		x6, x13
           │  0x000000010e8d8598:   cmp		x13, x4
          ╭│  0x000000010e8d859c:   b.ge		#0x10e8d85a4
  16.34%  ││  0x000000010e8d85a0:   mov		x6, x4              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  25.00%  ↘│  0x000000010e8d85a4:   cmp		w11, w1
           ╰  0x000000010e8d85a8:   b.lt		#0x10e8d8580        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      0x000000010e8d85ac:   ldr		x1, [x28, #0x30]    ; ImmutableOopMap {r14=Oop r15=Oop r16=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg5=Oop r19=Oop }
                                                                        ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                        ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.16%      0x000000010e8d85b0:   ldr		wzr, [x1]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                        ;   {poll}
              0x000000010e8d85b4:   cmp		w11, w10
              0x000000010e8d85b8:   b.ge		#0x10e8d85e0
              0x000000010e8d85bc:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
....................................................................................................
  99.55%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.55%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810
   0.20%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810
   0.06%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  thread_self_trap
   0.01%         libsystem_c.dylib  __sfvwrite
   0.00%   libcapstone.5.0.5.dylib  DYLD-STUB$$strcmp
   0.00%              libjvm.dylib  NullCheck::visit(InstructionVisitor*)
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%                            <unknown>
   0.00%              libjvm.dylib  BacktraceBuilder::push(Method*, int, JavaThread*)
   0.00%              libjvm.dylib  DYLD-STUB$$write
   0.00%               interpreter  method entry point (kind = zerolocals)
   0.00%                            <unknown>
   0.00%               interpreter  fast_aputfield  211 fast_aputfield
   0.00%         libsystem_c.dylib  fwrite
   0.00%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libsystem_pthread.dylib  pthread_mutex_unlock
   0.00%   libsystem_pthread.dylib  _pthread_mutex_firstfit_unlock_slow
   0.01%  <...other 2 warm regions...>
....................................................................................................
 100.00%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.75%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810
   0.06%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  thread_self_trap
   0.01%                            <unknown>
   0.01%         libsystem_c.dylib  __sfvwrite
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%   libsystem_pthread.dylib  pthread_mutex_unlock
   0.00%              libjvm.dylib  NullCheck::visit(InstructionVisitor*)
   0.00%              libjvm.dylib  DYLD-STUB$$write
   0.00%               interpreter  fast_aputfield  211 fast_aputfield
   0.00%         libsystem_c.dylib  fwrite
   0.00%              libjvm.dylib  BacktraceBuilder::push(Method*, int, JavaThread*)
   0.00%  libsystem_platform.dylib  _platform_memmove
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
   0.00%               interpreter  method entry point (kind = zerolocals)
   0.00%   libcapstone.5.0.5.dylib  DYLD-STUB$$strcmp
   0.00%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libsystem_pthread.dylib  _pthread_mutex_firstfit_unlock_slow
....................................................................................................
 100.00%  <totals>

....[Distribution by Source]........................................................................
  99.75%               C2, level 4
   0.16%    libsystem_kernel.dylib
   0.02%              libjvm.dylib
   0.01%         libsystem_c.dylib
   0.01%
   0.01%               interpreter
   0.01%  libsystem_platform.dylib
   0.01%   libsystem_pthread.dylib
   0.00%   libcapstone.5.0.5.dylib
....................................................................................................
 100.00%  <totals>



# Run complete. Total time: 00:00:47

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1393.026 ± 21.161  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
** lt
*** loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1281.837 ± 82.221  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 225882 total address lines.
Perf output processed (skipped 20.030 seconds):
 Column 1: sampled_pc (20053 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842

                 0x000000010cde2690:   cmp		w17, w12
                 0x000000010cde2694:   sub		w11, w17, w12
                 0x000000010cde2698:   csel		w10, wzr, w11, lt
                 0x000000010cde269c:   cmp		w10, #0xfa0
                 0x000000010cde26a0:   csel		w11, w14, w10, hi
                 0x000000010cde26a4:   add		w10, w11, w12
                 0x000000010cde26a8:   nop
                 0x000000010cde26ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.90%      ↗  0x000000010cde26b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010cde26b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010cde26b8:   ldr		x23, [x11, #0x20]
              │  0x000000010cde26bc:   mul		x21, x21, x16
  20.85%      │  0x000000010cde26c0:   ldr		x11, [x11, #0x28]
              │  0x000000010cde26c4:   mul		x22, x22, x16
              │  0x000000010cde26c8:   mul		x23, x23, x16
              │  0x000000010cde26cc:   mov		x24, x21
   0.01%      │  0x000000010cde26d0:   cmp		x7, x21
   0.00%  ╭   │  0x000000010cde26d4:   b.lt		#0x10cde26dc
   0.88%  │   │  0x000000010cde26d8:   mov		x24, x7
  15.39%  ↘   │  0x000000010cde26dc:   mul		x11, x11, x16
              │  0x000000010cde26e0:   mov		x7, x22
              │  0x000000010cde26e4:   cmp		x24, x22
           ╭  │  0x000000010cde26e8:   b.lt		#0x10cde26f0
   1.63%   │  │  0x000000010cde26ec:   mov		x7, x24
  18.11%   ↘  │  0x000000010cde26f0:   mov		x21, x23
              │  0x000000010cde26f4:   cmp		x7, x23
            ╭ │  0x000000010cde26f8:   b.lt		#0x10cde2700
   2.03%    │ │  0x000000010cde26fc:   mov		x21, x7
  17.38%    ↘ │  0x000000010cde2700:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%      │  0x000000010cde2704:   mov		x7, x11
              │  0x000000010cde2708:   cmp		x21, x11
             ╭│  0x000000010cde270c:   b.lt		#0x10cde2714
   0.97%     ││  0x000000010cde2710:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  19.15%     ↘│  0x000000010cde2714:   cmp		w12, w10
   0.07%      ╰  0x000000010cde2718:   b.lt		#0x10cde26b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%         0x000000010cde271c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010cde2720:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010cde2724:   cmp		w12, w17
                 0x000000010cde2728:   b.lt		#0x10cde2690
                 0x000000010cde272c:   cmp		w12, w13
                 0x000000010cde2730:   b.lt		#0x10cde25e8
....................................................................................................
  99.51%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.51%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842
   0.27%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842
   0.05%    libsystem_kernel.dylib  __write_nocancel
   0.02%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  write
   0.01%    libsystem_kernel.dylib  thread_self_trap
   0.01%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libcapstone.5.0.5.dylib  decodeInstruction_4
   0.00%   libcapstone.5.0.5.dylib  printInstruction
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::next()
   0.00%              libjvm.dylib  Klass::is_subtype_of(Klass*) const
   0.00%              libjvm.dylib  WatcherThread::sleep() const
   0.00%              libjvm.dylib  PlatformMonitor::wait(unsigned long long)
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%              libjvm.dylib  StubCodeDesc::contains(unsigned char*) const
   0.00%              libjvm.dylib  xmlStream::write_text(char const*, unsigned long)
   0.00%               C1, level 3  java.net.URL::&lt;init&gt;, version 1, compile id 820
   0.00%                            <unknown>
   0.00%                      dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.03%  <...other 7 warm regions...>
....................................................................................................
 100.00%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.78%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842
   0.05%    libsystem_kernel.dylib  __write_nocancel
   0.02%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  write
   0.01%    libsystem_kernel.dylib  thread_self_trap
   0.01%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libsystem_pthread.dylib  _pthread_mutex_lock_init_slow
   0.00%    libsystem_kernel.dylib  mach_absolute_time
   0.00%    libsystem_kernel.dylib  madvise
   0.00%   libcapstone.5.0.5.dylib  printInstruction
   0.00%                            <unknown>
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%   libcapstone.5.0.5.dylib  decodeInstruction_4
   0.00%              libjvm.dylib  WatcherThread::sleep() const
   0.00%              libjvm.dylib  StubCodeDesc::contains(unsigned char*) const
   0.00%              libjvm.dylib  Klass::is_subtype_of(Klass*) const
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::next()
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%    libsystem_kernel.dylib  __psynch_cvwait
   0.03%  <...other 6 warm methods...>
....................................................................................................
 100.00%  <totals>

....[Distribution by Source]........................................................................
  99.78%               C2, level 4
   0.13%    libsystem_kernel.dylib
   0.04%              libjvm.dylib
   0.01%   libcapstone.5.0.5.dylib
   0.01%   libsystem_pthread.dylib
   0.00%
   0.00%                      dyld
   0.00%         libsystem_c.dylib
   0.00%  libsystem_platform.dylib
   0.00%               C1, level 3
....................................................................................................
 100.00%  <totals>



# Run complete. Total time: 00:00:50

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1337.965 ± 35.920  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
*** no loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1457.104 ± 17.062  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 220234 total address lines.
Perf output processed (skipped 19.166 seconds):
 Column 1: sampled_pc (20048 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825

                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
              0x000000010a929f60:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
              0x000000010a929f64:   ldp		x29, x30, [sp, #0x50]
              0x000000010a929f68:   add		sp, sp, #0x60
              0x000000010a929f6c:   ldr		x8, [x28, #0x28]    ;   {poll_return}
              0x000000010a929f70:   cmp		sp, x8
              0x000000010a929f74:   b.hi		#0x10a92a0ec
              0x000000010a929f78:   ret
              0x000000010a929f7c:   nop
   1.08%   ↗  0x000000010a929f80:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%   │  0x000000010a929f84:   add		x4, x5, w11, sxtw #3
  70.47%   │  0x000000010a929f88:   ldr		x4, [x4, #0x10]
   0.01%   │  0x000000010a929f8c:   mul		x4, x4, x17
           │  0x000000010a929f90:   add		w11, w11, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
           │  0x000000010a929f94:   mov		x6, x13
           │  0x000000010a929f98:   cmp		x4, x13
          ╭│  0x000000010a929f9c:   b.lt		#0x10a929fa4
  23.43%  ││  0x000000010a929fa0:   mov		x6, x4              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%  ↘│  0x000000010a929fa4:   cmp		w11, w1
           ╰  0x000000010a929fa8:   b.lt		#0x10a929f80        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   4.17%      0x000000010a929fac:   ldr		x1, [x28, #0x30]    ; ImmutableOopMap {r14=Oop r15=Oop r16=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg5=Oop r19=Oop }
                                                                        ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                        ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.25%      0x000000010a929fb0:   ldr		wzr, [x1]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                        ;   {poll}
              0x000000010a929fb4:   cmp		w11, w10
              0x000000010a929fb8:   b.ge		#0x10a929fe0
              0x000000010a929fbc:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
....................................................................................................
  99.57%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.57%              C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825
   0.23%              C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825
   0.05%   libsystem_kernel.dylib  write
   0.02%   libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%   libsystem_kernel.dylib  thread_self_trap
   0.00%  libcapstone.5.0.5.dylib  AArch64_printInst
   0.00%             libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%                           <unknown>
   0.00%             libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%             libjvm.dylib  PeriodicTask::execute_if_pending(int)
   0.00%             libjvm.dylib  xmlStream::write_text(char const*, unsigned long)
   0.00%              interpreter  fast_aload_0  220 fast_aload_0
   0.00%                     dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%        libsystem_c.dylib  __vfprintf
   0.00%        libsystem_c.dylib  DYLD-STUB$$__error
....................................................................................................
  99.96%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.81%              C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825
   0.05%   libsystem_kernel.dylib  write
   0.02%   libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%   libsystem_kernel.dylib  thread_self_trap
   0.00%             libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%        libsystem_c.dylib  DYLD-STUB$$__error
   0.00%             libjvm.dylib  PeriodicTask::execute_if_pending(int)
   0.00%              interpreter  fast_aload_0  220 fast_aload_0
   0.00%  libcapstone.5.0.5.dylib  AArch64_printInst
   0.00%                           <unknown>
   0.00%             libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%        libsystem_c.dylib  __vfprintf
   0.00%                     dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%             libjvm.dylib  xmlStream::write_text(char const*, unsigned long)
....................................................................................................
  99.96%  <totals>

....[Distribution by Source]........................................................................
  99.81%              C2, level 4
   0.10%   libsystem_kernel.dylib
   0.02%             libjvm.dylib
   0.01%        libsystem_c.dylib
   0.00%
   0.00%                     dyld
   0.00%  libcapstone.5.0.5.dylib
   0.00%              interpreter
....................................................................................................
  99.96%  <totals>



# Run complete. Total time: 00:00:52

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1530.472 ± 94.707  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
* 10.4.25
** xtracenorm
BRANCH_MISPRED_NONSPEC (203, 0xcb): Retired branch instructions including calls and returns that mispredicted
INST_ALL (140, 0x8c): All retired instructions
INST_BRANCH (141, 0x8d): Retired branch instructions including calls and returns
*** lt
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    8   1441.373 ± 80.991     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt    2      0.035                #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt    2     ≈ 10⁻⁵            miss/brs
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                         100    2048  thrpt    2   2967.064                #/op
MinMaxVector.longReductionMultiplyMax:CPI                                       100    2048  thrpt    2      0.248           clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt    2  11955.330                #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt    2   2554.370                #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt    2      0.214              #/insn
MinMaxVector.longReductionMultiplyMax:IPC                                       100    2048  thrpt    2      4.030           insns/clk
#+end_src
*** ge
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score     Error      Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    8   2445.192 ± 156.219     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt           0.900                 #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt          ≈ 10⁻³             miss/brs
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                         100    2048  thrpt        1540.935                 #/op
MinMaxVector.longReductionMultiplyMax:CPI                                       100    2048  thrpt           0.148            clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt       10444.169                 #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt        2269.059                 #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt           0.217               #/insn
MinMaxVector.longReductionMultiplyMax:IPC                                       100    2048  thrpt           6.778            insns/clk
#+end_src
* 9.4.25
** aarch64 0408.branch-never-ge vs 0408.branch-never-lt
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2168.467 ± 213.914  ops/ms # ge
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1398.860 ±  95.932  ops/ms # le
#+end_src

ge assembly:
#+begin_src asm
  0x000000010d70c604:   mov		x0, x14
  0x000000010d70c608:   cmp		x14, x16
  0x000000010d70c60c:   b.ge		#0x10d70c614
  0x000000010d70c610:   mov		x0, x16             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 25)
#+end_src

lt assembly:
#+begin_src asm
  0x000000010d70c604:   mov		x0, x14
  0x000000010d70c608:   cmp		x16, x14
  0x000000010d70c60c:   b.lt		#0x10d70c614
  0x000000010d70c610:   mov		x0, x16             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 25)#+end_src
#+end_src
*** xtraceperfasm ge
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 794

                 0x000000010c3c5b1c:   cmp		w10, #0xfa0
                 0x000000010c3c5b20:   csel		w11, w14, w10, hi
                 0x000000010c3c5b24:   add		w10, w11, w12
                 0x000000010c3c5b28:   nop
                 0x000000010c3c5b2c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ↗  0x000000010c3c5b30:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.14%      │  0x000000010c3c5b34:   ldp		x21, x22, [x11, #0x10]
   0.03%      │  0x000000010c3c5b38:   ldr		x23, [x11, #0x20]
              │  0x000000010c3c5b3c:   mul		x21, x21, x16
  25.97%      │  0x000000010c3c5b40:   ldr		x11, [x11, #0x28]
              │  0x000000010c3c5b44:   mul		x22, x22, x16
              │  0x000000010c3c5b48:   mul		x23, x23, x16
              │  0x000000010c3c5b4c:   mov		x24, x21
   5.25%      │  0x000000010c3c5b50:   cmp		x21, x7
          ╭   │  0x000000010c3c5b54:   b.ge		#0x10c3c5b5c
          │   │  0x000000010c3c5b58:   mov		x24, x7
   3.99%  ↘   │  0x000000010c3c5b5c:   mul		x11, x11, x16
              │  0x000000010c3c5b60:   mov		x7, x22
              │  0x000000010c3c5b64:   cmp		x22, x24
           ╭  │  0x000000010c3c5b68:   b.ge		#0x10c3c5b70
           │  │  0x000000010c3c5b6c:   mov		x7, x24
  24.96%   ↘  │  0x000000010c3c5b70:   mov		x21, x23
   0.22%      │  0x000000010c3c5b74:   cmp		x23, x7
   5.12%    ╭ │  0x000000010c3c5b78:   b.ge		#0x10c3c5b80
            │ │  0x000000010c3c5b7c:   mov		x21, x7
   2.72%    ↘ │  0x000000010c3c5b80:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010c3c5b84:   mov		x7, x11
              │  0x000000010c3c5b88:   cmp		x11, x21
             ╭│  0x000000010c3c5b8c:   b.ge		#0x10c3c5b94
             ││  0x000000010c3c5b90:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  29.91%     ↘│  0x000000010c3c5b94:   cmp		w12, w10
              ╰  0x000000010c3c5b98:   b.lt		#0x10c3c5b30        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.84%         0x000000010c3c5b9c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%         0x000000010c3c5ba0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010c3c5ba4:   cmp		w12, w17
                 0x000000010c3c5ba8:   b.lt		#0x10c3c5b10
                 0x000000010c3c5bac:   cmp		w12, w13
                 0x000000010c3c5bb0:   b.lt		#0x10c3c5a68
....................................................................................................
  99.24%  <total for region 1>

Benchmark                                  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2454.071 ± 774.462  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN               ---
#+end_src
*** xtraceperfasm lt
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 811

                 0x000000010e938590:   cmp		w17, w12
                 0x000000010e938594:   sub		w11, w17, w12
                 0x000000010e938598:   csel		w10, wzr, w11, lt
                 0x000000010e93859c:   cmp		w10, #0xfa0
                 0x000000010e9385a0:   csel		w11, w14, w10, hi
                 0x000000010e9385a4:   add		w10, w11, w12
                 0x000000010e9385a8:   nop
                 0x000000010e9385ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   1.69%      ↗  0x000000010e9385b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.21%      │  0x000000010e9385b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010e9385b8:   ldr		x23, [x11, #0x20]
              │  0x000000010e9385bc:   mul		x21, x21, x16
  19.36%      │  0x000000010e9385c0:   ldr		x11, [x11, #0x28]
              │  0x000000010e9385c4:   mul		x22, x22, x16
              │  0x000000010e9385c8:   mul		x23, x23, x16
              │  0x000000010e9385cc:   mov		x24, x21
              │  0x000000010e9385d0:   cmp		x7, x21
          ╭   │  0x000000010e9385d4:   b.lt		#0x10e9385dc
   3.29%  │   │  0x000000010e9385d8:   mov		x24, x7
  15.79%  ↘   │  0x000000010e9385dc:   mul		x11, x11, x16
              │  0x000000010e9385e0:   mov		x7, x22
              │  0x000000010e9385e4:   cmp		x24, x22
           ╭  │  0x000000010e9385e8:   b.lt		#0x10e9385f0
   3.08%   │  │  0x000000010e9385ec:   mov		x7, x24
  16.17%   ↘  │  0x000000010e9385f0:   mov		x21, x23
              │  0x000000010e9385f4:   cmp		x7, x23
            ╭ │  0x000000010e9385f8:   b.lt		#0x10e938600
   2.15%    │ │  0x000000010e9385fc:   mov		x21, x7
  17.68%    ↘ │  0x000000010e938600:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010e938604:   mov		x7, x11
              │  0x000000010e938608:   cmp		x21, x11
             ╭│  0x000000010e93860c:   b.lt		#0x10e938614
   1.82%     ││  0x000000010e938610:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.20%     ↘│  0x000000010e938614:   cmp		w12, w10
              ╰  0x000000010e938618:   b.lt		#0x10e9385b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010e93861c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010e938620:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010e938624:   cmp		w12, w17
                 0x000000010e938628:   b.lt		#0x10e938590
   0.00%         0x000000010e93862c:   cmp		w12, w13
                 0x000000010e938630:   b.lt		#0x10e9384e8
                 0x000000010e938634:   mov		x17, x7
                 0x000000010e938638:   b		#0x10e938510
                 0x000000010e93863c:   mov		x17, xzr
                 0x000000010e938640:   b		#0x10e938510        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                 0x000000010e938644:   mov		w1, #-0x92
                 0x000000010e938648:   mov		x29, x5
                 0x000000010e93864c:   stp		x2, x20, [sp, #0x10]
....................................................................................................
  99.53%  <total for region 1>

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1443.658 ± 41.721  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
** aarch64 0317.branch-never vs 0408.branch-never
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2160.492 ± 414.693  ops/ms # 0317.branch-never
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2265.233 ± 410.039  ops/ms # 0408.branch-never
#+end_src
** aarch64 1.4 vs 9.4 topic.avoid-cmov-long-min-max.0327.branch-never
*** comparison
**** 1.4 profile longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 561

                 0x0000000117b6fddc:   cmp		w10, #0xfa0
                 0x0000000117b6fde0:   csel		w11, w14, w10, hi
                 0x0000000117b6fde4:   add		w10, w11, w12
                 0x0000000117b6fde8:   nop
                 0x0000000117b6fdec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fdf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%      ?  0x0000000117b6fdf4:   ldp		x21, x22, [x11, #0x10]
   0.01%      ?  0x0000000117b6fdf8:   ldr		x23, [x11, #0x20]
              ?  0x0000000117b6fdfc:   mul		x21, x21, x16
  27.63%      ?  0x0000000117b6fe00:   ldr		x11, [x11, #0x28]
              ?  0x0000000117b6fe04:   mul		x22, x22, x16
              ?  0x0000000117b6fe08:   mul		x23, x23, x16
              ?  0x0000000117b6fe0c:   mov		x24, x21
   2.30%      ?  0x0000000117b6fe10:   cmp		x21, x7
          ?   ?  0x0000000117b6fe14:   b.ge		#0x117b6fe1c
          ?   ?  0x0000000117b6fe18:   mov		x24, x7
  17.59%  ?   ?  0x0000000117b6fe1c:   mul		x11, x11, x16
              ?  0x0000000117b6fe20:   mov		x7, x22
              ?  0x0000000117b6fe24:   cmp		x22, x24
           ?  ?  0x0000000117b6fe28:   b.ge		#0x117b6fe30
           ?  ?  0x0000000117b6fe2c:   mov		x7, x24
  14.37%   ?  ?  0x0000000117b6fe30:   mov		x21, x23
   0.11%      ?  0x0000000117b6fe34:   cmp		x23, x7
   2.30%    ? ?  0x0000000117b6fe38:   b.ge		#0x117b6fe40
            ? ?  0x0000000117b6fe3c:   mov		x21, x7
  15.95%    ? ?  0x0000000117b6fe40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fe44:   mov		x7, x11
              ?  0x0000000117b6fe48:   cmp		x11, x21
             ??  0x0000000117b6fe4c:   b.ge		#0x117b6fe54
             ??  0x0000000117b6fe50:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.36%     ??  0x0000000117b6fe54:   cmp		w12, w10
              ?  0x0000000117b6fe58:   b.lt		#0x117b6fdf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.73%         0x0000000117b6fe5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x0000000117b6fe60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000117b6fe64:   cmp		w12, w17
                 0x0000000117b6fe68:   b.lt		#0x117b6fdd0
                 0x0000000117b6fe6c:   cmp		w12, w13
                 0x0000000117b6fe70:   b.lt		#0x117b6fd28
....................................................................................................
  99.47%  <total for region 1>
#+end_src
**** 9.4 profile longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010a849a50:   cmp		w17, w12
                 0x000000010a849a54:   sub		w11, w17, w12
                 0x000000010a849a58:   csel		w10, wzr, w11, lt
                 0x000000010a849a5c:   cmp		w10, #0xfa0
                 0x000000010a849a60:   csel		w11, w14, w10, hi
                 0x000000010a849a64:   add		w10, w11, w12
                 0x000000010a849a68:   nop
                 0x000000010a849a6c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.09%      ↗  0x000000010a849a70:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010a849a74:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010a849a78:   ldr		x23, [x11, #0x20]
              │  0x000000010a849a7c:   mul		x21, x21, x16
  19.90%      │  0x000000010a849a80:   ldr		x11, [x11, #0x28]
              │  0x000000010a849a84:   mul		x22, x22, x16
              │  0x000000010a849a88:   mul		x23, x23, x16
              │  0x000000010a849a8c:   mov		x24, x21
              │  0x000000010a849a90:   cmp		x7, x21
          ╭   │  0x000000010a849a94:   b.lt		#0x10a849a9c
   0.03%  │   │  0x000000010a849a98:   mov		x24, x7
  15.98%  ↘   │  0x000000010a849a9c:   mul		x11, x11, x16
              │  0x000000010a849aa0:   mov		x7, x22
              │  0x000000010a849aa4:   cmp		x24, x22
           ╭  │  0x000000010a849aa8:   b.lt		#0x10a849ab0
   3.84%   │  │  0x000000010a849aac:   mov		x7, x24
  18.23%   ↘  │  0x000000010a849ab0:   mov		x21, x23
              │  0x000000010a849ab4:   cmp		x7, x23
            ╭ │  0x000000010a849ab8:   b.lt		#0x10a849ac0
   1.47%    │ │  0x000000010a849abc:   mov		x21, x7
  17.49%    ↘ │  0x000000010a849ac0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010a849ac4:   mov		x7, x11
   0.01%      │  0x000000010a849ac8:   cmp		x21, x11
             ╭│  0x000000010a849acc:   b.lt		#0x10a849ad4
   1.40%     ││  0x000000010a849ad0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.91%     ↘│  0x000000010a849ad4:   cmp		w12, w10
              ╰  0x000000010a849ad8:   b.lt		#0x10a849a70        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010a849adc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010a849ae0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010a849ae4:   cmp		w12, w17
                 0x000000010a849ae8:   b.lt		#0x10a849a50
                 0x000000010a849aec:   cmp		w12, w13
                 0x000000010a849af0:   b.lt		#0x10a8499a8
....................................................................................................
  99.52%  <total for region 1>
#+end_src
*** 1.4
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2321.742 ? 289.782  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3637.567 ?  84.313  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score      Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2303.509 ? 1103.018  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN                ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3634.028 ? 112.144  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN               ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 561

                 0x0000000117b6fddc:   cmp		w10, #0xfa0
                 0x0000000117b6fde0:   csel		w11, w14, w10, hi
                 0x0000000117b6fde4:   add		w10, w11, w12
                 0x0000000117b6fde8:   nop
                 0x0000000117b6fdec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fdf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%      ?  0x0000000117b6fdf4:   ldp		x21, x22, [x11, #0x10]
   0.01%      ?  0x0000000117b6fdf8:   ldr		x23, [x11, #0x20]
              ?  0x0000000117b6fdfc:   mul		x21, x21, x16
  27.63%      ?  0x0000000117b6fe00:   ldr		x11, [x11, #0x28]
              ?  0x0000000117b6fe04:   mul		x22, x22, x16
              ?  0x0000000117b6fe08:   mul		x23, x23, x16
              ?  0x0000000117b6fe0c:   mov		x24, x21
   2.30%      ?  0x0000000117b6fe10:   cmp		x21, x7
          ?   ?  0x0000000117b6fe14:   b.ge		#0x117b6fe1c
          ?   ?  0x0000000117b6fe18:   mov		x24, x7
  17.59%  ?   ?  0x0000000117b6fe1c:   mul		x11, x11, x16
              ?  0x0000000117b6fe20:   mov		x7, x22
              ?  0x0000000117b6fe24:   cmp		x22, x24
           ?  ?  0x0000000117b6fe28:   b.ge		#0x117b6fe30
           ?  ?  0x0000000117b6fe2c:   mov		x7, x24
  14.37%   ?  ?  0x0000000117b6fe30:   mov		x21, x23
   0.11%      ?  0x0000000117b6fe34:   cmp		x23, x7
   2.30%    ? ?  0x0000000117b6fe38:   b.ge		#0x117b6fe40
            ? ?  0x0000000117b6fe3c:   mov		x21, x7
  15.95%    ? ?  0x0000000117b6fe40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fe44:   mov		x7, x11
              ?  0x0000000117b6fe48:   cmp		x11, x21
             ??  0x0000000117b6fe4c:   b.ge		#0x117b6fe54
             ??  0x0000000117b6fe50:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.36%     ??  0x0000000117b6fe54:   cmp		w12, w10
              ?  0x0000000117b6fe58:   b.lt		#0x117b6fdf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.73%         0x0000000117b6fe5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x0000000117b6fe60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000117b6fe64:   cmp		w12, w17
                 0x0000000117b6fe68:   b.lt		#0x117b6fdd0
                 0x0000000117b6fe6c:   cmp		w12, w13
                 0x0000000117b6fe70:   b.lt		#0x117b6fd28
....................................................................................................
  99.47%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 542

                                 0x0000000113951b4c:   stp		x17, x15, [sp, #0x10]
                                 0x0000000113951b50:   str		x20, [sp, #0x60]
                                 0x0000000113951b54:   nop
                                 0x0000000113951b58:   nop
                                 0x0000000113951b5c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                          ?      0x0000000113951b60:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.80%                  ?      0x0000000113951b64:   ldr		x15, [x27, #0x10]
   0.05%                  ?      0x0000000113951b68:   mov		x29, x25
   0.04%                  ?      0x0000000113951b6c:   cmp		x25, x15
   0.13%  ?               ?      0x0000000113951b70:   b.ge		#0x113951b78
          ?               ?      0x0000000113951b74:   mov		x29, x15
   5.50%  ?               ?      0x0000000113951b78:   ldr		x16, [x27, #0x18]
   0.14%                  ?      0x0000000113951b7c:   mov		x15, x29
   0.19%                  ?      0x0000000113951b80:   cmp		x29, x16
   0.15%   ?              ?      0x0000000113951b84:   b.ge		#0x113951b8c
           ?              ?      0x0000000113951b88:   mov		x15, x16
   5.22%   ?              ?      0x0000000113951b8c:   ldr		x17, [x27, #0x20]
   0.07%                  ?      0x0000000113951b90:   mov		x16, x15
   0.03%                  ?      0x0000000113951b94:   cmp		x15, x17
   0.07%    ?             ?      0x0000000113951b98:   b.ge		#0x113951ba0
            ?             ?      0x0000000113951b9c:   mov		x16, x17
   5.39%    ?             ?      0x0000000113951ba0:   ldr		x0, [x27, #0x28]
   0.07%                  ?      0x0000000113951ba4:   mov		x15, x16
   0.16%                  ?      0x0000000113951ba8:   cmp		x16, x0
   0.11%     ?            ?      0x0000000113951bac:   b.ge		#0x113951bb4
             ?            ?      0x0000000113951bb0:   mov		x15, x0
   5.31%     ?            ?      0x0000000113951bb4:   ldr		x1, [x27, #0x30]
   0.04%                  ?      0x0000000113951bb8:   mov		x16, x15
   0.11%                  ?      0x0000000113951bbc:   cmp		x15, x1
   0.03%      ?           ?      0x0000000113951bc0:   b.ge		#0x113951bc8
              ?           ?      0x0000000113951bc4:   mov		x16, x1
   5.33%      ?           ?      0x0000000113951bc8:   ldr		x2, [x27, #0x38]
   0.08%                  ?      0x0000000113951bcc:   mov		x15, x16
   0.17%                  ?      0x0000000113951bd0:   cmp		x16, x2
   0.11%       ?          ?      0x0000000113951bd4:   b.ge		#0x113951bdc
               ?          ?      0x0000000113951bd8:   mov		x15, x2
   5.79%       ?          ?      0x0000000113951bdc:   ldr		x3, [x27, #0x40]
   0.07%                  ?      0x0000000113951be0:   mov		x16, x15
   0.04%                  ?      0x0000000113951be4:   cmp		x15, x3
   0.02%        ?         ?      0x0000000113951be8:   b.ge		#0x113951bf0
                ?         ?      0x0000000113951bec:   mov		x16, x3
   5.32%        ?         ?      0x0000000113951bf0:   ldr		x4, [x27, #0x48]
   0.08%                  ?      0x0000000113951bf4:   mov		x15, x16
   0.07%                  ?      0x0000000113951bf8:   cmp		x16, x4
   0.07%         ?        ?      0x0000000113951bfc:   b.ge		#0x113951c04
   0.00%         ?        ?      0x0000000113951c00:   mov		x15, x4
   5.77%         ?        ?      0x0000000113951c04:   ldr		x5, [x27, #0x50]
   0.08%                  ?      0x0000000113951c08:   mov		x16, x15
   0.04%                  ?      0x0000000113951c0c:   cmp		x15, x5
   0.04%          ?       ?      0x0000000113951c10:   b.ge		#0x113951c18
                  ?       ?      0x0000000113951c14:   mov		x16, x5
   5.42%          ?       ?      0x0000000113951c18:   ldr		x6, [x27, #0x58]
   0.09%                  ?      0x0000000113951c1c:   mov		x15, x16
   0.15%                  ?      0x0000000113951c20:   cmp		x16, x6
   0.08%           ?      ?      0x0000000113951c24:   b.ge		#0x113951c2c
                   ?      ?      0x0000000113951c28:   mov		x15, x6
   5.49%           ?      ?      0x0000000113951c2c:   ldr		x7, [x27, #0x60]
   0.11%                  ?      0x0000000113951c30:   mov		x16, x15
   0.06%                  ?      0x0000000113951c34:   cmp		x15, x7
   0.06%            ?     ?      0x0000000113951c38:   b.ge		#0x113951c40
                    ?     ?      0x0000000113951c3c:   mov		x16, x7
   5.89%            ?     ?      0x0000000113951c40:   ldr		x20, [x27, #0x68]
   0.07%                  ?      0x0000000113951c44:   mov		x15, x16
   0.17%                  ?      0x0000000113951c48:   cmp		x16, x20
   0.02%             ?    ?      0x0000000113951c4c:   b.ge		#0x113951c54
                     ?    ?      0x0000000113951c50:   mov		x15, x20
   5.52%             ?    ?      0x0000000113951c54:   ldr		x22, [x27, #0x70]
   0.07%                  ?      0x0000000113951c58:   mov		x16, x15
   0.10%                  ?      0x0000000113951c5c:   cmp		x15, x22
   0.01%              ?   ?      0x0000000113951c60:   b.ge		#0x113951c68
                      ?   ?      0x0000000113951c64:   mov		x16, x22
   5.53%              ?   ?      0x0000000113951c68:   ldr		x23, [x27, #0x78]
   0.06%                  ?      0x0000000113951c6c:   mov		x15, x16
   0.14%                  ?      0x0000000113951c70:   cmp		x16, x23
   0.12%               ?  ?      0x0000000113951c74:   b.ge		#0x113951c7c
                       ?  ?      0x0000000113951c78:   mov		x15, x23
   5.58%               ?  ?      0x0000000113951c7c:   ldr		x26, [x27, #0x80]
   0.13%                  ?      0x0000000113951c80:   mov		x16, x15
   0.07%                  ?      0x0000000113951c84:   cmp		x15, x26
   0.14%                ? ?      0x0000000113951c88:   b.ge		#0x113951c90
                        ? ?      0x0000000113951c8c:   mov		x16, x26
   5.28%                ? ?      0x0000000113951c90:   ldr		x27, [x27, #0x88]
   0.04%                  ?      0x0000000113951c94:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                  ?      0x0000000113951c98:   mov		x25, x16
   0.03%                  ?      0x0000000113951c9c:   cmp		x16, x27
   0.12%                 ??      0x0000000113951ca0:   b.ge		#0x113951ca8
   4.94%                 ??      0x0000000113951ca4:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ??                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ??                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.79%                 ??      0x0000000113951ca8:   cmp		w12, w11
   0.00%                  ?      0x0000000113951cac:   b.lt		#0x113951b60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951cb0:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.02%                         0x0000000113951cb4:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                           ;   {poll}
                                 0x0000000113951cb8:   cmp		w12, w10
                                 0x0000000113951cbc:   b.lt		#0x113951b20
                                 0x0000000113951cc0:   ldp		x16, x0, [sp]
                                 0x0000000113951cc4:   ldp		x17, x15, [sp, #0x10]
   0.02%                         0x0000000113951cc8:   ldr		x20, [sp, #0x60]
                                 0x0000000113951ccc:   cmp		w12, w14
                                 0x0000000113951cd0:   b.lt		#0x113951af8
                                 0x0000000113951cd4:   mov		x11, x25            ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%                      ?  0x0000000113951cd8:   ldarb		w14, [x21]          ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 107)
                              ?  0x0000000113951cdc:   ldr		x1, [x28, #0x30]
                              ?  0x0000000113951ce0:   add		x19, x19, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg0=Oop rdispatch=Derived_oop_c_rarg0 resp=Oop }
                              ?                                                            ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                              ?                                                            ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 107)
   0.03%                      ?  0x0000000113951ce4:   ldr		wzr, [x1]           ;   {poll}
                              ?  0x0000000113951ce8:   cbnz		w14, #0x113951aa8   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 108)
   0.00%                      ?  0x0000000113951cec:   ldr		w14, [x15, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              ?  0x0000000113951cf0:   cmp		w14, #0
                           ?  ?  0x0000000113951cf4:   b.le		#0x113951d60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951cf8:   ldr		w10, [x15, #0x2c]
                           ?  ?  0x0000000113951cfc:   lsl		x24, x10, #3        ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ?  ?  0x0000000113951d00:   ldr		w10, [x24, #0xc]    ; implicit exception: dispatches to 0x0000000113951d68
                           ?  ?                                                            ;*laload {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951d04:   sxtw		x11, w14
                           ?  ?  0x0000000113951d08:   sub		x1, x11, #0xf
                           ?  ?  0x0000000113951d0c:   sxtw		x12, w10
                           ?  ?  0x0000000113951d10:   sub		x11, x11, #1
                           ?  ?  0x0000000113951d14:   cbz		w10, #0x113951d68
   0.01%                   ?  ?  0x0000000113951d18:   cmp		x11, x12
                           ?  ?  0x0000000113951d1c:   b.hs		#0x113951d68
   0.05%                   ?  ?  0x0000000113951d20:   ldr		x11, [x24, #0x10]
   0.00%                   ?  ?  0x0000000113951d24:   mov		x12, #-0x80000000
                           ?  ?  0x0000000113951d28:   mov		x10, x1
                           ?  ?  0x0000000113951d2c:   cmp		x1, x12
                           ?? ?  0x0000000113951d30:   b.ge		#0x113951d38
                           ?? ?  0x0000000113951d34:   mov		x10, x12
   0.01%                   ?? ?  0x0000000113951d38:   mov		x12, xzr
                           ?  ?  0x0000000113951d3c:   mov		w10, w10
                           ?  ?  0x0000000113951d40:   mov		x25, x11
                           ?  ?  0x0000000113951d44:   cmp		x11, x12
                           ? ??  0x0000000113951d48:   b.ge		#0x113951d50
                           ? ??  0x0000000113951d4c:   mov		x25, x12            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                           ? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                           ? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ? ??  0x0000000113951d50:   cmp		w10, #1
                           ?  ?  0x0000000113951d54:   b.le		#0x113951d90
                           ?  ?  0x0000000113951d58:   mov		w12, #1
                           ?  ?  0x0000000113951d5c:   b		#0x113951b2c
                           ?  ?  0x0000000113951d60:   mov		x11, xzr
                              ?  0x0000000113951d64:   b		#0x113951cd8        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951d68:   mov		w1, #-0x92
....................................................................................................
  98.45%  <total for region 1>
#+end_src
*** 9.4
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1399.006 ± 33.211  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3719.712 ± 87.950  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1390.658 ± 99.802  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3673.639 ± 65.184  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010a849a50:   cmp		w17, w12
                 0x000000010a849a54:   sub		w11, w17, w12
                 0x000000010a849a58:   csel		w10, wzr, w11, lt
                 0x000000010a849a5c:   cmp		w10, #0xfa0
                 0x000000010a849a60:   csel		w11, w14, w10, hi
                 0x000000010a849a64:   add		w10, w11, w12
                 0x000000010a849a68:   nop
                 0x000000010a849a6c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.09%      ↗  0x000000010a849a70:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010a849a74:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010a849a78:   ldr		x23, [x11, #0x20]
              │  0x000000010a849a7c:   mul		x21, x21, x16
  19.90%      │  0x000000010a849a80:   ldr		x11, [x11, #0x28]
              │  0x000000010a849a84:   mul		x22, x22, x16
              │  0x000000010a849a88:   mul		x23, x23, x16
              │  0x000000010a849a8c:   mov		x24, x21
              │  0x000000010a849a90:   cmp		x7, x21
          ╭   │  0x000000010a849a94:   b.lt		#0x10a849a9c
   0.03%  │   │  0x000000010a849a98:   mov		x24, x7
  15.98%  ↘   │  0x000000010a849a9c:   mul		x11, x11, x16
              │  0x000000010a849aa0:   mov		x7, x22
              │  0x000000010a849aa4:   cmp		x24, x22
           ╭  │  0x000000010a849aa8:   b.lt		#0x10a849ab0
   3.84%   │  │  0x000000010a849aac:   mov		x7, x24
  18.23%   ↘  │  0x000000010a849ab0:   mov		x21, x23
              │  0x000000010a849ab4:   cmp		x7, x23
            ╭ │  0x000000010a849ab8:   b.lt		#0x10a849ac0
   1.47%    │ │  0x000000010a849abc:   mov		x21, x7
  17.49%    ↘ │  0x000000010a849ac0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010a849ac4:   mov		x7, x11
   0.01%      │  0x000000010a849ac8:   cmp		x21, x11
             ╭│  0x000000010a849acc:   b.lt		#0x10a849ad4
   1.40%     ││  0x000000010a849ad0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.91%     ↘│  0x000000010a849ad4:   cmp		w12, w10
              ╰  0x000000010a849ad8:   b.lt		#0x10a849a70        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010a849adc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010a849ae0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010a849ae4:   cmp		w12, w17
                 0x000000010a849ae8:   b.lt		#0x10a849a50
                 0x000000010a849aec:   cmp		w12, w13
                 0x000000010a849af0:   b.lt		#0x10a8499a8
....................................................................................................
  99.52%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 810

                             0x000000010e5e90c0:   csel		w1, w13, w1, hi
                             0x000000010e5e90c4:   add		w11, w1, w12
                             0x000000010e5e90c8:   stp		x16, x0, [sp]
                             0x000000010e5e90cc:   stp		x17, x15, [sp, #0x10]
                             0x000000010e5e90d0:   str		x20, [sp, #0x60]
                             0x000000010e5e90d4:   nop
                             0x000000010e5e90d8:   nop
                             0x000000010e5e90dc:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.00%                  ↗  0x000000010e5e90e0:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.02%                  │  0x000000010e5e90e4:   ldr		x15, [x27, #0x10]
   0.14%                  │  0x000000010e5e90e8:   mov		x29, x25
   0.17%                  │  0x000000010e5e90ec:   cmp		x15, x25
   0.20%  ╭               │  0x000000010e5e90f0:   b.lt		#0x10e5e90f8
          │               │  0x000000010e5e90f4:   mov		x29, x15
   4.56%  ↘               │  0x000000010e5e90f8:   ldr		x16, [x27, #0x18]
   0.16%                  │  0x000000010e5e90fc:   mov		x15, x29
   0.25%                  │  0x000000010e5e9100:   cmp		x16, x29
   0.20%   ╭              │  0x000000010e5e9104:   b.lt		#0x10e5e910c
           │              │  0x000000010e5e9108:   mov		x15, x16
   5.34%   ↘              │  0x000000010e5e910c:   ldr		x17, [x27, #0x20]
   0.23%                  │  0x000000010e5e9110:   mov		x16, x15
   0.20%                  │  0x000000010e5e9114:   cmp		x17, x15
   0.16%    ╭             │  0x000000010e5e9118:   b.lt		#0x10e5e9120
   0.00%    │             │  0x000000010e5e911c:   mov		x16, x17
   5.03%    ↘             │  0x000000010e5e9120:   ldr		x0, [x27, #0x28]
   0.12%                  │  0x000000010e5e9124:   mov		x15, x16
   0.13%                  │  0x000000010e5e9128:   cmp		x0, x16
   0.16%     ╭            │  0x000000010e5e912c:   b.lt		#0x10e5e9134
   0.02%     │            │  0x000000010e5e9130:   mov		x15, x0
   5.64%     ↘            │  0x000000010e5e9134:   ldr		x1, [x27, #0x30]
   0.20%                  │  0x000000010e5e9138:   mov		x16, x15
   0.16%                  │  0x000000010e5e913c:   cmp		x1, x15
   0.25%      ╭           │  0x000000010e5e9140:   b.lt		#0x10e5e9148
              │           │  0x000000010e5e9144:   mov		x16, x1
   5.09%      ↘           │  0x000000010e5e9148:   ldr		x2, [x27, #0x38]
   0.20%                  │  0x000000010e5e914c:   mov		x15, x16
   0.23%                  │  0x000000010e5e9150:   cmp		x2, x16
   0.23%       ╭          │  0x000000010e5e9154:   b.lt		#0x10e5e915c
               │          │  0x000000010e5e9158:   mov		x15, x2
   5.32%       ↘          │  0x000000010e5e915c:   ldr		x3, [x27, #0x40]
   0.13%                  │  0x000000010e5e9160:   mov		x16, x15
   0.15%                  │  0x000000010e5e9164:   cmp		x3, x15
   0.23%        ╭         │  0x000000010e5e9168:   b.lt		#0x10e5e9170
                │         │  0x000000010e5e916c:   mov		x16, x3
   5.18%        ↘         │  0x000000010e5e9170:   ldr		x4, [x27, #0x48]
   0.14%                  │  0x000000010e5e9174:   mov		x15, x16
   0.27%                  │  0x000000010e5e9178:   cmp		x4, x16
   0.14%         ╭        │  0x000000010e5e917c:   b.lt		#0x10e5e9184
                 │        │  0x000000010e5e9180:   mov		x15, x4
   5.22%         ↘        │  0x000000010e5e9184:   ldr		x5, [x27, #0x50]
   0.20%                  │  0x000000010e5e9188:   mov		x16, x15
   0.20%                  │  0x000000010e5e918c:   cmp		x5, x15
   0.16%          ╭       │  0x000000010e5e9190:   b.lt		#0x10e5e9198
                  │       │  0x000000010e5e9194:   mov		x16, x5
   4.99%          ↘       │  0x000000010e5e9198:   ldr		x6, [x27, #0x58]
   0.28%                  │  0x000000010e5e919c:   mov		x15, x16
   0.17%                  │  0x000000010e5e91a0:   cmp		x6, x16
   0.22%           ╭      │  0x000000010e5e91a4:   b.lt		#0x10e5e91ac
   0.01%           │      │  0x000000010e5e91a8:   mov		x15, x6
   5.25%           ↘      │  0x000000010e5e91ac:   ldr		x7, [x27, #0x60]
   0.24%                  │  0x000000010e5e91b0:   mov		x16, x15
   0.19%                  │  0x000000010e5e91b4:   cmp		x7, x15
   0.18%            ╭     │  0x000000010e5e91b8:   b.lt		#0x10e5e91c0
                    │     │  0x000000010e5e91bc:   mov		x16, x7
   5.21%            ↘     │  0x000000010e5e91c0:   ldr		x20, [x27, #0x68]
   0.14%                  │  0x000000010e5e91c4:   mov		x15, x16
   0.22%                  │  0x000000010e5e91c8:   cmp		x20, x16
   0.20%             ╭    │  0x000000010e5e91cc:   b.lt		#0x10e5e91d4
                     │    │  0x000000010e5e91d0:   mov		x15, x20
   5.50%             ↘    │  0x000000010e5e91d4:   ldr		x22, [x27, #0x70]
   0.15%                  │  0x000000010e5e91d8:   mov		x16, x15
   0.15%                  │  0x000000010e5e91dc:   cmp		x22, x15
   0.21%              ╭   │  0x000000010e5e91e0:   b.lt		#0x10e5e91e8
                      │   │  0x000000010e5e91e4:   mov		x16, x22
   5.31%              ↘   │  0x000000010e5e91e8:   ldr		x23, [x27, #0x78]
   0.19%                  │  0x000000010e5e91ec:   mov		x15, x16
   0.14%                  │  0x000000010e5e91f0:   cmp		x23, x16
   0.12%               ╭  │  0x000000010e5e91f4:   b.lt		#0x10e5e91fc
                       │  │  0x000000010e5e91f8:   mov		x15, x23
   4.86%               ↘  │  0x000000010e5e91fc:   ldr		x26, [x27, #0x80]
   0.20%                  │  0x000000010e5e9200:   mov		x16, x15
   0.19%                  │  0x000000010e5e9204:   cmp		x26, x15
   0.15%                ╭ │  0x000000010e5e9208:   b.lt		#0x10e5e9210
                        │ │  0x000000010e5e920c:   mov		x16, x26
   5.80%                ↘ │  0x000000010e5e9210:   ldr		x27, [x27, #0x88]
   0.15%                  │  0x000000010e5e9214:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.15%                  │  0x000000010e5e9218:   mov		x25, x16
   0.19%                  │  0x000000010e5e921c:   cmp		x27, x16
   0.16%                 ╭│  0x000000010e5e9220:   b.lt		#0x10e5e9228
   3.29%                 ││  0x000000010e5e9224:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.21%                 ↘│  0x000000010e5e9228:   cmp		w12, w11
                          ╰  0x000000010e5e922c:   b.lt		#0x10e5e90e0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   1.74%                     0x000000010e5e9230:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                     0x000000010e5e9234:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000010e5e9238:   cmp		w12, w10
                             0x000000010e5e923c:   b.lt		#0x10e5e90a0
                             0x000000010e5e9240:   ldp		x16, x0, [sp]
                             0x000000010e5e9244:   ldp		x17, x15, [sp, #0x10]
....................................................................................................
  97.85%  <total for region 1>
#+end_src
* 8-9.4.25
** aarch64 comparison
*** cmov
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1007.343 ± 44.448  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1094.017 ± 18.633  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1033.564 ± 88.820  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1099.968 ± 27.424  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 811

             0x000000010e631784:   add		w11, w12, w13
             0x000000010e631788:   nop
             0x000000010e63178c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ↗  0x000000010e631790:   add		x12, x6, w13, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010e631794:   ldp		x21, x22, [x12, #0x10]
          │  0x000000010e631798:   mul		x21, x21, x17
   0.01%  │  0x000000010e63179c:   ldr		x23, [x12, #0x20]
          │  0x000000010e6317a0:   mul		x22, x22, x17
          │  0x000000010e6317a4:   cmp		x21, x7
   0.05%  │  0x000000010e6317a8:   ldr		x12, [x12, #0x28]
   0.00%  │  0x000000010e6317ac:   csel		x7, x21, x7, gt
          │  0x000000010e6317b0:   mul		x21, x23, x17
   0.01%  │  0x000000010e6317b4:   cmp		x22, x7
          │  0x000000010e6317b8:   csel		x7, x22, x7, gt
   0.02%  │  0x000000010e6317bc:   mul		x12, x12, x17
   2.28%  │  0x000000010e6317c0:   cmp		x21, x7
  74.76%  │  0x000000010e6317c4:   csel		x7, x21, x7, gt
   4.87%  │  0x000000010e6317c8:   cmp		x12, x7
   4.87%  │  0x000000010e6317cc:   add		w13, w13, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   4.86%  │  0x000000010e6317d0:   csel		x7, x12, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   7.44%  │  0x000000010e6317d4:   cmp		w13, w11
          ╰  0x000000010e6317d8:   b.lt		#0x10e631790        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.34%     0x000000010e6317dc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%     0x000000010e6317e0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x000000010e6317e4:   cmp		w13, w15
             0x000000010e6317e8:   b.lt		#0x10e631770
             0x000000010e6317ec:   cmp		w13, w10
             0x000000010e6317f0:   b.lt		#0x10e6316e0
....................................................................................................
  99.57%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 819

             0x000000010ae411c4:   nop
             0x000000010ae411c8:   nop
             0x000000010ae411cc:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ↗  0x000000010ae411d0:   add		x21, x5, w2, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010ae411d4:   ldr		x11, [x21, #0x10]
          │  0x000000010ae411d8:   cmp		x6, x11
   0.01%  │  0x000000010ae411dc:   ldr		x7, [x21, #0x18]
          │  0x000000010ae411e0:   csel		x11, x6, x11, gt
          │  0x000000010ae411e4:   cmp		x11, x7
          │  0x000000010ae411e8:   ldr		x6, [x21, #0x20]
          │  0x000000010ae411ec:   csel		x11, x11, x7, gt
          │  0x000000010ae411f0:   cmp		x11, x6
   0.02%  │  0x000000010ae411f4:   ldr		x7, [x21, #0x28]
          │  0x000000010ae411f8:   csel		x11, x11, x6, gt
          │  0x000000010ae411fc:   cmp		x11, x7
   0.00%  │  0x000000010ae41200:   ldr		x6, [x21, #0x30]
          │  0x000000010ae41204:   csel		x11, x11, x7, gt
          │  0x000000010ae41208:   cmp		x11, x6
   0.00%  │  0x000000010ae4120c:   ldr		x7, [x21, #0x38]
          │  0x000000010ae41210:   csel		x11, x11, x6, gt
          │  0x000000010ae41214:   cmp		x11, x7
   1.01%  │  0x000000010ae41218:   ldr		x6, [x21, #0x40]
   0.27%  │  0x000000010ae4121c:   csel		x11, x11, x7, gt
          │  0x000000010ae41220:   cmp		x11, x6
   2.86%  │  0x000000010ae41224:   ldr		x7, [x21, #0x48]
          │  0x000000010ae41228:   csel		x11, x11, x6, gt
          │  0x000000010ae4122c:   cmp		x11, x7
   2.53%  │  0x000000010ae41230:   ldr		x6, [x21, #0x50]
          │  0x000000010ae41234:   csel		x11, x11, x7, gt
          │  0x000000010ae41238:   cmp		x11, x6
   4.48%  │  0x000000010ae4123c:   ldr		x7, [x21, #0x58]
          │  0x000000010ae41240:   csel		x11, x11, x6, gt
          │  0x000000010ae41244:   cmp		x11, x7
   5.82%  │  0x000000010ae41248:   ldr		x6, [x21, #0x60]
          │  0x000000010ae4124c:   csel		x11, x11, x7, gt
          │  0x000000010ae41250:   cmp		x11, x6
   5.05%  │  0x000000010ae41254:   ldr		x7, [x21, #0x68]
          │  0x000000010ae41258:   csel		x11, x11, x6, gt
          │  0x000000010ae4125c:   cmp		x11, x7
   5.37%  │  0x000000010ae41260:   ldr		x6, [x21, #0x70]
          │  0x000000010ae41264:   csel		x11, x11, x7, gt
          │  0x000000010ae41268:   cmp		x11, x6
   5.20%  │  0x000000010ae4126c:   ldr		x7, [x21, #0x78]
          │  0x000000010ae41270:   csel		x11, x11, x6, gt
          │  0x000000010ae41274:   cmp		x11, x7
   5.79%  │  0x000000010ae41278:   ldr		x6, [x21, #0x80]
   0.05%  │  0x000000010ae4127c:   csel		x11, x11, x7, gt
          │  0x000000010ae41280:   cmp		x11, x6
  60.12%  │  0x000000010ae41284:   ldr		x7, [x21, #0x88]
          │  0x000000010ae41288:   csel		x11, x11, x6, gt
          │  0x000000010ae4128c:   cmp		x11, x7
          │  0x000000010ae41290:   add		w2, w2, #0x10       ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010ae41294:   csel		x6, x11, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010ae41298:   cmp		w2, w12
          ╰  0x000000010ae4129c:   b.lt		#0x10ae411d0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.39%     0x000000010ae412a0:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop c_rarg0=Oop c_rarg3=Oop c_rarg4=Oop c_rarg1=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%     0x000000010ae412a4:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x000000010ae412a8:   cmp		w2, w17
             0x000000010ae412ac:   b.lt		#0x10ae411a8
             0x000000010ae412b0:   cmp		w2, w10
             0x000000010ae412b4:   b.lt		#0x10ae41120
....................................................................................................
  99.03%  <total for region 1>
#+end_src
*** branch always
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2861.913 ± 17.558  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1695.945 ± 28.365  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2854.146 ± 13.253  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1722.534 ± 62.408  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010cf19cdc:   cmp		w10, #0xfa0
                 0x000000010cf19ce0:   csel		w11, w14, w10, hi
                 0x000000010cf19ce4:   add		w10, w11, w12
                 0x000000010cf19ce8:   nop
                 0x000000010cf19cec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ↗  0x000000010cf19cf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010cf19cf4:   ldp		x21, x22, [x11, #0x10]
   0.00%      │  0x000000010cf19cf8:   ldr		x23, [x11, #0x20]
              │  0x000000010cf19cfc:   mul		x21, x21, x16
  29.27%      │  0x000000010cf19d00:   ldr		x11, [x11, #0x28]
   1.09%      │  0x000000010cf19d04:   mul		x22, x22, x16
   0.86%      │  0x000000010cf19d08:   mul		x23, x23, x16
   1.15%      │  0x000000010cf19d0c:   mov		x24, x7
   0.02%      │  0x000000010cf19d10:   cmp		x21, x7
   2.02%  ╭   │  0x000000010cf19d14:   b.lt		#0x10cf19d1c
  14.03%  │   │  0x000000010cf19d18:   mov		x24, x21
   1.09%  ↘   │  0x000000010cf19d1c:   mul		x11, x11, x16
   0.03%      │  0x000000010cf19d20:   mov		x7, x24
   1.18%      │  0x000000010cf19d24:   cmp		x22, x24
   1.10%   ╭  │  0x000000010cf19d28:   b.lt		#0x10cf19d30
  14.20%   │  │  0x000000010cf19d2c:   mov		x7, x22
   0.03%   ↘  │  0x000000010cf19d30:   mov		x21, x7
   1.11%      │  0x000000010cf19d34:   cmp		x23, x7
   1.29%    ╭ │  0x000000010cf19d38:   b.lt		#0x10cf19d40
  17.14%    │ │  0x000000010cf19d3c:   mov		x21, x23
   0.01%    ↘ │  0x000000010cf19d40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   1.13%      │  0x000000010cf19d44:   mov		x7, x21
   1.23%      │  0x000000010cf19d48:   cmp		x11, x21
   0.02%     ╭│  0x000000010cf19d4c:   b.lt		#0x10cf19d54
   9.03%     ││  0x000000010cf19d50:   mov		x7, x11             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.86%     ↘│  0x000000010cf19d54:   cmp		w12, w10
              ╰  0x000000010cf19d58:   b.lt		#0x10cf19cf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   1.07%         0x000000010cf19d5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.11%         0x000000010cf19d60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010cf19d64:   cmp		w12, w17
                 0x000000010cf19d68:   b.lt		#0x10cf19cd0
                 0x000000010cf19d6c:   cmp		w12, w13
                 0x000000010cf19d70:   b.lt		#0x10cf19c28
....................................................................................................
  99.15%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 807

                              0x0000000128af4680:   csel		w1, w13, w1, hi
                              0x0000000128af4684:   add		w11, w1, w12
                              0x0000000128af4688:   stp		x16, x0, [sp]
                              0x0000000128af468c:   stp		x17, x15, [sp, #0x10]
                              0x0000000128af4690:   str		x20, [sp, #0x60]
                              0x0000000128af4694:   nop
                              0x0000000128af4698:   nop
                              0x0000000128af469c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.39%                  ↗   0x0000000128af46a0:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.41%                  │   0x0000000128af46a4:   ldr		x15, [x27, #0x10]
                          │   0x0000000128af46a8:   mov		x29, x15
   0.00%                  │   0x0000000128af46ac:   cmp		x25, x15
          ╭               │   0x0000000128af46b0:   b.lt		#0x128af46b8
   0.08%  │               │   0x0000000128af46b4:   mov		x29, x25
   4.81%  ↘               │   0x0000000128af46b8:   ldr		x16, [x27, #0x18]
                          │   0x0000000128af46bc:   mov		x15, x16
                          │   0x0000000128af46c0:   cmp		x29, x16
           ╭              │   0x0000000128af46c4:   b.lt		#0x128af46cc
   0.52%   │              │   0x0000000128af46c8:   mov		x15, x29
   5.96%   ↘              │   0x0000000128af46cc:   ldr		x17, [x27, #0x20]
                          │   0x0000000128af46d0:   mov		x16, x17
                          │   0x0000000128af46d4:   cmp		x15, x17
            ╭             │   0x0000000128af46d8:   b.lt		#0x128af46e0
   0.48%    │             │   0x0000000128af46dc:   mov		x16, x15
   5.34%    ↘             │   0x0000000128af46e0:   ldr		x0, [x27, #0x28]
                          │   0x0000000128af46e4:   mov		x15, x0
                          │   0x0000000128af46e8:   cmp		x16, x0
             ╭            │   0x0000000128af46ec:   b.lt		#0x128af46f4
   0.39%     │            │   0x0000000128af46f0:   mov		x15, x16
   5.55%     ↘            │   0x0000000128af46f4:   ldr		x1, [x27, #0x30]
                          │   0x0000000128af46f8:   mov		x16, x1
                          │   0x0000000128af46fc:   cmp		x15, x1
              ╭           │   0x0000000128af4700:   b.lt		#0x128af4708
   0.22%      │           │   0x0000000128af4704:   mov		x16, x15
   5.18%      ↘           │   0x0000000128af4708:   ldr		x2, [x27, #0x38]
                          │   0x0000000128af470c:   mov		x15, x2
                          │   0x0000000128af4710:   cmp		x16, x2
               ╭          │   0x0000000128af4714:   b.lt		#0x128af471c
   0.15%       │          │   0x0000000128af4718:   mov		x15, x16
   5.81%       ↘          │   0x0000000128af471c:   ldr		x3, [x27, #0x40]
                          │   0x0000000128af4720:   mov		x16, x3
                          │   0x0000000128af4724:   cmp		x15, x3
                ╭         │   0x0000000128af4728:   b.lt		#0x128af4730
   0.16%        │         │   0x0000000128af472c:   mov		x16, x15
   5.16%        ↘         │   0x0000000128af4730:   ldr		x4, [x27, #0x48]
                          │   0x0000000128af4734:   mov		x15, x4
                          │   0x0000000128af4738:   cmp		x16, x4
                 ╭        │   0x0000000128af473c:   b.lt		#0x128af4744
   0.29%         │        │   0x0000000128af4740:   mov		x15, x16
   5.95%         ↘        │   0x0000000128af4744:   ldr		x5, [x27, #0x50]
                          │   0x0000000128af4748:   mov		x16, x5
                          │   0x0000000128af474c:   cmp		x15, x5
                  ╭       │   0x0000000128af4750:   b.lt		#0x128af4758
   0.07%          │       │   0x0000000128af4754:   mov		x16, x15
   5.09%          ↘       │   0x0000000128af4758:   ldr		x6, [x27, #0x58]
                          │   0x0000000128af475c:   mov		x15, x6
                          │   0x0000000128af4760:   cmp		x16, x6
                   ╭      │   0x0000000128af4764:   b.lt		#0x128af476c
   0.14%           │      │   0x0000000128af4768:   mov		x15, x16
   5.77%           ↘      │   0x0000000128af476c:   ldr		x7, [x27, #0x60]
                          │   0x0000000128af4770:   mov		x16, x7
                          │   0x0000000128af4774:   cmp		x15, x7
                    ╭     │   0x0000000128af4778:   b.lt		#0x128af4780
   0.45%            │     │   0x0000000128af477c:   mov		x16, x15
   5.52%            ↘     │   0x0000000128af4780:   ldr		x20, [x27, #0x68]
                          │   0x0000000128af4784:   mov		x15, x20
                          │   0x0000000128af4788:   cmp		x16, x20
                     ╭    │   0x0000000128af478c:   b.lt		#0x128af4794
   0.18%             │    │   0x0000000128af4790:   mov		x15, x16
   5.34%             ↘    │   0x0000000128af4794:   ldr		x22, [x27, #0x70]
                          │   0x0000000128af4798:   mov		x16, x22
                          │   0x0000000128af479c:   cmp		x15, x22
                      ╭   │   0x0000000128af47a0:   b.lt		#0x128af47a8
   0.52%              │   │   0x0000000128af47a4:   mov		x16, x15
   6.09%              ↘   │   0x0000000128af47a8:   ldr		x23, [x27, #0x78]
                          │   0x0000000128af47ac:   mov		x15, x23
                          │   0x0000000128af47b0:   cmp		x16, x23
                       ╭  │   0x0000000128af47b4:   b.lt		#0x128af47bc
   0.22%               │  │   0x0000000128af47b8:   mov		x15, x16
   4.82%               ↘  │   0x0000000128af47bc:   ldr		x26, [x27, #0x80]
                          │   0x0000000128af47c0:   mov		x16, x26
                          │   0x0000000128af47c4:   cmp		x15, x26
                        ╭ │   0x0000000128af47c8:   b.lt		#0x128af47d0
   0.42%                │ │   0x0000000128af47cc:   mov		x16, x15
   6.18%                ↘ │   0x0000000128af47d0:   ldr		x27, [x27, #0x88]
                          │   0x0000000128af47d4:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                          │   0x0000000128af47d8:   mov		x25, x27
                          │   0x0000000128af47dc:   cmp		x16, x27
                         ╭│   0x0000000128af47e0:   b.lt		#0x128af47e8
   0.82%                 ││   0x0000000128af47e4:   mov		x25, x16            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   4.75%                 ↘│   0x0000000128af47e8:   cmp		w12, w11
                          ╰   0x0000000128af47ec:   b.lt		#0x128af46a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                      0x0000000128af47f0:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                        ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                        ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%                      0x0000000128af47f4:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                        ;   {poll}
                              0x0000000128af47f8:   cmp		w12, w10
                              0x0000000128af47fc:   b.lt		#0x128af4660
                              0x0000000128af4800:   ldp		x16, x0, [sp]
                              0x0000000128af4804:   ldp		x17, x15, [sp, #0x10]
   0.01%                      0x0000000128af4808:   ldr		x20, [sp, #0x60]
                              0x0000000128af480c:   cmp		w12, w14
                              0x0000000128af4810:   b.lt		#0x128af4638
                              0x0000000128af4814:   mov		x11, x25            ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%                      0x0000000128af4818:   ldarb		w14, [x21]          ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 107)
                              0x0000000128af481c:   ldr		x1, [x28, #0x30]
                              0x0000000128af4820:   add		x19, x19, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg0=Oop rdispatch=Derived_oop_c_rarg0 resp=Oop }
                                                                                        ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                                                                                        ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 107)
   0.09%                      0x0000000128af4824:   ldr		wzr, [x1]           ;   {poll}
                              0x0000000128af4828:   cbnz		w14, #0x128af45e8   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 108)
                              0x0000000128af482c:   ldr		w14, [x15, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              0x0000000128af4830:   cmp		w14, #0
                              0x0000000128af4834:   b.le		#0x128af48a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              0x0000000128af4838:   ldr		w10, [x15, #0x2c]
                              0x0000000128af483c:   lsl		x24, x10, #3        ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.03%                      0x0000000128af4840:   ldr		w10, [x24, #0xc]    ; implicit exception: dispatches to 0x0000000128af48a8
                                                                                        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              0x0000000128af4844:   sxtw		x11, w14
                              0x0000000128af4848:   sub		x1, x11, #0xf
                              0x0000000128af484c:   sxtw		x12, w10
                              0x0000000128af4850:   sub		x11, x11, #1
                              0x0000000128af4854:   cbz		w10, #0x128af48a8
                              0x0000000128af4858:   cmp		x11, x12
                              0x0000000128af485c:   b.hs		#0x128af48a8
   0.02%                      0x0000000128af4860:   ldr		x11, [x24, #0x10]
                              0x0000000128af4864:   mov		x12, #-0x80000000
                              0x0000000128af4868:   mov		x10, x12
                              0x0000000128af486c:   cmp		x1, x12
                           ╭  0x0000000128af4870:   b.lt		#0x128af4878
                           │  0x0000000128af4874:   mov		x10, x1
                           ↘  0x0000000128af4878:   mov		x12, xzr
                              0x0000000128af487c:   mov		w10, w10
                              0x0000000128af4880:   mov		x25, x12
                              0x0000000128af4884:   cmp		x11, x12
                              0x0000000128af4888:   b.lt		#0x128af4890
....................................................................................................
  98.55%  <total for region 1>
#+end_src
*** branch never
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1399.006 ± 33.211  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3719.712 ± 87.950  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1390.658 ± 99.802  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3673.639 ± 65.184  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010a849a50:   cmp		w17, w12
                 0x000000010a849a54:   sub		w11, w17, w12
                 0x000000010a849a58:   csel		w10, wzr, w11, lt
                 0x000000010a849a5c:   cmp		w10, #0xfa0
                 0x000000010a849a60:   csel		w11, w14, w10, hi
                 0x000000010a849a64:   add		w10, w11, w12
                 0x000000010a849a68:   nop
                 0x000000010a849a6c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.09%      ↗  0x000000010a849a70:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010a849a74:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010a849a78:   ldr		x23, [x11, #0x20]
              │  0x000000010a849a7c:   mul		x21, x21, x16
  19.90%      │  0x000000010a849a80:   ldr		x11, [x11, #0x28]
              │  0x000000010a849a84:   mul		x22, x22, x16
              │  0x000000010a849a88:   mul		x23, x23, x16
              │  0x000000010a849a8c:   mov		x24, x21
              │  0x000000010a849a90:   cmp		x7, x21
          ╭   │  0x000000010a849a94:   b.lt		#0x10a849a9c
   0.03%  │   │  0x000000010a849a98:   mov		x24, x7
  15.98%  ↘   │  0x000000010a849a9c:   mul		x11, x11, x16
              │  0x000000010a849aa0:   mov		x7, x22
              │  0x000000010a849aa4:   cmp		x24, x22
           ╭  │  0x000000010a849aa8:   b.lt		#0x10a849ab0
   3.84%   │  │  0x000000010a849aac:   mov		x7, x24
  18.23%   ↘  │  0x000000010a849ab0:   mov		x21, x23
              │  0x000000010a849ab4:   cmp		x7, x23
            ╭ │  0x000000010a849ab8:   b.lt		#0x10a849ac0
   1.47%    │ │  0x000000010a849abc:   mov		x21, x7
  17.49%    ↘ │  0x000000010a849ac0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010a849ac4:   mov		x7, x11
   0.01%      │  0x000000010a849ac8:   cmp		x21, x11
             ╭│  0x000000010a849acc:   b.lt		#0x10a849ad4
   1.40%     ││  0x000000010a849ad0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.91%     ↘│  0x000000010a849ad4:   cmp		w12, w10
              ╰  0x000000010a849ad8:   b.lt		#0x10a849a70        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010a849adc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010a849ae0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010a849ae4:   cmp		w12, w17
                 0x000000010a849ae8:   b.lt		#0x10a849a50
                 0x000000010a849aec:   cmp		w12, w13
                 0x000000010a849af0:   b.lt		#0x10a8499a8
....................................................................................................
  99.52%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 810

                             0x000000010e5e90c0:   csel		w1, w13, w1, hi
                             0x000000010e5e90c4:   add		w11, w1, w12
                             0x000000010e5e90c8:   stp		x16, x0, [sp]
                             0x000000010e5e90cc:   stp		x17, x15, [sp, #0x10]
                             0x000000010e5e90d0:   str		x20, [sp, #0x60]
                             0x000000010e5e90d4:   nop
                             0x000000010e5e90d8:   nop
                             0x000000010e5e90dc:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.00%                  ↗  0x000000010e5e90e0:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.02%                  │  0x000000010e5e90e4:   ldr		x15, [x27, #0x10]
   0.14%                  │  0x000000010e5e90e8:   mov		x29, x25
   0.17%                  │  0x000000010e5e90ec:   cmp		x15, x25
   0.20%  ╭               │  0x000000010e5e90f0:   b.lt		#0x10e5e90f8
          │               │  0x000000010e5e90f4:   mov		x29, x15
   4.56%  ↘               │  0x000000010e5e90f8:   ldr		x16, [x27, #0x18]
   0.16%                  │  0x000000010e5e90fc:   mov		x15, x29
   0.25%                  │  0x000000010e5e9100:   cmp		x16, x29
   0.20%   ╭              │  0x000000010e5e9104:   b.lt		#0x10e5e910c
           │              │  0x000000010e5e9108:   mov		x15, x16
   5.34%   ↘              │  0x000000010e5e910c:   ldr		x17, [x27, #0x20]
   0.23%                  │  0x000000010e5e9110:   mov		x16, x15
   0.20%                  │  0x000000010e5e9114:   cmp		x17, x15
   0.16%    ╭             │  0x000000010e5e9118:   b.lt		#0x10e5e9120
   0.00%    │             │  0x000000010e5e911c:   mov		x16, x17
   5.03%    ↘             │  0x000000010e5e9120:   ldr		x0, [x27, #0x28]
   0.12%                  │  0x000000010e5e9124:   mov		x15, x16
   0.13%                  │  0x000000010e5e9128:   cmp		x0, x16
   0.16%     ╭            │  0x000000010e5e912c:   b.lt		#0x10e5e9134
   0.02%     │            │  0x000000010e5e9130:   mov		x15, x0
   5.64%     ↘            │  0x000000010e5e9134:   ldr		x1, [x27, #0x30]
   0.20%                  │  0x000000010e5e9138:   mov		x16, x15
   0.16%                  │  0x000000010e5e913c:   cmp		x1, x15
   0.25%      ╭           │  0x000000010e5e9140:   b.lt		#0x10e5e9148
              │           │  0x000000010e5e9144:   mov		x16, x1
   5.09%      ↘           │  0x000000010e5e9148:   ldr		x2, [x27, #0x38]
   0.20%                  │  0x000000010e5e914c:   mov		x15, x16
   0.23%                  │  0x000000010e5e9150:   cmp		x2, x16
   0.23%       ╭          │  0x000000010e5e9154:   b.lt		#0x10e5e915c
               │          │  0x000000010e5e9158:   mov		x15, x2
   5.32%       ↘          │  0x000000010e5e915c:   ldr		x3, [x27, #0x40]
   0.13%                  │  0x000000010e5e9160:   mov		x16, x15
   0.15%                  │  0x000000010e5e9164:   cmp		x3, x15
   0.23%        ╭         │  0x000000010e5e9168:   b.lt		#0x10e5e9170
                │         │  0x000000010e5e916c:   mov		x16, x3
   5.18%        ↘         │  0x000000010e5e9170:   ldr		x4, [x27, #0x48]
   0.14%                  │  0x000000010e5e9174:   mov		x15, x16
   0.27%                  │  0x000000010e5e9178:   cmp		x4, x16
   0.14%         ╭        │  0x000000010e5e917c:   b.lt		#0x10e5e9184
                 │        │  0x000000010e5e9180:   mov		x15, x4
   5.22%         ↘        │  0x000000010e5e9184:   ldr		x5, [x27, #0x50]
   0.20%                  │  0x000000010e5e9188:   mov		x16, x15
   0.20%                  │  0x000000010e5e918c:   cmp		x5, x15
   0.16%          ╭       │  0x000000010e5e9190:   b.lt		#0x10e5e9198
                  │       │  0x000000010e5e9194:   mov		x16, x5
   4.99%          ↘       │  0x000000010e5e9198:   ldr		x6, [x27, #0x58]
   0.28%                  │  0x000000010e5e919c:   mov		x15, x16
   0.17%                  │  0x000000010e5e91a0:   cmp		x6, x16
   0.22%           ╭      │  0x000000010e5e91a4:   b.lt		#0x10e5e91ac
   0.01%           │      │  0x000000010e5e91a8:   mov		x15, x6
   5.25%           ↘      │  0x000000010e5e91ac:   ldr		x7, [x27, #0x60]
   0.24%                  │  0x000000010e5e91b0:   mov		x16, x15
   0.19%                  │  0x000000010e5e91b4:   cmp		x7, x15
   0.18%            ╭     │  0x000000010e5e91b8:   b.lt		#0x10e5e91c0
                    │     │  0x000000010e5e91bc:   mov		x16, x7
   5.21%            ↘     │  0x000000010e5e91c0:   ldr		x20, [x27, #0x68]
   0.14%                  │  0x000000010e5e91c4:   mov		x15, x16
   0.22%                  │  0x000000010e5e91c8:   cmp		x20, x16
   0.20%             ╭    │  0x000000010e5e91cc:   b.lt		#0x10e5e91d4
                     │    │  0x000000010e5e91d0:   mov		x15, x20
   5.50%             ↘    │  0x000000010e5e91d4:   ldr		x22, [x27, #0x70]
   0.15%                  │  0x000000010e5e91d8:   mov		x16, x15
   0.15%                  │  0x000000010e5e91dc:   cmp		x22, x15
   0.21%              ╭   │  0x000000010e5e91e0:   b.lt		#0x10e5e91e8
                      │   │  0x000000010e5e91e4:   mov		x16, x22
   5.31%              ↘   │  0x000000010e5e91e8:   ldr		x23, [x27, #0x78]
   0.19%                  │  0x000000010e5e91ec:   mov		x15, x16
   0.14%                  │  0x000000010e5e91f0:   cmp		x23, x16
   0.12%               ╭  │  0x000000010e5e91f4:   b.lt		#0x10e5e91fc
                       │  │  0x000000010e5e91f8:   mov		x15, x23
   4.86%               ↘  │  0x000000010e5e91fc:   ldr		x26, [x27, #0x80]
   0.20%                  │  0x000000010e5e9200:   mov		x16, x15
   0.19%                  │  0x000000010e5e9204:   cmp		x26, x15
   0.15%                ╭ │  0x000000010e5e9208:   b.lt		#0x10e5e9210
                        │ │  0x000000010e5e920c:   mov		x16, x26
   5.80%                ↘ │  0x000000010e5e9210:   ldr		x27, [x27, #0x88]
   0.15%                  │  0x000000010e5e9214:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.15%                  │  0x000000010e5e9218:   mov		x25, x16
   0.19%                  │  0x000000010e5e921c:   cmp		x27, x16
   0.16%                 ╭│  0x000000010e5e9220:   b.lt		#0x10e5e9228
   3.29%                 ││  0x000000010e5e9224:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.21%                 ↘│  0x000000010e5e9228:   cmp		w12, w11
                          ╰  0x000000010e5e922c:   b.lt		#0x10e5e90e0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   1.74%                     0x000000010e5e9230:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                     0x000000010e5e9234:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000010e5e9238:   cmp		w12, w10
                             0x000000010e5e923c:   b.lt		#0x10e5e90a0
                             0x000000010e5e9240:   ldp		x16, x0, [sp]
                             0x000000010e5e9244:   ldp		x17, x15, [sp, #0x10]
....................................................................................................
  97.85%  <total for region 1>
#+end_src
*** disabled intrinsic
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2492.205 ± 62.451  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3495.841 ± 71.436  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2601.966 ± 263.504  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN               ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3498.322 ±  82.773  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN               ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 823

                     0x000000010ccaa344:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
                     0x000000010ccaa348:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
                     0x000000010ccaa34c:   ldp		x29, x30, [sp, #0x50]
                     0x000000010ccaa350:   add		sp, sp, #0x60
                     0x000000010ccaa354:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                     0x000000010ccaa358:   cmp		sp, x8
                     0x000000010ccaa35c:   b.hi		#0x10ccaa5ac
                     0x000000010ccaa360:   ret
   2.77%       ↗     0x000000010ccaa364:   mov		x12, x7
   0.00%       │     0x000000010ccaa368:   nop
   0.01%       │     0x000000010ccaa36c:   nop
  18.34%      ↗│     0x000000010ccaa370:   cmp		x12, x21
   0.00%  ╭   ││     0x000000010ccaa374:   b.ge		#0x10ccaa3d4
  16.43%  │   ││  ↗  0x000000010ccaa378:   cmp		x21, x6
   0.00%  │╭  ││  │  0x000000010ccaa37c:   b.ge		#0x10ccaa3c4        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││  ││  │                                                            ; - java.lang.Math::max@11 (line 2038)
          ││  ││  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││  ││  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  21.64%  ││  ││↗ │  0x000000010ccaa380:   add		w1, w1, #4          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││  │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ││  │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.28%  ││  │││ │  0x000000010ccaa384:   cmp		w1, w11
   0.00%  ││╭ │││ │  0x000000010ccaa388:   b.ge		#0x10ccaa3dc        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          │││ │││ │  0x000000010ccaa38c:   mov		x22, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          │││ │││ │  0x000000010ccaa390:   add		x12, x5, w1, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%  │││ │││ │  0x000000010ccaa394:   ldr		x7, [x12, #0x10]
   0.00%  │││ │││ │  0x000000010ccaa398:   ldp		x21, x6, [x12, #0x20]
  20.48%  │││ │││ │  0x000000010ccaa39c:   ldr		x12, [x12, #0x18]
   0.03%  │││ │││ │  0x000000010ccaa3a0:   mul		x7, x7, x15
   0.17%  │││ │││ │  0x000000010ccaa3a4:   mul		x6, x6, x15
          │││ │││ │  0x000000010ccaa3a8:   mul		x12, x12, x15
          │││ │││ │  0x000000010ccaa3ac:   mul		x21, x21, x15       ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.14%  │││ │││ │  0x000000010ccaa3b0:   cmp		x22, x7
          │││╭│││ │  0x000000010ccaa3b4:   b.ge		#0x10ccaa3cc        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││││││ │                                                            ; - java.lang.Math::max@11 (line 2038)
          │││││││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          │││││││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  17.70%  │││││││↗│  0x000000010ccaa3b8:   cmp		x7, x12
   0.00%  ││││╰││││  0x000000010ccaa3bc:   b.lt		#0x10ccaa370        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ││││ ││││                                                            ; - java.lang.Math::max@3 (line 2038)
          ││││ ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││││ ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.01%  ││││ ╰│││  0x000000010ccaa3c0:   b		#0x10ccaa364
   0.41%  │↘││  │││  0x000000010ccaa3c4:   mov		x6, x21
          │ ││  ╰││  0x000000010ccaa3c8:   b		#0x10ccaa380
   0.28%  │ │↘   ││  0x000000010ccaa3cc:   mov		x7, x22
          │ │    ╰│  0x000000010ccaa3d0:   b		#0x10ccaa3b8
   0.42%  ↘ │     │  0x000000010ccaa3d4:   mov		x21, x12
            │     ╰  0x000000010ccaa3d8:   b		#0x10ccaa378
            ↘        0x000000010ccaa3dc:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop c_rarg0=Oop c_rarg2=Oop c_rarg4=Oop c_rarg3=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.01%             0x000000010ccaa3e0:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x000000010ccaa3e4:   cmp		w1, w17
                     0x000000010ccaa3e8:   b.ge		#0x10ccaa43c
                     0x000000010ccaa3ec:   mov		x22, x6
                     0x000000010ccaa3f0:   cmp		w17, w1
....................................................................................................
  99.19%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 820

                   0x000000010a89bbbc:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@48 (line 109)
                   0x000000010a89bbc0:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@42 (line 108)
                   0x000000010a89bbc4:   ldp		x29, x30, [sp, #0x50]
                   0x000000010a89bbc8:   add		sp, sp, #0x60
                   0x000000010a89bbcc:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                   0x000000010a89bbd0:   cmp		sp, x8
                   0x000000010a89bbd4:   b.hi		#0x10a89be50
                   0x000000010a89bbd8:   ret
   1.04%      ↗    0x000000010a89bbdc:   mov		x7, x13
   9.48%     ↗│    0x000000010a89bbe0:   cmp		x7, x23
   0.35%  ╭  ││    0x000000010a89bbe4:   b.ge		#0x10a89bc4c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │  ││                                                              ; - java.lang.Math::max@11 (line 2038)
          │  ││                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │  ││                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  10.94%  │  ││↗   0x000000010a89bbe8:   add		w11, w11, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.13%  │  │││   0x000000010a89bbec:   cmp		w11, w14
   0.01%  │  │││   0x000000010a89bbf0:   b.ge		#0x10a89bc84        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  │││   0x000000010a89bbf4:   mov		x25, x23            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  │││   0x000000010a89bbf8:   add		x13, x4, w11, sxtw #3
   0.00%  │  │││   0x000000010a89bbfc:   ldr		x23, [x13, #0x48]
   0.01%  │  │││   0x000000010a89bc00:   ldp		x5, x6, [x13, #0x10]
   0.04%  │  │││   0x000000010a89bc04:   ldr		x7, [x13, #0x40]
   0.05%  │  │││   0x000000010a89bc08:   ldp		x21, x22, [x13, #0x20]
  10.98%  │  │││   0x000000010a89bc0c:   ldp		x24, x13, [x13, #0x30];*laload {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  │││   0x000000010a89bc10:   cmp		x25, x5
          │  │││   0x000000010a89bc14:   b.ge		#0x10a89bc7c
  11.51%  │  │││   0x000000010a89bc18:   cmp		x5, x6
   0.01%  │╭ │││   0x000000010a89bc1c:   b.ge		#0x10a89bc54
  10.65%  ││ │││↗  0x000000010a89bc20:   cmp		x6, x21
   0.13%  ││ ││││  0x000000010a89bc24:   b.ge		#0x10a89bc74
  10.88%  ││ ││││  0x000000010a89bc28:   cmp		x21, x22
   0.17%  ││╭││││  0x000000010a89bc2c:   b.ge		#0x10a89bc5c
  10.85%  │││││││  0x000000010a89bc30:   cmp		x22, x24
   0.21%  │││││││  0x000000010a89bc34:   b.ge		#0x10a89bc64
  10.76%  │││││││  0x000000010a89bc38:   cmp		x24, x13
   0.05%  │││││││  0x000000010a89bc3c:   b.ge		#0x10a89bc6c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││││││                                                            ; - java.lang.Math::max@11 (line 2038)
          │││││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │││││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  10.80%  │││││││  0x000000010a89bc40:   cmp		x13, x7
   0.00%  │││╰│││  0x000000010a89bc44:   b.lt		#0x10a89bbe0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          │││ │││                                                            ; - java.lang.Math::max@3 (line 2038)
          │││ │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │││ │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │││ ╰││  0x000000010a89bc48:   b		#0x10a89bbdc
          ↘││  ││  0x000000010a89bc4c:   mov		x23, x7
           ││  ╰│  0x000000010a89bc50:   b		#0x10a89bbe8
           ↘│   │  0x000000010a89bc54:   mov		x6, x5
            │   ╰  0x000000010a89bc58:   b		#0x10a89bc20
            ↘      0x000000010a89bc5c:   mov		x22, x21
                   0x000000010a89bc60:   b		#0x10a89bc30
....................................................................................................
  99.06%  <total for region 1>
#+end_src
** x64 comparison
*** cmov
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  546.459 ± 0.359  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  602.729 ± 0.192  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  545.467 ± 0.444  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt           NaN             ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  601.635 ± 0.165  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt           NaN             ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1244

              0x00007f329cc3728f:   cmpq		%r8, %r14
              0x00007f329cc37292:   cmovlq		%r8, %r14
   0.02%      0x00007f329cc37296:   movl		%r14d, %ebp
              0x00007f329cc37299:   cmpl		$1, %ebp
              0x00007f329cc3729c:   jle		0x7f329cc373a8
              0x00007f329cc372a2:   movl		$1, %r8d
              0x00007f329cc372a8:   vmovq		%rdx, %xmm0
              0x00007f329cc372ad:   vmovq		%r11, %xmm1
           ↗  0x00007f329cc372b2:   movl		%ebp, %r11d
           │  0x00007f329cc372b5:   subl		%r8d, %r11d
   0.02%   │  0x00007f329cc372b8:   cmpl		%r8d, %ebp
           │  0x00007f329cc372bb:   cmovll		%r10d, %r11d
           │  0x00007f329cc372bf:   cmpl		$0xfa0, %r11d
           │  0x00007f329cc372c6:   cmoval		%esi, %r11d
           │  0x00007f329cc372ca:   addl		%r8d, %r11d
           │  0x00007f329cc372cd:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.03%  ↗│  0x00007f329cc372d0:   imulq		$0xb, 0x10(%rax, %r8, 8), %rdx
   0.03%  ││  0x00007f329cc372d6:   cmpq		%rdi, %rdx
   9.19%  ││  0x00007f329cc372d9:   cmovlq		%rdi, %rdx
  19.76%  ││  0x00007f329cc372dd:   imulq		$0xb, 0x18(%rax, %r8, 8), %r14
          ││  0x00007f329cc372e3:   cmpq		%rdx, %r14
   6.14%  ││  0x00007f329cc372e6:   cmovlq		%rdx, %r14
  17.63%  ││  0x00007f329cc372ea:   imulq		$0xb, 0x28(%rax, %r8, 8), %rdi
          ││  0x00007f329cc372f0:   imulq		$0xb, 0x20(%rax, %r8, 8), %rdx
          ││  0x00007f329cc372f6:   cmpq		%r14, %rdx
   7.52%  ││  0x00007f329cc372f9:   cmovlq		%r14, %rdx
  20.45%  ││  0x00007f329cc372fd:   cmpq		%rdx, %rdi
   6.76%  ││  0x00007f329cc37300:   cmovlq		%rdx, %rdi          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  10.99%  ││  0x00007f329cc37304:   addl		$4, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││  0x00007f329cc37308:   cmpl		%r11d, %r8d
          ╰│  0x00007f329cc3730b:   jl		0x7f329cc372d0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
           │  0x00007f329cc3730d:   movq		0x30(%r15), %r11    ; ImmutableOopMap {r9=Oop rcx=Oop rbx=Oop rax=Oop xmm0=Oop xmm1=Oop }
           │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
           │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.02%   │  0x00007f329cc37311:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
           │                                                            ;   {poll}
           │  0x00007f329cc37314:   cmpl		%ebp, %r8d
           ╰  0x00007f329cc37317:   jl		0x7f329cc372b2
              0x00007f329cc37319:   vmovq		%xmm0, %rdx
              0x00007f329cc3731e:   vmovq		%xmm1, %r11
....................................................................................................
  98.54%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1260

              0x00007f3068c397c4:   movl		%ebp, %ebp
   0.02%      0x00007f3068c397c6:   cmpl		$1, %ebp
              0x00007f3068c397c9:   jle		0x7f3068c39990
              0x00007f3068c397cf:   movl		$1, %r11d
              0x00007f3068c397d5:   movq		%r9, %r14
              0x00007f3068c397d8:   vmovq		%rcx, %xmm0
              0x00007f3068c397dd:   vmovq		%rdi, %xmm1
              0x00007f3068c397e2:   vmovq		%r8, %xmm2
           ↗  0x00007f3068c397e7:   movl		%ebp, %r9d
           │  0x00007f3068c397ea:   subl		%r11d, %r9d
   0.01%   │  0x00007f3068c397ed:   cmpl		%r11d, %ebp
           │  0x00007f3068c397f0:   cmovll		%r10d, %r9d
           │  0x00007f3068c397f4:   cmpl		$0x3e80, %r9d
           │  0x00007f3068c397fb:   cmoval		%esi, %r9d
           │  0x00007f3068c397ff:   addl		%r11d, %r9d
           │  0x00007f3068c39802:   nopl		(%rax)
   0.02%   │  0x00007f3068c39809:   nopl		(%rax)              ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ↗│  0x00007f3068c39810:   movq		0x88(%r13, %r11, 8), %rcx
          ││  0x00007f3068c39818:   movq		0x80(%r13, %r11, 8), %rdi
          ││  0x00007f3068c39820:   movq		0x10(%r13, %r11, 8), %r8
          ││  0x00007f3068c39825:   cmpq		%r8, %rdx
   2.24%  ││  0x00007f3068c39828:   cmovlq		%r8, %rdx
   5.44%  ││  0x00007f3068c3982c:   movq		0x18(%r13, %r11, 8), %r8
          ││  0x00007f3068c39831:   cmpq		%r8, %rdx
   1.33%  ││  0x00007f3068c39834:   cmovlq		%r8, %rdx
   3.34%  ││  0x00007f3068c39838:   movq		0x20(%r13, %r11, 8), %r8
          ││  0x00007f3068c3983d:   cmpq		%r8, %rdx
   3.36%  ││  0x00007f3068c39840:   cmovlq		%r8, %rdx
   2.49%  ││  0x00007f3068c39844:   movq		0x28(%r13, %r11, 8), %r8
   0.01%  ││  0x00007f3068c39849:   cmpq		%r8, %rdx
   3.86%  ││  0x00007f3068c3984c:   cmovlq		%r8, %rdx
   2.79%  ││  0x00007f3068c39850:   movq		0x30(%r13, %r11, 8), %r8
          ││  0x00007f3068c39855:   cmpq		%r8, %rdx
   3.42%  ││  0x00007f3068c39858:   cmovlq		%r8, %rdx
   2.42%  ││  0x00007f3068c3985c:   movq		0x38(%r13, %r11, 8), %r8;   {other}
   0.01%  ││  0x00007f3068c39861:   cmpq		%r8, %rdx
   3.74%  ││  0x00007f3068c39864:   cmovlq		%r8, %rdx
   2.46%  ││  0x00007f3068c39868:   movq		0x40(%r13, %r11, 8), %r8
          ││  0x00007f3068c3986d:   cmpq		%r8, %rdx
   3.68%  ││  0x00007f3068c39870:   cmovlq		%r8, %rdx
   3.74%  ││  0x00007f3068c39874:   movq		0x48(%r13, %r11, 8), %r8
   0.02%  ││  0x00007f3068c39879:   cmpq		%r8, %rdx
   2.64%  ││  0x00007f3068c3987c:   cmovlq		%r8, %rdx
   2.44%  ││  0x00007f3068c39880:   movq		0x50(%r13, %r11, 8), %r8
          ││  0x00007f3068c39885:   cmpq		%r8, %rdx
   3.52%  ││  0x00007f3068c39888:   cmovlq		%r8, %rdx
   2.12%  ││  0x00007f3068c3988c:   movq		0x58(%r13, %r11, 8), %r8
   0.02%  ││  0x00007f3068c39891:   cmpq		%r8, %rdx
   3.90%  ││  0x00007f3068c39894:   cmovlq		%r8, %rdx
   2.62%  ││  0x00007f3068c39898:   movq		0x60(%r13, %r11, 8), %r8
          ││  0x00007f3068c3989d:   cmpq		%r8, %rdx
   3.67%  ││  0x00007f3068c398a0:   cmovlq		%r8, %rdx
   2.32%  ││  0x00007f3068c398a4:   movq		0x68(%r13, %r11, 8), %r8
   0.01%  ││  0x00007f3068c398a9:   cmpq		%r8, %rdx
   4.00%  ││  0x00007f3068c398ac:   cmovlq		%r8, %rdx
   3.52%  ││  0x00007f3068c398b0:   movq		0x70(%r13, %r11, 8), %r8
          ││  0x00007f3068c398b5:   cmpq		%r8, %rdx
   2.70%  ││  0x00007f3068c398b8:   cmovlq		%r8, %rdx
   2.75%  ││  0x00007f3068c398bc:   movq		0x78(%r13, %r11, 8), %r8
          ││  0x00007f3068c398c1:   cmpq		%r8, %rdx
   3.33%  ││  0x00007f3068c398c4:   cmovlq		%r8, %rdx
   2.77%  ││  0x00007f3068c398c8:   cmpq		%rdi, %rdx
   3.52%  ││  0x00007f3068c398cb:   cmovlq		%rdi, %rdx
   2.46%  ││  0x00007f3068c398cf:   cmpq		%rcx, %rdx
   3.59%  ││  0x00007f3068c398d2:   cmovlq		%rcx, %rdx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   2.46%  ││  0x00007f3068c398d6:   addl		$0x10, %r11d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││  0x00007f3068c398da:   cmpl		%r9d, %r11d
          ╰│  0x00007f3068c398dd:   jl		0x7f3068c39810      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           │  0x00007f3068c398e3:   movq		0x30(%r15), %r8     ; ImmutableOopMap {rbx=Oop r13=Oop r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
           │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
           │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.03%   │  0x00007f3068c398e7:   testl		%eax, (%r8)         ;*goto {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           │                                                            ;   {poll}
           │  0x00007f3068c398ea:   cmpl		%ebp, %r11d
           ╰  0x00007f3068c398ed:   jl		0x7f3068c397e7
              0x00007f3068c398f3:   movq		%r14, %r9
              0x00007f3068c398f6:   vmovq		%xmm0, %rcx
....................................................................................................

#+end_src
*** branch always
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1771.766 ± 2.370  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1039.047 ± 5.616  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1765.454 ± 4.656  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN             ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1047.897 ± 9.120  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN             ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1258

                  0x00007f6260c39984:   movl		%r10d, %esi
                  0x00007f6260c39987:   cmpl		$1, %esi
   0.04%          0x00007f6260c3998a:   jle		0x7f6260c39a9c
                  0x00007f6260c39990:   movl		$1, %r9d
                  0x00007f6260c39996:   vmovq		%rbp, %xmm0
               ↗  0x00007f6260c3999b:   movl		%esi, %r8d
               │  0x00007f6260c3999e:   subl		%r9d, %r8d
               │  0x00007f6260c399a1:   xorl		%r10d, %r10d
               │  0x00007f6260c399a4:   cmpl		%r9d, %esi
               │  0x00007f6260c399a7:   cmovll		%r10d, %r8d
   0.06%       │  0x00007f6260c399ab:   cmpl		$0xfa0, %r8d
               │  0x00007f6260c399b2:   movl		$0xfa0, %r10d
               │  0x00007f6260c399b8:   cmoval		%r10d, %r8d
               │  0x00007f6260c399bc:   addl		%r9d, %r8d
   0.05%       │  0x00007f6260c399bf:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
              ↗│  0x00007f6260c399c0:   imulq		$0xb, 0x10(%r13, %r9, 8), %r10
   0.05%      ││  0x00007f6260c399c6:   cmpq		%r10, %rax
  24.44%  ╭   ││  0x00007f6260c399c9:   jg		0x7f6260c399ce
          │   ││  0x00007f6260c399cb:   movq		%r10, %rax
          ↘   ││  0x00007f6260c399ce:   imulq		$0xb, 0x18(%r13, %r9, 8), %r10
              ││  0x00007f6260c399d4:   cmpq		%r10, %rax
  24.85%   ╭  ││  0x00007f6260c399d7:   jg		0x7f6260c399dc
           │  ││  0x00007f6260c399d9:   movq		%r10, %rax
           ↘  ││  0x00007f6260c399dc:   imulq		$0xb, 0x28(%r13, %r9, 8), %r10
   0.07%      ││  0x00007f6260c399e2:   imulq		$0xb, 0x20(%r13, %r9, 8), %rbp
   0.11%      ││  0x00007f6260c399e8:   cmpq		%rbp, %rax
  47.64%    ╭ ││  0x00007f6260c399eb:   jg		0x7f6260c399f0
            │ ││  0x00007f6260c399ed:   movq		%rbp, %rax
            ↘ ││  0x00007f6260c399f0:   cmpq		%r10, %rax
             ╭││  0x00007f6260c399f3:   jg		0x7f6260c399f8
             │││  0x00007f6260c399f5:   movq		%r10, %rax          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
             ↘││  0x00007f6260c399f8:   addl		$4, %r9d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.06%      ││  0x00007f6260c399fc:   cmpl		%r8d, %r9d
              ╰│  0x00007f6260c399ff:   jl		0x7f6260c399c0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               │  0x00007f6260c39a01:   movq		0x30(%r15), %r10    ; ImmutableOopMap {r11=Oop rcx=Oop rbx=Oop rdi=Oop rdx=Oop r13=Oop }
               │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
               │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.82%       │  0x00007f6260c39a05:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               │                                                            ;   {poll}
   0.25%       │  0x00007f6260c39a08:   cmpl		%esi, %r9d
               ╰  0x00007f6260c39a0b:   jl		0x7f6260c3999b
                  0x00007f6260c39a0d:   vmovq		%xmm0, %rbp
                  0x00007f6260c39a12:   cmpl		%r14d, %r9d
                  0x00007f6260c39a15:   jl		0x7f6260c398fa
                  0x00007f6260c39a1b:   movq		%rax, %r10
                  0x00007f6260c39a1e:   jmp		0x7f6260c39910
                  0x00007f6260c39a23:   xorl		%r10d, %r10d
....................................................................................................
  98.38%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1253

                                     0x00007fc8c0c37a9b:   movq		%r13, %rax
                                     0x00007fc8c0c37a9e:   movzbl		0x94(%rax), %r10d   ; implicit exception: dispatches to 0x00007fc8c0c37dac
                                                                                               ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 126)
                                     0x00007fc8c0c37aa6:   testl		%r10d, %r10d
                                     0x00007fc8c0c37aa9:   jne		0x7fc8c0c37ca5      ;*ifeq {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 126)
                                     0x00007fc8c0c37aaf:   movl		$1, %ebp
          ╭                          0x00007fc8c0c37ab4:   jmp		0x7fc8c0c37c26
          │                          0x00007fc8c0c37ab9:   nopl		(%rax)
   1.11%  │                ↗         0x00007fc8c0c37ac0:   movq		%r11, %r8           ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │                │                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          │                │                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.01%  │                │ ↗       0x00007fc8c0c37ac3:   movq		0x88(%rsi, %r10, 8), %r11
  10.14%  │                │ │       0x00007fc8c0c37acb:   movq		0x80(%rsi, %r10, 8), %rbp
   1.21%  │                │ │       0x00007fc8c0c37ad3:   movq		0x10(%rsi, %r10, 8), %r14
   2.12%  │                │ │       0x00007fc8c0c37ad8:   cmpq		%r8, %r14
          │╭               │ │       0x00007fc8c0c37adb:   jg		0x7fc8c0c37ae0
          ││               │ │       0x00007fc8c0c37add:   movq		%r8, %r14
          │↘               │ │       0x00007fc8c0c37ae0:   movq		0x18(%rsi, %r10, 8), %r8
   1.76%  │                │ │       0x00007fc8c0c37ae5:   cmpq		%r14, %r8
   2.15%  │ ╭              │ │       0x00007fc8c0c37ae8:   jg		0x7fc8c0c37aed
          │ │              │ │       0x00007fc8c0c37aea:   movq		%r14, %r8
          │ ↘              │ │       0x00007fc8c0c37aed:   movq		0x20(%rsi, %r10, 8), %r14
   2.98%  │                │ │       0x00007fc8c0c37af2:   cmpq		%r8, %r14
   1.93%  │  ╭             │ │       0x00007fc8c0c37af5:   jg		0x7fc8c0c37afa
          │  │             │ │       0x00007fc8c0c37af7:   movq		%r8, %r14
          │  ↘             │ │       0x00007fc8c0c37afa:   movq		0x28(%rsi, %r10, 8), %r8
   1.67%  │                │ │       0x00007fc8c0c37aff:   cmpq		%r14, %r8
   1.78%  │   ╭            │ │       0x00007fc8c0c37b02:   jg		0x7fc8c0c37b07
          │   │            │ │       0x00007fc8c0c37b04:   movq		%r14, %r8
   0.21%  │   ↘            │ │       0x00007fc8c0c37b07:   movq		0x30(%rsi, %r10, 8), %r14
   6.81%  │                │ │       0x00007fc8c0c37b0c:   cmpq		%r8, %r14
   0.03%  │    ╭           │ │       0x00007fc8c0c37b0f:   jg		0x7fc8c0c37b14
   0.13%  │    │           │ │       0x00007fc8c0c37b11:   movq		%r8, %r14
   1.17%  │    ↘           │ │       0x00007fc8c0c37b14:   movq		0x38(%rsi, %r10, 8), %r8
   4.17%  │                │ │       0x00007fc8c0c37b19:   cmpq		%r14, %r8
   0.01%  │     ╭          │ │       0x00007fc8c0c37b1c:   jg		0x7fc8c0c37b21
          │     │          │ │       0x00007fc8c0c37b1e:   movq		%r14, %r8
   0.21%  │     ↘          │ │       0x00007fc8c0c37b21:   movq		0x40(%rsi, %r10, 8), %r14
   4.71%  │                │ │       0x00007fc8c0c37b26:   cmpq		%r8, %r14
   0.01%  │      ╭         │ │       0x00007fc8c0c37b29:   jg		0x7fc8c0c37b2e      ;   {other}
          │      │         │ │       0x00007fc8c0c37b2b:   movq		%r8, %r14
          │      ↘         │ │       0x00007fc8c0c37b2e:   movq		0x48(%rsi, %r10, 8), %r8
   6.36%  │                │ │       0x00007fc8c0c37b33:   cmpq		%r14, %r8
   0.01%  │       ╭        │ │       0x00007fc8c0c37b36:   jg		0x7fc8c0c37b3b
          │       │        │ │       0x00007fc8c0c37b38:   movq		%r14, %r8
   0.03%  │       ↘        │ │       0x00007fc8c0c37b3b:   movq		0x50(%rsi, %r10, 8), %r14
   5.05%  │                │ │       0x00007fc8c0c37b40:   cmpq		%r8, %r14
   0.03%  │        ╭       │ │       0x00007fc8c0c37b43:   jg		0x7fc8c0c37b48
          │        │       │ │       0x00007fc8c0c37b45:   movq		%r8, %r14
   0.23%  │        ↘       │ │       0x00007fc8c0c37b48:   movq		0x58(%rsi, %r10, 8), %r8
   8.20%  │                │ │       0x00007fc8c0c37b4d:   cmpq		%r14, %r8
          │         ╭      │ │       0x00007fc8c0c37b50:   jg		0x7fc8c0c37b55
   0.17%  │         │      │ │       0x00007fc8c0c37b52:   movq		%r14, %r8
   1.36%  │         ↘      │ │       0x00007fc8c0c37b55:   movq		0x60(%rsi, %r10, 8), %r14
   4.71%  │                │ │       0x00007fc8c0c37b5a:   cmpq		%r8, %r14
          │          ╭     │ │       0x00007fc8c0c37b5d:   jg		0x7fc8c0c37b62
   0.04%  │          │     │ │       0x00007fc8c0c37b5f:   movq		%r8, %r14
   0.27%  │          ↘     │ │       0x00007fc8c0c37b62:   movq		0x68(%rsi, %r10, 8), %r8
   4.63%  │                │ │       0x00007fc8c0c37b67:   cmpq		%r14, %r8
          │           ╭    │ │       0x00007fc8c0c37b6a:   jg		0x7fc8c0c37b6f
          │           │    │ │       0x00007fc8c0c37b6c:   movq		%r14, %r8
   0.03%  │           ↘    │ │       0x00007fc8c0c37b6f:   movq		0x70(%rsi, %r10, 8), %r14
   5.59%  │                │ │       0x00007fc8c0c37b74:   cmpq		%r8, %r14
          │            ╭   │ │       0x00007fc8c0c37b77:   jg		0x7fc8c0c37b7c
          │            │   │ │       0x00007fc8c0c37b79:   movq		%r8, %r14
   0.06%  │            ↘   │ │       0x00007fc8c0c37b7c:   movq		0x78(%rsi, %r10, 8), %r8
   9.85%  │                │ │       0x00007fc8c0c37b81:   cmpq		%r14, %r8
          │             ╭  │ │       0x00007fc8c0c37b84:   jg		0x7fc8c0c37b89
          │             │  │ │       0x00007fc8c0c37b86:   movq		%r14, %r8
          │             ↘  │ │       0x00007fc8c0c37b89:   cmpq		%r8, %rbp
   3.12%  │              ╭ │ │       0x00007fc8c0c37b8c:   jg		0x7fc8c0c37b91
          │              │ │ │       0x00007fc8c0c37b8e:   movq		%r8, %rbp
          │              ↘ │ │       0x00007fc8c0c37b91:   cmpq		%rbp, %r11
   0.49%  │               ╭│ │       0x00007fc8c0c37b94:   jg		0x7fc8c0c37b99
          │               ││ │       0x00007fc8c0c37b96:   movq		%rbp, %r11          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │               ││ │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │               ││ │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.02%  │               ↘│ │       0x00007fc8c0c37b99:   addl		$0x10, %r10d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                │ │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │                │ │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.02%  │                │ │       0x00007fc8c0c37b9d:   cmpl		%r9d, %r10d
   1.78%  │                ╰ │       0x00007fc8c0c37ba0:   jl		0x7fc8c0c37ac0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │                  │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          │                  │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                  │       0x00007fc8c0c37ba6:   movq		0x30(%r15), %r8     ; ImmutableOopMap {rcx=Oop rbx=Oop rdi=Oop rdx=Oop rsi=Oop rax=Oop }
          │                  │                                                                 ;*goto {reexecute=1 rethrow=0 return_oop=0}
          │                  │                                                                 ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
          │                  │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.04%  │                  │       0x00007fc8c0c37baa:   testl		%eax, (%r8)         ;*goto {reexecute=0 rethrow=0 return_oop=0}
          │                  │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
          │                  │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                  │                                                                 ;   {poll}
   0.12%  │                  │       0x00007fc8c0c37bad:   cmpl		%r13d, %r10d
          │                 ╭│       0x00007fc8c0c37bb0:   jge		0x7fc8c0c37bf8
          │                 ││       0x00007fc8c0c37bb2:   movq		%r11, %r8
          │                 ││       0x00007fc8c0c37bb5:   movl		%r13d, %r9d
   0.02%  │                 ││       0x00007fc8c0c37bb8:   subl		%r10d, %r9d
          │                 ││       0x00007fc8c0c37bbb:   xorl		%r11d, %r11d
          │                 ││       0x00007fc8c0c37bbe:   cmpl		%r10d, %r13d
          │                 ││       0x00007fc8c0c37bc1:   cmovll		%r11d, %r9d
   0.09%  │                 ││       0x00007fc8c0c37bc5:   cmpl		$0x3e80, %r9d
          │                 ││       0x00007fc8c0c37bcc:   movl		$0x3e80, %r11d
          │                 ││       0x00007fc8c0c37bd2:   cmoval		%r11d, %r9d
   0.07%  │                 ││       0x00007fc8c0c37bd6:   addl		%r10d, %r9d
   0.03%  │                 │╰       0x00007fc8c0c37bd9:   jmp		0x7fc8c0c37ac3
          │                 │  ↗     0x00007fc8c0c37bde:   movq		%r8, %r11           ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │                 │  │                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          │                 │  │                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │  │ ↗   0x00007fc8c0c37be1:   movq		0x10(%rsi, %r10, 8), %r8
   1.02%  │                 │  │ │   0x00007fc8c0c37be6:   cmpq		%r11, %r8
          │                 │ ╭│ │   0x00007fc8c0c37be9:   jg		0x7fc8c0c37bee
          │                 │ ││ │   0x00007fc8c0c37beb:   movq		%r11, %r8           ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                 │ ││ │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │                 │ ││ │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │ ↘│ │   0x00007fc8c0c37bee:   incl		%r10d               ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                 │  │ │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │                 │  │ │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │  │ │   0x00007fc8c0c37bf1:   cmpl		%r9d, %r10d
   0.05%  │                 │  ╰ │   0x00007fc8c0c37bf4:   jl		0x7fc8c0c37bde      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │                 │    │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          │                 │    │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │   ╭│   0x00007fc8c0c37bf6:   jmp		0x7fc8c0c37c0a
          │                 ↘   ││   0x00007fc8c0c37bf8:   vmovq		%xmm0, %rbp
          │                     ││   0x00007fc8c0c37bfd:   vmovd		%xmm1, %r9d
          │                     ││   0x00007fc8c0c37c02:   cmpl		%r9d, %r10d
          │                     │╰   0x00007fc8c0c37c05:   jl		0x7fc8c0c37be1
          │                     │    0x00007fc8c0c37c07:   movq		%r11, %r8           ;*invokestatic consumeCompiler {reexecute=0 rethrow=0 return_oop=0}
          │                     │                                                              ; - org.openjdk.jmh.infra.Blackhole::consume@7 (line 401)
          │                     │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@22 (line 124)
          │                     ↘    0x00007fc8c0c37c0a:   movzbl		0x94(%rax), %r10d   ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
          │                                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 126)
   0.12%  │                          0x00007fc8c0c37c12:   movq		0x30(%r15), %r11
   0.01%  │                          0x00007fc8c0c37c16:   addq		$1, %rbp            ; ImmutableOopMap {rcx=Oop rbx=Oop rdi=Oop rdx=Oop rax=Oop }
          │                                                                                    ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
          │                                                                                    ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 126)
          │                          0x00007fc8c0c37c1a:   testl		%eax, (%r11)        ;   {poll}
   0.12%  │                          0x00007fc8c0c37c1d:   testl		%r10d, %r10d
          │                          0x00007fc8c0c37c20:   jne		0x7fc8c0c37caa      ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │                                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 127)
          ↘                          0x00007fc8c0c37c26:   movl		0xc(%rdi), %r9d     ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                     0x00007fc8c0c37c2a:   testl		%r9d, %r9d
                                     0x00007fc8c0c37c2d:   jle		0x7fc8c0c37c9d      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                     0x00007fc8c0c37c2f:   movl		0x2c(%rdi), %r10d   ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                     0x00007fc8c0c37c33:   movl		0xc(%r12, %r10, 8), %r8d; implicit exception: dispatches to 0x00007fc8c0c37ce5
                                                                                               ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.10%                             0x00007fc8c0c37c38:   testl		%r8d, %r8d
                                     0x00007fc8c0c37c3b:   jbe		0x7fc8c0c37ce5
                                     0x00007fc8c0c37c41:   movslq		%r9d, %rsi
                                     0x00007fc8c0c37c44:   movslq		%r8d, %r11
                                     0x00007fc8c0c37c47:   leaq		-1(%rsi), %r8
                                     0x00007fc8c0c37c4b:   cmpq		%r11, %r8
   0.02%                             0x00007fc8c0c37c4e:   jae		0x7fc8c0c37ce5
                                     0x00007fc8c0c37c54:   movq		0x10(%r12, %r10, 8), %r11
                                     0x00007fc8c0c37c59:   xorl		%r8d, %r8d
                                     0x00007fc8c0c37c5c:   cmpq		%r11, %r8
                                  ╭  0x00007fc8c0c37c5f:   jg		0x7fc8c0c37c64
                                  │  0x00007fc8c0c37c61:   movq		%r11, %r8           ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                  ↘  0x00007fc8c0c37c64:   addq		$-0xf, %rsi
                                     0x00007fc8c0c37c68:   movq		$18446744071562067968, %r11
                                     0x00007fc8c0c37c6f:   cmpq		%rsi, %r11
....................................................................................................
  98.14%  <total for region 1>
#+end_src
*** branch never
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8   976.735 ± 98.646  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  2794.892 ±  1.316  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4   980.974 ±  2.487  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  2781.297 ± 10.702  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1256

   0.02%           0x00007f8870c38828:   leaq		(%r12, %rsi, 8), %r14
                   0x00007f8870c3882c:   addq		$-3, %r11
                   0x00007f8870c38830:   movq		$18446744071562067968, %rsi
                   0x00007f8870c38837:   cmpl		%r11d, %esi
          ╭        0x00007f8870c3883a:   jl		0x7f8870c3883f
          │        0x00007f8870c3883c:   movq		%rsi, %r11
          ↘        0x00007f8870c3883f:   movl		%r11d, %esi
                   0x00007f8870c38842:   cmpl		$1, %esi
                   0x00007f8870c38845:   jle		0x7f8870c38920
                   0x00007f8870c3884b:   movl		$1, %r11d
   0.03%           0x00007f8870c38851:   vmovq		%rdx, %xmm0
                   0x00007f8870c38856:   vmovq		%rax, %xmm1
                   0x00007f8870c3885b:   vmovq		%r10, %xmm2
                ↗  0x00007f8870c38860:   movl		%esi, %r10d
                │  0x00007f8870c38863:   subl		%r11d, %r10d
                │  0x00007f8870c38866:   cmpl		%r11d, %esi
                │  0x00007f8870c38869:   cmovll		%edi, %r10d
   0.04%        │  0x00007f8870c3886d:   cmpl		$0xfa0, %r10d
                │  0x00007f8870c38874:   cmoval		%r9d, %r10d
   0.03%        │  0x00007f8870c38878:   addl		%r11d, %r10d
   0.05%        │  0x00007f8870c3887b:   nopl		(%rax, %rax)        ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               ↗│  0x00007f8870c38880:   imulq		$0xb, 0x10(%r14, %r11, 8), %rdx
   8.59%       ││  0x00007f8870c38886:   cmpl		%edx, %r13d
  20.04%   ╭   ││  0x00007f8870c38889:   jl		0x7f8870c3888e
           │   ││  0x00007f8870c3888b:   movq		%r13, %rdx
           ↘   ││  0x00007f8870c3888e:   imulq		$0xb, 0x18(%r14, %r11, 8), %rax
   1.59%       ││  0x00007f8870c38894:   cmpl		%eax, %edx
  18.40%    ╭  ││  0x00007f8870c38896:   jl		0x7f8870c3889b
            │  ││  0x00007f8870c38898:   movq		%rdx, %rax
            ↘  ││  0x00007f8870c3889b:   imulq		$0xb, 0x28(%r14, %r11, 8), %r13
   4.22%       ││  0x00007f8870c388a1:   imulq		$0xb, 0x20(%r14, %r11, 8), %rdx
   4.99%       ││  0x00007f8870c388a7:   cmpl		%edx, %eax
  26.99%     ╭ ││  0x00007f8870c388a9:   jl		0x7f8870c388ae
             │ ││  0x00007f8870c388ab:   movq		%rax, %rdx
             ↘ ││  0x00007f8870c388ae:   cmpl		%r13d, %edx
  12.24%      ╭││  0x00007f8870c388b1:   jl		0x7f8870c388b6
              │││  0x00007f8870c388b3:   movq		%rdx, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
              │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
              │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.18%      ↘││  0x00007f8870c388b6:   addl		$4, %r11d           ;*iinc {reexecute=0 rethrow=0 return_oop=0}
               ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
               ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.09%       ││  0x00007f8870c388ba:   cmpl		%r10d, %r11d
   1.19%       ╰│  0x00007f8870c388bd:   jl		0x7f8870c38880      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                │  0x00007f8870c388bf:   movq		0x30(%r15), %r10    ; ImmutableOopMap {r8=Oop rbx=Oop r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
                │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.22%        │  0x00007f8870c388c3:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                │                                                            ;   {poll}
   0.12%        │  0x00007f8870c388c6:   cmpl		%esi, %r11d
                ╰  0x00007f8870c388c9:   jl		0x7f8870c38860
                   0x00007f8870c388cb:   vmovq		%xmm0, %rdx
                   0x00007f8870c388d0:   vmovq		%xmm1, %rax
                   0x00007f8870c388d5:   vmovq		%xmm2, %r10
                   0x00007f8870c388da:   cmpl		%ecx, %r11d
                   0x00007f8870c388dd:   jl		0x7f8870c387bc
                   0x00007f8870c388e3:   jmp		0x7f8870c387d2
....................................................................................................
  98.99%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1249

                              0x00007fcc14c37ed2:   movl		%ebp, %ebp
   0.07%                      0x00007fcc14c37ed4:   cmpl		$1, %ebp
                              0x00007fcc14c37ed7:   jle		0x7fcc14c3808c
                              0x00007fcc14c37edd:   movl		$1, %r8d
                              0x00007fcc14c37ee3:   vmovq		%rcx, %xmm0
                              0x00007fcc14c37ee8:   vmovq		%rdx, %xmm1
                              0x00007fcc14c37eed:   vmovq		%r11, %xmm2
                           ↗  0x00007fcc14c37ef2:   movl		%ebp, %r11d
                           │  0x00007fcc14c37ef5:   subl		%r8d, %r11d
                           │  0x00007fcc14c37ef8:   cmpl		%r8d, %ebp
   0.04%                   │  0x00007fcc14c37efb:   cmovll		%r10d, %r11d
                           │  0x00007fcc14c37eff:   cmpl		$0x3e80, %r11d
   0.13%                   │  0x00007fcc14c37f06:   cmoval		%esi, %r11d
   0.14%                   │  0x00007fcc14c37f0a:   addl		%r8d, %r11d
   0.04%                   │  0x00007fcc14c37f0d:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                          ↗│  0x00007fcc14c37f10:   movq		0x88(%rax, %r8, 8), %rdx
   0.01%                  ││  0x00007fcc14c37f18:   movq		0x80(%rax, %r8, 8), %r14
                          ││  0x00007fcc14c37f20:   movq		0x10(%rax, %r8, 8), %rcx
   1.09%                  ││  0x00007fcc14c37f25:   cmpl		%edi, %ecx
   8.31%  ╭               ││  0x00007fcc14c37f27:   jl		0x7fcc14c37f2c
          │               ││  0x00007fcc14c37f29:   movq		%rcx, %rdi
          ↘               ││  0x00007fcc14c37f2c:   movq		0x18(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37f31:   cmpl		%edi, %ecx
   0.15%   ╭              ││  0x00007fcc14c37f33:   jl		0x7fcc14c37f38
           │              ││  0x00007fcc14c37f35:   movq		%rcx, %rdi
           ↘              ││  0x00007fcc14c37f38:   movq		0x20(%rax, %r8, 8), %rcx
   1.11%                  ││  0x00007fcc14c37f3d:   cmpl		%edi, %ecx
   8.41%    ╭             ││  0x00007fcc14c37f3f:   jl		0x7fcc14c37f44
            │             ││  0x00007fcc14c37f41:   movq		%rcx, %rdi
   0.01%    ↘             ││  0x00007fcc14c37f44:   movq		0x28(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37f49:   cmpl		%edi, %ecx
   0.10%     ╭            ││  0x00007fcc14c37f4b:   jl		0x7fcc14c37f50
             │            ││  0x00007fcc14c37f4d:   movq		%rcx, %rdi
             ↘            ││  0x00007fcc14c37f50:   movq		0x30(%rax, %r8, 8), %rcx
   1.19%                  ││  0x00007fcc14c37f55:   cmpl		%edi, %ecx
   8.26%      ╭           ││  0x00007fcc14c37f57:   jl		0x7fcc14c37f5c
              │           ││  0x00007fcc14c37f59:   movq		%rcx, %rdi
              ↘           ││  0x00007fcc14c37f5c:   movq		0x38(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37f61:   cmpl		%edi, %ecx
   9.25%       ╭          ││  0x00007fcc14c37f63:   jl		0x7fcc14c37f68
               │          ││  0x00007fcc14c37f65:   movq		%rcx, %rdi
               ↘          ││  0x00007fcc14c37f68:   movq		0x40(%rax, %r8, 8), %rcx;   {other}
   0.01%                  ││  0x00007fcc14c37f6d:   cmpl		%edi, %ecx
   0.10%        ╭         ││  0x00007fcc14c37f6f:   jl		0x7fcc14c37f74
                │         ││  0x00007fcc14c37f71:   movq		%rcx, %rdi
   0.04%        ↘         ││  0x00007fcc14c37f74:   movq		0x48(%rax, %r8, 8), %rcx
   0.02%                  ││  0x00007fcc14c37f79:   cmpl		%edi, %ecx
   9.17%         ╭        ││  0x00007fcc14c37f7b:   jl		0x7fcc14c37f80
                 │        ││  0x00007fcc14c37f7d:   movq		%rcx, %rdi
                 ↘        ││  0x00007fcc14c37f80:   movq		0x50(%rax, %r8, 8), %rcx
   0.01%                  ││  0x00007fcc14c37f85:   cmpl		%edi, %ecx
   0.10%          ╭       ││  0x00007fcc14c37f87:   jl		0x7fcc14c37f8c
                  │       ││  0x00007fcc14c37f89:   movq		%rcx, %rdi
                  ↘       ││  0x00007fcc14c37f8c:   movq		0x58(%rax, %r8, 8), %rcx
   0.01%                  ││  0x00007fcc14c37f91:   cmpl		%edi, %ecx
   9.41%           ╭      ││  0x00007fcc14c37f93:   jl		0x7fcc14c37f98
                   │      ││  0x00007fcc14c37f95:   movq		%rcx, %rdi
                   ↘      ││  0x00007fcc14c37f98:   movq		0x60(%rax, %r8, 8), %rcx
   0.02%                  ││  0x00007fcc14c37f9d:   cmpl		%edi, %ecx
   9.82%            ╭     ││  0x00007fcc14c37f9f:   jl		0x7fcc14c37fa4
                    │     ││  0x00007fcc14c37fa1:   movq		%rcx, %rdi
                    ↘     ││  0x00007fcc14c37fa4:   movq		0x68(%rax, %r8, 8), %rcx
   0.02%                  ││  0x00007fcc14c37fa9:   cmpl		%edi, %ecx
   0.05%             ╭    ││  0x00007fcc14c37fab:   jl		0x7fcc14c37fb0
                     │    ││  0x00007fcc14c37fad:   movq		%rcx, %rdi
                     ↘    ││  0x00007fcc14c37fb0:   movq		0x70(%rax, %r8, 8), %rcx
   0.06%                  ││  0x00007fcc14c37fb5:   cmpl		%edi, %ecx
   9.66%              ╭   ││  0x00007fcc14c37fb7:   jl		0x7fcc14c37fbc
                      │   ││  0x00007fcc14c37fb9:   movq		%rcx, %rdi
                      ↘   ││  0x00007fcc14c37fbc:   movq		0x78(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37fc1:   cmpl		%edi, %ecx
   0.10%               ╭  ││  0x00007fcc14c37fc3:   jl		0x7fcc14c37fc8
                       │  ││  0x00007fcc14c37fc5:   movq		%rcx, %rdi
                       ↘  ││  0x00007fcc14c37fc8:   cmpl		%edi, %r14d
   9.56%                ╭ ││  0x00007fcc14c37fcb:   jl		0x7fcc14c37fd0
                        │ ││  0x00007fcc14c37fcd:   movq		%r14, %rdi
                        ↘ ││  0x00007fcc14c37fd0:   cmpl		%edi, %edx
   0.07%                 ╭││  0x00007fcc14c37fd2:   jl		0x7fcc14c37fd7
                         │││  0x00007fcc14c37fd4:   movq		%rdx, %rdi          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.10%                 ↘││  0x00007fcc14c37fd7:   addl		$0x10, %r8d         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                          ││  0x00007fcc14c37fdb:   cmpl		%r11d, %r8d
   9.37%                  ╰│  0x00007fcc14c37fde:   jl		0x7fcc14c37f10      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                           │  0x00007fcc14c37fe4:   movq		0x30(%r15), %r11    ; ImmutableOopMap {r9=Oop rbx=Oop rax=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
                           │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                           │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   1.15%                   │  0x00007fcc14c37fe8:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                           │                                                            ;   {poll}
   0.37%                   │  0x00007fcc14c37feb:   cmpl		%ebp, %r8d
                           ╰  0x00007fcc14c37fee:   jl		0x7fcc14c37ef2
                              0x00007fcc14c37ff4:   vmovq		%xmm0, %rcx
                              0x00007fcc14c37ff9:   vmovq		%xmm1, %rdx
                              0x00007fcc14c37ffe:   vmovq		%xmm2, %r11
                              0x00007fcc14c38003:   cmpl		%r13d, %r8d
                              0x00007fcc14c38006:   jl		0x7fcc14c37e44
                              0x00007fcc14c3800c:   jmp		0x7fcc14c37e58
....................................................................................................
  97.43%  <total for region 1>
#+end_src
*** disabled intrinsic
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1142.080 ± 38.450  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1168.054 ± 62.525  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1128.495 ± 19.797  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1216.007 ± 23.134  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1255

                         0x00007fa2b4c37d8a:   movl		$1, %ebp
                         0x00007fa2b4c37d8f:   jmp		0x7fa2b4c37e72
               ↗         0x00007fa2b4c37d94:   movq		%rdi, %rbp
               │         0x00007fa2b4c37d97:   nopw		(%rax, %rax)        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
               │                                                                   ; - java.lang.Math::max@11 (line 2038)
               │                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
               │                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
              ↗│         0x00007fa2b4c37da0:   addl		$4, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ││                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ││                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.01%      ││         0x00007fa2b4c37da4:   cmpl		%r11d, %r8d
   0.12%  ╭   ││         0x00007fa2b4c37da7:   jge		0x7fa2b4c37de6      ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
          │   ││                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
          │   ││                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          │   ││    ↗    0x00007fa2b4c37da9:   imulq		$0xb, 0x10(%r14, %r8, 8), %rdi
          │   ││    │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │   ││    │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │   ││    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   2.14%  │   ││    │    0x00007fa2b4c37daf:   cmpq		%rdi, %rbp
  20.00%  │╭  ││    │    0x00007fa2b4c37db2:   jge		0x7fa2b4c37dd7      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││  ││    │                                                              ; - java.lang.Math::max@11 (line 2038)
          ││  ││    │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││  ││    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││  ││↗   │    0x00007fa2b4c37db4:   imulq		$0xb, 0x18(%r14, %r8, 8), %rdx
          ││  │││   │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          ││  │││   │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          ││  │││   │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   4.03%  ││  │││   │    0x00007fa2b4c37dba:   cmpq		%rdx, %rdi
  17.47%  ││╭ │││   │    0x00007fa2b4c37dbd:   jge		0x7fa2b4c37ddc      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││ │││   │                                                              ; - java.lang.Math::max@11 (line 2038)
          │││ │││   │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          │││ │││   │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          │││ │││↗  │    0x00007fa2b4c37dbf:   imulq		$0xb, 0x20(%r14, %r8, 8), %rdi
          │││ ││││  │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │││ ││││  │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │││ ││││  │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  11.18%  │││ ││││  │    0x00007fa2b4c37dc5:   cmpq		%rdi, %rdx
  18.89%  │││╭││││  │    0x00007fa2b4c37dc8:   jge		0x7fa2b4c37de1      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││││││  │                                                              ; - java.lang.Math::max@11 (line 2038)
          ││││││││  │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││││││││  │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││││││││↗ │    0x00007fa2b4c37dca:   imulq		$0xb, 0x28(%r14, %r8, 8), %rbp
          │││││││││ │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │││││││││ │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │││││││││ │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   7.13%  │││││││││ │    0x00007fa2b4c37dd0:   cmpq		%rbp, %rdi
  17.30%  ││││╰││││ │    0x00007fa2b4c37dd3:   jl		0x7fa2b4c37da0      ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ││││ ││││ │                                                              ; - java.lang.Math::max@3 (line 2038)
          ││││ ││││ │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││││ ││││ │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││││ ╰│││ │    0x00007fa2b4c37dd5:   jmp		0x7fa2b4c37d94
          │↘││  │││ │    0x00007fa2b4c37dd7:   movq		%rbp, %rdi
          │ ││  ╰││ │    0x00007fa2b4c37dda:   jmp		0x7fa2b4c37db4
          │ ↘│   ││ │    0x00007fa2b4c37ddc:   movq		%rdi, %rdx
          │  │   ╰│ │    0x00007fa2b4c37ddf:   jmp		0x7fa2b4c37dbf
          │  ↘    │ │    0x00007fa2b4c37de1:   movq		%rdx, %rdi
          │       ╰ │    0x00007fa2b4c37de4:   jmp		0x7fa2b4c37dca
          ↘         │    0x00007fa2b4c37de6:   movq		0x30(%r15), %r11    ; ImmutableOopMap {r9=Oop rcx=Oop rbx=Oop r14=Oop xmm0=Oop xmm1=Oop }
                    │                                                              ;*goto {reexecute=1 rethrow=0 return_oop=0}
                    │                                                              ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.04%            │    0x00007fa2b4c37dea:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                    │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                    │                                                              ;   {poll}
   0.11%            │    0x00007fa2b4c37ded:   cmpl		%r10d, %r8d
                   ╭│    0x00007fa2b4c37df0:   jge		0x7fa2b4c37e3f
                   ││    0x00007fa2b4c37df2:   vmovq		%xmm0, %rdx
                   ││    0x00007fa2b4c37df7:   vmovq		%xmm1, %rdi
                   ││    0x00007fa2b4c37dfc:   movl		%r10d, %r11d
                   ││    0x00007fa2b4c37dff:   subl		%r8d, %r11d
                   ││    0x00007fa2b4c37e02:   cmpl		%r8d, %r10d
   0.02%           ││    0x00007fa2b4c37e05:   cmovll		%esi, %r11d
   0.25%           ││    0x00007fa2b4c37e09:   cmpl		$0xfa0, %r11d
   0.14%           ││    0x00007fa2b4c37e10:   cmoval		%eax, %r11d
   0.11%           ││    0x00007fa2b4c37e14:   addl		%r8d, %r11d
   0.02%           ││    0x00007fa2b4c37e17:   vmovq		%rdx, %xmm0
                   ││    0x00007fa2b4c37e1c:   vmovq		%rdi, %xmm1
                   │╰    0x00007fa2b4c37e21:   jmp		0x7fa2b4c37da9
                   │ ↗   0x00007fa2b4c37e23:   movq		%r10, %rbp          ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                   │ │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                   │ │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │ │↗  0x00007fa2b4c37e26:   imulq		$0xb, 0x10(%r14, %r8, 8), %r10
                   │ ││                                                            ;*lmul {reexecute=0 rethrow=0 return_oop=0}
                   │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.10%           │ ││  0x00007fa2b4c37e2c:   cmpq		%r10, %rbp
   0.14%           │ ││  0x00007fa2b4c37e2f:   jge		0x7fa2b4c37ee6      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
                   │ ││                                                            ; - java.lang.Math::max@11 (line 2038)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │ ││  0x00007fa2b4c37e35:   incl		%r8d                ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                   │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │ ││  0x00007fa2b4c37e38:   cmpl		%r13d, %r8d
   0.01%           │ ╰│  0x00007fa2b4c37e3b:   jl		0x7fa2b4c37e23
                   │  │  0x00007fa2b4c37e3d:   jmp		0x7fa2b4c37e51
                   ↘  │  0x00007fa2b4c37e3f:   vmovq		%xmm0, %rdx
                      │  0x00007fa2b4c37e44:   vmovq		%xmm1, %rdi
                      │  0x00007fa2b4c37e49:   cmpl		%r13d, %r8d
                      ╰  0x00007fa2b4c37e4c:   jl		0x7fa2b4c37e26
                         0x00007fa2b4c37e4e:   movq		%rbp, %r10          ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                         0x00007fa2b4c37e51:   vmovq		%xmm2, %rbp         ;*invokestatic consumeCompiler {reexecute=0 rethrow=0 return_oop=0}
                                                                                   ; - org.openjdk.jmh.infra.Blackhole::consume@7 (line 401)
....................................................................................................
  99.19%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1252

                0x00007f52ccc38ec9:   jmp		0x7f52ccc38fec
            ↗   0x00007f52ccc38ece:   movq		%rdi, %rbp
            │   0x00007f52ccc38ed1:   nopl		(%rax, %rax)
            │   0x00007f52ccc38ed9:   nopl		(%rax)              ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
            │                                                             ; - java.lang.Math::max@11 (line 2038)
            │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
            │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           ↗│   0x00007f52ccc38ee0:   addl		$8, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
           ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.58%   ││   0x00007f52ccc38ee4:   cmpl		%r11d, %r8d
   0.54%   ││   0x00007f52ccc38ee7:   jge		0x7f52ccc38f5e      ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
           ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
           ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           ││   0x00007f52ccc38ee9:   movq		0x10(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
           ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
           ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  19.72%   ││   0x00007f52ccc38eee:   cmpq		%rdi, %rbp
          ╭││   0x00007f52ccc38ef1:   jge		0x7f52ccc38f3b      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││                                                             ; - java.lang.Math::max@11 (line 2038)
          │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │││↗  0x00007f52ccc38ef3:   movq		0x18(%r14, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   9.82%  ││││  0x00007f52ccc38ef8:   cmpq		%rdx, %rdi
   0.19%  ││││  0x00007f52ccc38efb:   jge		0x7f52ccc38f40      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38efd:   movq		0x20(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  14.10%  ││││  0x00007f52ccc38f02:   cmpq		%rdi, %rdx
   0.02%  ││││  0x00007f52ccc38f05:   jge		0x7f52ccc38f45      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f07:   movq		0x28(%r14, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   4.00%  ││││  0x00007f52ccc38f0c:   cmpq		%rdx, %rdi
   0.09%  ││││  0x00007f52ccc38f0f:   jge		0x7f52ccc38f4a      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f11:   movq		0x30(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  18.70%  ││││  0x00007f52ccc38f16:   cmpq		%rdi, %rdx
          ││││  0x00007f52ccc38f19:   jge		0x7f52ccc38f4f      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f1b:   movq		0x38(%r14, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   5.47%  ││││  0x00007f52ccc38f20:   cmpq		%rdx, %rdi
   0.01%  ││││  0x00007f52ccc38f23:   jge		0x7f52ccc38f54      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f25:   movq		0x40(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  18.22%  ││││  0x00007f52ccc38f2a:   cmpq		%rdi, %rdx
          ││││  0x00007f52ccc38f2d:   jge		0x7f52ccc38f59      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f2f:   movq		0x48(%r14, %r8, 8), %rbp;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   6.75%  ││││  0x00007f52ccc38f34:   cmpq		%rbp, %rdi
          │╰││  0x00007f52ccc38f37:   jl		0x7f52ccc38ee0      ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          │ ││                                                            ; - java.lang.Math::max@3 (line 2038)
          │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │ ╰│  0x00007f52ccc38f39:   jmp		0x7f52ccc38ece
          ↘  │  0x00007f52ccc38f3b:   movq		%rbp, %rdi
             ╰  0x00007f52ccc38f3e:   jmp		0x7f52ccc38ef3
                0x00007f52ccc38f40:   movq		%rdi, %rdx
....................................................................................................
  98.21%  <total for region 1>
#+end_src
* 1.4.25
** LoopMaxUnroll=8
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2150.509 ? 372.854  ops/ms # branch never
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2620.289 ?  64.740  ops/ms # disable _maxL
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3423.275 ?  90.313  ops/ms # branch never
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3559.058 ?  53.108  ops/ms # disable _maxL
#+end_src
Branch never:
#+begin_src asm
  10.44%          ?  0x0000000116f242b0:   ldp		x26, x27, [x12, #0x40]
   0.12%          ?  0x0000000116f242b4:   mov		x12, x6
   0.18%          ?  0x0000000116f242b8:   cmp		x6, x7
   0.34%  ?       ?  0x0000000116f242bc:   b.ge		#0x116f242c4
   9.08%  ?       ?  0x0000000116f242c0:   mov		x12, x7
   1.04%  ?       ?  0x0000000116f242c4:   mov		x6, x12
   0.45%          ?  0x0000000116f242c8:   cmp		x12, x21
   0.18%   ?      ?  0x0000000116f242cc:   b.ge		#0x116f242d4
   8.86%   ?      ?  0x0000000116f242d0:   mov		x6, x21
   1.42%   ?      ?  0x0000000116f242d4:   mov		x12, x6
   0.33%          ?  0x0000000116f242d8:   cmp		x6, x22
   0.26%    ?     ?  0x0000000116f242dc:   b.ge		#0x116f242e4
   9.42%    ?     ?  0x0000000116f242e0:   mov		x12, x22
   1.32%    ?     ?  0x0000000116f242e4:   mov		x6, x12
   0.28%          ?  0x0000000116f242e8:   cmp		x12, x23
   0.15%     ?    ?  0x0000000116f242ec:   b.ge		#0x116f242f4
  10.26%     ?    ?  0x0000000116f242f0:   mov		x6, x23
   1.09%     ?    ?  0x0000000116f242f4:   mov		x12, x6
   0.08%          ?  0x0000000116f242f8:   cmp		x6, x24
   0.04%      ?   ?  0x0000000116f242fc:   b.ge		#0x116f24304
   9.19%      ?   ?  0x0000000116f24300:   mov		x12, x24
   1.64%      ?   ?  0x0000000116f24304:   mov		x6, x12
   0.03%          ?  0x0000000116f24308:   cmp		x12, x25
               ?  ?  0x0000000116f2430c:   b.ge		#0x116f24314
   9.45%       ?  ?  0x0000000116f24310:   mov		x6, x25
   1.51%       ?  ?  0x0000000116f24314:   mov		x12, x6
   0.10%          ?  0x0000000116f24318:   cmp		x6, x26
   0.18%        ? ?  0x0000000116f2431c:   b.ge		#0x116f24324
   8.92%        ? ?  0x0000000116f24320:   mov		x12, x26
   0.97%        ? ?  0x0000000116f24324:   add		w15, w15, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.35%          ?  0x0000000116f24328:   mov		x6, x12
   0.26%          ?  0x0000000116f2432c:   cmp		x12, x27
   0.24%         ??  0x0000000116f24330:   b.ge		#0x116f24338
   9.34%         ??  0x0000000116f24334:   mov		x6, x27             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                 ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                 ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
#+end_src
Disable intrinsic:
#+begin_src bash
              ?  0x0000000112e37770:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000112e37774:   ldp		x21, x22, [x11, #0x10]
              ?  0x0000000112e37778:   ldr		x23, [x11, #0x20]
              ?  0x0000000112e3777c:   mul		x21, x21, x16
  29.38%      ?  0x0000000112e37780:   ldr		x11, [x11, #0x28]
              ?  0x0000000112e37784:   mul		x22, x22, x16
              ?  0x0000000112e37788:   mul		x23, x23, x16
              ?  0x0000000112e3778c:   mov		x24, x21
   2.49%      ?  0x0000000112e37790:   cmp		x21, x7
          ?   ?  0x0000000112e37794:   b.ge		#0x112e3779c
          ?   ?  0x0000000112e37798:   mov		x24, x7
  11.37%  ?   ?  0x0000000112e3779c:   mul		x11, x11, x16
              ?  0x0000000112e377a0:   mov		x7, x22
              ?  0x0000000112e377a4:   cmp		x22, x24
           ?  ?  0x0000000112e377a8:   b.ge		#0x112e377b0
           ?  ?  0x0000000112e377ac:   mov		x7, x24
  19.38%   ?  ?  0x0000000112e377b0:   mov		x21, x23
   3.11%      ?  0x0000000112e377b4:   cmp		x23, x7
   0.44%    ? ?  0x0000000112e377b8:   b.ge		#0x112e377c0
            ? ?  0x0000000112e377bc:   mov		x21, x7
  10.61%    ? ?  0x0000000112e377c0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000112e377c4:   mov		x7, x11
              ?  0x0000000112e377c8:   cmp		x11, x21
             ??  0x0000000112e377cc:   b.ge		#0x112e377d4
             ??  0x0000000112e377d0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  21.80%     ??  0x0000000112e377d4:   cmp		w12, w10
              ?  0x0000000112e377d8:   b.lt		#0x112e37770        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.67%         0x0000000112e377dc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.11%         0x0000000112e377e0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000112e377e4:   cmp		w12, w17
                 0x0000000112e377e8:   b.lt		#0x112e37750
                 0x0000000112e377ec:   cmp		w12, w13
                 0x0000000112e377f0:   b.lt		#0x112e376a8
#+end_src
** Observations and TraceLoopOpts
Performance looks to be on par between disabling intrinsic and branch never.
However, the assembly looks different in simple.
Branch never:
#+begin_src bash
   5.80%                  ?      0x0000000113951b64:   ldr		x15, [x27, #0x10]
   0.05%                  ?      0x0000000113951b68:   mov		x29, x25
   0.04%                  ?      0x0000000113951b6c:   cmp		x25, x15
   0.13%  ?               ?      0x0000000113951b70:   b.ge		#0x113951b78
          ?               ?      0x0000000113951b74:   mov		x29, x15
   5.50%  ?               ?      0x0000000113951b78:   ldr		x16, [x27, #0x18]
   0.14%                  ?      0x0000000113951b7c:   mov		x15, x29
   0.19%                  ?      0x0000000113951b80:   cmp		x29, x16
   0.15%   ?              ?      0x0000000113951b84:   b.ge		#0x113951b8c
           ?              ?      0x0000000113951b88:   mov		x15, x16
   5.22%   ?              ?      0x0000000113951b8c:   ldr		x17, [x27, #0x20]
   0.07%                  ?      0x0000000113951b90:   mov		x16, x15
   0.03%                  ?      0x0000000113951b94:   cmp		x15, x17
   0.07%    ?             ?      0x0000000113951b98:   b.ge		#0x113951ba0
            ?             ?      0x0000000113951b9c:   mov		x16, x17
   5.39%    ?             ?      0x0000000113951ba0:   ldr		x0, [x27, #0x28]
   0.07%                  ?      0x0000000113951ba4:   mov		x15, x16
   0.16%                  ?      0x0000000113951ba8:   cmp		x16, x0
   0.11%     ?            ?      0x0000000113951bac:   b.ge		#0x113951bb4
             ?            ?      0x0000000113951bb0:   mov		x15, x0
   5.31%     ?            ?      0x0000000113951bb4:   ldr		x1, [x27, #0x30]
   0.04%                  ?      0x0000000113951bb8:   mov		x16, x15
   0.11%                  ?      0x0000000113951bbc:   cmp		x15, x1
   0.03%      ?           ?      0x0000000113951bc0:   b.ge		#0x113951bc8
              ?           ?      0x0000000113951bc4:   mov		x16, x1
   5.33%      ?           ?      0x0000000113951bc8:   ldr		x2, [x27, #0x38]
   0.08%                  ?      0x0000000113951bcc:   mov		x15, x16
   0.17%                  ?      0x0000000113951bd0:   cmp		x16, x2
   0.11%       ?          ?      0x0000000113951bd4:   b.ge		#0x113951bdc
               ?          ?      0x0000000113951bd8:   mov		x15, x2
   5.79%       ?          ?      0x0000000113951bdc:   ldr		x3, [x27, #0x40]
   0.07%                  ?      0x0000000113951be0:   mov		x16, x15
   0.04%                  ?      0x0000000113951be4:   cmp		x15, x3
   0.02%        ?         ?      0x0000000113951be8:   b.ge		#0x113951bf0
                ?         ?      0x0000000113951bec:   mov		x16, x3
   5.32%        ?         ?      0x0000000113951bf0:   ldr		x4, [x27, #0x48]
   0.08%                  ?      0x0000000113951bf4:   mov		x15, x16
   0.07%                  ?      0x0000000113951bf8:   cmp		x16, x4
   0.07%         ?        ?      0x0000000113951bfc:   b.ge		#0x113951c04
   0.00%         ?        ?      0x0000000113951c00:   mov		x15, x4
   5.77%         ?        ?      0x0000000113951c04:   ldr		x5, [x27, #0x50]
   0.08%                  ?      0x0000000113951c08:   mov		x16, x15
   0.04%                  ?      0x0000000113951c0c:   cmp		x15, x5
   0.04%          ?       ?      0x0000000113951c10:   b.ge		#0x113951c18
                  ?       ?      0x0000000113951c14:   mov		x16, x5
   5.42%          ?       ?      0x0000000113951c18:   ldr		x6, [x27, #0x58]
   0.09%                  ?      0x0000000113951c1c:   mov		x15, x16
   0.15%                  ?      0x0000000113951c20:   cmp		x16, x6
   0.08%           ?      ?      0x0000000113951c24:   b.ge		#0x113951c2c
                   ?      ?      0x0000000113951c28:   mov		x15, x6
   5.49%           ?      ?      0x0000000113951c2c:   ldr		x7, [x27, #0x60]
   0.11%                  ?      0x0000000113951c30:   mov		x16, x15
   0.06%                  ?      0x0000000113951c34:   cmp		x15, x7
   0.06%            ?     ?      0x0000000113951c38:   b.ge		#0x113951c40
                    ?     ?      0x0000000113951c3c:   mov		x16, x7
   5.89%            ?     ?      0x0000000113951c40:   ldr		x20, [x27, #0x68]
   0.07%                  ?      0x0000000113951c44:   mov		x15, x16
   0.17%                  ?      0x0000000113951c48:   cmp		x16, x20
   0.02%             ?    ?      0x0000000113951c4c:   b.ge		#0x113951c54
                     ?    ?      0x0000000113951c50:   mov		x15, x20
   5.52%             ?    ?      0x0000000113951c54:   ldr		x22, [x27, #0x70]
   0.07%                  ?      0x0000000113951c58:   mov		x16, x15
   0.10%                  ?      0x0000000113951c5c:   cmp		x15, x22
   0.01%              ?   ?      0x0000000113951c60:   b.ge		#0x113951c68
                      ?   ?      0x0000000113951c64:   mov		x16, x22
   5.53%              ?   ?      0x0000000113951c68:   ldr		x23, [x27, #0x78]
   0.06%                  ?      0x0000000113951c6c:   mov		x15, x16
   0.14%                  ?      0x0000000113951c70:   cmp		x16, x23
   0.12%               ?  ?      0x0000000113951c74:   b.ge		#0x113951c7c
                       ?  ?      0x0000000113951c78:   mov		x15, x23
   5.58%               ?  ?      0x0000000113951c7c:   ldr		x26, [x27, #0x80]
   0.13%                  ?      0x0000000113951c80:   mov		x16, x15
   0.07%                  ?      0x0000000113951c84:   cmp		x15, x26
   0.14%                ? ?      0x0000000113951c88:   b.ge		#0x113951c90
                        ? ?      0x0000000113951c8c:   mov		x16, x26
   5.28%                ? ?      0x0000000113951c90:   ldr		x27, [x27, #0x88]
   0.04%                  ?      0x0000000113951c94:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                  ?      0x0000000113951c98:   mov		x25, x16
   0.03%                  ?      0x0000000113951c9c:   cmp		x16, x27
   0.12%                 ??      0x0000000113951ca0:   b.ge		#0x113951ca8
   4.94%                 ??      0x0000000113951ca4:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ??                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ??                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
#+end_src
Disable intrinsic:
#+begin_src bash
   1.07%           ?         0x000000012fae5dcc:   mov		x7, x13
   9.59%          ??         0x000000012fae5dd0:   cmp		x7, x23
   0.16%  ?       ??         0x000000012fae5dd4:   b.ge		#0x12fae5e3c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?       ??                                                                   ; - java.lang.Math::max@11 (line 2038)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.06%  ?       ???        0x000000012fae5dd8:   add		w11, w11, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%  ?       ???        0x000000012fae5ddc:   cmp		w11, w14
   0.00%  ??      ???        0x000000012fae5de0:   b.ge		#0x12fae5e74        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de4:   mov		x25, x23            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de8:   add		x13, x4, w11, sxtw #3
          ??      ???        0x000000012fae5dec:   ldr		x23, [x13, #0x48]
   0.00%  ??      ???        0x000000012fae5df0:   ldp		x5, x6, [x13, #0x10]
   0.03%  ??      ???        0x000000012fae5df4:   ldr		x7, [x13, #0x40]
   0.01%  ??      ???        0x000000012fae5df8:   ldp		x21, x22, [x13, #0x20]
  11.10%  ??      ???        0x000000012fae5dfc:   ldp		x24, x13, [x13, #0x30];*laload {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5e00:   cmp		x25, x5
   0.01%  ???     ???        0x000000012fae5e04:   b.ge		#0x12fae5e6c
  10.83%  ???     ???     ?  0x000000012fae5e08:   cmp		x5, x6
   0.14%  ????    ???     ?  0x000000012fae5e0c:   b.ge		#0x12fae5e44
  10.79%  ????    ????    ?  0x000000012fae5e10:   cmp		x6, x21
   0.27%  ?????   ????    ?  0x000000012fae5e14:   b.ge		#0x12fae5e64
  10.53%  ?????   ????   ??  0x000000012fae5e18:   cmp		x21, x22
   0.33%  ??????  ????   ??  0x000000012fae5e1c:   b.ge		#0x12fae5e4c
  10.63%  ??????  ?????  ??  0x000000012fae5e20:   cmp		x22, x24
   0.23%  ??????? ?????  ??  0x000000012fae5e24:   b.ge		#0x12fae5e54
  10.74%  ??????? ?????? ??  0x000000012fae5e28:   cmp		x24, x13
   0.08%  ?????????????? ??  0x000000012fae5e2c:   b.ge		#0x12fae5e5c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?????????????? ??                                                            ; - java.lang.Math::max@11 (line 2038)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.29%  ?????????????????  0x000000012fae5e30:   cmp		x13, x7
          ?????????????????  0x000000012fae5e34:   b.lt		#0x12fae5dd0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ???????? ????????                                                            ; - java.lang.Math::max@3 (line 2038)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
#+end_src
Run with TraceLoopOpts to see if the difference is confirmed.
Branch never:
#+begin_src bash
Unroll 16         Loop: N536/N165  limit_check counted [int,int),+8 (2072 iters)  main has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N297/N302  limit_check profile_predicated predicated counted [0,int),+1 (4 iters)  pre
  Loop: N181/N180  limit_check sfpts={ 183 }
    Loop: N641/N165  limit_check counted [int,int),+16 (2072 iters)  main has_sfpt strip_mined
  Loop: N251/N256  limit_check counted [int,int),+1 (4 iters)  post
#+end_src
Disable intrinsic:
#+begin_src bash
Unroll 8         Loop: N1177/N246  limit_check counted [int,int),+4 (3475 iters)  main rc  has_sfpt strip_mined
Unroll 8           Loop: N1232/N538  limit_check counted [int,int),+4 (3475 iters)  main rc  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N818/N827  limit_check profile_predicated predicated counted [0,int),+1 (4 iters)  pre rc
  Loop: N624/N623  limit_check sfpts={ 626 }
    Loop: N1349/N246  limit_check counted [int,int),+8 (3475 iters)  main rc  has_sfpt strip_mined
  Loop: N766/N775  limit_check counted [int,int),+1 (4 iters)  post rc
  Loop: N615/N589  limit_check profile_predicated predicated sfpts={ 580 }
    Loop: N996/N1005  limit_check profile_predicated predicated counted [0,int),+1 (4 iters)  pre rc
    Loop: N635/N634  limit_check sfpts={ 637 }
      Loop: N1428/N538  limit_check counted [int,int),+8 (3475 iters)  main rc  has_sfpt strip_mined
    Loop: N944/N953  limit_check counted [int,int),+1 (4 iters)  post rc
#+end_src
Chat with Roland.
  He suggested limiting unrolling to 8 to make the comparison fair.
** Comparison
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2520.310 ? 183.514  ops/ms # disable intrinsic maxL
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2321.742 ? 289.782  ops/ms # branch never
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8   914.140 ?  30.055  ops/ms # branch always
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1023.075 ?  73.846  ops/ms # cmov
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3525.033 ? 101.415  ops/ms # disable intrinsic maxL
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3637.567 ?  84.313  ops/ms # branch never
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8   928.003 ?  23.162  ops/ms # branch always
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1105.859 ?   5.286  ops/ms # cmov
#+end_src
** Disable Intrinsic
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2520.310 ? 183.514  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3525.033 ? 101.415  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 542

                     0x00000001138e05c4:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
                     0x00000001138e05c8:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
                     0x00000001138e05cc:   ldp		x29, x30, [sp, #0x50]
                     0x00000001138e05d0:   add		sp, sp, #0x60
                     0x00000001138e05d4:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                     0x00000001138e05d8:   cmp		sp, x8
                     0x00000001138e05dc:   b.hi		#0x1138e0828
                     0x00000001138e05e0:   ret
   3.15%       ?     0x00000001138e05e4:   mov		x12, x7
               ?     0x00000001138e05e8:   nop
   0.02%       ?     0x00000001138e05ec:   nop
  18.92%      ??     0x00000001138e05f0:   cmp		x12, x21
   0.09%  ?   ??     0x00000001138e05f4:   b.ge		#0x1138e0654
  16.45%  ?   ??  ?  0x00000001138e05f8:   cmp		x21, x6
   0.02%  ??  ??  ?  0x00000001138e05fc:   b.ge		#0x1138e0644        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ??  ??  ?                                                            ; - java.lang.Math::max@11 (line 2038)
          ??  ??  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ??  ??  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  22.22%  ??  ??? ?  0x00000001138e0600:   add		w1, w1, #4          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ??  ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ??  ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.25%  ??  ??? ?  0x00000001138e0604:   cmp		w1, w11
   0.07%  ??? ??? ?  0x00000001138e0608:   b.ge		#0x1138e065c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ??? ??? ?  0x00000001138e060c:   mov		x22, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ??? ??? ?  0x00000001138e0610:   add		x12, x5, w1, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%  ??? ??? ?  0x00000001138e0614:   ldr		x7, [x12, #0x10]
          ??? ??? ?  0x00000001138e0618:   ldp		x21, x6, [x12, #0x20]
  20.24%  ??? ??? ?  0x00000001138e061c:   ldr		x12, [x12, #0x18]
   0.06%  ??? ??? ?  0x00000001138e0620:   mul		x7, x7, x15
   0.22%  ??? ??? ?  0x00000001138e0624:   mul		x6, x6, x15
          ??? ??? ?  0x00000001138e0628:   mul		x12, x12, x15
          ??? ??? ?  0x00000001138e062c:   mul		x21, x21, x15       ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%  ??? ??? ?  0x00000001138e0630:   cmp		x22, x7
          ??????? ?  0x00000001138e0634:   b.ge		#0x1138e064c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ??????? ?                                                            ; - java.lang.Math::max@11 (line 2038)
          ??????? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ??????? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  16.85%  ?????????  0x00000001138e0638:   cmp		x7, x12
          ?????????  0x00000001138e063c:   b.lt		#0x1138e05f0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ???? ????                                                            ; - java.lang.Math::max@3 (line 2038)
          ???? ????                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ???? ????                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.01%  ???? ????  0x00000001138e0640:   b		#0x1138e05e4
   0.10%  ????  ???  0x00000001138e0644:   mov		x6, x21
          ? ??  ???  0x00000001138e0648:   b		#0x1138e0600
   0.11%  ? ??   ??  0x00000001138e064c:   mov		x7, x22
          ? ?    ??  0x00000001138e0650:   b		#0x1138e0638
   0.30%  ? ?     ?  0x00000001138e0654:   mov		x21, x12
            ?     ?  0x00000001138e0658:   b		#0x1138e05f8
            ?        0x00000001138e065c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop c_rarg0=Oop c_rarg2=Oop c_rarg4=Oop c_rarg3=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%             0x00000001138e0660:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x00000001138e0664:   cmp		w1, w17
                     0x00000001138e0668:   b.ge		#0x1138e06bc
                     0x00000001138e066c:   mov		x22, x6
                     0x00000001138e0670:   cmp		w17, w1
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 545

                             0x000000012fae5dac:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@48 (line 109)
                             0x000000012fae5db0:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@42 (line 108)
                             0x000000012fae5db4:   ldp		x29, x30, [sp, #0x50]
                             0x000000012fae5db8:   add		sp, sp, #0x60
                             0x000000012fae5dbc:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                             0x000000012fae5dc0:   cmp		sp, x8
                             0x000000012fae5dc4:   b.hi		#0x12fae603c
                             0x000000012fae5dc8:   ret
   1.07%           ?         0x000000012fae5dcc:   mov		x7, x13
   9.59%          ??         0x000000012fae5dd0:   cmp		x7, x23
   0.16%  ?       ??         0x000000012fae5dd4:   b.ge		#0x12fae5e3c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?       ??                                                                   ; - java.lang.Math::max@11 (line 2038)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.06%  ?       ???        0x000000012fae5dd8:   add		w11, w11, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%  ?       ???        0x000000012fae5ddc:   cmp		w11, w14
   0.00%  ??      ???        0x000000012fae5de0:   b.ge		#0x12fae5e74        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de4:   mov		x25, x23            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de8:   add		x13, x4, w11, sxtw #3
          ??      ???        0x000000012fae5dec:   ldr		x23, [x13, #0x48]
   0.00%  ??      ???        0x000000012fae5df0:   ldp		x5, x6, [x13, #0x10]
   0.03%  ??      ???        0x000000012fae5df4:   ldr		x7, [x13, #0x40]
   0.01%  ??      ???        0x000000012fae5df8:   ldp		x21, x22, [x13, #0x20]
  11.10%  ??      ???        0x000000012fae5dfc:   ldp		x24, x13, [x13, #0x30];*laload {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5e00:   cmp		x25, x5
   0.01%  ???     ???        0x000000012fae5e04:   b.ge		#0x12fae5e6c
  10.83%  ???     ???     ?  0x000000012fae5e08:   cmp		x5, x6
   0.14%  ????    ???     ?  0x000000012fae5e0c:   b.ge		#0x12fae5e44
  10.79%  ????    ????    ?  0x000000012fae5e10:   cmp		x6, x21
   0.27%  ?????   ????    ?  0x000000012fae5e14:   b.ge		#0x12fae5e64
  10.53%  ?????   ????   ??  0x000000012fae5e18:   cmp		x21, x22
   0.33%  ??????  ????   ??  0x000000012fae5e1c:   b.ge		#0x12fae5e4c
  10.63%  ??????  ?????  ??  0x000000012fae5e20:   cmp		x22, x24
   0.23%  ??????? ?????  ??  0x000000012fae5e24:   b.ge		#0x12fae5e54
  10.74%  ??????? ?????? ??  0x000000012fae5e28:   cmp		x24, x13
   0.08%  ?????????????? ??  0x000000012fae5e2c:   b.ge		#0x12fae5e5c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?????????????? ??                                                            ; - java.lang.Math::max@11 (line 2038)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.29%  ?????????????????  0x000000012fae5e30:   cmp		x13, x7
          ?????????????????  0x000000012fae5e34:   b.lt		#0x12fae5dd0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ???????? ????????                                                            ; - java.lang.Math::max@3 (line 2038)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%  ???????? ????????  0x000000012fae5e38:   b		#0x12fae5dcc
   0.03%  ????????  ???????  0x000000012fae5e3c:   mov		x23, x7
           ???????  ???????  0x000000012fae5e40:   b		#0x12fae5dd8
           ???????   ??????  0x000000012fae5e44:   mov		x6, x5
           ?? ????   ??????  0x000000012fae5e48:   b		#0x12fae5e10
           ?? ????    ?????  0x000000012fae5e4c:   mov		x22, x21
           ?? ? ??    ?????  0x000000012fae5e50:   b		#0x12fae5e20
   0.01%   ?? ? ??     ????  0x000000012fae5e54:   mov		x24, x22
           ?? ?  ?     ????  0x000000012fae5e58:   b		#0x12fae5e28
           ?? ?  ?      ???  0x000000012fae5e5c:   mov		x13, x24
           ?? ?         ???  0x000000012fae5e60:   b		#0x12fae5e30
   0.00%   ?? ?          ??  0x000000012fae5e64:   mov		x21, x6
           ??            ??  0x000000012fae5e68:   b		#0x12fae5e18
   0.00%   ??             ?  0x000000012fae5e6c:   mov		x5, x25
           ?              ?  0x000000012fae5e70:   b		#0x12fae5e08
           ?                 0x000000012fae5e74:   ldr		x5, [x28, #0x30]    ; ImmutableOopMap {r16=Oop c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg4=Oop r19=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                             0x000000012fae5e78:   ldr		wzr, [x5]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000012fae5e7c:   cmp		w11, w12
....................................................................................................
#+end_src
** Branch Never
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2321.742 ? 289.782  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3637.567 ?  84.313  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 561

                 0x0000000117b6fddc:   cmp		w10, #0xfa0
                 0x0000000117b6fde0:   csel		w11, w14, w10, hi
                 0x0000000117b6fde4:   add		w10, w11, w12
                 0x0000000117b6fde8:   nop
                 0x0000000117b6fdec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fdf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%      ?  0x0000000117b6fdf4:   ldp		x21, x22, [x11, #0x10]
   0.01%      ?  0x0000000117b6fdf8:   ldr		x23, [x11, #0x20]
              ?  0x0000000117b6fdfc:   mul		x21, x21, x16
  27.63%      ?  0x0000000117b6fe00:   ldr		x11, [x11, #0x28]
              ?  0x0000000117b6fe04:   mul		x22, x22, x16
              ?  0x0000000117b6fe08:   mul		x23, x23, x16
              ?  0x0000000117b6fe0c:   mov		x24, x21
   2.30%      ?  0x0000000117b6fe10:   cmp		x21, x7
          ?   ?  0x0000000117b6fe14:   b.ge		#0x117b6fe1c
          ?   ?  0x0000000117b6fe18:   mov		x24, x7
  17.59%  ?   ?  0x0000000117b6fe1c:   mul		x11, x11, x16
              ?  0x0000000117b6fe20:   mov		x7, x22
              ?  0x0000000117b6fe24:   cmp		x22, x24
           ?  ?  0x0000000117b6fe28:   b.ge		#0x117b6fe30
           ?  ?  0x0000000117b6fe2c:   mov		x7, x24
  14.37%   ?  ?  0x0000000117b6fe30:   mov		x21, x23
   0.11%      ?  0x0000000117b6fe34:   cmp		x23, x7
   2.30%    ? ?  0x0000000117b6fe38:   b.ge		#0x117b6fe40
            ? ?  0x0000000117b6fe3c:   mov		x21, x7
  15.95%    ? ?  0x0000000117b6fe40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fe44:   mov		x7, x11
              ?  0x0000000117b6fe48:   cmp		x11, x21
             ??  0x0000000117b6fe4c:   b.ge		#0x117b6fe54
             ??  0x0000000117b6fe50:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.36%     ??  0x0000000117b6fe54:   cmp		w12, w10
              ?  0x0000000117b6fe58:   b.lt		#0x117b6fdf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.73%         0x0000000117b6fe5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x0000000117b6fe60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000117b6fe64:   cmp		w12, w17
                 0x0000000117b6fe68:   b.lt		#0x117b6fdd0
                 0x0000000117b6fe6c:   cmp		w12, w13
                 0x0000000117b6fe70:   b.lt		#0x117b6fd28
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 542

                                 0x0000000113951b4c:   stp		x17, x15, [sp, #0x10]
                                 0x0000000113951b50:   str		x20, [sp, #0x60]
                                 0x0000000113951b54:   nop
                                 0x0000000113951b58:   nop
                                 0x0000000113951b5c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                          ?      0x0000000113951b60:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.80%                  ?      0x0000000113951b64:   ldr		x15, [x27, #0x10]
   0.05%                  ?      0x0000000113951b68:   mov		x29, x25
   0.04%                  ?      0x0000000113951b6c:   cmp		x25, x15
   0.13%  ?               ?      0x0000000113951b70:   b.ge		#0x113951b78
          ?               ?      0x0000000113951b74:   mov		x29, x15
   5.50%  ?               ?      0x0000000113951b78:   ldr		x16, [x27, #0x18]
   0.14%                  ?      0x0000000113951b7c:   mov		x15, x29
   0.19%                  ?      0x0000000113951b80:   cmp		x29, x16
   0.15%   ?              ?      0x0000000113951b84:   b.ge		#0x113951b8c
           ?              ?      0x0000000113951b88:   mov		x15, x16
   5.22%   ?              ?      0x0000000113951b8c:   ldr		x17, [x27, #0x20]
   0.07%                  ?      0x0000000113951b90:   mov		x16, x15
   0.03%                  ?      0x0000000113951b94:   cmp		x15, x17
   0.07%    ?             ?      0x0000000113951b98:   b.ge		#0x113951ba0
            ?             ?      0x0000000113951b9c:   mov		x16, x17
   5.39%    ?             ?      0x0000000113951ba0:   ldr		x0, [x27, #0x28]
   0.07%                  ?      0x0000000113951ba4:   mov		x15, x16
   0.16%                  ?      0x0000000113951ba8:   cmp		x16, x0
   0.11%     ?            ?      0x0000000113951bac:   b.ge		#0x113951bb4
             ?            ?      0x0000000113951bb0:   mov		x15, x0
   5.31%     ?            ?      0x0000000113951bb4:   ldr		x1, [x27, #0x30]
   0.04%                  ?      0x0000000113951bb8:   mov		x16, x15
   0.11%                  ?      0x0000000113951bbc:   cmp		x15, x1
   0.03%      ?           ?      0x0000000113951bc0:   b.ge		#0x113951bc8
              ?           ?      0x0000000113951bc4:   mov		x16, x1
   5.33%      ?           ?      0x0000000113951bc8:   ldr		x2, [x27, #0x38]
   0.08%                  ?      0x0000000113951bcc:   mov		x15, x16
   0.17%                  ?      0x0000000113951bd0:   cmp		x16, x2
   0.11%       ?          ?      0x0000000113951bd4:   b.ge		#0x113951bdc
               ?          ?      0x0000000113951bd8:   mov		x15, x2
   5.79%       ?          ?      0x0000000113951bdc:   ldr		x3, [x27, #0x40]
   0.07%                  ?      0x0000000113951be0:   mov		x16, x15
   0.04%                  ?      0x0000000113951be4:   cmp		x15, x3
   0.02%        ?         ?      0x0000000113951be8:   b.ge		#0x113951bf0
                ?         ?      0x0000000113951bec:   mov		x16, x3
   5.32%        ?         ?      0x0000000113951bf0:   ldr		x4, [x27, #0x48]
   0.08%                  ?      0x0000000113951bf4:   mov		x15, x16
   0.07%                  ?      0x0000000113951bf8:   cmp		x16, x4
   0.07%         ?        ?      0x0000000113951bfc:   b.ge		#0x113951c04
   0.00%         ?        ?      0x0000000113951c00:   mov		x15, x4
   5.77%         ?        ?      0x0000000113951c04:   ldr		x5, [x27, #0x50]
   0.08%                  ?      0x0000000113951c08:   mov		x16, x15
   0.04%                  ?      0x0000000113951c0c:   cmp		x15, x5
   0.04%          ?       ?      0x0000000113951c10:   b.ge		#0x113951c18
                  ?       ?      0x0000000113951c14:   mov		x16, x5
   5.42%          ?       ?      0x0000000113951c18:   ldr		x6, [x27, #0x58]
   0.09%                  ?      0x0000000113951c1c:   mov		x15, x16
   0.15%                  ?      0x0000000113951c20:   cmp		x16, x6
   0.08%           ?      ?      0x0000000113951c24:   b.ge		#0x113951c2c
                   ?      ?      0x0000000113951c28:   mov		x15, x6
   5.49%           ?      ?      0x0000000113951c2c:   ldr		x7, [x27, #0x60]
   0.11%                  ?      0x0000000113951c30:   mov		x16, x15
   0.06%                  ?      0x0000000113951c34:   cmp		x15, x7
   0.06%            ?     ?      0x0000000113951c38:   b.ge		#0x113951c40
                    ?     ?      0x0000000113951c3c:   mov		x16, x7
   5.89%            ?     ?      0x0000000113951c40:   ldr		x20, [x27, #0x68]
   0.07%                  ?      0x0000000113951c44:   mov		x15, x16
   0.17%                  ?      0x0000000113951c48:   cmp		x16, x20
   0.02%             ?    ?      0x0000000113951c4c:   b.ge		#0x113951c54
                     ?    ?      0x0000000113951c50:   mov		x15, x20
   5.52%             ?    ?      0x0000000113951c54:   ldr		x22, [x27, #0x70]
   0.07%                  ?      0x0000000113951c58:   mov		x16, x15
   0.10%                  ?      0x0000000113951c5c:   cmp		x15, x22
   0.01%              ?   ?      0x0000000113951c60:   b.ge		#0x113951c68
                      ?   ?      0x0000000113951c64:   mov		x16, x22
   5.53%              ?   ?      0x0000000113951c68:   ldr		x23, [x27, #0x78]
   0.06%                  ?      0x0000000113951c6c:   mov		x15, x16
   0.14%                  ?      0x0000000113951c70:   cmp		x16, x23
   0.12%               ?  ?      0x0000000113951c74:   b.ge		#0x113951c7c
                       ?  ?      0x0000000113951c78:   mov		x15, x23
   5.58%               ?  ?      0x0000000113951c7c:   ldr		x26, [x27, #0x80]
   0.13%                  ?      0x0000000113951c80:   mov		x16, x15
   0.07%                  ?      0x0000000113951c84:   cmp		x15, x26
   0.14%                ? ?      0x0000000113951c88:   b.ge		#0x113951c90
                        ? ?      0x0000000113951c8c:   mov		x16, x26
   5.28%                ? ?      0x0000000113951c90:   ldr		x27, [x27, #0x88]
   0.04%                  ?      0x0000000113951c94:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                  ?      0x0000000113951c98:   mov		x25, x16
   0.03%                  ?      0x0000000113951c9c:   cmp		x16, x27
   0.12%                 ??      0x0000000113951ca0:   b.ge		#0x113951ca8
   4.94%                 ??      0x0000000113951ca4:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ??                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ??                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.79%                 ??      0x0000000113951ca8:   cmp		w12, w11
   0.00%                  ?      0x0000000113951cac:   b.lt		#0x113951b60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951cb0:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.02%                         0x0000000113951cb4:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                           ;   {poll}
                                 0x0000000113951cb8:   cmp		w12, w10
                                 0x0000000113951cbc:   b.lt		#0x113951b20
                                 0x0000000113951cc0:   ldp		x16, x0, [sp]
                                 0x0000000113951cc4:   ldp		x17, x15, [sp, #0x10]
   0.02%                         0x0000000113951cc8:   ldr		x20, [sp, #0x60]
                                 0x0000000113951ccc:   cmp		w12, w14
                                 0x0000000113951cd0:   b.lt		#0x113951af8
                                 0x0000000113951cd4:   mov		x11, x25            ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%                      ?  0x0000000113951cd8:   ldarb		w14, [x21]          ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 107)
                              ?  0x0000000113951cdc:   ldr		x1, [x28, #0x30]
                              ?  0x0000000113951ce0:   add		x19, x19, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg0=Oop rdispatch=Derived_oop_c_rarg0 resp=Oop }
                              ?                                                            ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                              ?                                                            ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 107)
   0.03%                      ?  0x0000000113951ce4:   ldr		wzr, [x1]           ;   {poll}
                              ?  0x0000000113951ce8:   cbnz		w14, #0x113951aa8   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 108)
   0.00%                      ?  0x0000000113951cec:   ldr		w14, [x15, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              ?  0x0000000113951cf0:   cmp		w14, #0
                           ?  ?  0x0000000113951cf4:   b.le		#0x113951d60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951cf8:   ldr		w10, [x15, #0x2c]
                           ?  ?  0x0000000113951cfc:   lsl		x24, x10, #3        ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ?  ?  0x0000000113951d00:   ldr		w10, [x24, #0xc]    ; implicit exception: dispatches to 0x0000000113951d68
                           ?  ?                                                            ;*laload {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951d04:   sxtw		x11, w14
                           ?  ?  0x0000000113951d08:   sub		x1, x11, #0xf
                           ?  ?  0x0000000113951d0c:   sxtw		x12, w10
                           ?  ?  0x0000000113951d10:   sub		x11, x11, #1
                           ?  ?  0x0000000113951d14:   cbz		w10, #0x113951d68
   0.01%                   ?  ?  0x0000000113951d18:   cmp		x11, x12
                           ?  ?  0x0000000113951d1c:   b.hs		#0x113951d68
   0.05%                   ?  ?  0x0000000113951d20:   ldr		x11, [x24, #0x10]
   0.00%                   ?  ?  0x0000000113951d24:   mov		x12, #-0x80000000
                           ?  ?  0x0000000113951d28:   mov		x10, x1
                           ?  ?  0x0000000113951d2c:   cmp		x1, x12
                           ?? ?  0x0000000113951d30:   b.ge		#0x113951d38
                           ?? ?  0x0000000113951d34:   mov		x10, x12
   0.01%                   ?? ?  0x0000000113951d38:   mov		x12, xzr
                           ?  ?  0x0000000113951d3c:   mov		w10, w10
                           ?  ?  0x0000000113951d40:   mov		x25, x11
                           ?  ?  0x0000000113951d44:   cmp		x11, x12
                           ? ??  0x0000000113951d48:   b.ge		#0x113951d50
                           ? ??  0x0000000113951d4c:   mov		x25, x12            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                           ? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                           ? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ? ??  0x0000000113951d50:   cmp		w10, #1
                           ?  ?  0x0000000113951d54:   b.le		#0x113951d90
                           ?  ?  0x0000000113951d58:   mov		w12, #1
                           ?  ?  0x0000000113951d5c:   b		#0x113951b2c
                           ?  ?  0x0000000113951d60:   mov		x11, xzr
                              ?  0x0000000113951d64:   b		#0x113951cd8        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951d68:   mov		w1, #-0x92
....................................................................................................
#+end_src
** Branch Always
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  914.140 ? 30.055  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  928.003 ? 23.162  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 560

                0x0000000116f545b0:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
                0x0000000116f545b4:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
                0x0000000116f545b8:   ldp		x29, x30, [sp, #0x50]
                0x0000000116f545bc:   add		sp, sp, #0x60
                0x0000000116f545c0:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                0x0000000116f545c4:   cmp		sp, x8
                0x0000000116f545c8:   b.hi		#0x116f547e8
                0x0000000116f545cc:   ret
   9.68%   ?    0x0000000116f545d0:   mov		x7, x17             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           ?                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           ?                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)















           ?    0x0000000116f545d4:   add		x10, x6, w12, sxtw #3
  49.69%   ?    0x0000000116f545d8:   ldr		x10, [x10, #0x10]
           ?    0x0000000116f545dc:   mul		x10, x10, x16
           ?    0x0000000116f545e0:   add		w12, w12, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ?                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           ?                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
           ?    0x0000000116f545e4:   mov		x17, x10
           ?    0x0000000116f545e8:   cmp		x7, x10
          ??    0x0000000116f545ec:   b.lt		#0x116f545f0        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ??                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ??                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  40.26%  ??    0x0000000116f545f0:   cmp		w12, w13
           ?    0x0000000116f545f4:   b.lt		#0x116f545d0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%        0x0000000116f545f8:   ldarb		w11, [x4]           ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@32 (line 107)
                0x0000000116f545fc:   ldr		x12, [x28, #0x30]
                0x0000000116f54600:   add		x20, x20, #1        ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 r19=Oop }
                                                                          ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                                                                          ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@35 (line 107)
   0.02%        0x0000000116f54604:   ldr		wzr, [x12]          ;   {poll}
                0x0000000116f54608:   cbnz		w11, #0x116f54584   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@38 (line 108)
                0x0000000116f5460c:   ldr		w13, [x0, #0xc]     ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@8 (line 284)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                0x0000000116f54610:   cmp		w13, #0
                0x0000000116f54614:   b.le		#0x116f5470c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                0x0000000116f54618:   ldr		w10, [x0, #0x2c]
                0x0000000116f5461c:   lsl		x6, x10, #3         ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@18 (line 285)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%        0x0000000116f54620:   ldr		w12, [x6, #0xc]     ; implicit exception: dispatches to 0x0000000116f54714
                                                                          ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                0x0000000116f54624:   sxtw		x10, w13
                0x0000000116f54628:   sub		x11, x10, #3
                0x0000000116f5462c:   mov		x17, x1
                0x0000000116f54630:   cmp		x11, x1
            ?   0x0000000116f54634:   b.lt		#0x116f54638
   0.00%    ?   0x0000000116f54638:   sxtw		x7, w12
                0x0000000116f5463c:   sub		x10, x10, #1
                0x0000000116f54640:   mov		w17, w17
                0x0000000116f54644:   cbz		w12, #0x116f54714
   0.00%        0x0000000116f54648:   cmp		x10, x7
                0x0000000116f5464c:   b.hs		#0x116f54714
   0.00%        0x0000000116f54650:   ldr		x10, [x6, #0x10]
                0x0000000116f54654:   mul		x10, x10, x16
                0x0000000116f54658:   mov		x7, x15
                0x0000000116f5465c:   cmp		x10, x15
             ?  0x0000000116f54660:   b.lt		#0x116f54664        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
             ?  0x0000000116f54664:   cmp		w17, #1
                0x0000000116f54668:   b.le		#0x116f5473c
                0x0000000116f5466c:   mov		w12, #1
                0x0000000116f54670:   cmp		w17, w12
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 537

              0x0000000115b4df04:   str		xzr, [x20, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@48 (line 109)
              0x0000000115b4df08:   str		x0, [x20, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@42 (line 108)
              0x0000000115b4df0c:   ldp		x29, x30, [sp, #0x50]
              0x0000000115b4df10:   add		sp, sp, #0x60
              0x0000000115b4df14:   ldr		x8, [x28, #0x28]    ;   {poll_return}
              0x0000000115b4df18:   cmp		sp, x8
              0x0000000115b4df1c:   b.hi		#0x115b4e214
              0x0000000115b4df20:   ret
   8.63%   ?  0x0000000115b4df24:   mov		x25, x11            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
           ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
           ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
           ?  0x0000000115b4df28:   add		x10, x24, w12, sxtw #3
  49.92%   ?  0x0000000115b4df2c:   ldr		x10, [x10, #0x10]
           ?  0x0000000115b4df30:   add		w12, w12, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
           ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
           ?  0x0000000115b4df34:   mov		x11, x10
           ?  0x0000000115b4df38:   cmp		x25, x10
          ??  0x0000000115b4df3c:   b.lt		#0x115b4df40        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  41.12%  ??  0x0000000115b4df40:   cmp		w12, w14
           ?  0x0000000115b4df44:   b.lt		#0x115b4df24        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%      0x0000000115b4df48:   b		#0x115b4e0b8
              0x0000000115b4df4c:   ldp		x16, x0, [sp]
              0x0000000115b4df50:   ldp		x17, x15, [sp, #0x10]
              0x0000000115b4df54:   ldr		x20, [sp, #0x60]
              0x0000000115b4df58:   cmp		w10, w12
              0x0000000115b4df5c:   sub		w1, w10, w12
              0x0000000115b4df60:   csel		w1, wzr, w1, lt
              0x0000000115b4df64:   mov		w8, #0x3e80
              0x0000000115b4df68:   cmp		w1, w8
....................................................................................................
#+end_src
** CMov
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1023.075 ? 73.846  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1105.859 ?  5.286  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 559

             0x000000012fae6944:   add		w11, w12, w13
             0x000000012fae6948:   nop
             0x000000012fae694c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ?  0x000000012fae6950:   add		x12, x6, w13, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ?  0x000000012fae6954:   ldp		x21, x22, [x12, #0x10]
          ?  0x000000012fae6958:   mul		x21, x21, x17
   0.01%  ?  0x000000012fae695c:   ldr		x23, [x12, #0x20]
          ?  0x000000012fae6960:   mul		x22, x22, x17
          ?  0x000000012fae6964:   cmp		x21, x7
   0.08%  ?  0x000000012fae6968:   ldr		x12, [x12, #0x28]
   0.00%  ?  0x000000012fae696c:   csel		x7, x21, x7, gt
          ?  0x000000012fae6970:   mul		x21, x23, x17
          ?  0x000000012fae6974:   cmp		x22, x7
          ?  0x000000012fae6978:   csel		x7, x22, x7, gt
   0.02%  ?  0x000000012fae697c:   mul		x12, x12, x17
   2.37%  ?  0x000000012fae6980:   cmp		x21, x7
  74.76%  ?  0x000000012fae6984:   csel		x7, x21, x7, gt
   4.96%  ?  0x000000012fae6988:   cmp		x12, x7
   4.78%  ?  0x000000012fae698c:   add		w13, w13, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   5.15%  ?  0x000000012fae6990:   csel		x7, x12, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   7.16%  ?  0x000000012fae6994:   cmp		w13, w11
          ?  0x000000012fae6998:   b.lt		#0x12fae6950        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.34%     0x000000012fae699c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%     0x000000012fae69a0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x000000012fae69a4:   cmp		w13, w15
             0x000000012fae69a8:   b.lt		#0x12fae6930
             0x000000012fae69ac:   cmp		w13, w10
             0x000000012fae69b0:   b.lt		#0x12fae68a0
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 558

             0x0000000114f3c8f0:   csel		w11, wzr, w12, lt
             0x0000000114f3c8f4:   mov		w8, #0x3e80
             0x0000000114f3c8f8:   cmp		w11, w8
             0x0000000114f3c8fc:   csel		w11, w14, w11, hi
             0x0000000114f3c900:   add		w12, w11, w3
             0x0000000114f3c904:   nop
             0x0000000114f3c908:   nop
             0x0000000114f3c90c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.00%  ?  0x0000000114f3c910:   add		x21, x5, w3, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%  ?  0x0000000114f3c914:   ldr		x11, [x21, #0x10]
          ?  0x0000000114f3c918:   cmp		x6, x11
   0.01%  ?  0x0000000114f3c91c:   ldr		x7, [x21, #0x18]
          ?  0x0000000114f3c920:   csel		x11, x6, x11, gt
          ?  0x0000000114f3c924:   cmp		x11, x7
   0.01%  ?  0x0000000114f3c928:   ldr		x6, [x21, #0x20]
          ?  0x0000000114f3c92c:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c930:   cmp		x11, x6
   0.02%  ?  0x0000000114f3c934:   ldr		x7, [x21, #0x28]
          ?  0x0000000114f3c938:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c93c:   cmp		x11, x7
   0.00%  ?  0x0000000114f3c940:   ldr		x6, [x21, #0x30]
          ?  0x0000000114f3c944:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c948:   cmp		x11, x6
   0.01%  ?  0x0000000114f3c94c:   ldr		x7, [x21, #0x38]
          ?  0x0000000114f3c950:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c954:   cmp		x11, x7
   1.03%  ?  0x0000000114f3c958:   ldr		x6, [x21, #0x40]
   0.24%  ?  0x0000000114f3c95c:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c960:   cmp		x11, x6
   2.91%  ?  0x0000000114f3c964:   ldr		x7, [x21, #0x48]
          ?  0x0000000114f3c968:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c96c:   cmp		x11, x7
   2.54%  ?  0x0000000114f3c970:   ldr		x6, [x21, #0x50]
          ?  0x0000000114f3c974:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c978:   cmp		x11, x6
   4.65%  ?  0x0000000114f3c97c:   ldr		x7, [x21, #0x58]
          ?  0x0000000114f3c980:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c984:   cmp		x11, x7
   6.08%  ?  0x0000000114f3c988:   ldr		x6, [x21, #0x60]
          ?  0x0000000114f3c98c:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c990:   cmp		x11, x6
   5.08%  ?  0x0000000114f3c994:   ldr		x7, [x21, #0x68]
          ?  0x0000000114f3c998:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c99c:   cmp		x11, x7
   5.66%  ?  0x0000000114f3c9a0:   ldr		x6, [x21, #0x70]
          ?  0x0000000114f3c9a4:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c9a8:   cmp		x11, x6
   5.49%  ?  0x0000000114f3c9ac:   ldr		x7, [x21, #0x78]
          ?  0x0000000114f3c9b0:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c9b4:   cmp		x11, x7
   5.43%  ?  0x0000000114f3c9b8:   ldr		x6, [x21, #0x80]
   0.05%  ?  0x0000000114f3c9bc:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c9c0:   cmp		x11, x6
  59.60%  ?  0x0000000114f3c9c4:   ldr		x7, [x21, #0x88]
          ?  0x0000000114f3c9c8:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c9cc:   cmp		x11, x7
          ?  0x0000000114f3c9d0:   add		w3, w3, #0x10       ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ?  0x0000000114f3c9d4:   csel		x6, x11, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ?  0x0000000114f3c9d8:   cmp		w3, w12
          ?  0x0000000114f3c9dc:   b.lt		#0x114f3c910        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.31%     0x0000000114f3c9e0:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg2=Oop c_rarg4=Oop c_rarg1=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.02%     0x0000000114f3c9e4:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x0000000114f3c9e8:   cmp		w3, w0
             0x0000000114f3c9ec:   b.lt		#0x114f3c8e8
             0x0000000114f3c9f0:   cmp		w3, w10
             0x0000000114f3c9f4:   b.lt		#0x114f3c860
....................................................................................................
#+end_src
* 28.3.25
Added jmh code to resolve xctrace out of SDKROOT.
Created https://bugs.openjdk.org/browse/CODETOOLS-7903982 to improve that.

Tried to run benchmark with that but failed:
#+begin_src bash
TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax" MICRO="OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1" CONF=release BUILD_LOG=warn make test
pushd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make -s
popd
touch /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
~/1/jdk-avoid-cmov-long-min-max ~/1/colata/avoid-cmov-long-min-max-8351409
Building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
Finished building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
~/1/colata/avoid-cmov-long-min-max-8351409
cd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make test
make[1]: Entering directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
Building target 'test' in configuration 'release-darwin-arm64'
Running tests using MICRO control variable 'OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1'
Test selection 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax', will run:
 micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax

Running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Profilers failed to initialize, exiting.
"xctrace version" failed: [dyld[99580]: Library not loaded: @rpath/XCTraceCore.framework/Versions/A/XCTraceCore
  Referenced from: <05ABD51C-583F-305C-BAC6-95F050084452> /nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/usr/bin/xctrace
  Reason: tried: '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file)
]
Finished running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Test report is stored in build/release-darwin-arm64/test-results/micro_org_openjdk_bench_java_lang_MinMaxVector_longReductionMultiplyMax

==============================
Test summary
==============================
   TEST                                              TOTAL  PASS  FAIL ERROR  SKIP
   micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax
>>                                                       1     0     0     1     0 <<
==============================
TEST FAILURE

make[2]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/Init.gmk:150: main] Error 1
make[1]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/PreInit.gmk:159: test] Error 2
make[1]: Leaving directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
make: *** [../nix-make/OpenJDK.gmk:103: test] Error 2
#+end_src
The issue is that XCTraceCore is not in the devkit.
Created https://bugs.openjdk.org/browse/JDK-8353177

Added XCTraceCore to the devkit and tried again,
but something else is missing, ~InstrumentsTrace~:
#+begin_src bash
[nix-shell:~/1/colata/avoid-cmov-long-min-max-8351409]$ TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax" MICRO="OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1" CONF=release BUILD_LOG=warn make test
pushd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make -s
popd
touch /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
~/1/jdk-avoid-cmov-long-min-max ~/1/colata/avoid-cmov-long-min-max-8351409
Building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
Finished building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
~/1/colata/avoid-cmov-long-min-max-8351409
cd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make test
make[1]: Entering directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
Building target 'test' in configuration 'release-darwin-arm64'
Running tests using MICRO control variable 'OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1'
Test selection 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax', will run:
 micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax

Running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Profilers failed to initialize, exiting.
"xctrace version" failed: [dyld[24506]: Library not loaded: @rpath/InstrumentsTrace.framework/Versions/A/InstrumentsTrace
  Referenced from: <EC019860-6E8F-343C-82AA-B9F9374E9129> /nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore
  Reason: tried: '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/../../../InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/../../../../../../../SharedFrameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/../../../../Independence/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file)
]
Finished running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Test report is stored in build/release-darwin-arm64/test-results/micro_org_openjdk_bench_java_lang_MinMaxVector_longReductionMultiplyMax

==============================
Test summary
==============================
   TEST                                              TOTAL  PASS  FAIL ERROR  SKIP
   micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax
>>                                                       1     0     0     1     0 <<
==============================
TEST FAILURE

make[2]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/Init.gmk:150: main] Error 1
make[1]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/PreInit.gmk:159: test] Error 2
make[1]: Leaving directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
make: *** [../nix-make/OpenJDK.gmk:104: test] Error 2
#+end_src
* 27.3.25
To breakpoint to .ad being called,
try putting breakpoint in MatchOper::reg
#+begin_src bash
MachOper::reg(PhaseRegAlloc *, const Node *) const machnode.cpp:39
maxL_reg_regNode::emit(C2_MacroAssembler *, PhaseRegAlloc *) const aarch64.ad:15683
PhaseOutput::scratch_emit_size(const Node *) output.cpp:3385
MachNode::emit_size(PhaseRegAlloc *) const machnode.cpp:157
MachNode::size(PhaseRegAlloc *) const machnode.cpp:149
PhaseOutput::shorten_branches(unsigned int *) output.cpp:539
PhaseOutput::Output() output.cpp:339
Compile::Code_Gen() compile.cpp:3081
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:891
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:693
C2Compiler::compile_method(ciEnv *, ciMethod *, int, bool, DirectiveSet *) c2compiler.cpp:141
CompileBroker::invoke_compiler_on_method(CompileTask *) compileBroker.cpp:2331
CompileBroker::compiler_thread_loop() compileBroker.cpp:1975
CompilerThread::thread_entry(JavaThread *, JavaThread *) compilerThread.cpp:67
JavaThread::thread_main_inner() javaThread.cpp:776
JavaThread::run() javaThread.cpp:761
Thread::call_run() thread.cpp:231
thread_native_entry(Thread *) os_bsd.cpp:601
#+end_src
* 25.3.25
todo: run without intrinsic
** benchmarking aarch64
*** branch never taken (option 3)
#+begin_src bash
Benchmark                            (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionSimpleMax            100    2048  thrpt    8  3810.543 ? 98.505  ops/ms
#+end_src
*** branch always taken (option 2)
#+begin_src bash
Benchmark                            (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionSimpleMax            100    2048  thrpt    8  1757.789 ? 39.362  ops/ms
#+end_src
*** cmov (option 1)
#+begin_src bash
Benchmark                            (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionSimpleMax            100    2048  thrpt    8  1095.610 ? 13.587  ops/ms
#+end_src
** source date error
Attempt to run benchmark but had issues building test:

#+begin_src bash
/nix/store/5y040sypyg0amh0igxs9rnx5fmj0d88i-temurin-bin-23.0.2/bin/jar --create --date 1980-01-01T00:00:00Z --file /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/support/modules_libs/java.base/jrt-fs.jar --manifest /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/support/modules_libs/java.base/_the.jrt-fs.jar_manifest
...
date 1980-01-01T00:00:00Z is not within the valid range 1980-01-01T00:00:02Z to 2099-12-31T23:59:59Z
#+end_src

#+begin_src bash
bash configure \
   --disable-precompiled-headers \
   --with-boot-jdk=/nix/store/5y040sypyg0amh0igxs9rnx5fmj0d88i-temurin-bin-23.0.2 \
   --with-conf-name=release-darwin-arm64 \
   --with-jmh=build/jmh/jars \
   --with-devkit=/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15 \
   --enable-hsdis-bundling --with-capstone=/nix/store/g9xz7lq27dsdvrg0i666nwc6322af9p1-capstone-5.0.5 --with-hsdis=capstone
...
checking what hotspot build time to use... 1980-01-01T00:00:00Z (from --with-source-date)
#+end_src

Nix:
#+begin_src bash
checking what source date to use... 315532800, from SOURCE_DATE_EPOCH
#+end_src

Leo:
#+begin_src bash
checking what source date to use... 1742909454, from 'current' (default)
#+end_src

Issue is that nix-shell sets ~SOURCE_DATE_EPOCH~:
#+begin_src bash
$ echo $SOURCE_DATE_EPOCH
315532800
#+end_src

Several ways to fix it.
Either pass in a source date, or unset ~SOURCE_DATE_EPOCH~ env variable:
https://espg.github.io/linux/nix.html

Cause: https://github.com/openjdk/jdk/pull/
** other way, branch always taken
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg));
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
  0x00000001382cfd68:   mov		x13, #0xb
  0x00000001382cfd7c:   mul		x14, x14, x13
  ...
  0x00000001382cfdb8:   mov		x0, x14             ; x0 (dst) <- x14 (src1, value)
  0x00000001382cfdbc:   cmp		x14, x12            ; x14 (src1, value) >= x12 (src2, max)
  0x00000001382cfdc0:   b.ge		#0x1382cfdc8        ; yes, it's always greater so branch taken
  0x00000001382cfdc4:   mov		x0, x12             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
  0x00000001382cfdc8:   cmp		w11, #0x3fd
#+end_src
** one way v2, branch never taken
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg));
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
#+begin_src asm
  0x00000001282cfd98:   mul		x12, x12, x13
  ...
  0x00000001282cfdb8:   mov		x0, x12             ; x0 (dst) <- x12 (value)
  0x00000001282cfdbc:   cmp		x12, x14            ; x12 (value), x14 (max)
  0x00000001282cfdc0:   b.lt		#0x1282cfdc8        ; value < max ? never taken branch
  0x00000001282cfdc4:   mov		x0, x14             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
                                                            ; dst (dst) <- x14 max
#+end_src
** one way
Is this right?
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ cmp(as_Register($dst$$reg), as_Register($src1$$reg));
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
#+begin_src asm
  0x0000000137acfd68:   mov		x13, #0xb           ; x13 = 11
  ...
  0x0000000137acfd98:   mul		x12, x12, x13       ; value = 11 * data[i]
  ...
  0x0000000137acfdb8:   mov		x0, x12             ; mov dst <- src2 (value)
  0x0000000137acfdbc:   cmp		x0, x14             ; cmp dst (value), src1 (max)
  0x0000000137acfdc0:   b.lt		#0x137acfdc8        ; branch if (dst (value) < src1 (max)) ; branch won't happen because value always > max
  0x0000000137acfdc4:   mov		x0, x14             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
                                                            ; mov dst <- src1 (max)
#+end_src
* 21.3.25
** branch one way
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ cmp(as_Register($dst$$reg), as_Register($src1$$reg));
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
** how to write branch code in backend
Create MyMax that does things manually.

Bytecode:
#+begin_src java
  static long test(long[]);
    descriptor: ([J)J
    flags: (0x0008) ACC_STATIC
    Code:
      stack=4, locals=8, args_size=1
         0: ldc2_w        #11                 // long -9223372036854775808l
         3: lstore_1
         4: iconst_0
         5: istore_3
         6: iload_3
         7: sipush        1024
        10: if_icmpge     46
        13: ldc2_w        #13                 // long 11l
        16: aload_0
        17: iload_3
        18: laload
        19: lmul
        20: lstore        4
        22: lload_1
        23: lload         4
        25: lcmp
        26: iflt          33
#+end_src

#+begin_src asm
 ;; 0x8000000000000000
 ;; 0xB
  0x000000012facfdd4:   mov		x12, #0xb
  0x000000012facfdd8:   mul		x11, x11, x12       ;*lmul {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - MyMax::test@19 (line 23)
                                                            ; x11 is value
  0x000000012facfddc:   mov		x8, #-0x8000000000000000
  0x000000012facfde0:   cmp		x11, x8             ; x8 is max
  0x000000012facfde4:   b.le		#0x12facff78        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - MyMax::test@26 (line 24)
 ;; B5: #	out( B28 B6 ) <- in( B4 )  Freq: 0.999996
 ;; 0x1
  0x000000012facfde8:   mov		w2, #1
  0x000000012facfdec:   cmp		w10, #1
  ...
 ;; B29: #	out( B25 ) <- in( B4 )  Freq: 4.76836e-07
 ;; 0x8000000000000000
  0x000000012facff78:   mov		x14, #-0x8000000000000000
  0x000000012facff7c:   mov			w2, wzr
  0x000000012facff80:   mov		x0, x11
  0x000000012facff84:   b		#0x12facff04        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - MyMax::test@26 (line 24)
#+end_src
** disable macro expansion and implement cmov in backend
Trying to add backend implementation for MinL/MaxL.
Used code in here as base to decide how to approach it:
https://github.com/openjdk/jdk/compare/master...galderz:jdk:topic.intrinsify-max-min-long.0528?expand=1
Removed macro expansion for the nodes.

Java code:
#+begin_src java
     1	import java.util.Arrays;
     2
     3	public class Test
     4	{
     5	    static final int RANGE = 1024;
     6	    static final int ITER = 10_000;
     7
     8	    // Initializes data with increasing values,
     9	    // so max one of the branches is the one that is always taken
    10	    static void init(long[] data)
    11	    {
    12	        for (int i = 0; i < RANGE; i++)
    13	        {
    14	            data[i] = i + 1;
    15	        }
    16	    }
    17
    18	    static long test(long[] data)
    19	    {
    20	        long max = Long.MIN_VALUE;
    21	        for (int i = 0; i < RANGE; i++)
    22	        {
    23	            final long value = 11 * data[i];
    24	            final long tmp = Math.max(max, value);
    25	            max = tmp;
    26	        }
    27	        return max;
    28	    }
    29
    30	    public static void main(String[] args)
    31	    {
    32	        long[] data = new long[RANGE];
    33	        init(data);
    34
    35	        long result = 0;
    36	        for (long i = 0; i < ITER; i++)
    37	        {
    38	            result = test(data);
    39	        }
    40
    41	        // Validate
    42	        if (result == 11 * Arrays.stream(data).max().getAsLong())
    43	        {
    44	            System.out.println("Success");
    45	        }
    46	        else
    47	        {
    48	            throw new AssertionError("Failed");
    49	        }
    50	    }
    51	}
#+end_src

Before, ideal graph:
#+begin_src bash
 467  CMoveL  === _ 466 430 415  [[ 469 471 ]]  #long !orig=[414],[360],[132],377 !jvms: Test::test @ bci:25 (line 24)
 469  CmpL  === _ 467 413  [[ 470 ]]
 470  Bool  === _ 469  [[ 471 ]] [lt]
#+end_src

Before, assemly:
#+begin_src asm
  0x0000000110607dfc:   csel		x0, x10, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
#+end_src

After, ideal graph:
#+begin_src bash
 412  MaxL  === _ 414 413  [[ 360 ]]  !orig=132,377 !jvms: Test::test @ bci:25 (line 24)
#+end_src

After, assembly:
#+begin_src asm
  0x000000010e6d3db0:   csel		x0, x14, x12, gt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
#+end_src
