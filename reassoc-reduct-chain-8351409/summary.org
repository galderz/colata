#+STARTUP: overview
#+TODO: TODO IN-PROGRESS WAITING CANCELLED REASSIGNED DEFERRED DUPLICATE DONE

* Benefits of simple reassociation
Little chance of register pressure
Still gets considerable performance improvement.
Improvement of binary tree only on big enough unrolls (see 2, 4, 8, 16).
Can reassociate to non-power-of-2 chains.
* Next steps
- [ ] Disable double Min/Max
- [ ] Disable float Min/Max
- [ ] Understand why superword affected
* 30.1.26
** xeon min/max long benchmark
#+begin_src bash
Benchmark                                         (SIZE)  (seed)   Mode  Cnt      Base     Patch   Units   Diff
VectorReduction2.NoSuperword.longMaxBig             2048       0  thrpt    3   327.435   307.119  ops/ms    -6%
VectorReduction2.NoSuperword.longMaxDotProduct      2048       0  thrpt    3   406.023   606.387  ops/ms   +49%
VectorReduction2.NoSuperword.longMaxSimple          2048       0  thrpt    3   463.940   980.875  ops/ms  +111%
VectorReduction2.NoSuperword.longMinBig             2048       0  thrpt    3   324.709   330.053  ops/ms    +2%
VectorReduction2.NoSuperword.longMinDotProduct      2048       0  thrpt    3   414.097   605.047  ops/ms   +46%
VectorReduction2.NoSuperword.longMinSimple          2048       0  thrpt    3   461.952   825.363  ops/ms   +79%
VectorReduction2.WithSuperword.longMaxBig           2048       0  thrpt    3   547.252   557.059  ops/ms    +2%
VectorReduction2.WithSuperword.longMaxDotProduct    2048       0  thrpt    3   948.265   944.391  ops/ms     0%
VectorReduction2.WithSuperword.longMaxSimple        2048       0  thrpt    3  1290.747  1290.617  ops/ms     0%
VectorReduction2.WithSuperword.longMinBig           2048       0  thrpt    3   552.254   552.402  ops/ms     0%
VectorReduction2.WithSuperword.longMinDotProduct    2048       0  thrpt    3   955.592   955.159  ops/ms     0%
VectorReduction2.WithSuperword.longMinSimple        2048       0  thrpt    3  1290.704  1290.363  ops/ms     0%
#+end_src
** darwin min/max long benchmark
#+begin_src bash
Benchmark                                         (SIZE)  (seed)   Mode  Cnt      Base     Patch   Units   Diff
VectorReduction2.NoSuperword.longMaxBig             2048       0  thrpt    3   935.919  1085.515  ops/ms   +16%
VectorReduction2.NoSuperword.longMaxDotProduct      2048       0  thrpt    3  1049.671  2756.752  ops/ms  +163%
VectorReduction2.NoSuperword.longMaxSimple          2048       0  thrpt    3  1095.269  2588.862  ops/ms  +136%
VectorReduction2.NoSuperword.longMinBig             2048       0  thrpt    3   990.134  1147.871  ops/ms   +16%
VectorReduction2.NoSuperword.longMinDotProduct      2048       0  thrpt    3  1067.192  2711.534  ops/ms  +154%
VectorReduction2.NoSuperword.longMinSimple          2048       0  thrpt    3  1077.393  2690.817  ops/ms  +150%
VectorReduction2.WithSuperword.longMaxBig           2048       0  thrpt    3  1001.981  1149.861  ops/ms   +15%
VectorReduction2.WithSuperword.longMaxDotProduct    2048       0  thrpt    3  1079.197  2772.765  ops/ms  +157%
VectorReduction2.WithSuperword.longMaxSimple        2048       0  thrpt    3  1206.340  1208.723  ops/ms     0%
VectorReduction2.WithSuperword.longMinBig           2048       0  thrpt    3  1004.450  1150.072  ops/ms   +14%
VectorReduction2.WithSuperword.longMinDotProduct    2048       0  thrpt    3  1080.833  2875.314  ops/ms  +166%
VectorReduction2.WithSuperword.longMinSimple        2048       0  thrpt    3  1119.842  1209.392  ops/ms    +8%
#+end_src
* 29.1.26
** with superword short max big
*** xeon
**** jmh compile print
***** base
#+begin_src asm
 ;; B61: #	out( B61 B62 ) <- in( B60 B61 ) Loop( B61-B61 inner main of N464 strip mined) Freq: 3.88624e+11
  0x00007f8c274f9b00:   movswl		0x10(%rax, %r11, 2), %ecx
  0x00007f8c274f9b06:   movswl		0x1e(%rdx, %r11, 2), %r13d
                                                            ;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b0c:   movswl		0x10(%rsi, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b12:   movswl		0x10(%rdx, %r11, 2), %edi;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b18:   movswl		0x12(%rax, %r11, 2), %r8d
  0x00007f8c274f9b1e:   movl		%r9d, %ebx
  0x00007f8c274f9b21:   imull		%edi, %ebx
  0x00007f8c274f9b24:   addl		%edi, %r9d
  0x00007f8c274f9b27:   imull		%r9d, %ecx
  0x00007f8c274f9b2b:   addl		%ebx, %ecx
  0x00007f8c274f9b2d:   movswl		%cx, %ecx
  0x00007f8c274f9b30:   cmpl		%ecx, %r10d
  0x00007f8c274f9b33:   cmovll		%ecx, %r10d
  0x00007f8c274f9b37:   movswl		0x12(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b3d:   movswl		0x12(%rdx, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b43:   movswl		0x14(%rax, %r11, 2), %ebx
  0x00007f8c274f9b49:   movl		%ecx, %edi
  0x00007f8c274f9b4b:   imull		%r9d, %edi
  0x00007f8c274f9b4f:   addl		%r9d, %ecx
  0x00007f8c274f9b52:   imull		%ecx, %r8d
  0x00007f8c274f9b56:   addl		%edi, %r8d
  0x00007f8c274f9b59:   movswl		%r8w, %r8d
  0x00007f8c274f9b5d:   cmpl		%r8d, %r10d
  0x00007f8c274f9b60:   cmovll		%r8d, %r10d
  0x00007f8c274f9b64:   movswl		0x14(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b6a:   movswl		0x14(%rdx, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b70:   movswl		0x16(%rax, %r11, 2), %r8d
  0x00007f8c274f9b76:   movl		%ecx, %edi
  0x00007f8c274f9b78:   imull		%r9d, %edi          ;   {other}
  0x00007f8c274f9b7c:   addl		%r9d, %ecx
  0x00007f8c274f9b7f:   imull		%ecx, %ebx
  0x00007f8c274f9b82:   addl		%edi, %ebx
  0x00007f8c274f9b84:   movswl		%bx, %ecx
  0x00007f8c274f9b87:   cmpl		%ecx, %r10d
  0x00007f8c274f9b8a:   cmovll		%ecx, %r10d
  0x00007f8c274f9b8e:   movswl		0x16(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b94:   movswl		0x16(%rdx, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9b9a:   movswl		0x18(%rax, %r11, 2), %ebx
  0x00007f8c274f9ba0:   movl		%ecx, %edi
  0x00007f8c274f9ba2:   imull		%r9d, %edi
  0x00007f8c274f9ba6:   addl		%r9d, %ecx
  0x00007f8c274f9ba9:   imull		%ecx, %r8d
  0x00007f8c274f9bad:   addl		%edi, %r8d
  0x00007f8c274f9bb0:   movswl		%r8w, %r8d
  0x00007f8c274f9bb4:   cmpl		%r8d, %r10d
  0x00007f8c274f9bb7:   cmovll		%r8d, %r10d
  0x00007f8c274f9bbb:   movswl		0x18(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9bc1:   movswl		0x18(%rdx, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9bc7:   movswl		0x1a(%rax, %r11, 2), %r8d
  0x00007f8c274f9bcd:   movl		%ecx, %edi
  0x00007f8c274f9bcf:   imull		%r9d, %edi
  0x00007f8c274f9bd3:   addl		%r9d, %ecx
  0x00007f8c274f9bd6:   imull		%ecx, %ebx
  0x00007f8c274f9bd9:   addl		%edi, %ebx
  0x00007f8c274f9bdb:   movswl		%bx, %ecx
  0x00007f8c274f9bde:   cmpl		%ecx, %r10d
  0x00007f8c274f9be1:   cmovll		%ecx, %r10d
  0x00007f8c274f9be5:   movswl		0x1a(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9beb:   movswl		0x1a(%rdx, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9bf1:   movswl		0x1c(%rax, %r11, 2), %ebx
  0x00007f8c274f9bf7:   movl		%ecx, %edi
  0x00007f8c274f9bf9:   imull		%r9d, %edi
  0x00007f8c274f9bfd:   addl		%r9d, %ecx
  0x00007f8c274f9c00:   imull		%ecx, %r8d
  0x00007f8c274f9c04:   addl		%edi, %r8d
  0x00007f8c274f9c07:   movswl		%r8w, %r8d
  0x00007f8c274f9c0b:   cmpl		%r8d, %r10d
  0x00007f8c274f9c0e:   cmovll		%r8d, %r10d
  0x00007f8c274f9c12:   movswl		0x1c(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9c18:   movswl		0x1c(%rdx, %r11, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9c1e:   movswl		0x1e(%rax, %r11, 2), %edi
  0x00007f8c274f9c24:   movl		%ecx, %r8d
  0x00007f8c274f9c27:   imull		%r9d, %r8d
  0x00007f8c274f9c2b:   addl		%r9d, %ecx
  0x00007f8c274f9c2e:   imull		%ecx, %ebx
  0x00007f8c274f9c31:   addl		%r8d, %ebx
  0x00007f8c274f9c34:   movswl		%bx, %r9d
  0x00007f8c274f9c38:   cmpl		%r9d, %r10d
  0x00007f8c274f9c3b:   cmovll		%r9d, %r10d
  0x00007f8c274f9c3f:   movswl		0x1e(%rsi, %r11, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9c45:   leal		(%rcx, %r13), %r9d
  0x00007f8c274f9c49:   imull		%r9d, %edi
  0x00007f8c274f9c4d:   imull		%r13d, %ecx
  0x00007f8c274f9c51:   addl		%ecx, %edi
  0x00007f8c274f9c53:   movswl		%di, %r8d
  0x00007f8c274f9c57:   cmpl		%r8d, %r10d
  0x00007f8c274f9c5a:   cmovll		%r8d, %r10d         ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@61 (line 775)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9c5e:   addl		$8, %r11d           ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@66 (line 773)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007f8c274f9c62:   cmpl		%ebp, %r11d
  0x00007f8c274f9c65:   jl		0x7f8c274f9b00      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@11 (line 773)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)x
#+end_src
***** patch
#+begin_src asm
 ;; B43: #	out( B42 B44 ) <- in( B46 B42 ) Loop( B43-B42 inner main of N464 strip mined) Freq: 3.98201e+11
  0x00007fcb934f7c03:   movswl		0x1e(%r14, %r10, 2), %r8d
  0x00007fcb934f7c09:   movq		%rdx, %rax
  0x00007fcb934f7c0c:   movswl		0x12(%rdx, %r10, 2), %r11d
                                                            ;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
                                                            ;   {other}
  0x00007fcb934f7c12:   movl		%r11d, (%rsp)
  0x00007fcb934f7c16:   vmovq		%xmm5, %rsi
  0x00007fcb934f7c1b:   movswl		0x1e(%rsi, %r10, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c21:   movswl		0x1e(%rdx, %r10, 2), %r11d
                                                            ;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c27:   movswl		0x1c(%r14, %r10, 2), %edi
  0x00007fcb934f7c2d:   movl		%r9d, %ebx
  0x00007fcb934f7c30:   imull		%r11d, %ebx
  0x00007fcb934f7c34:   addl		%r11d, %r9d
  0x00007fcb934f7c37:   imull		%r9d, %r8d
  0x00007fcb934f7c3b:   addl		%ebx, %r8d
  0x00007fcb934f7c3e:   movswl		%r8w, %r11d
  0x00007fcb934f7c42:   vmovd		%r11d, %xmm7
  0x00007fcb934f7c47:   movswl		0x1c(%rsi, %r10, 2), %r11d
                                                            ;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c4d:   movswl		0x1c(%rdx, %r10, 2), %r8d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c53:   movswl		0x1a(%r14, %r10, 2), %ebx
  0x00007fcb934f7c59:   movl		%r11d, %r9d
  0x00007fcb934f7c5c:   imull		%r8d, %r9d
  0x00007fcb934f7c60:   addl		%r8d, %r11d
  0x00007fcb934f7c63:   imull		%r11d, %edi
  0x00007fcb934f7c67:   addl		%r9d, %edi
  0x00007fcb934f7c6a:   movswl		%di, %r8d
  0x00007fcb934f7c6e:   movswl		0x1a(%rsi, %r10, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c74:   movswl		0x1a(%rdx, %r10, 2), %r11d
                                                            ;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c7a:   movswl		0x18(%r14, %r10, 2), %r9d
  0x00007fcb934f7c80:   movl		%ecx, %edx
  0x00007fcb934f7c82:   imull		%r11d, %edx
  0x00007fcb934f7c86:   addl		%r11d, %ecx
  0x00007fcb934f7c89:   imull		%ecx, %ebx
  0x00007fcb934f7c8c:   addl		%edx, %ebx
  0x00007fcb934f7c8e:   movswl		%bx, %r11d
  0x00007fcb934f7c92:   movswl		0x18(%rsi, %r10, 2), %ebx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c98:   movswl		0x18(%rax, %r10, 2), %ecx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7c9e:   movswl		0x16(%r14, %r10, 2), %edx
  0x00007fcb934f7ca4:   movl		%ebx, %edi
  0x00007fcb934f7ca6:   imull		%ecx, %edi
  0x00007fcb934f7ca9:   addl		%ecx, %ebx
  0x00007fcb934f7cab:   imull		%ebx, %r9d
  0x00007fcb934f7caf:   addl		%edi, %r9d
  0x00007fcb934f7cb2:   movswl		%r9w, %ecx
  0x00007fcb934f7cb6:   movswl		0x16(%rsi, %r10, 2), %ebx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7cbc:   movswl		0x16(%rax, %r10, 2), %esi;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7cc2:   movswl		0x14(%r14, %r10, 2), %r9d
  0x00007fcb934f7cc8:   movl		%ebx, %edi
  0x00007fcb934f7cca:   imull		%esi, %edi
  0x00007fcb934f7ccd:   addl		%esi, %ebx
  0x00007fcb934f7ccf:   imull		%ebx, %edx
  0x00007fcb934f7cd2:   addl		%edi, %edx
  0x00007fcb934f7cd4:   movswl		%dx, %edi
  0x00007fcb934f7cd7:   vmovq		%xmm5, %rbx
  0x00007fcb934f7cdc:   movswl		0x14(%rbx, %r10, 2), %ebx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7ce2:   movswl		0x14(%rax, %r10, 2), %esi;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7ce8:   movswl		0x10(%r14, %r10, 2), %r13d
  0x00007fcb934f7cee:   movl		%ebx, %edx
  0x00007fcb934f7cf0:   imull		%esi, %edx
  0x00007fcb934f7cf3:   addl		%esi, %ebx
  0x00007fcb934f7cf5:   imull		%ebx, %r9d
  0x00007fcb934f7cf9:   addl		%edx, %r9d
  0x00007fcb934f7cfc:   movswl		%r9w, %edx
  0x00007fcb934f7d00:   vmovq		%xmm5, %r9
  0x00007fcb934f7d05:   movswl		0x10(%r9, %r10, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7d0b:   movswl		0x10(%rax, %r10, 2), %ebx;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@38 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
                                                            ;   {other}
  0x00007fcb934f7d11:   movswl		0x12(%r14, %r10, 2), %ebp
  0x00007fcb934f7d17:   movl		%r9d, %esi
  0x00007fcb934f7d1a:   imull		%ebx, %esi
  0x00007fcb934f7d1d:   addl		%ebx, %r9d
  0x00007fcb934f7d20:   imull		%r9d, %r13d
  0x00007fcb934f7d24:   addl		%esi, %r13d
  0x00007fcb934f7d27:   movswl		%r13w, %ebx
  0x00007fcb934f7d2b:   vmovq		%xmm5, %r9
  0x00007fcb934f7d30:   movswl		0x12(%r9, %r10, 2), %r9d;*saload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@25 (line 774)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7d36:   movl		%r9d, %esi
  0x00007fcb934f7d39:   addl		(%rsp), %esi
  0x00007fcb934f7d3c:   imull		%esi, %ebp
  0x00007fcb934f7d3f:   imull		(%rsp), %r9d
  0x00007fcb934f7d44:   addl		%r9d, %ebp
  0x00007fcb934f7d47:   movswl		%bp, %esi
  0x00007fcb934f7d4a:   cmpl		%esi, %ebx
  0x00007fcb934f7d4c:   cmovll		%esi, %ebx
  0x00007fcb934f7d4f:   cmpl		%ebx, %edx
  0x00007fcb934f7d51:   cmovll		%ebx, %edx
  0x00007fcb934f7d54:   cmpl		%edx, %edi
  0x00007fcb934f7d56:   cmovll		%edx, %edi
  0x00007fcb934f7d59:   cmpl		%edi, %ecx
  0x00007fcb934f7d5b:   cmovll		%edi, %ecx
  0x00007fcb934f7d5e:   cmpl		%ecx, %r11d
  0x00007fcb934f7d61:   cmovll		%ecx, %r11d
  0x00007fcb934f7d65:   cmpl		%r11d, %r8d
  0x00007fcb934f7d68:   cmovll		%r11d, %r8d
  0x00007fcb934f7d6c:   vmovd		%xmm7, %r11d
  0x00007fcb934f7d71:   cmpl		%r8d, %r11d
  0x00007fcb934f7d74:   movl		%r11d, %r9d
  0x00007fcb934f7d77:   cmovll		%r8d, %r9d
  0x00007fcb934f7d7b:   vmovd		%xmm6, %r11d
  0x00007fcb934f7d80:   cmpl		%r9d, %r11d
  0x00007fcb934f7d83:   cmovll		%r9d, %r11d         ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@61 (line 775)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7d87:   vmovd		%r11d, %xmm6
  0x00007fcb934f7d8c:   addl		$8, %r10d           ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@66 (line 773)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
  0x00007fcb934f7d90:   cmpl		0x54(%rsp), %r10d
  0x00007fcb934f7d95:   jl		0x7fcb934f7c00      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::shortMaxBig@11 (line 773)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_WithSuperword_shortMaxBig_jmhTest::shortMaxBig_thrpt_jmhStub@17 (line 121)
#+end_src
** no superword char xor big
*** darwin
**** jmh reproduce
***** base
#+begin_src bash
$ TEST="micro:org.openjdk.bench.vm.compiler.VectorReduction2.NoSuperword.charXorBig" MICRO="OPTIONS=-bm thrpt -tu ms;FORK=1" make test
Benchmark                                (SIZE)  (seed)   Mode  Cnt     Score      Error   Units
VectorReduction2.NoSuperword.charXorBig    2048       0  thrpt    3  1383.642 ± 1959.618  ops/ms
#+end_src
***** patch
#+begin_src bash
TEST="micro:org.openjdk.bench.vm.compiler.VectorReduction2.NoSuperword.charXorBig" MICRO="OPTIONS=-jvmArgsAppend -XX:+UseNewCode -bm thrpt -tu ms;FORK=1" make test
Benchmark                                (SIZE)  (seed)   Mode  Cnt     Score      Error   Units
VectorReduction2.NoSuperword.charXorBig    2048       0  thrpt    3  1346.944 ± 3088.657  ops/ms
#+end_src
**** reproducer performance
***** base
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestCharXorBig BASE=true make run
cd /Users/g/src/jdk-reassoc-reduct-chain
git log -1 --pretty=format:'%D%n%h %s'
HEAD -> topic.reassoc-reduct-chain.post-draft, origin/topic.reassoc-reduct-chain.post-draft
2afed80ee24 Protect behind UseNewCode
rm -f *.log
/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,TestCharXorBig::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 -XX:-UseSuperWord /Users/g/src/colata/reassoc-reduct-chain-8351409/TestCharXorBig.java
[0.001s][info][os] Use of CLOCK_MONOTONIC is supported
[0.001s][info][os] Use of pthread_condattr_setclock is not supported
[0.001s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with the default clock
[0.001s][info][os] SafePoint Polling address, bad (protected) page:0x0000000102e78000, good (unprotected) page:0x0000000102e7c000
[0.003s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib
[0.004s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib was successful
CompileCommand: compileonly TestCharXorBig.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.030s][info][os] Initialized VM with process ID 70383
[0.038s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib
[0.038s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib was successful
[0.046s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib
[0.046s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib was successful
Validate
Warmup
Running
Throughput: 309 ops/ms
Throughput: 308 ops/ms
Throughput: 308 ops/ms
Throughput: 307 ops/ms
Throughput: 305 ops/ms
Throughput: 308 ops/ms
Throughput: 308 ops/ms
Throughput: 308 ops/ms
Throughput: 307 ops/ms
Throughput: 307 ops/ms
Validate
#+end_src
***** patch
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestCharXorBig make run
cd /Users/g/src/jdk-reassoc-reduct-chain
git log -1 --pretty=format:'%D%n%h %s'
HEAD -> topic.reassoc-reduct-chain.post-draft, origin/topic.reassoc-reduct-chain.post-draft
2afed80ee24 Protect behind UseNewCode
rm -f *.log
/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,TestCharXorBig::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 -XX:+UseNewCode -XX:-UseSuperWord /Users/g/src/colata/reassoc-reduct-chain-8351409/TestCharXorBig.java
[0.001s][info][os] Use of CLOCK_MONOTONIC is supported
[0.001s][info][os] Use of pthread_condattr_setclock is not supported
[0.001s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with the default clock
[0.001s][info][os] SafePoint Polling address, bad (protected) page:0x0000000102a90000, good (unprotected) page:0x0000000102a94000
[0.003s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib
[0.004s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib was successful
CompileCommand: compileonly TestCharXorBig.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.030s][info][os] Initialized VM with process ID 70646
[0.037s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib
[0.038s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib was successful
[0.045s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib
[0.045s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib was successful
Validate
Warmup
Running
Throughput: 296 ops/ms
Throughput: 298 ops/ms
Throughput: 298 ops/ms
Throughput: 299 ops/ms
Throughput: 297 ops/ms
Throughput: 299 ops/ms
Throughput: 298 ops/ms
Throughput: 299 ops/ms
Throughput: 298 ops/ms
Throughput: 297 ops/ms
Validate
#+end_src
*** xeon
**** jmh perfnorm
***** base
#+begin_src bash
VectorReduction2.NoSuperword.charXorBig                           2048       0  thrpt    3    311.054 ±   0.787     ops/ms
VectorReduction2.NoSuperword.charXorBig:CPI                       2048       0  thrpt           0.292            clks/insn
VectorReduction2.NoSuperword.charXorBig:IPC                       2048       0  thrpt           3.429            insns/clk
VectorReduction2.NoSuperword.charXorBig:branch-misses             2048       0  thrpt           1.118                 #/op
VectorReduction2.NoSuperword.charXorBig:cycles                    2048       0  thrpt        6107.061                 #/op
VectorReduction2.NoSuperword.charXorBig:instructions              2048       0  thrpt       20940.130                 #/op
#+end_src
***** patch
#+begin_src bash
VectorReduction2.NoSuperword.charXorBig                           2048       0  thrpt    3    201.609 ±  1.284     ops/ms
VectorReduction2.NoSuperword.charXorBig:CPI                       2048       0  thrpt           0.356           clks/insn
VectorReduction2.NoSuperword.charXorBig:IPC                       2048       0  thrpt           2.810           insns/clk
VectorReduction2.NoSuperword.charXorBig:branch-misses             2048       0  thrpt           1.225                #/op
VectorReduction2.NoSuperword.charXorBig:cycles                    2048       0  thrpt        9438.393                #/op
VectorReduction2.NoSuperword.charXorBig:instructions              2048       0  thrpt       26523.941                #/op
#+end_src
**** jmh reproduce asm analysis
In base, %r13 is an array base that seems stable across the loop. E.g.
```
  0x00007fbb334f57e6:   movzwl		0x26(%r13, %rdx, 2), %r10d
```

but on patch you see that the array bases are kept in XMM registers,
and before each `movzwl` you see a `vmovq`:
```
  0x00007f74774faecb:   vmovq		%xmm7, %r11
  0x00007f74774faed0:   movzwl		0x10(%r11, %rbx, 2), %r11d
```

Another thing I observe is that it reloads the same base repeteadly.
Could this be signs of register pressure building?

```
  0x00007f74774faecb:   vmovq		%xmm7, %r11
  0x00007f74774faf1e:   vmovq		%xmm7, %r11
  0x00007f74774faf57:   vmovq		%xmm7, %r11
```

Base:
#+begin_src asm
  0x00007fbb334f57e6:   movzwl		0x26(%r13, %rdx, 2), %r10d
  0x00007fbb334f57ec:   movl		%r10d, 4(%rsp)
  0x00007fbb334f57f1:   movzwl		0x2e(%r14, %rdx, 2), %r10d
  0x00007fbb334f57f7:   movzwl		0x2e(%r13, %rdx, 2), %r9d
  0x00007fbb334f57fd:   leal		(%r11, %r10), %r8d
  0x00007fbb334f5801:   imull		%r8d, %r9d
  0x00007fbb334f5805:   imull		%r10d, %r11d
  0x00007fbb334f5809:   addl		%r9d, %r11d
  0x00007fbb334f580c:   movzwl		%r11w, %r10d
  0x00007fbb334f5810:   vmovd		%r10d, %xmm5
  0x00007fbb334f5815:   movzwl		0x2c(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
#+end_src
Patch:
#+begin_src asm
  0x00007f74774faecb:   vmovq		%xmm7, %r11
  0x00007f74774faed0:   movzwl		0x10(%r11, %rbx, 2), %r11d
  0x00007f74774faed6:   movl		%r11d, (%rsp)
  0x00007f74774faeda:   vmovq		%xmm5, %r11
  0x00007f74774faedf:   movzwl		0x2e(%r11, %rbx, 2), %r8d
  0x00007f74774faee5:   vmovq		%xmm7, %r11
  0x00007f74774faeea:   movzwl		0x2e(%r11, %rbx, 2), %r11d
  0x00007f74774faef0:   leal		(%r10, %r8), %ecx
  0x00007f74774faef4:   imull		%ecx, %r11d
  0x00007f74774faef8:   imull		%r8d, %r10d
  0x00007f74774faefc:   addl		%r11d, %r10d
  0x00007f74774faeff:   movzwl		%r10w, %r10d
  0x00007f74774faf03:   vmovd		%r10d, %xmm9
  0x00007f74774faf08:   vmovq		%xmm5, %r10
  0x00007f74774faf0d:   movzwl		0x2c(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
                                                            ;   {other}
#+end_src
**** jmh reproduce asm
***** base
#+begin_src asm
 ;; B63: #	out( B63 B64 ) <- in( B62 B63 ) Loop( B63-B63 inner main of N566 strip mined) Freq: 4.48799e+11
  0x00007fbb334f57e0:   movzwl		0x2e(%rbx, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f57e6:   movzwl		0x26(%r13, %rdx, 2), %r10d
  0x00007fbb334f57ec:   movl		%r10d, 4(%rsp)
  0x00007fbb334f57f1:   movzwl		0x2e(%r14, %rdx, 2), %r10d
  0x00007fbb334f57f7:   movzwl		0x2e(%r13, %rdx, 2), %r9d
  0x00007fbb334f57fd:   leal		(%r11, %r10), %r8d
  0x00007fbb334f5801:   imull		%r8d, %r9d
  0x00007fbb334f5805:   imull		%r10d, %r11d
  0x00007fbb334f5809:   addl		%r9d, %r11d
  0x00007fbb334f580c:   movzwl		%r11w, %r10d
  0x00007fbb334f5810:   vmovd		%r10d, %xmm5
  0x00007fbb334f5815:   movzwl		0x2c(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f581b:   movzwl		0x2c(%rbx, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5821:   movzwl		0x2c(%r13, %rdx, 2), %r9d
  0x00007fbb334f5827:   leal		(%r11, %r10), %r8d
  0x00007fbb334f582b:   imull		%r8d, %r9d
  0x00007fbb334f582f:   imull		%r10d, %r11d        ;   {other}
  0x00007fbb334f5833:   addl		%r9d, %r11d
  0x00007fbb334f5836:   movzwl		%r11w, %r10d
  0x00007fbb334f583a:   vmovd		%r10d, %xmm7
  0x00007fbb334f583f:   movzwl		0x2a(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5845:   movzwl		0x2a(%rbx, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f584b:   movzwl		0x2a(%r13, %rdx, 2), %r9d
  0x00007fbb334f5851:   leal		(%r11, %r10), %r8d
  0x00007fbb334f5855:   imull		%r9d, %r8d
  0x00007fbb334f5859:   imull		%r10d, %r11d
  0x00007fbb334f585d:   addl		%r8d, %r11d
  0x00007fbb334f5860:   movzwl		%r11w, %r10d
  0x00007fbb334f5864:   vmovd		%r10d, %xmm6
  0x00007fbb334f5869:   movzwl		0x28(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f586f:   movzwl		0x28(%rbx, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5875:   movzwl		0x28(%r13, %rdx, 2), %r9d
  0x00007fbb334f587b:   leal		(%r11, %r10), %r8d
  0x00007fbb334f587f:   imull		%r9d, %r8d
  0x00007fbb334f5883:   imull		%r10d, %r11d
  0x00007fbb334f5887:   addl		%r8d, %r11d
  0x00007fbb334f588a:   movzwl		%r11w, %r10d
  0x00007fbb334f588e:   vmovd		%r10d, %xmm9
  0x00007fbb334f5893:   movzwl		0x24(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5899:   movzwl		0x24(%rbx, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f589f:   movzwl		0x24(%r13, %rdx, 2), %r9d
  0x00007fbb334f58a5:   leal		(%r11, %r10), %r8d
  0x00007fbb334f58a9:   imull		%r9d, %r8d
  0x00007fbb334f58ad:   imull		%r10d, %r11d
  0x00007fbb334f58b1:   addl		%r8d, %r11d
  0x00007fbb334f58b4:   movzwl		%r11w, %r10d
  0x00007fbb334f58b8:   vmovd		%r10d, %xmm8
  0x00007fbb334f58bd:   movzwl		0x22(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f58c3:   movzwl		0x22(%rbx, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f58c9:   movzwl		0x22(%r13, %rdx, 2), %r9d
  0x00007fbb334f58cf:   leal		(%r11, %r10), %r8d
  0x00007fbb334f58d3:   imull		%r9d, %r8d
  0x00007fbb334f58d7:   imull		%r10d, %r11d
  0x00007fbb334f58db:   addl		%r8d, %r11d
  0x00007fbb334f58de:   movzwl		%r11w, %esi
  0x00007fbb334f58e2:   movzwl		0x20(%r14, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f58e8:   movzwl		0x20(%rbx, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f58ee:   movzwl		0x20(%r13, %rdx, 2), %r9d
  0x00007fbb334f58f4:   leal		(%r10, %r11), %r8d
  0x00007fbb334f58f8:   imull		%r9d, %r8d
  0x00007fbb334f58fc:   imull		%r11d, %r10d
  0x00007fbb334f5900:   addl		%r8d, %r10d
  0x00007fbb334f5903:   movzwl		%r10w, %ebp
  0x00007fbb334f5907:   movzwl		0x18(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f590d:   movzwl		0x18(%rbx, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5913:   movzwl		0x18(%r13, %rdx, 2), %r9d
  0x00007fbb334f5919:   leal		(%r11, %r10), %r8d
  0x00007fbb334f591d:   imull		%r9d, %r8d
  0x00007fbb334f5921:   imull		%r10d, %r11d
  0x00007fbb334f5925:   addl		%r8d, %r11d
  0x00007fbb334f5928:   movzwl		%r11w, %eax
  0x00007fbb334f592c:   movzwl		0x14(%r14, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
                                                            ;   {other}
  0x00007fbb334f5932:   movzwl		0x14(%rbx, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5938:   movzwl		0x14(%r13, %rdx, 2), %r11d
  0x00007fbb334f593e:   leal		(%r10, %r8), %ecx
  0x00007fbb334f5942:   imull		%r11d, %ecx
  0x00007fbb334f5946:   imull		%r8d, %r10d
  0x00007fbb334f594a:   addl		%ecx, %r10d
  0x00007fbb334f594d:   movzwl		%r10w, %r10d
  0x00007fbb334f5951:   movzwl		0x12(%r14, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5957:   movzwl		0x12(%rbx, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f595d:   movzwl		0x12(%r13, %rdx, 2), %ecx
  0x00007fbb334f5963:   leal		(%r8, %r11), %r9d
  0x00007fbb334f5967:   imull		%ecx, %r9d
  0x00007fbb334f596b:   imull		%r11d, %r8d
  0x00007fbb334f596f:   addl		%r9d, %r8d
  0x00007fbb334f5972:   movzwl		%r8w, %r8d
  0x00007fbb334f5976:   movzwl		0x10(%r14, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f597c:   movzwl		0x10(%rbx, %rdx, 2), %ecx;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5981:   movzwl		0x10(%r13, %rdx, 2), %r9d
  0x00007fbb334f5987:   leal		(%r11, %rcx), %edi
  0x00007fbb334f598b:   imull		%r9d, %edi
  0x00007fbb334f598f:   imull		%ecx, %r11d
  0x00007fbb334f5993:   addl		%edi, %r11d
  0x00007fbb334f5996:   movzwl		%r11w, %r9d
  0x00007fbb334f599a:   xorl		0x54(%rsp), %r9d
  0x00007fbb334f599f:   xorl		%r9d, %r8d
  0x00007fbb334f59a2:   xorl		%r8d, %r10d
  0x00007fbb334f59a5:   movzwl		0x16(%r14, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f59ab:   movzwl		0x16(%rbx, %rdx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f59b1:   movzwl		0x16(%r13, %rdx, 2), %ecx
  0x00007fbb334f59b7:   leal		(%r8, %r11), %r9d
  0x00007fbb334f59bb:   imull		%ecx, %r9d
  0x00007fbb334f59bf:   imull		%r11d, %r8d
  0x00007fbb334f59c3:   addl		%r9d, %r8d
  0x00007fbb334f59c6:   movzwl		%r8w, %r8d
  0x00007fbb334f59ca:   xorl		%r8d, %r10d
  0x00007fbb334f59cd:   xorl		%r10d, %eax
  0x00007fbb334f59d0:   movzwl		0x1a(%r14, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f59d6:   movzwl		0x1a(%rbx, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f59dc:   movzwl		0x1a(%r13, %rdx, 2), %r11d
  0x00007fbb334f59e2:   leal		(%r10, %r8), %ecx
  0x00007fbb334f59e6:   imull		%r11d, %ecx
  0x00007fbb334f59ea:   imull		%r8d, %r10d
  0x00007fbb334f59ee:   addl		%ecx, %r10d
  0x00007fbb334f59f1:   movzwl		%r10w, %r11d
  0x00007fbb334f59f5:   xorl		%r11d, %eax
  0x00007fbb334f59f8:   movzwl		0x1c(%r14, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f59fe:   movzwl		0x1c(%rbx, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5a04:   movzwl		0x1c(%r13, %rdx, 2), %r11d
  0x00007fbb334f5a0a:   leal		(%r10, %r8), %ecx
  0x00007fbb334f5a0e:   imull		%r11d, %ecx
  0x00007fbb334f5a12:   imull		%r8d, %r10d
  0x00007fbb334f5a16:   addl		%ecx, %r10d
  0x00007fbb334f5a19:   movzwl		%r10w, %r10d
  0x00007fbb334f5a1d:   xorl		%r10d, %eax
  0x00007fbb334f5a20:   movzwl		0x1e(%r14, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5a26:   movzwl		0x1e(%rbx, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5a2c:   movzwl		0x1e(%r13, %rdx, 2), %r11d
                                                            ;   {other}
  0x00007fbb334f5a32:   leal		(%r10, %r8), %ecx
  0x00007fbb334f5a36:   imull		%r11d, %ecx
  0x00007fbb334f5a3a:   imull		%r8d, %r10d
  0x00007fbb334f5a3e:   addl		%ecx, %r10d
  0x00007fbb334f5a41:   movzwl		%r10w, %r11d
  0x00007fbb334f5a45:   xorl		%r11d, %eax
  0x00007fbb334f5a48:   xorl		%eax, %ebp
  0x00007fbb334f5a4a:   xorl		%ebp, %esi
  0x00007fbb334f5a4c:   vmovd		%xmm8, %r11d
  0x00007fbb334f5a51:   xorl		%esi, %r11d
  0x00007fbb334f5a54:   movzwl		0x26(%r14, %rdx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5a5a:   movzwl		0x26(%rbx, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5a60:   movl		%r10d, %r9d
  0x00007fbb334f5a63:   imull		%r8d, %r9d
  0x00007fbb334f5a67:   addl		%r8d, %r10d
  0x00007fbb334f5a6a:   imull		4(%rsp), %r10d
  0x00007fbb334f5a70:   addl		%r10d, %r9d
  0x00007fbb334f5a73:   movzwl		%r9w, %r8d
  0x00007fbb334f5a77:   xorl		%r8d, %r11d
  0x00007fbb334f5a7a:   vmovd		%xmm9, %r10d
  0x00007fbb334f5a7f:   xorl		%r11d, %r10d
  0x00007fbb334f5a82:   vmovd		%xmm6, %r8d
  0x00007fbb334f5a87:   xorl		%r10d, %r8d
  0x00007fbb334f5a8a:   vmovd		%xmm7, %r10d
  0x00007fbb334f5a8f:   xorl		%r8d, %r10d
  0x00007fbb334f5a92:   vmovd		%xmm5, %r11d
  0x00007fbb334f5a97:   xorl		%r10d, %r11d        ;*ixor {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@59 (line 522)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5a9a:   movl		%r11d, 0x54(%rsp)
  0x00007fbb334f5a9f:   addl		$0x10, %edx         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@62 (line 520)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007fbb334f5aa2:   cmpl		(%rsp), %edx
  0x00007fbb334f5aa5:   jl		0x7fbb334f57e0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@9 (line 520)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
#+end_src
***** patch
#+begin_src asm
 ;; B63: #	out( B63 B64 ) <- in( B62 B63 ) Loop( B63-B63 inner main of N566 strip mined) Freq: 4.25064e+11
  0x00007f74774faec0:   vmovq		%xmm6, %r10
  0x00007f74774faec5:   movzwl		0x2e(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faecb:   vmovq		%xmm7, %r11
  0x00007f74774faed0:   movzwl		0x10(%r11, %rbx, 2), %r11d
  0x00007f74774faed6:   movl		%r11d, (%rsp)
  0x00007f74774faeda:   vmovq		%xmm5, %r11
  0x00007f74774faedf:   movzwl		0x2e(%r11, %rbx, 2), %r8d
  0x00007f74774faee5:   vmovq		%xmm7, %r11
  0x00007f74774faeea:   movzwl		0x2e(%r11, %rbx, 2), %r11d
  0x00007f74774faef0:   leal		(%r10, %r8), %ecx
  0x00007f74774faef4:   imull		%ecx, %r11d
  0x00007f74774faef8:   imull		%r8d, %r10d
  0x00007f74774faefc:   addl		%r11d, %r10d
  0x00007f74774faeff:   movzwl		%r10w, %r10d
  0x00007f74774faf03:   vmovd		%r10d, %xmm9
  0x00007f74774faf08:   vmovq		%xmm5, %r10
  0x00007f74774faf0d:   movzwl		0x2c(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
                                                            ;   {other}
  0x00007f74774faf13:   vmovq		%xmm6, %r11
  0x00007f74774faf18:   movzwl		0x2c(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faf1e:   vmovq		%xmm7, %r11
  0x00007f74774faf23:   movzwl		0x2c(%r11, %rbx, 2), %r11d
  0x00007f74774faf29:   leal		(%r10, %r8), %ecx
  0x00007f74774faf2d:   imull		%ecx, %r11d
  0x00007f74774faf31:   imull		%r8d, %r10d
  0x00007f74774faf35:   addl		%r11d, %r10d
  0x00007f74774faf38:   movzwl		%r10w, %r10d
  0x00007f74774faf3c:   vmovd		%r10d, %xmm11
  0x00007f74774faf41:   vmovq		%xmm5, %r10
  0x00007f74774faf46:   movzwl		0x2a(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faf4c:   vmovq		%xmm6, %r11
  0x00007f74774faf51:   movzwl		0x2a(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faf57:   vmovq		%xmm7, %r11
  0x00007f74774faf5c:   movzwl		0x2a(%r11, %rbx, 2), %r11d
  0x00007f74774faf62:   leal		(%r10, %r8), %ecx
  0x00007f74774faf66:   imull		%r11d, %ecx
  0x00007f74774faf6a:   imull		%r8d, %r10d
  0x00007f74774faf6e:   addl		%ecx, %r10d
  0x00007f74774faf71:   movzwl		%r10w, %r10d
  0x00007f74774faf75:   vmovd		%r10d, %xmm10
  0x00007f74774faf7a:   vmovq		%xmm5, %r10
  0x00007f74774faf7f:   movzwl		0x28(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faf85:   vmovq		%xmm6, %r11
  0x00007f74774faf8a:   movzwl		0x28(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faf90:   vmovq		%xmm7, %r11
  0x00007f74774faf95:   movzwl		0x28(%r11, %rbx, 2), %r11d
  0x00007f74774faf9b:   leal		(%r10, %r8), %ecx
  0x00007f74774faf9f:   imull		%r11d, %ecx
  0x00007f74774fafa3:   imull		%r8d, %r10d
  0x00007f74774fafa7:   addl		%ecx, %r10d
  0x00007f74774fafaa:   movzwl		%r10w, %r10d
  0x00007f74774fafae:   vmovd		%r10d, %xmm13
  0x00007f74774fafb3:   vmovq		%xmm5, %r10
  0x00007f74774fafb8:   movzwl		0x26(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fafbe:   vmovq		%xmm6, %r11
  0x00007f74774fafc3:   movzwl		0x26(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fafc9:   vmovq		%xmm7, %r11
  0x00007f74774fafce:   movzwl		0x26(%r11, %rbx, 2), %r11d
  0x00007f74774fafd4:   leal		(%r10, %r8), %ecx
  0x00007f74774fafd8:   imull		%r11d, %ecx
  0x00007f74774fafdc:   imull		%r8d, %r10d
  0x00007f74774fafe0:   addl		%ecx, %r10d
  0x00007f74774fafe3:   movzwl		%r10w, %r10d
  0x00007f74774fafe7:   vmovd		%r10d, %xmm12
  0x00007f74774fafec:   vmovq		%xmm5, %r10
  0x00007f74774faff1:   movzwl		0x24(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774faff7:   vmovq		%xmm6, %r11
  0x00007f74774faffc:   movzwl		0x24(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb002:   vmovq		%xmm7, %r11
  0x00007f74774fb007:   movzwl		0x24(%r11, %rbx, 2), %r11d
  0x00007f74774fb00d:   leal		(%r10, %r8), %ecx   ;   {other}
  0x00007f74774fb011:   imull		%r11d, %ecx
  0x00007f74774fb015:   imull		%r8d, %r10d
  0x00007f74774fb019:   addl		%ecx, %r10d
  0x00007f74774fb01c:   movzwl		%r10w, %r10d
  0x00007f74774fb020:   vmovd		%r10d, %xmm15
  0x00007f74774fb025:   vmovq		%xmm5, %r10
  0x00007f74774fb02a:   movzwl		0x22(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb030:   vmovq		%xmm6, %r11
  0x00007f74774fb035:   movzwl		0x22(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb03b:   vmovq		%xmm7, %r11
  0x00007f74774fb040:   movzwl		0x22(%r11, %rbx, 2), %r11d
  0x00007f74774fb046:   leal		(%r10, %r8), %ecx
  0x00007f74774fb04a:   imull		%r11d, %ecx
  0x00007f74774fb04e:   imull		%r8d, %r10d
  0x00007f74774fb052:   addl		%ecx, %r10d
  0x00007f74774fb055:   movzwl		%r10w, %edi
  0x00007f74774fb059:   vmovq		%xmm5, %r10
  0x00007f74774fb05e:   movzwl		0x20(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb064:   vmovq		%xmm6, %r11
  0x00007f74774fb069:   movzwl		0x20(%r11, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb06f:   vmovq		%xmm7, %r8
  0x00007f74774fb074:   movzwl		0x20(%r8, %rbx, 2), %r9d
  0x00007f74774fb07a:   leal		(%r10, %r11), %r8d
  0x00007f74774fb07e:   imull		%r9d, %r8d
  0x00007f74774fb082:   imull		%r11d, %r10d
  0x00007f74774fb086:   addl		%r8d, %r10d
  0x00007f74774fb089:   movzwl		%r10w, %edx
  0x00007f74774fb08d:   vmovq		%xmm5, %r10
  0x00007f74774fb092:   movzwl		0x1e(%r10, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb098:   vmovq		%xmm6, %r10
  0x00007f74774fb09d:   movzwl		0x1e(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb0a3:   vmovq		%xmm7, %r8
  0x00007f74774fb0a8:   movzwl		0x1e(%r8, %rbx, 2), %r9d
  0x00007f74774fb0ae:   leal		(%r11, %r10), %r8d
  0x00007f74774fb0b2:   imull		%r9d, %r8d
  0x00007f74774fb0b6:   imull		%r10d, %r11d
  0x00007f74774fb0ba:   addl		%r8d, %r11d
  0x00007f74774fb0bd:   movzwl		%r11w, %eax
  0x00007f74774fb0c1:   vmovq		%xmm5, %r10
  0x00007f74774fb0c6:   movzwl		0x1c(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb0cc:   vmovq		%xmm6, %r11
  0x00007f74774fb0d1:   movzwl		0x1c(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb0d7:   vmovq		%xmm7, %r11
  0x00007f74774fb0dc:   movzwl		0x1c(%r11, %rbx, 2), %r11d
  0x00007f74774fb0e2:   leal		(%r10, %r8), %ecx
  0x00007f74774fb0e6:   imull		%r11d, %ecx
  0x00007f74774fb0ea:   imull		%r8d, %r10d
  0x00007f74774fb0ee:   addl		%ecx, %r10d
  0x00007f74774fb0f1:   movzwl		%r10w, %r8d
  0x00007f74774fb0f5:   vmovq		%xmm5, %r10
  0x00007f74774fb0fa:   movzwl		0x1a(%r10, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb100:   vmovq		%xmm6, %r10
  0x00007f74774fb105:   movzwl		0x1a(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb10b:   vmovq		%xmm7, %r9          ;   {other}
  0x00007f74774fb110:   movzwl		0x1a(%r9, %rbx, 2), %ecx
  0x00007f74774fb116:   leal		(%r11, %r10), %r9d
  0x00007f74774fb11a:   imull		%ecx, %r9d
  0x00007f74774fb11e:   imull		%r10d, %r11d
  0x00007f74774fb122:   addl		%r9d, %r11d
  0x00007f74774fb125:   movzwl		%r11w, %ebp
  0x00007f74774fb129:   vmovq		%xmm5, %r10
  0x00007f74774fb12e:   movzwl		0x18(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb134:   vmovq		%xmm6, %r11
  0x00007f74774fb139:   movzwl		0x18(%r11, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb13f:   vmovq		%xmm7, %r9
  0x00007f74774fb144:   movzwl		0x18(%r9, %rbx, 2), %r9d
  0x00007f74774fb14a:   leal		(%r10, %r11), %ecx
  0x00007f74774fb14e:   imull		%r9d, %ecx
  0x00007f74774fb152:   imull		%r11d, %r10d
  0x00007f74774fb156:   addl		%ecx, %r10d
  0x00007f74774fb159:   movzwl		%r10w, %esi
  0x00007f74774fb15d:   vmovq		%xmm5, %r10
  0x00007f74774fb162:   movzwl		0x16(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb168:   vmovq		%xmm6, %r11
  0x00007f74774fb16d:   movzwl		0x16(%r11, %rbx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb173:   vmovq		%xmm7, %r11
  0x00007f74774fb178:   movzwl		0x16(%r11, %rbx, 2), %r11d
  0x00007f74774fb17e:   leal		(%r10, %r9), %r13d
  0x00007f74774fb182:   imull		%r11d, %r13d
  0x00007f74774fb186:   imull		%r9d, %r10d
  0x00007f74774fb18a:   addl		%r13d, %r10d
  0x00007f74774fb18d:   movzwl		%r10w, %r14d
  0x00007f74774fb191:   vmovq		%xmm5, %r10
  0x00007f74774fb196:   movzwl		0x14(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb19c:   vmovq		%xmm6, %r11
  0x00007f74774fb1a1:   movzwl		0x14(%r11, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb1a7:   vmovq		%xmm7, %r9
  0x00007f74774fb1ac:   movzwl		0x14(%r9, %rbx, 2), %r9d
  0x00007f74774fb1b2:   leal		(%r10, %r11), %ecx
  0x00007f74774fb1b6:   imull		%r9d, %ecx
  0x00007f74774fb1ba:   imull		%r11d, %r10d
  0x00007f74774fb1be:   addl		%ecx, %r10d
  0x00007f74774fb1c1:   movzwl		%r10w, %r13d
  0x00007f74774fb1c5:   vmovq		%xmm5, %r10
  0x00007f74774fb1ca:   movzwl		0x12(%r10, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb1d0:   vmovq		%xmm6, %r10
  0x00007f74774fb1d5:   movzwl		0x12(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb1db:   vmovq		%xmm7, %r9
  0x00007f74774fb1e0:   movzwl		0x12(%r9, %rbx, 2), %ecx
  0x00007f74774fb1e6:   leal		(%r11, %r10), %r9d
  0x00007f74774fb1ea:   imull		%ecx, %r9d
  0x00007f74774fb1ee:   imull		%r10d, %r11d
  0x00007f74774fb1f2:   addl		%r9d, %r11d
  0x00007f74774fb1f5:   movzwl		%r11w, %r10d
  0x00007f74774fb1f9:   vmovq		%xmm5, %r11
  0x00007f74774fb1fe:   movzwl		0x10(%r11, %rbx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb204:   vmovq		%xmm6, %r11
  0x00007f74774fb209:   movzwl		0x10(%r11, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
                                                            ;   {other}
  0x00007f74774fb20f:   movl		%r9d, %ecx
  0x00007f74774fb212:   imull		%r11d, %ecx
  0x00007f74774fb216:   addl		%r11d, %r9d
  0x00007f74774fb219:   imull		(%rsp), %r9d
  0x00007f74774fb21e:   addl		%r9d, %ecx
  0x00007f74774fb221:   movzwl		%cx, %r11d
  0x00007f74774fb225:   xorl		%r11d, %r10d
  0x00007f74774fb228:   xorl		%r10d, %r13d
  0x00007f74774fb22b:   xorl		%r13d, %r14d
  0x00007f74774fb22e:   xorl		%r14d, %esi
  0x00007f74774fb231:   xorl		%esi, %ebp
  0x00007f74774fb233:   xorl		%ebp, %r8d
  0x00007f74774fb236:   xorl		%r8d, %eax
  0x00007f74774fb239:   xorl		%eax, %edx
  0x00007f74774fb23b:   xorl		%edx, %edi
  0x00007f74774fb23d:   vmovd		%xmm15, %r10d
  0x00007f74774fb242:   xorl		%edi, %r10d
  0x00007f74774fb245:   vmovd		%xmm12, %r11d
  0x00007f74774fb24a:   xorl		%r10d, %r11d
  0x00007f74774fb24d:   vmovd		%xmm13, %r10d
  0x00007f74774fb252:   xorl		%r11d, %r10d
  0x00007f74774fb255:   vmovd		%xmm10, %r11d
  0x00007f74774fb25a:   xorl		%r10d, %r11d
  0x00007f74774fb25d:   vmovd		%xmm11, %r10d
  0x00007f74774fb262:   xorl		%r11d, %r10d
  0x00007f74774fb265:   vmovd		%xmm9, %r11d
  0x00007f74774fb26a:   xorl		%r10d, %r11d
  0x00007f74774fb26d:   vmovd		%xmm8, %r10d
  0x00007f74774fb272:   xorl		%r11d, %r10d        ;*ixor {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@59 (line 522)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb275:   vmovd		%r10d, %xmm8
  0x00007f74774fb27a:   addl		$0x10, %ebx         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@62 (line 520)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
  0x00007f74774fb27d:   nop
  0x00007f74774fb27e:   nop
  0x00007f74774fb27f:   nop
  0x00007f74774fb280:   cmpl		0x54(%rsp), %ebx
  0x00007f74774fb284:   jl		0x7f74774faec0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@9 (line 520)
                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
#+end_src
**** jmh reproduce
***** base
#+begin_src bash
$ TEST="micro:org.openjdk.bench.vm.compiler.VectorReduction2.NoSuperword.charXorBig" MICRO="OPTIONS=-bm thrpt -tu ms;FORK=1" make test
Benchmark                                (SIZE)  (seed)   Mode  Cnt    Score    Error   Units
VectorReduction2.NoSuperword.charXorBig    2048       0  thrpt    3  313.477 ± 10.141  ops/ms
#+end_src
***** patch
#+begin_src bash
$ TEST="micro:org.openjdk.bench.vm.compiler.VectorReduction2.NoSuperword.charXorBig" MICRO="OPTIONS=-jvmArgsAppend -XX:+UseNewCode -bm thrpt -tu ms;FORK=1" make test
Benchmark                                (SIZE)  (seed)   Mode  Cnt    Score   Error   Units
VectorReduction2.NoSuperword.charXorBig    2048       0  thrpt    3  173.157 ± 5.973  ops/ms
#+end_src
**** reproducer asm
***** base
#+begin_src asm
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestCharXorBig BASE=true ASM_ARGS=true make run
...
 ;; B18: #	out( B19 ) <- in( B19 ) top-of-loop Freq: 1.04887e+08
  0x00007fa420ade270:   vmovq		%xmm0, %rcx         ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@12 (line 21)
 ;; B19: #	out( B18 B20 ) <- in( B22 B18 ) Loop( B19-B18 inner main of N119 strip mined) Freq: 1.04897e+08
  0x00007fa420ade275:   movzwl		0x10(%rcx, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade27b:   vmovq		%rcx, %xmm0         ;   {other}
  0x00007fa420ade280:   vmovq		%xmm8, %r10
  0x00007fa420ade285:   movzwl		0x10(%r10, %rbx, 2), %r9d
  0x00007fa420ade28b:   movzwl		0x2e(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade291:   movl		%r9d, %r11d
  0x00007fa420ade294:   imull		%r8d, %r11d
  0x00007fa420ade298:   movl		%r11d, (%rsp)
  0x00007fa420ade29c:   addl		%r8d, %r9d
  0x00007fa420ade29f:   movl		%r9d, 4(%rsp)
  0x00007fa420ade2a4:   movzwl		0x2e(%rcx, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade2aa:   vmovq		%xmm6, %r8
  0x00007fa420ade2af:   movzwl		0x2e(%r8, %rbx, 2), %r9d
  0x00007fa420ade2b5:   leal		(%r10, %r11), %r8d
  0x00007fa420ade2b9:   imull		%r8d, %r9d
  0x00007fa420ade2bd:   imull		%r11d, %r10d
  0x00007fa420ade2c1:   addl		%r9d, %r10d
  0x00007fa420ade2c4:   movzwl		%r10w, %r11d
  0x00007fa420ade2c8:   vmovd		%r11d, %xmm1
  0x00007fa420ade2cd:   vmovq		%xmm8, %r10
  0x00007fa420ade2d2:   movzwl		0x2c(%r10, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade2d8:   movzwl		0x2c(%rcx, %rbx, 2), %r10d
  0x00007fa420ade2de:   vmovq		%xmm6, %r8
  0x00007fa420ade2e3:   movzwl		0x2c(%r8, %rbx, 2), %r9d
  0x00007fa420ade2e9:   leal		(%r11, %r10), %r8d
  0x00007fa420ade2ed:   imull		%r8d, %r9d
  0x00007fa420ade2f1:   imull		%r10d, %r11d
  0x00007fa420ade2f5:   addl		%r9d, %r11d
  0x00007fa420ade2f8:   movzwl		%r11w, %r10d
  0x00007fa420ade2fc:   vmovd		%r10d, %xmm3
  0x00007fa420ade301:   movzwl		0x2a(%rcx, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade307:   vmovq		%xmm8, %r11
  0x00007fa420ade30c:   movzwl		0x2a(%r11, %rbx, 2), %r8d
  0x00007fa420ade312:   vmovq		%xmm6, %r11
  0x00007fa420ade317:   movzwl		0x2a(%r11, %rbx, 2), %r11d
  0x00007fa420ade31d:   leal		(%r10, %r8), %ecx
  0x00007fa420ade321:   imull		%r11d, %ecx
  0x00007fa420ade325:   imull		%r8d, %r10d
  0x00007fa420ade329:   addl		%ecx, %r10d
  0x00007fa420ade32c:   movzwl		%r10w, %r11d
  0x00007fa420ade330:   vmovd		%r11d, %xmm2
  0x00007fa420ade335:   vmovq		%xmm6, %r10
  0x00007fa420ade33a:   movzwl		0x28(%r10, %rbx, 2), %r10d
  0x00007fa420ade340:   vmovq		%xmm8, %r11
  0x00007fa420ade345:   movzwl		0x28(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade34b:   vmovq		%xmm0, %r11
  0x00007fa420ade350:   movzwl		0x28(%r11, %rbx, 2), %r11d
  0x00007fa420ade356:   vmovq		%xmm0, %r9
  0x00007fa420ade35b:   movzwl		0x26(%r9, %rbx, 2), %ecx;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade361:   movl		%r8d, %r9d
  0x00007fa420ade364:   imull		%r11d, %r9d
  0x00007fa420ade368:   addl		%r11d, %r8d
  0x00007fa420ade36b:   imull		%r8d, %r10d
  0x00007fa420ade36f:   addl		%r9d, %r10d
  0x00007fa420ade372:   movzwl		%r10w, %r11d
  0x00007fa420ade376:   vmovd		%r11d, %xmm4
  0x00007fa420ade37b:   vmovq		%xmm8, %r10         ;   {other}
  0x00007fa420ade380:   movzwl		0x26(%r10, %rbx, 2), %r11d
  0x00007fa420ade386:   vmovq		%xmm6, %r10
  0x00007fa420ade38b:   movzwl		0x26(%r10, %rbx, 2), %r10d
  0x00007fa420ade391:   leal		(%rcx, %r11), %r9d
  0x00007fa420ade395:   imull		%r10d, %r9d
  0x00007fa420ade399:   imull		%r11d, %ecx
  0x00007fa420ade39d:   addl		%r9d, %ecx
  0x00007fa420ade3a0:   movzwl		%cx, %r10d
  0x00007fa420ade3a4:   vmovd		%r10d, %xmm5
  0x00007fa420ade3a9:   vmovq		%xmm6, %r10
  0x00007fa420ade3ae:   movzwl		0x24(%r10, %rbx, 2), %r11d
  0x00007fa420ade3b4:   vmovq		%xmm8, %r10
  0x00007fa420ade3b9:   movzwl		0x24(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade3bf:   vmovq		%xmm0, %r8
  0x00007fa420ade3c4:   movzwl		0x24(%r8, %rbx, 2), %r9d
  0x00007fa420ade3ca:   movzwl		0x22(%r8, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade3d0:   movl		%r10d, %edi
  0x00007fa420ade3d3:   imull		%r9d, %edi
  0x00007fa420ade3d7:   addl		%r9d, %r10d
  0x00007fa420ade3da:   imull		%r10d, %r11d
  0x00007fa420ade3de:   addl		%edi, %r11d
  0x00007fa420ade3e1:   movzwl		%r11w, %r10d
  0x00007fa420ade3e5:   vmovd		%r10d, %xmm7
  0x00007fa420ade3ea:   vmovq		%xmm8, %r10
  0x00007fa420ade3ef:   movzwl		0x22(%r10, %rbx, 2), %r11d
  0x00007fa420ade3f5:   vmovq		%xmm6, %r10
  0x00007fa420ade3fa:   movzwl		0x22(%r10, %rbx, 2), %r10d
  0x00007fa420ade400:   leal		(%r8, %r11), %ecx
  0x00007fa420ade404:   imull		%r10d, %ecx
  0x00007fa420ade408:   imull		%r11d, %r8d
  0x00007fa420ade40c:   addl		%ecx, %r8d
  0x00007fa420ade40f:   movzwl		%r8w, %r14d
  0x00007fa420ade413:   vmovq		%xmm6, %r10
  0x00007fa420ade418:   movzwl		0x20(%r10, %rbx, 2), %r10d
  0x00007fa420ade41e:   vmovq		%xmm8, %r11
  0x00007fa420ade423:   movzwl		0x20(%r11, %rbx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade429:   vmovq		%xmm0, %r11
  0x00007fa420ade42e:   movzwl		0x20(%r11, %rbx, 2), %r8d
  0x00007fa420ade434:   vmovq		%xmm6, %r11
  0x00007fa420ade439:   movzwl		0x1e(%r11, %rbx, 2), %r11d
  0x00007fa420ade43f:   movl		%r9d, %edi
  0x00007fa420ade442:   imull		%r8d, %edi
  0x00007fa420ade446:   addl		%r8d, %r9d
  0x00007fa420ade449:   imull		%r9d, %r10d
  0x00007fa420ade44d:   addl		%edi, %r10d
  0x00007fa420ade450:   movzwl		%r10w, %edi
  0x00007fa420ade454:   vmovq		%xmm0, %r10
  0x00007fa420ade459:   movzwl		0x1e(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade45f:   vmovq		%xmm8, %r8
  0x00007fa420ade464:   movzwl		0x1e(%r8, %rbx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade46a:   vmovq		%xmm0, %r8
  0x00007fa420ade46f:   movzwl		0x1c(%r8, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade475:   movl		%r10d, %edx
  0x00007fa420ade478:   imull		%r9d, %edx
  0x00007fa420ade47c:   addl		%r9d, %r10d         ;   {other}
  0x00007fa420ade47f:   imull		%r10d, %r11d
  0x00007fa420ade483:   addl		%edx, %r11d
  0x00007fa420ade486:   movzwl		%r11w, %ecx
  0x00007fa420ade48a:   vmovq		%xmm8, %r10
  0x00007fa420ade48f:   movzwl		0x1c(%r10, %rbx, 2), %r10d
  0x00007fa420ade495:   vmovq		%xmm6, %r11
  0x00007fa420ade49a:   movzwl		0x1c(%r11, %rbx, 2), %r9d
  0x00007fa420ade4a0:   movl		%r8d, %r11d
  0x00007fa420ade4a3:   imull		%r10d, %r11d
  0x00007fa420ade4a7:   addl		%r10d, %r8d
  0x00007fa420ade4aa:   imull		%r9d, %r8d
  0x00007fa420ade4ae:   addl		%r11d, %r8d
  0x00007fa420ade4b1:   movzwl		%r8w, %esi
  0x00007fa420ade4b5:   vmovq		%xmm8, %r10
  0x00007fa420ade4ba:   movzwl		0x1a(%r10, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade4c0:   vmovq		%xmm0, %r10
  0x00007fa420ade4c5:   movzwl		0x1a(%r10, %rbx, 2), %r10d
  0x00007fa420ade4cb:   vmovq		%xmm6, %r8
  0x00007fa420ade4d0:   movzwl		0x1a(%r8, %rbx, 2), %r9d
  0x00007fa420ade4d6:   leal		(%r11, %r10), %r8d
  0x00007fa420ade4da:   imull		%r9d, %r8d
  0x00007fa420ade4de:   imull		%r10d, %r11d
  0x00007fa420ade4e2:   addl		%r8d, %r11d
  0x00007fa420ade4e5:   movzwl		%r11w, %edx
  0x00007fa420ade4e9:   vmovq		%xmm0, %r10
  0x00007fa420ade4ee:   movzwl		0x18(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade4f4:   vmovq		%xmm8, %r11
  0x00007fa420ade4f9:   movzwl		0x18(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade4ff:   vmovq		%xmm6, %r11
  0x00007fa420ade504:   movzwl		0x18(%r11, %rbx, 2), %r11d
  0x00007fa420ade50a:   movl		%r10d, %eax
  0x00007fa420ade50d:   imull		%r8d, %eax
  0x00007fa420ade511:   addl		%r8d, %r10d
  0x00007fa420ade514:   imull		%r11d, %r10d
  0x00007fa420ade518:   addl		%eax, %r10d
  0x00007fa420ade51b:   movzwl		%r10w, %ebp
  0x00007fa420ade51f:   vmovq		%xmm0, %r10
  0x00007fa420ade524:   movzwl		0x16(%r10, %rbx, 2), %r11d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade52a:   vmovq		%xmm8, %r10
  0x00007fa420ade52f:   movzwl		0x16(%r10, %rbx, 2), %r10d
  0x00007fa420ade535:   vmovq		%xmm6, %r8
  0x00007fa420ade53a:   movzwl		0x16(%r8, %rbx, 2), %r9d
  0x00007fa420ade540:   leal		(%r11, %r10), %r8d
  0x00007fa420ade544:   imull		%r9d, %r8d
  0x00007fa420ade548:   imull		%r10d, %r11d
  0x00007fa420ade54c:   addl		%r8d, %r11d
  0x00007fa420ade54f:   movzwl		%r11w, %eax
  0x00007fa420ade553:   vmovq		%xmm6, %r10
  0x00007fa420ade558:   movzwl		0x14(%r10, %rbx, 2), %r11d
  0x00007fa420ade55e:   vmovq		%xmm8, %r10
  0x00007fa420ade563:   movzwl		0x14(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade569:   vmovq		%xmm0, %r8
  0x00007fa420ade56e:   movzwl		0x14(%r8, %rbx, 2), %r9d
  0x00007fa420ade574:   movzwl		0x12(%r8, %rbx, 2), %r13d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fa420ade57a:   movl		%r10d, %r8d         ;   {other}
  0x00007fa420ade57d:   imull		%r9d, %r8d
  0x00007fa420ade581:   addl		%r9d, %r10d
  0x00007fa420ade584:   imull		%r10d, %r11d
  0x00007fa420ade588:   addl		%r8d, %r11d
  0x00007fa420ade58b:   movzwl		%r11w, %r11d
  0x00007fa420ade58f:   vmovq		%xmm8, %r10
  0x00007fa420ade594:   movzwl		0x12(%r10, %rbx, 2), %r10d
                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fa420ade59a:   vmovq		%xmm6, %r8
  0x00007fa420ade59f:   movzwl		0x12(%r8, %rbx, 2), %r9d
  0x00007fa420ade5a5:   leal		(%r10, %r13), %r8d
  0x00007fa420ade5a9:   imull		%r9d, %r8d
  0x00007fa420ade5ad:   imull		%r10d, %r13d
  0x00007fa420ade5b1:   addl		%r8d, %r13d
  0x00007fa420ade5b4:   movzwl		%r13w, %r8d
  0x00007fa420ade5b8:   vmovq		%xmm6, %r10
  0x00007fa420ade5bd:   movzwl		0x10(%r10, %rbx, 2), %r10d
  0x00007fa420ade5c3:   imull		4(%rsp), %r10d
  0x00007fa420ade5c9:   addl		(%rsp), %r10d
  0x00007fa420ade5cd:   movzwl		%r10w, %r9d
  0x00007fa420ade5d1:   xorl		8(%rsp), %r9d
  0x00007fa420ade5d6:   xorl		%r9d, %r8d
  0x00007fa420ade5d9:   xorl		%r8d, %r11d
  0x00007fa420ade5dc:   xorl		%r11d, %eax
  0x00007fa420ade5df:   xorl		%eax, %ebp
  0x00007fa420ade5e1:   xorl		%ebp, %edx
  0x00007fa420ade5e3:   xorl		%edx, %esi
  0x00007fa420ade5e5:   xorl		%esi, %ecx
  0x00007fa420ade5e7:   xorl		%ecx, %edi
  0x00007fa420ade5e9:   xorl		%edi, %r14d
  0x00007fa420ade5ec:   vmovd		%xmm7, %r10d
  0x00007fa420ade5f1:   xorl		%r14d, %r10d
  0x00007fa420ade5f4:   vmovd		%xmm5, %r11d
  0x00007fa420ade5f9:   xorl		%r10d, %r11d
  0x00007fa420ade5fc:   vmovd		%xmm4, %r8d
  0x00007fa420ade601:   xorl		%r11d, %r8d
  0x00007fa420ade604:   vmovd		%xmm2, %r10d
  0x00007fa420ade609:   xorl		%r8d, %r10d
  0x00007fa420ade60c:   vmovd		%xmm3, %r8d
  0x00007fa420ade611:   xorl		%r10d, %r8d
  0x00007fa420ade614:   vmovd		%xmm1, %r11d
  0x00007fa420ade619:   xorl		%r8d, %r11d         ;*ixor {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@47 (line 22)
  0x00007fa420ade61c:   movl		%r11d, 8(%rsp)
  0x00007fa420ade621:   addl		$0x10, %ebx         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@50 (line 20)
  0x00007fa420ade624:   cmpl		0x10(%rsp), %ebx
  0x00007fa420ade628:   jl		0x7fa420ade270      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@9 (line 20)
#+end_src
***** patch
#+begin_src asm
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestCharXorBig ASM_ARGS=true make run
...
 ;; B18: #	out( B19 ) <- in( B19 ) top-of-loop Freq: 1.04887e+08
  0x00007fcabcade370:   vmovq		%xmm0, %rcx         ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@12 (line 21)
 ;; B19: #	out( B18 B20 ) <- in( B22 B18 ) Loop( B19-B18 inner main of N119 strip mined) Freq: 1.04897e+08
  0x00007fcabcade375:   movzwl		0x10(%rcx, %r9, 2), %r11d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade37b:   vmovq		%rcx, %xmm0         ;   {other}
  0x00007fcabcade380:   vmovq		%xmm9, %r10
  0x00007fcabcade385:   movzwl		0x10(%r10, %r9, 2), %r8d
  0x00007fcabcade38b:   movzwl		0x2e(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade391:   movl		%r8d, %ebx
  0x00007fcabcade394:   imull		%r11d, %ebx
  0x00007fcabcade398:   movl		%ebx, (%rsp)
  0x00007fcabcade39b:   addl		%r11d, %r8d
  0x00007fcabcade39e:   movl		%r8d, 4(%rsp)
  0x00007fcabcade3a3:   movzwl		0x2e(%rcx, %r9, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade3a9:   vmovq		%xmm7, %r11
  0x00007fcabcade3ae:   movzwl		0x2e(%r11, %r9, 2), %r11d
  0x00007fcabcade3b4:   leal		(%r10, %r8), %ecx
  0x00007fcabcade3b8:   imull		%ecx, %r11d
  0x00007fcabcade3bc:   imull		%r8d, %r10d
  0x00007fcabcade3c0:   addl		%r11d, %r10d
  0x00007fcabcade3c3:   movzwl		%r10w, %r10d
  0x00007fcabcade3c7:   vmovd		%r10d, %xmm2
  0x00007fcabcade3cc:   vmovq		%xmm9, %r10
  0x00007fcabcade3d1:   movzwl		0x2c(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade3d7:   vmovq		%xmm0, %r11
  0x00007fcabcade3dc:   movzwl		0x2c(%r11, %r9, 2), %r8d
  0x00007fcabcade3e2:   vmovq		%xmm7, %r11
  0x00007fcabcade3e7:   movzwl		0x2c(%r11, %r9, 2), %r11d
  0x00007fcabcade3ed:   leal		(%r10, %r8), %ebx
  0x00007fcabcade3f1:   imull		%ebx, %r11d
  0x00007fcabcade3f5:   imull		%r8d, %r10d
  0x00007fcabcade3f9:   addl		%r11d, %r10d
  0x00007fcabcade3fc:   movzwl		%r10w, %r11d
  0x00007fcabcade400:   vmovd		%r11d, %xmm1
  0x00007fcabcade405:   vmovq		%xmm0, %r10
  0x00007fcabcade40a:   movzwl		0x2a(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade410:   vmovq		%xmm9, %r11
  0x00007fcabcade415:   movzwl		0x2a(%r11, %r9, 2), %r11d
  0x00007fcabcade41b:   vmovq		%xmm7, %r8
  0x00007fcabcade420:   movzwl		0x2a(%r8, %r9, 2), %ecx
  0x00007fcabcade426:   leal		(%r10, %r11), %r8d
  0x00007fcabcade42a:   imull		%ecx, %r8d
  0x00007fcabcade42e:   imull		%r11d, %r10d
  0x00007fcabcade432:   addl		%r8d, %r10d
  0x00007fcabcade435:   movzwl		%r10w, %r10d
  0x00007fcabcade439:   vmovd		%r10d, %xmm4
  0x00007fcabcade43e:   vmovq		%xmm7, %r10
  0x00007fcabcade443:   movzwl		0x28(%r10, %r9, 2), %r11d
  0x00007fcabcade449:   vmovq		%xmm9, %r10
  0x00007fcabcade44e:   movzwl		0x28(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade454:   vmovq		%xmm0, %r8
  0x00007fcabcade459:   movzwl		0x28(%r8, %r9, 2), %ecx
  0x00007fcabcade45f:   movzwl		0x26(%r8, %r9, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade465:   movl		%r10d, %edi
  0x00007fcabcade468:   imull		%ecx, %edi
  0x00007fcabcade46b:   addl		%ecx, %r10d
  0x00007fcabcade46e:   imull		%r10d, %r11d
  0x00007fcabcade472:   addl		%edi, %r11d
  0x00007fcabcade475:   movzwl		%r11w, %r10d
  0x00007fcabcade479:   vmovd		%r10d, %xmm5
  0x00007fcabcade47e:   vmovq		%xmm9, %r10         ;   {other}
  0x00007fcabcade483:   movzwl		0x26(%r10, %r9, 2), %r10d
  0x00007fcabcade489:   vmovq		%xmm7, %r11
  0x00007fcabcade48e:   movzwl		0x26(%r11, %r9, 2), %ecx
  0x00007fcabcade494:   leal		(%r8, %r10), %r11d
  0x00007fcabcade498:   imull		%ecx, %r11d
  0x00007fcabcade49c:   imull		%r10d, %r8d
  0x00007fcabcade4a0:   addl		%r11d, %r8d
  0x00007fcabcade4a3:   movzwl		%r8w, %r11d
  0x00007fcabcade4a7:   vmovd		%r11d, %xmm6
  0x00007fcabcade4ac:   vmovq		%xmm7, %r10
  0x00007fcabcade4b1:   movzwl		0x24(%r10, %r9, 2), %r10d
  0x00007fcabcade4b7:   vmovq		%xmm9, %r11
  0x00007fcabcade4bc:   movzwl		0x24(%r11, %r9, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade4c2:   vmovq		%xmm0, %r11
  0x00007fcabcade4c7:   movzwl		0x24(%r11, %r9, 2), %r11d
  0x00007fcabcade4cd:   vmovq		%xmm0, %rcx
  0x00007fcabcade4d2:   movzwl		0x22(%rcx, %r9, 2), %ebx;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade4d8:   movl		%r8d, %ecx
  0x00007fcabcade4db:   imull		%r11d, %ecx
  0x00007fcabcade4df:   addl		%r11d, %r8d
  0x00007fcabcade4e2:   imull		%r8d, %r10d
  0x00007fcabcade4e6:   addl		%ecx, %r10d
  0x00007fcabcade4e9:   movzwl		%r10w, %r11d
  0x00007fcabcade4ed:   vmovd		%r11d, %xmm3
  0x00007fcabcade4f2:   vmovq		%xmm9, %r10
  0x00007fcabcade4f7:   movzwl		0x22(%r10, %r9, 2), %r10d
  0x00007fcabcade4fd:   vmovq		%xmm7, %r11
  0x00007fcabcade502:   movzwl		0x22(%r11, %r9, 2), %r8d
  0x00007fcabcade508:   leal		(%rbx, %r10), %r11d
  0x00007fcabcade50c:   imull		%r8d, %r11d
  0x00007fcabcade510:   imull		%r10d, %ebx
  0x00007fcabcade514:   addl		%r11d, %ebx
  0x00007fcabcade517:   movzwl		%bx, %ebp
  0x00007fcabcade51a:   vmovq		%xmm7, %r10
  0x00007fcabcade51f:   movzwl		0x20(%r10, %r9, 2), %r8d
  0x00007fcabcade525:   vmovq		%xmm9, %r10
  0x00007fcabcade52a:   movzwl		0x20(%r10, %r9, 2), %r11d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade530:   vmovq		%xmm0, %r10
  0x00007fcabcade535:   movzwl		0x20(%r10, %r9, 2), %ebx
  0x00007fcabcade53b:   vmovq		%xmm7, %r10
  0x00007fcabcade540:   movzwl		0x1e(%r10, %r9, 2), %r10d
  0x00007fcabcade546:   movl		%r11d, %ecx
  0x00007fcabcade549:   imull		%ebx, %ecx
  0x00007fcabcade54c:   addl		%ebx, %r11d
  0x00007fcabcade54f:   imull		%r11d, %r8d
  0x00007fcabcade553:   addl		%ecx, %r8d
  0x00007fcabcade556:   movzwl		%r8w, %ecx
  0x00007fcabcade55a:   vmovq		%xmm0, %r11
  0x00007fcabcade55f:   movzwl		0x1e(%r11, %r9, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade565:   vmovq		%xmm9, %r11
  0x00007fcabcade56a:   movzwl		0x1e(%r11, %r9, 2), %r11d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade570:   vmovq		%xmm0, %rbx
  0x00007fcabcade575:   movzwl		0x1c(%rbx, %r9, 2), %edi;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade57b:   movl		%r8d, %ebx          ;   {other}
  0x00007fcabcade57e:   imull		%r11d, %ebx
  0x00007fcabcade582:   addl		%r11d, %r8d
  0x00007fcabcade585:   imull		%r8d, %r10d
  0x00007fcabcade589:   addl		%ebx, %r10d
  0x00007fcabcade58c:   movzwl		%r10w, %edx
  0x00007fcabcade590:   vmovq		%xmm9, %r10
  0x00007fcabcade595:   movzwl		0x1c(%r10, %r9, 2), %r11d
  0x00007fcabcade59b:   vmovq		%xmm7, %r10
  0x00007fcabcade5a0:   movzwl		0x1c(%r10, %r9, 2), %r10d
  0x00007fcabcade5a6:   movl		%edi, %ebx
  0x00007fcabcade5a8:   imull		%r11d, %ebx
  0x00007fcabcade5ac:   addl		%r11d, %edi
  0x00007fcabcade5af:   imull		%r10d, %edi
  0x00007fcabcade5b3:   addl		%ebx, %edi
  0x00007fcabcade5b5:   movzwl		%di, %edi
  0x00007fcabcade5b8:   vmovq		%xmm9, %r10
  0x00007fcabcade5bd:   movzwl		0x1a(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade5c3:   vmovq		%xmm0, %r11
  0x00007fcabcade5c8:   movzwl		0x1a(%r11, %r9, 2), %r8d
  0x00007fcabcade5ce:   vmovq		%xmm7, %r11
  0x00007fcabcade5d3:   movzwl		0x1a(%r11, %r9, 2), %r11d
  0x00007fcabcade5d9:   leal		(%r10, %r8), %esi
  0x00007fcabcade5dd:   imull		%r11d, %esi
  0x00007fcabcade5e1:   imull		%r8d, %r10d
  0x00007fcabcade5e5:   addl		%esi, %r10d
  0x00007fcabcade5e8:   movzwl		%r10w, %eax
  0x00007fcabcade5ec:   vmovq		%xmm0, %r10
  0x00007fcabcade5f1:   movzwl		0x18(%r10, %r9, 2), %r11d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade5f7:   vmovq		%xmm9, %r10
  0x00007fcabcade5fc:   movzwl		0x18(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade602:   vmovq		%xmm7, %r8
  0x00007fcabcade607:   movzwl		0x18(%r8, %r9, 2), %ebx
  0x00007fcabcade60d:   movl		%r11d, %r8d
  0x00007fcabcade610:   imull		%r10d, %r8d
  0x00007fcabcade614:   addl		%r10d, %r11d
  0x00007fcabcade617:   imull		%ebx, %r11d
  0x00007fcabcade61b:   addl		%r8d, %r11d
  0x00007fcabcade61e:   movzwl		%r11w, %esi
  0x00007fcabcade622:   vmovq		%xmm0, %r10
  0x00007fcabcade627:   movzwl		0x16(%r10, %r9, 2), %r10d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
  0x00007fcabcade62d:   vmovq		%xmm9, %r11
  0x00007fcabcade632:   movzwl		0x16(%r11, %r9, 2), %r8d
  0x00007fcabcade638:   vmovq		%xmm7, %r11
  0x00007fcabcade63d:   movzwl		0x16(%r11, %r9, 2), %r11d
  0x00007fcabcade643:   leal		(%r10, %r8), %r13d
  0x00007fcabcade647:   imull		%r11d, %r13d
  0x00007fcabcade64b:   imull		%r8d, %r10d
  0x00007fcabcade64f:   addl		%r13d, %r10d
  0x00007fcabcade652:   movzwl		%r10w, %r13d
  0x00007fcabcade656:   vmovq		%xmm7, %r10
  0x00007fcabcade65b:   movzwl		0x14(%r10, %r9, 2), %r10d
  0x00007fcabcade661:   vmovq		%xmm9, %r11
  0x00007fcabcade666:   movzwl		0x14(%r11, %r9, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade66c:   vmovq		%xmm0, %r11
  0x00007fcabcade671:   movzwl		0x14(%r11, %r9, 2), %r11d
  0x00007fcabcade677:   vmovq		%xmm0, %rbx
  0x00007fcabcade67c:   movzwl		0x12(%rbx, %r9, 2), %r14d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@28 (line 21)
                                                            ;   {other}
  0x00007fcabcade682:   movl		%r8d, %ebx
  0x00007fcabcade685:   imull		%r11d, %ebx
  0x00007fcabcade689:   addl		%r11d, %r8d
  0x00007fcabcade68c:   imull		%r8d, %r10d
  0x00007fcabcade690:   addl		%ebx, %r10d
  0x00007fcabcade693:   movzwl		%r10w, %r10d
  0x00007fcabcade697:   vmovq		%xmm9, %r11
  0x00007fcabcade69c:   movzwl		0x12(%r11, %r9, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@19 (line 21)
  0x00007fcabcade6a2:   vmovq		%xmm7, %r11
  0x00007fcabcade6a7:   movzwl		0x12(%r11, %r9, 2), %r11d
  0x00007fcabcade6ad:   leal		(%r14, %r8), %ebx
  0x00007fcabcade6b1:   imull		%r11d, %ebx
  0x00007fcabcade6b5:   imull		%r8d, %r14d
  0x00007fcabcade6b9:   addl		%ebx, %r14d
  0x00007fcabcade6bc:   movzwl		%r14w, %r11d
  0x00007fcabcade6c0:   vmovq		%xmm7, %r8
  0x00007fcabcade6c5:   movzwl		0x10(%r8, %r9, 2), %ebx
  0x00007fcabcade6cb:   imull		4(%rsp), %ebx
  0x00007fcabcade6d0:   addl		(%rsp), %ebx
  0x00007fcabcade6d3:   movzwl		%bx, %r8d
  0x00007fcabcade6d7:   xorl		%r8d, %r11d
  0x00007fcabcade6da:   xorl		%r11d, %r10d
  0x00007fcabcade6dd:   xorl		%r10d, %r13d
  0x00007fcabcade6e0:   xorl		%r13d, %esi
  0x00007fcabcade6e3:   xorl		%esi, %eax
  0x00007fcabcade6e5:   xorl		%eax, %edi
  0x00007fcabcade6e7:   xorl		%edi, %edx
  0x00007fcabcade6e9:   xorl		%edx, %ecx
  0x00007fcabcade6eb:   xorl		%ecx, %ebp
  0x00007fcabcade6ed:   vmovd		%xmm3, %r10d
  0x00007fcabcade6f2:   xorl		%ebp, %r10d
  0x00007fcabcade6f5:   vmovd		%xmm6, %r11d
  0x00007fcabcade6fa:   xorl		%r10d, %r11d
  0x00007fcabcade6fd:   vmovd		%xmm5, %r8d
  0x00007fcabcade702:   xorl		%r11d, %r8d
  0x00007fcabcade705:   vmovd		%xmm4, %r10d
  0x00007fcabcade70a:   xorl		%r8d, %r10d
  0x00007fcabcade70d:   vmovd		%xmm1, %r8d
  0x00007fcabcade712:   xorl		%r10d, %r8d
  0x00007fcabcade715:   vmovd		%xmm2, %r10d
  0x00007fcabcade71a:   xorl		%r8d, %r10d
  0x00007fcabcade71d:   vmovd		%xmm8, %r11d
  0x00007fcabcade722:   xorl		%r10d, %r11d        ;*ixor {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@47 (line 22)
  0x00007fcabcade725:   vmovd		%r11d, %xmm8
  0x00007fcabcade72a:   addl		$0x10, %r9d         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@50 (line 20)
  0x00007fcabcade72e:   cmpl		0xc(%rsp), %r9d
  0x00007fcabcade733:   jl		0x7fcabcade370      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestCharXorBig::test@9 (line 20)
#+end_src
**** reproducer performance
***** base
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestCharXorBig BASE=true make run
cd /home/g/src/jdk-reassoc-reduct-chain
git log -1 --pretty=format:'%D%n%h %s'
HEAD -> topic.reassoc-reduct-chain.post-draft, origin/topic.reassoc-reduct-chain.post-draft
2afed80ee24 Protect behind UseNewCode
rm -f *.log
/home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,TestCharXorBig::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 -XX:-UseSuperWord /home/g/src/colata/reassoc-reduct-chain-8351409/TestCharXorBig.java
[0.001s][info][os] Use of CLOCK_MONOTONIC is supported
[0.001s][info][os] Use of pthread_condattr_setclock is supported
[0.001s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with CLOCK_MONOTONIC
[0.001s][info][os] HotSpot is running with glibc 2.40, NPTL 2.40
[0.001s][info][os] Glibc stack size guard page adjustment is not needed
[0.002s][info][os] SafePoint Polling address, bad (protected) page:0x00007ff628825000, good (unprotected) page:0x00007ff628826000
[0.003s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libjava.so
[0.003s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libjava.so was successful
CompileCommand: compileonly TestCharXorBig.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.128s][info][os] Initialized VM with process ID 50688
[0.132s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libsimdsort.so
[0.132s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libsimdsort.so was successful
[0.164s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnio.so
[0.164s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnio.so was successful
[0.196s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnet.so
[0.196s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnet.so was successful
Validate
Warmup
Running
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Throughput: 41 ops/ms
Validate
#+end_src
***** patch
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestCharXorBig make run
cd /home/g/src/jdk-reassoc-reduct-chain
git log -1 --pretty=format:'%D%n%h %s'
HEAD -> topic.reassoc-reduct-chain.post-draft, origin/topic.reassoc-reduct-chain.post-draft
2afed80ee24 Protect behind UseNewCode
rm -f *.log
/home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,TestCharXorBig::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 -XX:+UseNewCode -XX:-UseSuperWord /home/g/src/colata/reassoc-reduct-chain-8351409/TestCharXorBig.java
[0.001s][info][os] Use of CLOCK_MONOTONIC is supported
[0.001s][info][os] Use of pthread_condattr_setclock is supported
[0.001s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with CLOCK_MONOTONIC
[0.001s][info][os] HotSpot is running with glibc 2.40, NPTL 2.40
[0.001s][info][os] Glibc stack size guard page adjustment is not needed
[0.002s][info][os] SafePoint Polling address, bad (protected) page:0x00007f8dccc08000, good (unprotected) page:0x00007f8dccc09000
[0.003s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libjava.so
[0.003s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libjava.so was successful
CompileCommand: compileonly TestCharXorBig.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.126s][info][os] Initialized VM with process ID 50897
[0.134s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libsimdsort.so
[0.134s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libsimdsort.so was successful
[0.162s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnio.so
[0.162s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnio.so was successful
[0.193s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnet.so
[0.193s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/fast-linux-x86_64/jdk/lib/libnet.so was successful
Validate
Warmup
Running
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Throughput: 38 ops/ms
Validate
#+end_src
**** perfasm
***** base
#+begin_src bash
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub, version 5, compile id 510

               0x00007f4a93af9a06:   cmpl		$0x3e80, %r11d
               0x00007f4a93af9a0d:   movl		$0x3e80, %r10d
               0x00007f4a93af9a13:   cmoval		%r10d, %r11d
               0x00007f4a93af9a17:   addl		%edx, %r11d
               0x00007f4a93af9a1a:   movl		%r8d, 0x50(%rsp)
               0x00007f4a93af9a1f:   movl		%r9d, 0x4c(%rsp)
               0x00007f4a93af9a24:   movl		%r11d, 0x54(%rsp)
               0x00007f4a93af9a29:   nopl		(%rax)              ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                                         ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@12 (line 521)
                                                                         ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.79%  ↗    0x00007f4a93af9a30:   movzwl		0x26(%rbp, %rdx, 2), %r10d
   0.26%  │    0x00007f4a93af9a36:   movl		%r10d, 0x44(%rsp)
   0.43%  │    0x00007f4a93af9a3b:   movzwl		0x26(%rdi, %rdx, 2), %r10d
   0.39%  │    0x00007f4a93af9a41:   movl		%r10d, 0x48(%rsp)
   0.56%  │    0x00007f4a93af9a46:   movzwl		0x2e(%rdi, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.62%  │    0x00007f4a93af9a4c:   movzwl		0x2e(%r14, %rdx, 2), %r10d
   0.29%  │    0x00007f4a93af9a52:   movzwl		0x2e(%rbp, %rdx, 2), %r9d
   0.33%  │    0x00007f4a93af9a58:   leal		(%r11, %r10), %r8d
   0.52%  │    0x00007f4a93af9a5c:   imull		%r8d, %r9d
   0.43%  │    0x00007f4a93af9a60:   imull		%r10d, %r11d
   0.29%  │    0x00007f4a93af9a64:   addl		%r9d, %r11d
   1.90%  │    0x00007f4a93af9a67:   movzwl		%r11w, %r10d
   2.26%  │    0x00007f4a93af9a6b:   vmovd		%r10d, %xmm6
   0.79%  │    0x00007f4a93af9a70:   movzwl		0x2c(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.33%  │    0x00007f4a93af9a76:   movzwl		0x2c(%rdi, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.33%  │    0x00007f4a93af9a7c:   movzwl		0x2c(%rbp, %rdx, 2), %r9d
   0.43%  │    0x00007f4a93af9a82:   leal		(%r11, %r10), %r8d
   0.85%  │    0x00007f4a93af9a86:   imull		%r8d, %r9d
   0.29%  │    0x00007f4a93af9a8a:   imull		%r10d, %r11d
   0.56%  │    0x00007f4a93af9a8e:   addl		%r9d, %r11d
   0.88%  │    0x00007f4a93af9a91:   movzwl		%r11w, %r10d
   0.98%  │    0x00007f4a93af9a95:   vmovd		%r10d, %xmm5
   0.69%  │    0x00007f4a93af9a9a:   movzwl		0x2a(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.20%  │    0x00007f4a93af9aa0:   movzwl		0x2a(%rdi, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.26%  │    0x00007f4a93af9aa6:   movzwl		0x2a(%rbp, %rdx, 2), %r9d
   0.49%  │    0x00007f4a93af9aac:   leal		(%r11, %r10), %r8d
   0.79%  │    0x00007f4a93af9ab0:   imull		%r9d, %r8d
   0.29%  │    0x00007f4a93af9ab4:   imull		%r10d, %r11d
   0.46%  │    0x00007f4a93af9ab8:   addl		%r8d, %r11d
   0.75%  │    0x00007f4a93af9abb:   movzwl		%r11w, %r10d
   0.56%  │    0x00007f4a93af9abf:   vmovd		%r10d, %xmm8
   0.39%  │    0x00007f4a93af9ac4:   movzwl		0x28(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.16%  │    0x00007f4a93af9aca:   movzwl		0x28(%rdi, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.59%  │    0x00007f4a93af9ad0:   movzwl		0x28(%rbp, %rdx, 2), %r9d
   0.62%  │    0x00007f4a93af9ad6:   leal		(%r11, %r10), %r8d
   0.75%  │    0x00007f4a93af9ada:   imull		%r9d, %r8d
   0.36%  │    0x00007f4a93af9ade:   imull		%r10d, %r11d
   0.56%  │    0x00007f4a93af9ae2:   addl		%r8d, %r11d
   0.59%  │    0x00007f4a93af9ae5:   movzwl		%r11w, %r10d
   0.49%  │    0x00007f4a93af9ae9:   vmovd		%r10d, %xmm7        ;   {other}
   0.49%  │    0x00007f4a93af9aee:   movzwl		0x24(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.49%  │    0x00007f4a93af9af4:   movzwl		0x24(%rdi, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.39%  │    0x00007f4a93af9afa:   movzwl		0x24(%rbp, %rdx, 2), %r9d
   0.36%  │    0x00007f4a93af9b00:   leal		(%r11, %r10), %r8d
   0.92%  │    0x00007f4a93af9b04:   imull		%r9d, %r8d
   0.46%  │    0x00007f4a93af9b08:   imull		%r10d, %r11d
   0.23%  │    0x00007f4a93af9b0c:   addl		%r8d, %r11d
   0.43%  │    0x00007f4a93af9b0f:   movzwl		%r11w, %r10d
   0.46%  │    0x00007f4a93af9b13:   vmovd		%r10d, %xmm10
   0.52%  │    0x00007f4a93af9b18:   movzwl		0x22(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.13%  │    0x00007f4a93af9b1e:   movzwl		0x22(%rdi, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.39%  │    0x00007f4a93af9b24:   movzwl		0x22(%rbp, %rdx, 2), %r9d
   0.56%  │    0x00007f4a93af9b2a:   leal		(%r11, %r10), %r8d
   1.18%  │    0x00007f4a93af9b2e:   imull		%r9d, %r8d
   0.39%  │    0x00007f4a93af9b32:   imull		%r10d, %r11d
   0.33%  │    0x00007f4a93af9b36:   addl		%r8d, %r11d
   0.39%  │    0x00007f4a93af9b39:   movzwl		%r11w, %eax
   0.62%  │    0x00007f4a93af9b3d:   movzwl		0x20(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.26%  │    0x00007f4a93af9b43:   movzwl		0x20(%rdi, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.13%  │    0x00007f4a93af9b49:   movzwl		0x20(%rbp, %rdx, 2), %r9d
   0.46%  │    0x00007f4a93af9b4f:   leal		(%r10, %r11), %r8d
   0.75%  │    0x00007f4a93af9b53:   imull		%r9d, %r8d
   0.52%  │    0x00007f4a93af9b57:   imull		%r11d, %r10d
   0.33%  │    0x00007f4a93af9b5b:   addl		%r8d, %r10d
   0.43%  │    0x00007f4a93af9b5e:   movzwl		%r10w, %esi
   0.49%  │    0x00007f4a93af9b62:   movzwl		0x18(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%  │    0x00007f4a93af9b68:   movzwl		0x18(%rdi, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.29%  │    0x00007f4a93af9b6e:   movzwl		0x18(%rbp, %rdx, 2), %r11d
   0.29%  │    0x00007f4a93af9b74:   leal		(%r10, %r8), %ecx
   0.56%  │    0x00007f4a93af9b78:   imull		%r11d, %ecx
   0.26%  │    0x00007f4a93af9b7c:   imull		%r8d, %r10d
   0.20%  │    0x00007f4a93af9b80:   addl		%ecx, %r10d
   0.43%  │    0x00007f4a93af9b83:   movzwl		%r10w, %r13d
   0.49%  │    0x00007f4a93af9b87:   movzwl		0x14(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.36%  │    0x00007f4a93af9b8d:   movzwl		0x14(%rdi, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.33%  │    0x00007f4a93af9b93:   movzwl		0x14(%rbp, %rdx, 2), %r9d
   0.26%  │    0x00007f4a93af9b99:   leal		(%r10, %r11), %r8d
   0.85%  │    0x00007f4a93af9b9d:   imull		%r9d, %r8d
   0.39%  │    0x00007f4a93af9ba1:   imull		%r11d, %r10d
   0.20%  │    0x00007f4a93af9ba5:   addl		%r8d, %r10d
   0.29%  │    0x00007f4a93af9ba8:   movzwl		%r10w, %r10d
   0.49%  │    0x00007f4a93af9bac:   movzwl		0x12(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.26%  │    0x00007f4a93af9bb2:   movzwl		0x12(%rdi, %rdx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.29%  │    0x00007f4a93af9bb8:   movzwl		0x12(%rbp, %rdx, 2), %r8d
   0.62%  │    0x00007f4a93af9bbe:   leal		(%r11, %r9), %ebx
   0.72%  │    0x00007f4a93af9bc2:   imull		%r8d, %ebx
   0.36%  │    0x00007f4a93af9bc6:   imull		%r9d, %r11d
   0.20%  │    0x00007f4a93af9bca:   addl		%ebx, %r11d
   0.26%  │    0x00007f4a93af9bcd:   movzwl		%r11w, %r11d
   0.46%  │    0x00007f4a93af9bd1:   movzwl		0x10(%r14, %rdx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.36%  │    0x00007f4a93af9bd7:   movzwl		0x10(%rdi, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.13%  │    0x00007f4a93af9bdd:   movzwl		0x10(%rbp, %rdx, 2), %ebx
   0.65%  │    0x00007f4a93af9be2:   leal		(%r9, %r8), %ecx
   0.33%  │    0x00007f4a93af9be6:   imull		%ebx, %ecx
   0.23%  │    0x00007f4a93af9be9:   imull		%r8d, %r9d          ;   {other}
   0.29%  │    0x00007f4a93af9bed:   addl		%ecx, %r9d
   0.29%  │    0x00007f4a93af9bf0:   movzwl		%r9w, %r8d
   0.39%  │    0x00007f4a93af9bf4:   xorl		0x4c(%rsp), %r8d
   0.49%  │    0x00007f4a93af9bf9:   xorl		%r8d, %r11d
   0.26%  │    0x00007f4a93af9bfc:   xorl		%r11d, %r10d
   0.26%  │    0x00007f4a93af9bff:   movzwl		0x16(%r14, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.62%  │    0x00007f4a93af9c05:   movzwl		0x16(%rdi, %rdx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.36%  │    0x00007f4a93af9c0b:   movzwl		0x16(%rbp, %rdx, 2), %r8d
   0.23%  │    0x00007f4a93af9c11:   leal		(%r11, %r9), %ebx
   0.33%  │    0x00007f4a93af9c15:   imull		%r8d, %ebx
   0.69%  │    0x00007f4a93af9c19:   imull		%r9d, %r11d
   0.49%  │    0x00007f4a93af9c1d:   addl		%ebx, %r11d
   0.33%  │    0x00007f4a93af9c20:   movzwl		%r11w, %r8d
   0.69%  │    0x00007f4a93af9c24:   xorl		%r8d, %r10d
   0.39%  │    0x00007f4a93af9c27:   xorl		%r10d, %r13d
   0.39%  │    0x00007f4a93af9c2a:   movzwl		0x1a(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.46%  │    0x00007f4a93af9c30:   movzwl		0x1a(%rdi, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.29%  │    0x00007f4a93af9c36:   movzwl		0x1a(%rbp, %rdx, 2), %r9d
   0.62%  │    0x00007f4a93af9c3c:   leal		(%r10, %r11), %r8d
   0.23%  │    0x00007f4a93af9c40:   imull		%r9d, %r8d
   0.33%  │    0x00007f4a93af9c44:   imull		%r11d, %r10d
   0.46%  │    0x00007f4a93af9c48:   addl		%r8d, %r10d
   0.56%  │    0x00007f4a93af9c4b:   movzwl		%r10w, %r11d
   0.20%  │    0x00007f4a93af9c4f:   xorl		%r11d, %r13d
   0.16%  │    0x00007f4a93af9c52:   movzwl		0x1c(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.33%  │    0x00007f4a93af9c58:   movzwl		0x1c(%rdi, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.69%  │    0x00007f4a93af9c5e:   movzwl		0x1c(%rbp, %rdx, 2), %r9d
   0.20%  │    0x00007f4a93af9c64:   leal		(%r10, %r11), %r8d
   0.39%  │    0x00007f4a93af9c68:   imull		%r9d, %r8d
   0.62%  │    0x00007f4a93af9c6c:   imull		%r11d, %r10d
   0.69%  │    0x00007f4a93af9c70:   addl		%r8d, %r10d
   0.26%  │    0x00007f4a93af9c73:   movzwl		%r10w, %r10d
   0.43%  │    0x00007f4a93af9c77:   xorl		%r10d, %r13d
   0.56%  │    0x00007f4a93af9c7a:   movzwl		0x1e(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.75%  │    0x00007f4a93af9c80:   movzwl		0x1e(%rdi, %rdx, 2), %r11d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.39%  │    0x00007f4a93af9c86:   movzwl		0x1e(%rbp, %rdx, 2), %r9d
   0.39%  │    0x00007f4a93af9c8c:   leal		(%r10, %r11), %r8d
   0.36%  │    0x00007f4a93af9c90:   imull		%r9d, %r8d
   0.29%  │    0x00007f4a93af9c94:   imull		%r11d, %r10d
   0.29%  │    0x00007f4a93af9c98:   addl		%r8d, %r10d
   0.20%  │    0x00007f4a93af9c9b:   movzwl		%r10w, %r11d
   0.33%  │    0x00007f4a93af9c9f:   xorl		%r11d, %r13d
   0.65%  │    0x00007f4a93af9ca2:   xorl		%r13d, %esi
   0.23%  │    0x00007f4a93af9ca5:   xorl		%esi, %eax
   0.20%  │    0x00007f4a93af9ca7:   vmovd		%xmm10, %r8d
   0.43%  │    0x00007f4a93af9cac:   xorl		%eax, %r8d
   0.72%  │    0x00007f4a93af9caf:   movzwl		0x26(%r14, %rdx, 2), %r10d
          │                                                              ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.20%  │    0x00007f4a93af9cb5:   movl		%r10d, %r11d
   0.26%  │    0x00007f4a93af9cb8:   imull		0x48(%rsp), %r11d
   0.29%  │    0x00007f4a93af9cbe:   addl		0x48(%rsp), %r10d
   0.56%  │    0x00007f4a93af9cc3:   imull		0x44(%rsp), %r10d
   0.23%  │    0x00007f4a93af9cc9:   addl		%r10d, %r11d
   0.36%  │    0x00007f4a93af9ccc:   movzwl		%r11w, %r11d
   0.33%  │    0x00007f4a93af9cd0:   xorl		%r11d, %r8d
   0.56%  │    0x00007f4a93af9cd3:   vmovd		%xmm7, %r10d
   0.36%  │    0x00007f4a93af9cd8:   xorl		%r8d, %r10d
   0.43%  │    0x00007f4a93af9cdb:   vmovd		%xmm8, %r11d
   0.59%  │    0x00007f4a93af9ce0:   xorl		%r10d, %r11d
   0.75%  │    0x00007f4a93af9ce3:   vmovd		%xmm5, %r10d
   0.39%  │    0x00007f4a93af9ce8:   xorl		%r11d, %r10d        ;   {other}
   1.05%  │    0x00007f4a93af9ceb:   vmovd		%xmm6, %r11d
   0.29%  │    0x00007f4a93af9cf0:   xorl		%r10d, %r11d        ;*ixor {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@59 (line 522)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   1.44%  │    0x00007f4a93af9cf3:   movl		%r11d, 0x4c(%rsp)
   0.79%  │    0x00007f4a93af9cf8:   addl		$0x10, %edx         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                              ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@62 (line 520)
          │                                                              ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.29%  │    0x00007f4a93af9cfb:   nopl		(%rax, %rax)
   0.23%  │    0x00007f4a93af9d00:   cmpl		0x54(%rsp), %edx
          ╰    0x00007f4a93af9d04:   jl		0x7f4a93af9a30      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                         ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@9 (line 520)
                                                                         ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
               0x00007f4a93af9d0a:   movq		0x30(%r15), %r10    ; ImmutableOopMap {rdi=Oop rbp=Oop r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop xmm3=Oop }
                                                                         ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                         ; - (reexecute) org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@65 (line 520)
                                                                         ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
               0x00007f4a93af9d0e:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                         ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@65 (line 520)
                                                                         ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
                                                                         ;   {poll}
   0.03%       0x00007f4a93af9d11:   cmpl		0x50(%rsp), %edx
               0x00007f4a93af9d15:   jl		0x7f4a93af99ef
               0x00007f4a93af9d1b:   nopl		(%rax, %rax)
               0x00007f4a93af9d20:   cmpl		0x40(%rsp), %edx
           ╭   0x00007f4a93af9d24:   jge		0x7f4a93af9d66
           │   0x00007f4a93af9d26:   nop		                    ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
           │                                                             ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@12 (line 521)
           │                                                             ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%   │↗  0x00007f4a93af9d28:   movzwl		0x10(%rbp, %rdx, 2), %r10d
           ││  0x00007f4a93af9d2e:   movzwl		0x10(%rdi, %rdx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
           ││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
           ││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%   ││  0x00007f4a93af9d34:   movzwl		0x10(%r14, %rdx, 2), %r11d
           ││                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
           ││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
           ││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
           ││  0x00007f4a93af9d3a:   movl		%r11d, %ecx
   0.07%   ││  0x00007f4a93af9d3d:   imull		%r8d, %ecx
   0.10%   ││  0x00007f4a93af9d41:   addl		%r8d, %r11d
   0.03%   ││  0x00007f4a93af9d44:   imull		%r11d, %r10d
           ││  0x00007f4a93af9d48:   addl		%r10d, %ecx
           ││  0x00007f4a93af9d4b:   movzwl		%cx, %r10d
   0.23%   ││  0x00007f4a93af9d4f:   movl		0x4c(%rsp), %r11d
   0.07%   ││  0x00007f4a93af9d54:   xorl		%r10d, %r11d        ;*ixor {reexecute=0 rethrow=0 return_oop=0}
           ││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@59 (line 522)
           ││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
           ││  0x00007f4a93af9d57:   movl		%r11d, 0x4c(%rsp)
   0.16%   ││  0x00007f4a93af9d5c:   incl		%edx                ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@62 (line 520)
           ││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%   ││  0x00007f4a93af9d5e:   nop
           ││  0x00007f4a93af9d60:   cmpl		0x40(%rsp), %edx
           │╰  0x00007f4a93af9d64:   jl		0x7f4a93af9d28
           ↘   0x00007f4a93af9d66:   vmovq		%xmm0, %rbx
               0x00007f4a93af9d6b:   vmovq		%xmm1, %r9
   0.03%       0x00007f4a93af9d70:   vmovq		%xmm2, %r8
               0x00007f4a93af9d75:   vmovq		%xmm3, %rax
               0x00007f4a93af9d7a:   vmovq		%xmm4, %rbp
               0x00007f4a93af9d7f:   movl		0x4c(%rsp), %r10d   ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                         ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@9 (line 520)
                                                                         ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
               0x00007f4a93af9d84:   movzbl		0x94(%rax), %ecx    ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                         ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@27 (line 123)
               0x00007f4a93af9d8b:   movq		0x30(%r15), %r11
               0x00007f4a93af9d8f:   incq		%rbp                ; ImmutableOopMap {r8=Oop r9=Oop rbx=Oop rax=Oop }
                                                                         ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
....................................................................................................
  75.84%  <total for region 1>
#+end_src
***** patch
#+begin_src bash
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub, version 5, compile id 579

                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@27 (line 123)
             0x00007fd98baf6169:   testl		%r10d, %r10d
             0x00007fd98baf616c:   jne		0x7fd98baf671f      ;*ifeq {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@30 (line 123)
             0x00007fd98baf6172:   movl		$1, %ebp
             0x00007fd98baf6177:   jmp		0x7fd98baf6629
             0x00007fd98baf617c:   nopl		(%rax)
          ↗  0x00007fd98baf6180:   vmovq		%xmm5, %rdi         ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@12 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%  │  0x00007fd98baf6185:   movzwl		0x10(%rdi, %rbx, 2), %r10d
   1.08%  │  0x00007fd98baf618b:   movl		%r10d, 0x44(%rsp)
   0.29%  │  0x00007fd98baf6190:   vmovq		%rdi, %xmm5
          │  0x00007fd98baf6195:   vmovq		%xmm14, %r10        ;   {other}
          │  0x00007fd98baf619a:   movzwl		0x10(%r10, %rbx, 2), %r10d
   1.11%  │  0x00007fd98baf61a0:   movl		%r10d, 0x48(%rsp)
   0.23%  │  0x00007fd98baf61a5:   vmovq		%xmm14, %r10
          │  0x00007fd98baf61aa:   movzwl		0x2e(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
          │  0x00007fd98baf61b0:   vmovq		%xmm13, %r10
   0.88%  │  0x00007fd98baf61b5:   movzwl		0x2e(%r10, %rbx, 2), %r10d
   0.23%  │  0x00007fd98baf61bb:   movzwl		0x2e(%rdi, %rbx, 2), %r9d
          │  0x00007fd98baf61c1:   leal		(%r11, %r10), %r8d
          │  0x00007fd98baf61c5:   imull		%r8d, %r9d
   0.88%  │  0x00007fd98baf61c9:   imull		%r10d, %r11d
   0.23%  │  0x00007fd98baf61cd:   addl		%r9d, %r11d
          │  0x00007fd98baf61d0:   movzwl		%r11w, %r10d
   0.29%  │  0x00007fd98baf61d4:   vmovd		%r10d, %xmm6
   1.18%  │  0x00007fd98baf61d9:   vmovq		%xmm13, %r10
   0.13%  │  0x00007fd98baf61de:   movzwl		0x2c(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%  │  0x00007fd98baf61e4:   vmovq		%xmm14, %r10
   0.03%  │  0x00007fd98baf61e9:   movzwl		0x2c(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   1.37%  │  0x00007fd98baf61ef:   movzwl		0x2c(%rdi, %rbx, 2), %r9d
   0.29%  │  0x00007fd98baf61f5:   leal		(%r11, %r10), %r8d
          │  0x00007fd98baf61f9:   imull		%r8d, %r9d
   0.03%  │  0x00007fd98baf61fd:   imull		%r10d, %r11d
   0.95%  │  0x00007fd98baf6201:   addl		%r9d, %r11d
   0.26%  │  0x00007fd98baf6204:   movzwl		%r11w, %r10d
   0.46%  │  0x00007fd98baf6208:   vmovd		%r10d, %xmm8
   0.13%  │  0x00007fd98baf620d:   vmovq		%xmm13, %r10
   0.98%  │  0x00007fd98baf6212:   movzwl		0x2a(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.03%  │  0x00007fd98baf6218:   vmovq		%xmm14, %r10
          │  0x00007fd98baf621d:   movzwl		0x2a(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.03%  │  0x00007fd98baf6223:   movzwl		0x2a(%rdi, %rbx, 2), %r9d
   1.05%  │  0x00007fd98baf6229:   leal		(%r11, %r10), %r8d
   0.16%  │  0x00007fd98baf622d:   imull		%r9d, %r8d
          │  0x00007fd98baf6231:   imull		%r10d, %r11d
   0.10%  │  0x00007fd98baf6235:   addl		%r8d, %r11d
   1.24%  │  0x00007fd98baf6238:   movzwl		%r11w, %r10d
   0.39%  │  0x00007fd98baf623c:   vmovd		%r10d, %xmm7
   0.33%  │  0x00007fd98baf6241:   vmovq		%xmm13, %r10
          │  0x00007fd98baf6246:   movzwl		0x28(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.95%  │  0x00007fd98baf624c:   vmovq		%xmm14, %r10
   0.03%  │  0x00007fd98baf6251:   movzwl		0x28(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%  │  0x00007fd98baf6257:   movzwl		0x28(%rdi, %rbx, 2), %r9d
   0.03%  │  0x00007fd98baf625d:   leal		(%r11, %r10), %r8d
   0.75%  │  0x00007fd98baf6261:   imull		%r9d, %r8d
   0.13%  │  0x00007fd98baf6265:   imull		%r10d, %r11d
   0.03%  │  0x00007fd98baf6269:   addl		%r8d, %r11d
   0.26%  │  0x00007fd98baf626c:   movzwl		%r11w, %r10d
   2.03%  │  0x00007fd98baf6270:   vmovd		%r10d, %xmm10
   0.23%  │  0x00007fd98baf6275:   vmovq		%xmm13, %r10
   0.07%  │  0x00007fd98baf627a:   movzwl		0x26(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.03%  │  0x00007fd98baf6280:   vmovq		%xmm14, %r10
   0.92%  │  0x00007fd98baf6285:   movzwl		0x26(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.16%  │  0x00007fd98baf628b:   movzwl		0x26(%rdi, %rbx, 2), %r9d
   0.10%  │  0x00007fd98baf6291:   leal		(%r11, %r10), %r8d  ;   {other}
   0.03%  │  0x00007fd98baf6295:   imull		%r9d, %r8d
   1.05%  │  0x00007fd98baf6299:   imull		%r10d, %r11d
   0.16%  │  0x00007fd98baf629d:   addl		%r8d, %r11d
   0.23%  │  0x00007fd98baf62a0:   movzwl		%r11w, %r10d
   0.10%  │  0x00007fd98baf62a4:   vmovd		%r10d, %xmm9
   1.14%  │  0x00007fd98baf62a9:   vmovq		%xmm13, %r10
   0.10%  │  0x00007fd98baf62ae:   movzwl		0x24(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%  │  0x00007fd98baf62b4:   vmovq		%xmm14, %r10
   0.03%  │  0x00007fd98baf62b9:   movzwl		0x24(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.82%  │  0x00007fd98baf62bf:   movzwl		0x24(%rdi, %rbx, 2), %r9d
   0.13%  │  0x00007fd98baf62c5:   leal		(%r11, %r10), %r8d
   0.13%  │  0x00007fd98baf62c9:   imull		%r9d, %r8d
          │  0x00007fd98baf62cd:   imull		%r10d, %r11d
   1.08%  │  0x00007fd98baf62d1:   addl		%r8d, %r11d
   0.13%  │  0x00007fd98baf62d4:   movzwl		%r11w, %r10d
   0.20%  │  0x00007fd98baf62d8:   vmovd		%r10d, %xmm12
   0.10%  │  0x00007fd98baf62dd:   vmovq		%xmm13, %r10
   0.75%  │  0x00007fd98baf62e2:   movzwl		0x22(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%  │  0x00007fd98baf62e8:   vmovq		%xmm14, %r10
   0.07%  │  0x00007fd98baf62ed:   movzwl		0x22(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
          │  0x00007fd98baf62f3:   movzwl		0x22(%rdi, %rbx, 2), %r9d
   0.75%  │  0x00007fd98baf62f9:   leal		(%r11, %r10), %r8d
   0.16%  │  0x00007fd98baf62fd:   imull		%r9d, %r8d
   0.10%  │  0x00007fd98baf6301:   imull		%r10d, %r11d
   0.07%  │  0x00007fd98baf6305:   addl		%r8d, %r11d
   1.21%  │  0x00007fd98baf6308:   movzwl		%r11w, %edi
   0.10%  │  0x00007fd98baf630c:   vmovq		%xmm13, %r10
   0.10%  │  0x00007fd98baf6311:   movzwl		0x20(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
          │  0x00007fd98baf6317:   vmovq		%xmm14, %r11
   0.85%  │  0x00007fd98baf631c:   movzwl		0x20(%r11, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.16%  │  0x00007fd98baf6322:   vmovq		%xmm5, %r8
   0.03%  │  0x00007fd98baf6327:   movzwl		0x20(%r8, %rbx, 2), %r9d
   0.10%  │  0x00007fd98baf632d:   leal		(%r10, %r11), %r8d
   1.05%  │  0x00007fd98baf6331:   imull		%r9d, %r8d
   0.13%  │  0x00007fd98baf6335:   imull		%r11d, %r10d
   0.10%  │  0x00007fd98baf6339:   addl		%r8d, %r10d
   0.10%  │  0x00007fd98baf633c:   movzwl		%r10w, %edx
   1.18%  │  0x00007fd98baf6340:   vmovq		%xmm13, %r10
          │  0x00007fd98baf6345:   movzwl		0x1e(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.13%  │  0x00007fd98baf634b:   vmovq		%xmm14, %r11
   0.03%  │  0x00007fd98baf6350:   movzwl		0x1e(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.88%  │  0x00007fd98baf6356:   vmovq		%xmm5, %r11
   0.20%  │  0x00007fd98baf635b:   movzwl		0x1e(%r11, %rbx, 2), %r11d
   0.20%  │  0x00007fd98baf6361:   leal		(%r10, %r8), %ecx
   0.13%  │  0x00007fd98baf6365:   imull		%r11d, %ecx
   1.05%  │  0x00007fd98baf6369:   imull		%r8d, %r10d
   0.13%  │  0x00007fd98baf636d:   addl		%ecx, %r10d
   0.16%  │  0x00007fd98baf6370:   movzwl		%r10w, %eax
   0.20%  │  0x00007fd98baf6374:   vmovq		%xmm13, %r10
   1.11%  │  0x00007fd98baf6379:   movzwl		0x1c(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.13%  │  0x00007fd98baf637f:   vmovq		%xmm14, %r11
   0.10%  │  0x00007fd98baf6384:   movzwl		0x1c(%r11, %rbx, 2), %r8d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.03%  │  0x00007fd98baf638a:   vmovq		%xmm5, %r11
   0.88%  │  0x00007fd98baf638f:   movzwl		0x1c(%r11, %rbx, 2), %r11d
          │                                                            ;   {other}
   0.13%  │  0x00007fd98baf6395:   leal		(%r10, %r8), %ecx
   0.23%  │  0x00007fd98baf6399:   imull		%r11d, %ecx
   0.16%  │  0x00007fd98baf639d:   imull		%r8d, %r10d
   1.01%  │  0x00007fd98baf63a1:   addl		%ecx, %r10d
   0.13%  │  0x00007fd98baf63a4:   movzwl		%r10w, %r8d
   0.20%  │  0x00007fd98baf63a8:   vmovq		%xmm13, %r10
   0.13%  │  0x00007fd98baf63ad:   movzwl		0x1a(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   1.14%  │  0x00007fd98baf63b3:   vmovq		%xmm14, %r11
   0.03%  │  0x00007fd98baf63b8:   movzwl		0x1a(%r11, %rbx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.13%  │  0x00007fd98baf63be:   vmovq		%xmm5, %r11
   0.07%  │  0x00007fd98baf63c3:   movzwl		0x1a(%r11, %rbx, 2), %r11d
   1.34%  │  0x00007fd98baf63c9:   leal		(%r10, %r9), %esi
   0.20%  │  0x00007fd98baf63cd:   imull		%r11d, %esi
   0.10%  │  0x00007fd98baf63d1:   imull		%r9d, %r10d
   0.10%  │  0x00007fd98baf63d5:   addl		%esi, %r10d
   0.98%  │  0x00007fd98baf63d8:   movzwl		%r10w, %ebp
   0.16%  │  0x00007fd98baf63dc:   vmovq		%xmm13, %r10
   0.13%  │  0x00007fd98baf63e1:   movzwl		0x18(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%  │  0x00007fd98baf63e7:   vmovq		%xmm14, %r11
   1.31%  │  0x00007fd98baf63ec:   movzwl		0x18(%r11, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.20%  │  0x00007fd98baf63f2:   vmovq		%xmm5, %r9
   0.16%  │  0x00007fd98baf63f7:   movzwl		0x18(%r9, %rbx, 2), %r9d
          │  0x00007fd98baf63fd:   leal		(%r10, %r11), %ecx
   1.01%  │  0x00007fd98baf6401:   imull		%r9d, %ecx
   0.07%  │  0x00007fd98baf6405:   imull		%r11d, %r10d
   0.10%  │  0x00007fd98baf6409:   addl		%ecx, %r10d
          │  0x00007fd98baf640c:   movzwl		%r10w, %r13d
   1.27%  │  0x00007fd98baf6410:   vmovq		%xmm13, %r10
   0.20%  │  0x00007fd98baf6415:   movzwl		0x16(%r10, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.16%  │  0x00007fd98baf641b:   vmovq		%xmm14, %r10
   0.07%  │  0x00007fd98baf6420:   movzwl		0x16(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   1.01%  │  0x00007fd98baf6426:   vmovq		%xmm5, %r9
   0.10%  │  0x00007fd98baf642b:   movzwl		0x16(%r9, %rbx, 2), %ecx
   0.10%  │  0x00007fd98baf6431:   leal		(%r11, %r10), %r9d
   0.07%  │  0x00007fd98baf6435:   imull		%ecx, %r9d
   0.82%  │  0x00007fd98baf6439:   imull		%r10d, %r11d
   0.10%  │  0x00007fd98baf643d:   addl		%r9d, %r11d
   0.10%  │  0x00007fd98baf6440:   movzwl		%r11w, %esi
   0.07%  │  0x00007fd98baf6444:   vmovq		%xmm13, %r10
   1.08%  │  0x00007fd98baf6449:   movzwl		0x14(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%  │  0x00007fd98baf644f:   vmovq		%xmm14, %r11
   0.20%  │  0x00007fd98baf6454:   movzwl		0x14(%r11, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.10%  │  0x00007fd98baf645a:   vmovq		%xmm5, %r9
   0.98%  │  0x00007fd98baf645f:   movzwl		0x14(%r9, %rbx, 2), %r9d
   0.10%  │  0x00007fd98baf6465:   leal		(%r10, %r11), %ecx
   0.20%  │  0x00007fd98baf6469:   imull		%r9d, %ecx
   0.07%  │  0x00007fd98baf646d:   imull		%r11d, %r10d
   0.92%  │  0x00007fd98baf6471:   addl		%ecx, %r10d
   0.20%  │  0x00007fd98baf6474:   movzwl		%r10w, %r14d
   0.07%  │  0x00007fd98baf6478:   vmovq		%xmm13, %r10
   0.10%  │  0x00007fd98baf647d:   movzwl		0x12(%r10, %rbx, 2), %r10d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.59%  │  0x00007fd98baf6483:   vmovq		%xmm14, %r11
   0.13%  │  0x00007fd98baf6488:   movzwl		0x12(%r11, %rbx, 2), %r11d
          │                                                            ;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@23 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%  │  0x00007fd98baf648e:   vmovq		%xmm5, %r9          ;   {other}
   0.13%  │  0x00007fd98baf6493:   movzwl		0x12(%r9, %rbx, 2), %ecx
   1.11%  │  0x00007fd98baf6499:   leal		(%r10, %r11), %r9d
   0.07%  │  0x00007fd98baf649d:   imull		%ecx, %r9d
   0.07%  │  0x00007fd98baf64a1:   imull		%r11d, %r10d
   0.10%  │  0x00007fd98baf64a5:   addl		%r9d, %r10d
   0.78%  │  0x00007fd98baf64a8:   movzwl		%r10w, %r10d
   0.16%  │  0x00007fd98baf64ac:   vmovq		%xmm13, %r11
   0.10%  │  0x00007fd98baf64b1:   movzwl		0x10(%r11, %rbx, 2), %r9d;*caload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@36 (line 521)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.07%  │  0x00007fd98baf64b7:   movl		%r9d, %r11d
   1.08%  │  0x00007fd98baf64ba:   imull		0x48(%rsp), %r11d
   0.03%  │  0x00007fd98baf64c0:   addl		0x48(%rsp), %r9d
   0.10%  │  0x00007fd98baf64c5:   imull		0x44(%rsp), %r9d
   0.10%  │  0x00007fd98baf64cb:   addl		%r9d, %r11d
   1.05%  │  0x00007fd98baf64ce:   movzwl		%r11w, %r9d
   0.20%  │  0x00007fd98baf64d2:   xorl		%r9d, %r10d
   0.26%  │  0x00007fd98baf64d5:   xorl		%r10d, %r14d
   0.46%  │  0x00007fd98baf64d8:   xorl		%r14d, %esi
   2.62%  │  0x00007fd98baf64db:   xorl		%esi, %r13d
   0.82%  │  0x00007fd98baf64de:   xorl		%r13d, %ebp
   1.14%  │  0x00007fd98baf64e1:   xorl		%ebp, %r8d
   1.90%  │  0x00007fd98baf64e4:   xorl		%r8d, %eax
   1.11%  │  0x00007fd98baf64e7:   xorl		%eax, %edx
   7.68%  │  0x00007fd98baf64e9:   xorl		%edx, %edi
   1.24%  │  0x00007fd98baf64eb:   vmovd		%xmm12, %r10d
   0.29%  │  0x00007fd98baf64f0:   xorl		%edi, %r10d
   2.29%  │  0x00007fd98baf64f3:   vmovd		%xmm9, %r11d
   0.78%  │  0x00007fd98baf64f8:   xorl		%r10d, %r11d
   2.39%  │  0x00007fd98baf64fb:   vmovd		%xmm10, %r10d
   0.20%  │  0x00007fd98baf6500:   xorl		%r11d, %r10d
   2.48%  │  0x00007fd98baf6503:   vmovd		%xmm7, %r11d
   0.36%  │  0x00007fd98baf6508:   xorl		%r10d, %r11d
   1.14%  │  0x00007fd98baf650b:   vmovd		%xmm8, %r10d
   0.03%  │  0x00007fd98baf6510:   xorl		%r11d, %r10d
   1.31%  │  0x00007fd98baf6513:   vmovd		%xmm6, %r11d
   0.26%  │  0x00007fd98baf6518:   xorl		%r10d, %r11d
   2.12%  │  0x00007fd98baf651b:   vmovd		%xmm11, %r10d
   0.03%  │  0x00007fd98baf6520:   xorl		%r11d, %r10d        ;*ixor {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@59 (line 522)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   1.14%  │  0x00007fd98baf6523:   vmovd		%r10d, %xmm11
   2.22%  │  0x00007fd98baf6528:   addl		$0x10, %ebx         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@62 (line 520)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
   0.23%  │  0x00007fd98baf652b:   cmpl		0x50(%rsp), %ebx
          ╰  0x00007fd98baf652f:   jl		0x7fd98baf6180      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@9 (line 520)
                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
             0x00007fd98baf6535:   movq		0x30(%r15), %r10    ; ImmutableOopMap {xmm0=Oop xmm1=Oop xmm2=Oop xmm3=Oop xmm5=Oop xmm13=Oop xmm14=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.vm.compiler.VectorReduction2::charXorBig@65 (line 520)
                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_charXorBig_jmhTest::charXorBig_thrpt_jmhStub@17 (line 121)
             0x00007fd98baf6539:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
....................................................................................................
  96.18%  <total for region 1>
#+end_src
** no superword float max
*** base
Branchlful based around
#+begin_src bash
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N72 strip mined) Freq: 1.04898e+08
  0x00007fe31cade1d0:   vmovss		0x4c(%rsi, %r10, 4), %xmm16
  0x00007fe31cade1d8:   vmovss		0x48(%rsi, %r10, 4), %xmm17
  0x00007fe31cade1e0:   vmovss		0x10(%rsi, %r10, 4), %xmm2
  0x00007fe31cade1e7:   vmovss		0x14(%rsi, %r10, 4), %xmm1
  0x00007fe31cade1ee:   vmovss		0x18(%rsi, %r10, 4), %xmm4
  0x00007fe31cade1f5:   vmovss		0x1c(%rsi, %r10, 4), %xmm3
  0x00007fe31cade1fc:   vmovss		0x20(%rsi, %r10, 4), %xmm6
  0x00007fe31cade203:   vmovss		0x24(%rsi, %r10, 4), %xmm5
  0x00007fe31cade20a:   vmovss		0x28(%rsi, %r10, 4), %xmm8
  0x00007fe31cade211:   vmovss		0x2c(%rsi, %r10, 4), %xmm7
  0x00007fe31cade218:   vmovss		0x30(%rsi, %r10, 4), %xmm10
  0x00007fe31cade21f:   vmovss		0x34(%rsi, %r10, 4), %xmm9
  0x00007fe31cade226:   vmovss		0x38(%rsi, %r10, 4), %xmm12
  0x00007fe31cade22d:   vmovss		0x3c(%rsi, %r10, 4), %xmm11
  0x00007fe31cade234:   vmovss		0x40(%rsi, %r10, 4), %xmm14
  0x00007fe31cade23b:   vmovss		0x44(%rsi, %r10, 4), %xmm13
  0x00007fe31cade242:   vucomiss		%xmm2, %xmm0
  0x00007fe31cade246:   ja		0x7fe31cade27f
  0x00007fe31cade248:   jp		0x7fe31cade26b
  0x00007fe31cade24a:   jb		0x7fe31cade27b
  0x00007fe31cade24c:   vpxor		%xmm15, %xmm15, %xmm15
  0x00007fe31cade251:   vucomiss		%xmm15, %xmm0
  0x00007fe31cade256:   je		0x7fe31cade25d
  0x00007fe31cade258:   jmp		0x7fe31cade27f      ;   {other}
  0x00007fe31cade25d:   vpand		%xmm2, %xmm0, %xmm0
  0x00007fe31cade261:   jmp		0x7fe31cade27f
  0x00007fe31cade266:   jmp		0x7fe31cade27f
  0x00007fe31cade26b:   movl		$0x7fc00000, %r11d
  0x00007fe31cade271:   vmovd		%r11d, %xmm0
  0x00007fe31cade276:   jmp		0x7fe31cade27f
  0x00007fe31cade27b:   vmovaps		%xmm2, %xmm0
  0x00007fe31cade27f:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade283:   ja		0x7fe31cade2ba
  0x00007fe31cade285:   jp		0x7fe31cade2a8
  0x00007fe31cade287:   jb		0x7fe31cade2b6
  0x00007fe31cade289:   vpxor		%xmm15, %xmm15, %xmm15
  0x00007fe31cade28e:   vucomiss		%xmm15, %xmm0
  0x00007fe31cade293:   je		0x7fe31cade29a
  0x00007fe31cade295:   jmp		0x7fe31cade2ba
  0x00007fe31cade29a:   vpand		%xmm1, %xmm0, %xmm0
  0x00007fe31cade29e:   jmp		0x7fe31cade2ba
  0x00007fe31cade2a3:   jmp		0x7fe31cade2ba
  0x00007fe31cade2a8:   movl		$0x7fc00000, %ebp
  0x00007fe31cade2ad:   vmovd		%ebp, %xmm0
  0x00007fe31cade2b1:   jmp		0x7fe31cade2ba
  0x00007fe31cade2b6:   vmovaps		%xmm1, %xmm0
  0x00007fe31cade2ba:   vucomiss		%xmm4, %xmm0
  0x00007fe31cade2be:   ja		0x7fe31cade2f3
  0x00007fe31cade2c0:   jp		0x7fe31cade2e1
  0x00007fe31cade2c2:   jb		0x7fe31cade2ef
  0x00007fe31cade2c4:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade2c8:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade2cc:   je		0x7fe31cade2d3
  0x00007fe31cade2ce:   jmp		0x7fe31cade2f3
  0x00007fe31cade2d3:   vpand		%xmm4, %xmm0, %xmm0
  0x00007fe31cade2d7:   jmp		0x7fe31cade2f3
  0x00007fe31cade2dc:   jmp		0x7fe31cade2f3
  0x00007fe31cade2e1:   movl		$0x7fc00000, %ebp
  0x00007fe31cade2e6:   vmovd		%ebp, %xmm0
  0x00007fe31cade2ea:   jmp		0x7fe31cade2f3
  0x00007fe31cade2ef:   vmovaps		%xmm4, %xmm0
  0x00007fe31cade2f3:   vucomiss		%xmm3, %xmm0
  0x00007fe31cade2f7:   ja		0x7fe31cade32c
  0x00007fe31cade2f9:   jp		0x7fe31cade31a
  0x00007fe31cade2fb:   jb		0x7fe31cade328
  0x00007fe31cade2fd:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade301:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade305:   je		0x7fe31cade30c
  0x00007fe31cade307:   jmp		0x7fe31cade32c
  0x00007fe31cade30c:   vpand		%xmm3, %xmm0, %xmm0
  0x00007fe31cade310:   jmp		0x7fe31cade32c
  0x00007fe31cade315:   jmp		0x7fe31cade32c
  0x00007fe31cade31a:   movl		$0x7fc00000, %ebp
  0x00007fe31cade31f:   vmovd		%ebp, %xmm0
  0x00007fe31cade323:   jmp		0x7fe31cade32c
  0x00007fe31cade328:   vmovaps		%xmm3, %xmm0
  0x00007fe31cade32c:   vucomiss		%xmm6, %xmm0
  0x00007fe31cade330:   ja		0x7fe31cade365
  0x00007fe31cade332:   jp		0x7fe31cade353
  0x00007fe31cade334:   jb		0x7fe31cade361
  0x00007fe31cade336:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade33a:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade33e:   je		0x7fe31cade345
  0x00007fe31cade340:   jmp		0x7fe31cade365
  0x00007fe31cade345:   vpand		%xmm6, %xmm0, %xmm0
  0x00007fe31cade349:   jmp		0x7fe31cade365
  0x00007fe31cade34e:   jmp		0x7fe31cade365
  0x00007fe31cade353:   movl		$0x7fc00000, %ebp
  0x00007fe31cade358:   vmovd		%ebp, %xmm0         ;   {other}
  0x00007fe31cade35c:   jmp		0x7fe31cade365
  0x00007fe31cade361:   vmovaps		%xmm6, %xmm0
  0x00007fe31cade365:   vucomiss		%xmm5, %xmm0
  0x00007fe31cade369:   ja		0x7fe31cade39e
  0x00007fe31cade36b:   jp		0x7fe31cade38c
  0x00007fe31cade36d:   jb		0x7fe31cade39a
  0x00007fe31cade36f:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade373:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade377:   je		0x7fe31cade37e
  0x00007fe31cade379:   jmp		0x7fe31cade39e
  0x00007fe31cade37e:   vpand		%xmm5, %xmm0, %xmm0
  0x00007fe31cade382:   jmp		0x7fe31cade39e
  0x00007fe31cade387:   jmp		0x7fe31cade39e
  0x00007fe31cade38c:   movl		$0x7fc00000, %ebp
  0x00007fe31cade391:   vmovd		%ebp, %xmm0
  0x00007fe31cade395:   jmp		0x7fe31cade39e
  0x00007fe31cade39a:   vmovaps		%xmm5, %xmm0
  0x00007fe31cade39e:   vucomiss		%xmm8, %xmm0
  0x00007fe31cade3a3:   ja		0x7fe31cade3da
  0x00007fe31cade3a5:   jp		0x7fe31cade3c7
  0x00007fe31cade3a7:   jb		0x7fe31cade3d5
  0x00007fe31cade3a9:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade3ad:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade3b1:   je		0x7fe31cade3b8
  0x00007fe31cade3b3:   jmp		0x7fe31cade3da
  0x00007fe31cade3b8:   vpand		%xmm8, %xmm0, %xmm0
  0x00007fe31cade3bd:   jmp		0x7fe31cade3da
  0x00007fe31cade3c2:   jmp		0x7fe31cade3da
  0x00007fe31cade3c7:   movl		$0x7fc00000, %ebp
  0x00007fe31cade3cc:   vmovd		%ebp, %xmm0
  0x00007fe31cade3d0:   jmp		0x7fe31cade3da
  0x00007fe31cade3d5:   vmovaps		%xmm8, %xmm0
  0x00007fe31cade3da:   vucomiss		%xmm7, %xmm0
  0x00007fe31cade3de:   ja		0x7fe31cade413
  0x00007fe31cade3e0:   jp		0x7fe31cade401
  0x00007fe31cade3e2:   jb		0x7fe31cade40f
  0x00007fe31cade3e4:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade3e8:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade3ec:   je		0x7fe31cade3f3
  0x00007fe31cade3ee:   jmp		0x7fe31cade413
  0x00007fe31cade3f3:   vpand		%xmm7, %xmm0, %xmm0
  0x00007fe31cade3f7:   jmp		0x7fe31cade413
  0x00007fe31cade3fc:   jmp		0x7fe31cade413
  0x00007fe31cade401:   movl		$0x7fc00000, %ebp
  0x00007fe31cade406:   vmovd		%ebp, %xmm0
  0x00007fe31cade40a:   jmp		0x7fe31cade413
  0x00007fe31cade40f:   vmovaps		%xmm7, %xmm0
  0x00007fe31cade413:   vucomiss		%xmm10, %xmm0
  0x00007fe31cade418:   ja		0x7fe31cade44f
  0x00007fe31cade41a:   jp		0x7fe31cade43c
  0x00007fe31cade41c:   jb		0x7fe31cade44a
  0x00007fe31cade41e:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade422:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade426:   je		0x7fe31cade42d
  0x00007fe31cade428:   jmp		0x7fe31cade44f
  0x00007fe31cade42d:   vpand		%xmm10, %xmm0, %xmm0
  0x00007fe31cade432:   jmp		0x7fe31cade44f
  0x00007fe31cade437:   jmp		0x7fe31cade44f
  0x00007fe31cade43c:   movl		$0x7fc00000, %ebp
  0x00007fe31cade441:   vmovd		%ebp, %xmm0
  0x00007fe31cade445:   jmp		0x7fe31cade44f
  0x00007fe31cade44a:   vmovaps		%xmm10, %xmm0
  0x00007fe31cade44f:   vucomiss		%xmm9, %xmm0
  0x00007fe31cade454:   ja		0x7fe31cade48b
  0x00007fe31cade456:   jp		0x7fe31cade478      ;   {other}
  0x00007fe31cade458:   jb		0x7fe31cade486
  0x00007fe31cade45a:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade45e:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade462:   je		0x7fe31cade469
  0x00007fe31cade464:   jmp		0x7fe31cade48b
  0x00007fe31cade469:   vpand		%xmm9, %xmm0, %xmm0
  0x00007fe31cade46e:   jmp		0x7fe31cade48b
  0x00007fe31cade473:   jmp		0x7fe31cade48b
  0x00007fe31cade478:   movl		$0x7fc00000, %ebp
  0x00007fe31cade47d:   vmovd		%ebp, %xmm0
  0x00007fe31cade481:   jmp		0x7fe31cade48b
  0x00007fe31cade486:   vmovaps		%xmm9, %xmm0
  0x00007fe31cade48b:   vucomiss		%xmm12, %xmm0
  0x00007fe31cade490:   ja		0x7fe31cade4c7
  0x00007fe31cade492:   jp		0x7fe31cade4b4
  0x00007fe31cade494:   jb		0x7fe31cade4c2
  0x00007fe31cade496:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade49a:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade49e:   je		0x7fe31cade4a5
  0x00007fe31cade4a0:   jmp		0x7fe31cade4c7
  0x00007fe31cade4a5:   vpand		%xmm12, %xmm0, %xmm0
  0x00007fe31cade4aa:   jmp		0x7fe31cade4c7
  0x00007fe31cade4af:   jmp		0x7fe31cade4c7
  0x00007fe31cade4b4:   movl		$0x7fc00000, %ebp
  0x00007fe31cade4b9:   vmovd		%ebp, %xmm0
  0x00007fe31cade4bd:   jmp		0x7fe31cade4c7
  0x00007fe31cade4c2:   vmovaps		%xmm12, %xmm0
  0x00007fe31cade4c7:   vucomiss		%xmm11, %xmm0
  0x00007fe31cade4cc:   ja		0x7fe31cade503
  0x00007fe31cade4ce:   jp		0x7fe31cade4f0
  0x00007fe31cade4d0:   jb		0x7fe31cade4fe
  0x00007fe31cade4d2:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade4d6:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade4da:   je		0x7fe31cade4e1
  0x00007fe31cade4dc:   jmp		0x7fe31cade503
  0x00007fe31cade4e1:   vpand		%xmm11, %xmm0, %xmm0
  0x00007fe31cade4e6:   jmp		0x7fe31cade503
  0x00007fe31cade4eb:   jmp		0x7fe31cade503
  0x00007fe31cade4f0:   movl		$0x7fc00000, %ebp
  0x00007fe31cade4f5:   vmovd		%ebp, %xmm0
  0x00007fe31cade4f9:   jmp		0x7fe31cade503
  0x00007fe31cade4fe:   vmovaps		%xmm11, %xmm0
  0x00007fe31cade503:   vucomiss		%xmm14, %xmm0
  0x00007fe31cade508:   ja		0x7fe31cade53f
  0x00007fe31cade50a:   jp		0x7fe31cade52c
  0x00007fe31cade50c:   jb		0x7fe31cade53a
  0x00007fe31cade50e:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade512:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade516:   je		0x7fe31cade51d
  0x00007fe31cade518:   jmp		0x7fe31cade53f
  0x00007fe31cade51d:   vpand		%xmm14, %xmm0, %xmm0
  0x00007fe31cade522:   jmp		0x7fe31cade53f
  0x00007fe31cade527:   jmp		0x7fe31cade53f
  0x00007fe31cade52c:   movl		$0x7fc00000, %ebp
  0x00007fe31cade531:   vmovd		%ebp, %xmm0
  0x00007fe31cade535:   jmp		0x7fe31cade53f
  0x00007fe31cade53a:   vmovaps		%xmm14, %xmm0
  0x00007fe31cade53f:   vucomiss		%xmm13, %xmm0
  0x00007fe31cade544:   ja		0x7fe31cade57b
  0x00007fe31cade546:   jp		0x7fe31cade568
  0x00007fe31cade548:   jb		0x7fe31cade576
  0x00007fe31cade54a:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade54e:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade552:   je		0x7fe31cade559
  0x00007fe31cade554:   jmp		0x7fe31cade57b      ;   {other}
  0x00007fe31cade559:   vpand		%xmm13, %xmm0, %xmm0
  0x00007fe31cade55e:   jmp		0x7fe31cade57b
  0x00007fe31cade563:   jmp		0x7fe31cade57b
  0x00007fe31cade568:   movl		$0x7fc00000, %ebp
  0x00007fe31cade56d:   vmovd		%ebp, %xmm0
  0x00007fe31cade571:   jmp		0x7fe31cade57b
  0x00007fe31cade576:   vmovaps		%xmm13, %xmm0
  0x00007fe31cade57b:   vmovaps		%xmm17, %xmm3
  0x00007fe31cade581:   vucomiss		%xmm3, %xmm0
  0x00007fe31cade585:   ja		0x7fe31cade5a7
  0x00007fe31cade587:   jp		0x7fe31cade5b0
  0x00007fe31cade589:   jb		0x7fe31cade5be
  0x00007fe31cade58b:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007fe31cade58f:   vucomiss		%xmm1, %xmm0
  0x00007fe31cade593:   je		0x7fe31cade59e
  0x00007fe31cade595:   vmovaps		%xmm0, %xmm1
  0x00007fe31cade599:   jmp		0x7fe31cade5c2
  0x00007fe31cade59e:   vpand		%xmm3, %xmm0, %xmm1
  0x00007fe31cade5a2:   jmp		0x7fe31cade5c2
  0x00007fe31cade5a7:   vmovaps		%xmm0, %xmm1
  0x00007fe31cade5ab:   jmp		0x7fe31cade5c2
  0x00007fe31cade5b0:   movl		$0x7fc00000, %eax
  0x00007fe31cade5b5:   vmovd		%eax, %xmm1
  0x00007fe31cade5b9:   jmp		0x7fe31cade5c2
  0x00007fe31cade5be:   vmovaps		%xmm3, %xmm1
  0x00007fe31cade5c2:   vmovaps		%xmm16, %xmm0
  0x00007fe31cade5c8:   vucomiss		%xmm0, %xmm1
  0x00007fe31cade5cc:   ja		0x7fe31cade5ee
  0x00007fe31cade5ce:   jp		0x7fe31cade5f7
  0x00007fe31cade5d0:   jb		0x7fe31cade605
  0x00007fe31cade5d2:   vpxor		%xmm2, %xmm2, %xmm2
  0x00007fe31cade5d6:   vucomiss		%xmm2, %xmm1
  0x00007fe31cade5da:   je		0x7fe31cade5e5
  0x00007fe31cade5dc:   vmovaps		%xmm1, %xmm0
  0x00007fe31cade5e0:   jmp		0x7fe31cade605
  0x00007fe31cade5e5:   vpand		%xmm0, %xmm1, %xmm0
  0x00007fe31cade5e9:   jmp		0x7fe31cade605
  0x00007fe31cade5ee:   vmovaps		%xmm1, %xmm0
  0x00007fe31cade5f2:   jmp		0x7fe31cade605
  0x00007fe31cade5f7:   movl		$0x7fc00000, %edx
  0x00007fe31cade5fc:   vmovd		%edx, %xmm0
  0x00007fe31cade600:   jmp		0x7fe31cade605      ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestFloatMax::test@17 (line 22)
  0x00007fe31cade605:   addl		$0x10, %r10d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestFloatMax::test@21 (line 20)
  0x00007fe31cade609:   cmpl		%ebx, %r10d
  0x00007fe31cade60c:   jl		0x7fe31cade1d0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestFloatMax::test@8 (line 20)
#+end_src
*** patch
Branchless based around vmaxps
#+begin_src bash
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N72 strip mined) Freq: 1.04898e+08
  0x00007f61bcade0d0:   vmovss		0x4c(%rsi, %rbx, 4), %xmm16
  0x00007f61bcade0d8:   vmovss		0x48(%rsi, %rbx, 4), %xmm17
  0x00007f61bcade0e0:   vmovss		0x10(%rsi, %rbx, 4), %xmm1
  0x00007f61bcade0e6:   vmovss		0x14(%rsi, %rbx, 4), %xmm0
  0x00007f61bcade0ec:   vmovss		0x18(%rsi, %rbx, 4), %xmm3
  0x00007f61bcade0f2:   vmovss		0x1c(%rsi, %rbx, 4), %xmm2
  0x00007f61bcade0f8:   vmovss		0x20(%rsi, %rbx, 4), %xmm5
  0x00007f61bcade0fe:   vmovss		0x24(%rsi, %rbx, 4), %xmm4
  0x00007f61bcade104:   vmovss		0x28(%rsi, %rbx, 4), %xmm7
  0x00007f61bcade10a:   vmovss		0x2c(%rsi, %rbx, 4), %xmm6
  0x00007f61bcade110:   vmovss		0x30(%rsi, %rbx, 4), %xmm9
  0x00007f61bcade116:   vmovss		0x34(%rsi, %rbx, 4), %xmm8
  0x00007f61bcade11c:   vmovss		0x38(%rsi, %rbx, 4), %xmm11
  0x00007f61bcade122:   vmovss		0x3c(%rsi, %rbx, 4), %xmm10
  0x00007f61bcade128:   vmovss		0x40(%rsi, %rbx, 4), %xmm19
  0x00007f61bcade130:   vmovss		0x44(%rsi, %rbx, 4), %xmm18
  0x00007f61bcade138:   vblendvps		%xmm0, %xmm0, %xmm1, %xmm12
  0x00007f61bcade13e:   vblendvps		%xmm0, %xmm1, %xmm0, %xmm15
  0x00007f61bcade144:   vmaxps		%xmm15, %xmm12, %xmm13
  0x00007f61bcade149:   vcmpunordps		%xmm12, %xmm12, %xmm15
  0x00007f61bcade14f:   vblendvps		%xmm15, %xmm12, %xmm13, %xmm1
  0x00007f61bcade155:   vblendvps		%xmm3, %xmm3, %xmm1, %xmm13
                                                            ;   {other}
  0x00007f61bcade15b:   vblendvps		%xmm3, %xmm1, %xmm3, %xmm12
  0x00007f61bcade161:   vmaxps		%xmm12, %xmm13, %xmm0
  0x00007f61bcade166:   vcmpunordps		%xmm13, %xmm13, %xmm12
  0x00007f61bcade16c:   vblendvps		%xmm12, %xmm13, %xmm0, %xmm1
  0x00007f61bcade172:   vblendvps		%xmm2, %xmm2, %xmm1, %xmm12
  0x00007f61bcade178:   vblendvps		%xmm2, %xmm1, %xmm2, %xmm3
  0x00007f61bcade17e:   vmaxps		%xmm3, %xmm12, %xmm0
  0x00007f61bcade182:   vcmpunordps		%xmm12, %xmm12, %xmm3
  0x00007f61bcade188:   vblendvps		%xmm3, %xmm12, %xmm0, %xmm1
  0x00007f61bcade18e:   vblendvps		%xmm5, %xmm5, %xmm1, %xmm3
  0x00007f61bcade194:   vblendvps		%xmm5, %xmm1, %xmm5, %xmm2
  0x00007f61bcade19a:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade19e:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade1a3:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade1a9:   vblendvps		%xmm4, %xmm4, %xmm1, %xmm3
  0x00007f61bcade1af:   vblendvps		%xmm4, %xmm1, %xmm4, %xmm2
  0x00007f61bcade1b5:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade1b9:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade1be:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade1c4:   vblendvps		%xmm7, %xmm7, %xmm1, %xmm3
  0x00007f61bcade1ca:   vblendvps		%xmm7, %xmm1, %xmm7, %xmm2
  0x00007f61bcade1d0:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade1d4:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade1d9:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade1df:   vblendvps		%xmm6, %xmm6, %xmm1, %xmm3
  0x00007f61bcade1e5:   vblendvps		%xmm6, %xmm1, %xmm6, %xmm2
  0x00007f61bcade1eb:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade1ef:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade1f4:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade1fa:   vblendvps		%xmm9, %xmm9, %xmm1, %xmm3
  0x00007f61bcade200:   vblendvps		%xmm9, %xmm1, %xmm9, %xmm2
  0x00007f61bcade206:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade20a:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade20f:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade215:   vblendvps		%xmm8, %xmm8, %xmm1, %xmm3
  0x00007f61bcade21b:   vblendvps		%xmm8, %xmm1, %xmm8, %xmm2
  0x00007f61bcade221:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade225:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade22a:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade230:   vblendvps		%xmm11, %xmm11, %xmm1, %xmm3
  0x00007f61bcade236:   vblendvps		%xmm11, %xmm1, %xmm11, %xmm2
  0x00007f61bcade23c:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade240:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade245:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade24b:   vblendvps		%xmm10, %xmm10, %xmm1, %xmm3
  0x00007f61bcade251:   vblendvps		%xmm10, %xmm1, %xmm10, %xmm2
  0x00007f61bcade257:   vmaxps		%xmm2, %xmm3, %xmm0 ;   {other}
  0x00007f61bcade25b:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade260:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade266:   vmovaps		%xmm19, %xmm4
  0x00007f61bcade26c:   vblendvps		%xmm4, %xmm4, %xmm1, %xmm3
  0x00007f61bcade272:   vblendvps		%xmm4, %xmm1, %xmm4, %xmm2
  0x00007f61bcade278:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade27c:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade281:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade287:   vmovaps		%xmm18, %xmm5
  0x00007f61bcade28d:   vblendvps		%xmm5, %xmm5, %xmm1, %xmm3
  0x00007f61bcade293:   vblendvps		%xmm5, %xmm1, %xmm5, %xmm2
  0x00007f61bcade299:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade29d:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade2a2:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade2a8:   vmovaps		%xmm17, %xmm4
  0x00007f61bcade2ae:   vblendvps		%xmm4, %xmm4, %xmm1, %xmm3
  0x00007f61bcade2b4:   vblendvps		%xmm4, %xmm1, %xmm4, %xmm2
  0x00007f61bcade2ba:   vmaxps		%xmm2, %xmm3, %xmm0
  0x00007f61bcade2be:   vcmpunordps		%xmm3, %xmm3, %xmm2
  0x00007f61bcade2c3:   vblendvps		%xmm2, %xmm3, %xmm0, %xmm1
  0x00007f61bcade2c9:   vmovaps		%xmm16, %xmm5
  0x00007f61bcade2cf:   vblendvps		%xmm5, %xmm5, %xmm1, %xmm3
  0x00007f61bcade2d5:   vblendvps		%xmm5, %xmm1, %xmm5, %xmm4
  0x00007f61bcade2db:   vmaxps		%xmm4, %xmm3, %xmm0
  0x00007f61bcade2df:   vcmpunordps		%xmm3, %xmm3, %xmm4
  0x00007f61bcade2e4:   vblendvps		%xmm4, %xmm3, %xmm0, %xmm0
  0x00007f61bcade2ea:   vucomiss		%xmm0, %xmm14
  0x00007f61bcade2ee:   ja		0x7f61bcade325
  0x00007f61bcade2f0:   jp		0x7f61bcade311
  0x00007f61bcade2f2:   jb		0x7f61bcade321
  0x00007f61bcade2f4:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f61bcade2f8:   vucomiss		%xmm1, %xmm14
  0x00007f61bcade2fc:   je		0x7f61bcade303
  0x00007f61bcade2fe:   jmp		0x7f61bcade325
  0x00007f61bcade303:   vpand		%xmm0, %xmm14, %xmm14
  0x00007f61bcade307:   jmp		0x7f61bcade325
  0x00007f61bcade30c:   jmp		0x7f61bcade325
  0x00007f61bcade311:   movl		$0x7fc00000, %r10d
  0x00007f61bcade317:   vmovd		%r10d, %xmm14
  0x00007f61bcade31c:   jmp		0x7f61bcade325
  0x00007f61bcade321:   vmovaps		%xmm0, %xmm14       ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestFloatMax::test@17 (line 22)
  0x00007f61bcade325:   addl		$0x10, %ebx         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestFloatMax::test@21 (line 20)
  0x00007f61bcade328:   cmpl		%r11d, %ebx
  0x00007f61bcade32b:   jl		0x7f61bcade0d0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestFloatMax::test@8 (line 20)
#+end_src
* 28.1.26
** darwin superword short max
Why does superword improve?
Maybe superword does not happen, even if enabled on darwin?
*** base
#+begin_src bash
HEAD -> topic.reassoc-reduct-chain.base, origin/topic.reassoc-reduct-chain.base
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,TestShortMax::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 -XX:+UseSuperWord /Users/g/src/colata/reassoc-reduct-chain-8351409/TestShortMax.java
Throughput: 221 ops/ms
#+end_src
*** patch
#+begin_src bash
HEAD -> topic.reassoc-reduct-chain, origin/topic.reassoc-reduct-chain
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,TestShortMax::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 -XX:+UseSuperWord /Users/g/src/colata/reassoc-reduct-chain-8351409/TestShortMax.java
Throughput: 589 ops/ms
#+end_src
* 27.1.26
Why are there regressions when superword is enabled?

Why xeon produces different set of instructions?
Patch:
#+begin_src asm
  0x00007f303cadde44:   vblendvpd		%xmm1, %xmm1, %xmm0, %xmm13
  0x00007f303cadde4a:   vblendvpd		%xmm1, %xmm0, %xmm1, %xmm14
  0x00007f303cadde50:   vmaxpd		%xmm14, %xmm13, %xmm12
  0x00007f303cadde55:   vcmpunordpd		%xmm13, %xmm13, %xmm14
                                                            ;   {other}
  0x00007f303cadde5b:   vblendvpd		%xmm14, %xmm13, %xmm12, %xmm0
#+end_src
Base:
#+begin_src asm
  0x00007f2ae0addf42:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0addf46:   ja		0x7f2ae0addf83
  0x00007f2ae0addf48:   jp		0x7f2ae0addf6b
  0x00007f2ae0addf4a:   jb		0x7f2ae0addf7f
  0x00007f2ae0addf4c:   vpxor		%xmm15, %xmm15, %xmm15
  0x00007f2ae0addf51:   vucomisd		%xmm15, %xmm0
  0x00007f2ae0addf56:   je		0x7f2ae0addf5d
  0x00007f2ae0addf58:   jmp		0x7f2ae0addf83      ;   {other}
  0x00007f2ae0addf5d:   vpand		%xmm1, %xmm0, %xmm0
  0x00007f2ae0addf61:   jmp		0x7f2ae0addf83
  0x00007f2ae0addf66:   jmp		0x7f2ae0addf83
  0x00007f2ae0addf6b:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0addf75:   vmovq		%rbx, %xmm0
  0x00007f2ae0addf7a:   jmp		0x7f2ae0addf83
  0x00007f2ae0addf7f:   vmovapd		%xmm1, %xmm0
#+end_src
** darwin
*** base
#+begin_src asm
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N67 strip mined) Freq: 1.04898e+08
  0x00000001128171f0:   add		x15, x16, w14, sxtw #3;*daload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@14 (line 21)
  0x00000001128171f4:   ldr		d16, [x15, #0x10]
  0x00000001128171f8:   ldr		d17, [x15, #0x18]
  0x00000001128171fc:   ldr		d18, [x15, #0x20]
  0x0000000112817200:   ldr		d19, [x15, #0x28]
  0x0000000112817204:   fmax		d16, d0, d16
  0x0000000112817208:   ldr		d20, [x15, #0x30]
  0x000000011281720c:   fmax		d16, d16, d17
  0x0000000112817210:   ldr		d17, [x15, #0x38]
  0x0000000112817214:   fmax		d16, d16, d18
  0x0000000112817218:   ldr		d18, [x15, #0x40]
  0x000000011281721c:   fmax		d16, d16, d19
  0x0000000112817220:   ldr		d19, [x15, #0x48]
  0x0000000112817224:   fmax		d16, d16, d20
  0x0000000112817228:   ldr		d20, [x15, #0x50]
  0x000000011281722c:   fmax		d16, d16, d17
  0x0000000112817230:   ldr		d21, [x15, #0x58]
  0x0000000112817234:   fmax		d16, d16, d18
  0x0000000112817238:   ldr		d17, [x15, #0x60]
  0x000000011281723c:   fmax		d16, d16, d19
  0x0000000112817240:   ldr		d18, [x15, #0x68]
  0x0000000112817244:   fmax		d16, d16, d20
  0x0000000112817248:   ldr		d19, [x15, #0x70]
  0x000000011281724c:   fmax		d16, d16, d21
  0x0000000112817250:   ldr		d20, [x15, #0x78]
  0x0000000112817254:   fmax		d16, d16, d17
  0x0000000112817258:   ldr		d21, [x15, #0x80]
  0x000000011281725c:   fmax		d16, d16, d18
  0x0000000112817260:   ldr		d17, [x15, #0x88]
  0x0000000112817264:   fmax		d16, d16, d19
  0x0000000112817268:   fmax		d16, d16, d20
  0x000000011281726c:   fmax		d16, d16, d21
  0x0000000112817270:   add		w14, w14, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@24 (line 20)
  0x0000000112817274:   fmax		d0, d16, d17        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@20 (line 22)
  0x0000000112817278:   cmp		w14, w10
  0x000000011281727c:   b.lt		#0x1128171f0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@9 (line 20)
#+end_src
*** patch
#+begin_src asm
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N67 strip mined) Freq: 1.04898e+08
  0x0000000113ecb1f0:   add		x15, x16, w14, sxtw #3;*daload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@14 (line 21)
  0x0000000113ecb1f4:   ldr		d17, [x15, #0x18]
  0x0000000113ecb1f8:   ldr		d16, [x15, #0x10]
  0x0000000113ecb1fc:   ldr		d18, [x15, #0x20]
  0x0000000113ecb200:   ldr		d19, [x15, #0x28]
  0x0000000113ecb204:   ldr		d20, [x15, #0x30]
  0x0000000113ecb208:   fmax		d16, d16, d17
  0x0000000113ecb20c:   ldr		d17, [x15, #0x38]
  0x0000000113ecb210:   fmax		d16, d16, d18
  0x0000000113ecb214:   ldr		d18, [x15, #0x40]
  0x0000000113ecb218:   fmax		d16, d16, d19
  0x0000000113ecb21c:   ldr		d19, [x15, #0x48]
  0x0000000113ecb220:   fmax		d16, d16, d20
  0x0000000113ecb224:   ldr		d20, [x15, #0x50]
  0x0000000113ecb228:   fmax		d16, d16, d17
  0x0000000113ecb22c:   ldr		d21, [x15, #0x58]
  0x0000000113ecb230:   fmax		d16, d16, d18
  0x0000000113ecb234:   ldr		d17, [x15, #0x60]
  0x0000000113ecb238:   fmax		d16, d16, d19
  0x0000000113ecb23c:   ldr		d18, [x15, #0x68]
  0x0000000113ecb240:   fmax		d16, d16, d20
  0x0000000113ecb244:   ldr		d19, [x15, #0x70]
  0x0000000113ecb248:   fmax		d16, d16, d21
  0x0000000113ecb24c:   ldr		d20, [x15, #0x78]
  0x0000000113ecb250:   fmax		d16, d16, d17
  0x0000000113ecb254:   ldr		d21, [x15, #0x80]
  0x0000000113ecb258:   fmax		d16, d16, d18
  0x0000000113ecb25c:   ldr		d17, [x15, #0x88]
  0x0000000113ecb260:   fmax		d16, d16, d19
  0x0000000113ecb264:   fmax		d16, d16, d20
  0x0000000113ecb268:   fmax		d16, d16, d21
  0x0000000113ecb26c:   fmax		d16, d16, d17
  0x0000000113ecb270:   add		w14, w14, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@24 (line 20)
  0x0000000113ecb274:   fmax		d0, d0, d16         ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@20 (line 22)
  0x0000000113ecb278:   cmp		w14, w10
  0x0000000113ecb27c:   b.lt		#0x113ecb1f0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@9 (line 20)
#+end_src
** xeon
*** base
#+begin_src asm
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N72 strip mined) Freq: 1.04898e+08
  0x00007f2ae0added0:   vmovsd		0x88(%rsi, %r11, 8), %xmm16
  0x00007f2ae0added8:   vmovsd		0x80(%rsi, %r11, 8), %xmm17
  0x00007f2ae0addee0:   vmovsd		0x10(%rsi, %r11, 8), %xmm1
  0x00007f2ae0addee7:   vmovsd		0x18(%rsi, %r11, 8), %xmm2
  0x00007f2ae0addeee:   vmovsd		0x20(%rsi, %r11, 8), %xmm3
  0x00007f2ae0addef5:   vmovsd		0x28(%rsi, %r11, 8), %xmm4
  0x00007f2ae0addefc:   vmovsd		0x30(%rsi, %r11, 8), %xmm5
  0x00007f2ae0addf03:   vmovsd		0x38(%rsi, %r11, 8), %xmm6
  0x00007f2ae0addf0a:   vmovsd		0x40(%rsi, %r11, 8), %xmm7
  0x00007f2ae0addf11:   vmovsd		0x48(%rsi, %r11, 8), %xmm8
  0x00007f2ae0addf18:   vmovsd		0x50(%rsi, %r11, 8), %xmm9
  0x00007f2ae0addf1f:   vmovsd		0x58(%rsi, %r11, 8), %xmm10
  0x00007f2ae0addf26:   vmovsd		0x60(%rsi, %r11, 8), %xmm11
  0x00007f2ae0addf2d:   vmovsd		0x68(%rsi, %r11, 8), %xmm12
  0x00007f2ae0addf34:   vmovsd		0x70(%rsi, %r11, 8), %xmm13
  0x00007f2ae0addf3b:   vmovsd		0x78(%rsi, %r11, 8), %xmm14
  0x00007f2ae0addf42:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0addf46:   ja		0x7f2ae0addf83
  0x00007f2ae0addf48:   jp		0x7f2ae0addf6b
  0x00007f2ae0addf4a:   jb		0x7f2ae0addf7f
  0x00007f2ae0addf4c:   vpxor		%xmm15, %xmm15, %xmm15
  0x00007f2ae0addf51:   vucomisd		%xmm15, %xmm0
  0x00007f2ae0addf56:   je		0x7f2ae0addf5d
  0x00007f2ae0addf58:   jmp		0x7f2ae0addf83      ;   {other}
  0x00007f2ae0addf5d:   vpand		%xmm1, %xmm0, %xmm0
  0x00007f2ae0addf61:   jmp		0x7f2ae0addf83
  0x00007f2ae0addf66:   jmp		0x7f2ae0addf83
  0x00007f2ae0addf6b:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0addf75:   vmovq		%rbx, %xmm0
  0x00007f2ae0addf7a:   jmp		0x7f2ae0addf83
  0x00007f2ae0addf7f:   vmovapd		%xmm1, %xmm0
  0x00007f2ae0addf83:   vucomisd		%xmm2, %xmm0
  0x00007f2ae0addf87:   ja		0x7f2ae0addfc2
  0x00007f2ae0addf89:   jp		0x7f2ae0addfaa
  0x00007f2ae0addf8b:   jb		0x7f2ae0addfbe
  0x00007f2ae0addf8d:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0addf91:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0addf95:   je		0x7f2ae0addf9c
  0x00007f2ae0addf97:   jmp		0x7f2ae0addfc2
  0x00007f2ae0addf9c:   vpand		%xmm2, %xmm0, %xmm0
  0x00007f2ae0addfa0:   jmp		0x7f2ae0addfc2
  0x00007f2ae0addfa5:   jmp		0x7f2ae0addfc2
  0x00007f2ae0addfaa:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0addfb4:   vmovq		%rbx, %xmm0
  0x00007f2ae0addfb9:   jmp		0x7f2ae0addfc2
  0x00007f2ae0addfbe:   vmovapd		%xmm2, %xmm0
  0x00007f2ae0addfc2:   vucomisd		%xmm3, %xmm0
  0x00007f2ae0addfc6:   ja		0x7f2ae0ade001
  0x00007f2ae0addfc8:   jp		0x7f2ae0addfe9
  0x00007f2ae0addfca:   jb		0x7f2ae0addffd
  0x00007f2ae0addfcc:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0addfd0:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0addfd4:   je		0x7f2ae0addfdb
  0x00007f2ae0addfd6:   jmp		0x7f2ae0ade001
  0x00007f2ae0addfdb:   vpand		%xmm3, %xmm0, %xmm0
  0x00007f2ae0addfdf:   jmp		0x7f2ae0ade001
  0x00007f2ae0addfe4:   jmp		0x7f2ae0ade001
  0x00007f2ae0addfe9:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0addff3:   vmovq		%rbx, %xmm0
  0x00007f2ae0addff8:   jmp		0x7f2ae0ade001
  0x00007f2ae0addffd:   vmovapd		%xmm3, %xmm0
  0x00007f2ae0ade001:   vucomisd		%xmm4, %xmm0
  0x00007f2ae0ade005:   ja		0x7f2ae0ade040
  0x00007f2ae0ade007:   jp		0x7f2ae0ade028
  0x00007f2ae0ade009:   jb		0x7f2ae0ade03c
  0x00007f2ae0ade00b:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade00f:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade013:   je		0x7f2ae0ade01a
  0x00007f2ae0ade015:   jmp		0x7f2ae0ade040
  0x00007f2ae0ade01a:   vpand		%xmm4, %xmm0, %xmm0
  0x00007f2ae0ade01e:   jmp		0x7f2ae0ade040
  0x00007f2ae0ade023:   jmp		0x7f2ae0ade040
  0x00007f2ae0ade028:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade032:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade037:   jmp		0x7f2ae0ade040
  0x00007f2ae0ade03c:   vmovapd		%xmm4, %xmm0
  0x00007f2ae0ade040:   vucomisd		%xmm5, %xmm0
  0x00007f2ae0ade044:   ja		0x7f2ae0ade07f
  0x00007f2ae0ade046:   jp		0x7f2ae0ade067
  0x00007f2ae0ade048:   jb		0x7f2ae0ade07b
  0x00007f2ae0ade04a:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade04e:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade052:   je		0x7f2ae0ade059
  0x00007f2ae0ade054:   jmp		0x7f2ae0ade07f
  0x00007f2ae0ade059:   vpand		%xmm5, %xmm0, %xmm0 ;   {other}
  0x00007f2ae0ade05d:   jmp		0x7f2ae0ade07f
  0x00007f2ae0ade062:   jmp		0x7f2ae0ade07f
  0x00007f2ae0ade067:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade071:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade076:   jmp		0x7f2ae0ade07f
  0x00007f2ae0ade07b:   vmovapd		%xmm5, %xmm0
  0x00007f2ae0ade07f:   vucomisd		%xmm6, %xmm0
  0x00007f2ae0ade083:   ja		0x7f2ae0ade0be
  0x00007f2ae0ade085:   jp		0x7f2ae0ade0a6
  0x00007f2ae0ade087:   jb		0x7f2ae0ade0ba
  0x00007f2ae0ade089:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade08d:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade091:   je		0x7f2ae0ade098
  0x00007f2ae0ade093:   jmp		0x7f2ae0ade0be
  0x00007f2ae0ade098:   vpand		%xmm6, %xmm0, %xmm0
  0x00007f2ae0ade09c:   jmp		0x7f2ae0ade0be
  0x00007f2ae0ade0a1:   jmp		0x7f2ae0ade0be
  0x00007f2ae0ade0a6:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade0b0:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade0b5:   jmp		0x7f2ae0ade0be
  0x00007f2ae0ade0ba:   vmovapd		%xmm6, %xmm0
  0x00007f2ae0ade0be:   vucomisd		%xmm7, %xmm0
  0x00007f2ae0ade0c2:   ja		0x7f2ae0ade0fd
  0x00007f2ae0ade0c4:   jp		0x7f2ae0ade0e5
  0x00007f2ae0ade0c6:   jb		0x7f2ae0ade0f9
  0x00007f2ae0ade0c8:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade0cc:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade0d0:   je		0x7f2ae0ade0d7
  0x00007f2ae0ade0d2:   jmp		0x7f2ae0ade0fd
  0x00007f2ae0ade0d7:   vpand		%xmm7, %xmm0, %xmm0
  0x00007f2ae0ade0db:   jmp		0x7f2ae0ade0fd
  0x00007f2ae0ade0e0:   jmp		0x7f2ae0ade0fd
  0x00007f2ae0ade0e5:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade0ef:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade0f4:   jmp		0x7f2ae0ade0fd
  0x00007f2ae0ade0f9:   vmovapd		%xmm7, %xmm0
  0x00007f2ae0ade0fd:   vucomisd		%xmm8, %xmm0
  0x00007f2ae0ade102:   ja		0x7f2ae0ade13f
  0x00007f2ae0ade104:   jp		0x7f2ae0ade126
  0x00007f2ae0ade106:   jb		0x7f2ae0ade13a
  0x00007f2ae0ade108:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade10c:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade110:   je		0x7f2ae0ade117
  0x00007f2ae0ade112:   jmp		0x7f2ae0ade13f
  0x00007f2ae0ade117:   vpand		%xmm8, %xmm0, %xmm0
  0x00007f2ae0ade11c:   jmp		0x7f2ae0ade13f
  0x00007f2ae0ade121:   jmp		0x7f2ae0ade13f
  0x00007f2ae0ade126:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade130:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade135:   jmp		0x7f2ae0ade13f
  0x00007f2ae0ade13a:   vmovapd		%xmm8, %xmm0
  0x00007f2ae0ade13f:   vucomisd		%xmm9, %xmm0
  0x00007f2ae0ade144:   ja		0x7f2ae0ade181
  0x00007f2ae0ade146:   jp		0x7f2ae0ade168
  0x00007f2ae0ade148:   jb		0x7f2ae0ade17c
  0x00007f2ae0ade14a:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade14e:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade152:   je		0x7f2ae0ade159
  0x00007f2ae0ade154:   jmp		0x7f2ae0ade181      ;   {other}
  0x00007f2ae0ade159:   vpand		%xmm9, %xmm0, %xmm0
  0x00007f2ae0ade15e:   jmp		0x7f2ae0ade181
  0x00007f2ae0ade163:   jmp		0x7f2ae0ade181
  0x00007f2ae0ade168:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade172:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade177:   jmp		0x7f2ae0ade181
  0x00007f2ae0ade17c:   vmovapd		%xmm9, %xmm0
  0x00007f2ae0ade181:   vucomisd		%xmm10, %xmm0
  0x00007f2ae0ade186:   ja		0x7f2ae0ade1c3
  0x00007f2ae0ade188:   jp		0x7f2ae0ade1aa
  0x00007f2ae0ade18a:   jb		0x7f2ae0ade1be
  0x00007f2ae0ade18c:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade190:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade194:   je		0x7f2ae0ade19b
  0x00007f2ae0ade196:   jmp		0x7f2ae0ade1c3
  0x00007f2ae0ade19b:   vpand		%xmm10, %xmm0, %xmm0
  0x00007f2ae0ade1a0:   jmp		0x7f2ae0ade1c3
  0x00007f2ae0ade1a5:   jmp		0x7f2ae0ade1c3
  0x00007f2ae0ade1aa:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade1b4:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade1b9:   jmp		0x7f2ae0ade1c3
  0x00007f2ae0ade1be:   vmovapd		%xmm10, %xmm0
  0x00007f2ae0ade1c3:   vucomisd		%xmm11, %xmm0
  0x00007f2ae0ade1c8:   ja		0x7f2ae0ade205
  0x00007f2ae0ade1ca:   jp		0x7f2ae0ade1ec
  0x00007f2ae0ade1cc:   jb		0x7f2ae0ade200
  0x00007f2ae0ade1ce:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade1d2:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade1d6:   je		0x7f2ae0ade1dd
  0x00007f2ae0ade1d8:   jmp		0x7f2ae0ade205
  0x00007f2ae0ade1dd:   vpand		%xmm11, %xmm0, %xmm0
  0x00007f2ae0ade1e2:   jmp		0x7f2ae0ade205
  0x00007f2ae0ade1e7:   jmp		0x7f2ae0ade205
  0x00007f2ae0ade1ec:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade1f6:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade1fb:   jmp		0x7f2ae0ade205
  0x00007f2ae0ade200:   vmovapd		%xmm11, %xmm0
  0x00007f2ae0ade205:   vucomisd		%xmm12, %xmm0
  0x00007f2ae0ade20a:   ja		0x7f2ae0ade247
  0x00007f2ae0ade20c:   jp		0x7f2ae0ade22e
  0x00007f2ae0ade20e:   jb		0x7f2ae0ade242
  0x00007f2ae0ade210:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade214:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade218:   je		0x7f2ae0ade21f
  0x00007f2ae0ade21a:   jmp		0x7f2ae0ade247
  0x00007f2ae0ade21f:   vpand		%xmm12, %xmm0, %xmm0
  0x00007f2ae0ade224:   jmp		0x7f2ae0ade247
  0x00007f2ae0ade229:   jmp		0x7f2ae0ade247
  0x00007f2ae0ade22e:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade238:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade23d:   jmp		0x7f2ae0ade247
  0x00007f2ae0ade242:   vmovapd		%xmm12, %xmm0
  0x00007f2ae0ade247:   vucomisd		%xmm13, %xmm0
  0x00007f2ae0ade24c:   ja		0x7f2ae0ade289
  0x00007f2ae0ade24e:   jp		0x7f2ae0ade270
  0x00007f2ae0ade250:   jb		0x7f2ae0ade284
  0x00007f2ae0ade252:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade256:   vucomisd		%xmm1, %xmm0;   {other}
  0x00007f2ae0ade25a:   je		0x7f2ae0ade261
  0x00007f2ae0ade25c:   jmp		0x7f2ae0ade289
  0x00007f2ae0ade261:   vpand		%xmm13, %xmm0, %xmm0
  0x00007f2ae0ade266:   jmp		0x7f2ae0ade289
  0x00007f2ae0ade26b:   jmp		0x7f2ae0ade289
  0x00007f2ae0ade270:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade27a:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade27f:   jmp		0x7f2ae0ade289
  0x00007f2ae0ade284:   vmovapd		%xmm13, %xmm0
  0x00007f2ae0ade289:   vucomisd		%xmm14, %xmm0
  0x00007f2ae0ade28e:   ja		0x7f2ae0ade2cb
  0x00007f2ae0ade290:   jp		0x7f2ae0ade2b2
  0x00007f2ae0ade292:   jb		0x7f2ae0ade2c6
  0x00007f2ae0ade294:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade298:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade29c:   je		0x7f2ae0ade2a3
  0x00007f2ae0ade29e:   jmp		0x7f2ae0ade2cb
  0x00007f2ae0ade2a3:   vpand		%xmm14, %xmm0, %xmm0
  0x00007f2ae0ade2a8:   jmp		0x7f2ae0ade2cb
  0x00007f2ae0ade2ad:   jmp		0x7f2ae0ade2cb
  0x00007f2ae0ade2b2:   movabsq		$0x7ff8000000000000, %rbx
  0x00007f2ae0ade2bc:   vmovq		%rbx, %xmm0
  0x00007f2ae0ade2c1:   jmp		0x7f2ae0ade2cb
  0x00007f2ae0ade2c6:   vmovapd		%xmm14, %xmm0
  0x00007f2ae0ade2cb:   vmovapd		%xmm17, %xmm2
  0x00007f2ae0ade2d1:   vucomisd		%xmm2, %xmm0
  0x00007f2ae0ade2d5:   ja		0x7f2ae0ade310
  0x00007f2ae0ade2d7:   jp		0x7f2ae0ade2f8
  0x00007f2ae0ade2d9:   jb		0x7f2ae0ade30c
  0x00007f2ae0ade2db:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade2df:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade2e3:   je		0x7f2ae0ade2ea
  0x00007f2ae0ade2e5:   jmp		0x7f2ae0ade310
  0x00007f2ae0ade2ea:   vpand		%xmm2, %xmm0, %xmm0
  0x00007f2ae0ade2ee:   jmp		0x7f2ae0ade310
  0x00007f2ae0ade2f3:   jmp		0x7f2ae0ade310
  0x00007f2ae0ade2f8:   movabsq		$0x7ff8000000000000, %rdx
  0x00007f2ae0ade302:   vmovq		%rdx, %xmm0
  0x00007f2ae0ade307:   jmp		0x7f2ae0ade310
  0x00007f2ae0ade30c:   vmovapd		%xmm2, %xmm0
  0x00007f2ae0ade310:   vmovapd		%xmm16, %xmm2
  0x00007f2ae0ade316:   vucomisd		%xmm2, %xmm0
  0x00007f2ae0ade31a:   ja		0x7f2ae0ade355
  0x00007f2ae0ade31c:   jp		0x7f2ae0ade33d
  0x00007f2ae0ade31e:   jb		0x7f2ae0ade351
  0x00007f2ae0ade320:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f2ae0ade324:   vucomisd		%xmm1, %xmm0
  0x00007f2ae0ade328:   je		0x7f2ae0ade32f
  0x00007f2ae0ade32a:   jmp		0x7f2ae0ade355
  0x00007f2ae0ade32f:   vpand		%xmm2, %xmm0, %xmm0
  0x00007f2ae0ade333:   jmp		0x7f2ae0ade355
  0x00007f2ae0ade338:   jmp		0x7f2ae0ade355
  0x00007f2ae0ade33d:   movabsq		$0x7ff8000000000000, %rax
  0x00007f2ae0ade347:   vmovq		%rax, %xmm0
  0x00007f2ae0ade34c:   jmp		0x7f2ae0ade355
  0x00007f2ae0ade351:   vmovapd		%xmm2, %xmm0        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@20 (line 22)
  0x00007f2ae0ade355:   addl		$0x10, %r11d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@24 (line 20)
                                                            ;   {other}
  0x00007f2ae0ade359:   nop
  0x00007f2ae0ade35a:   nop
  0x00007f2ae0ade35b:   nop
  0x00007f2ae0ade35c:   nop
  0x00007f2ae0ade35d:   nop
  0x00007f2ae0ade35e:   nop
  0x00007f2ae0ade35f:   nop
  0x00007f2ae0ade360:   cmpl		%edi, %r11d
  0x00007f2ae0ade363:   jl		0x7f2ae0added0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@9 (line 20)
#+end_src
*** patch
#+begin_src asm
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N72 strip mined) Freq: 1.04898e+08
  0x00007f303cadddd0:   vmovsd		0x88(%rsi, %r9, 8), %xmm16
  0x00007f303cadddd8:   vmovsd		0x80(%rsi, %r9, 8), %xmm17
  0x00007f303caddde0:   vmovsd		0x10(%rsi, %r9, 8), %xmm0
  0x00007f303caddde7:   vmovsd		0x18(%rsi, %r9, 8), %xmm1
  0x00007f303cadddee:   vmovsd		0x20(%rsi, %r9, 8), %xmm2
  0x00007f303cadddf5:   vmovsd		0x28(%rsi, %r9, 8), %xmm3
  0x00007f303cadddfc:   vmovsd		0x30(%rsi, %r9, 8), %xmm4
  0x00007f303cadde03:   vmovsd		0x38(%rsi, %r9, 8), %xmm5
  0x00007f303cadde0a:   vmovsd		0x40(%rsi, %r9, 8), %xmm6
  0x00007f303cadde11:   vmovsd		0x48(%rsi, %r9, 8), %xmm7
  0x00007f303cadde18:   vmovsd		0x50(%rsi, %r9, 8), %xmm8
  0x00007f303cadde1f:   vmovsd		0x58(%rsi, %r9, 8), %xmm9
  0x00007f303cadde26:   vmovsd		0x60(%rsi, %r9, 8), %xmm10
  0x00007f303cadde2d:   vmovsd		0x68(%rsi, %r9, 8), %xmm11
  0x00007f303cadde34:   vmovsd		0x70(%rsi, %r9, 8), %xmm19
  0x00007f303cadde3c:   vmovsd		0x78(%rsi, %r9, 8), %xmm18
  0x00007f303cadde44:   vblendvpd		%xmm1, %xmm1, %xmm0, %xmm13
  0x00007f303cadde4a:   vblendvpd		%xmm1, %xmm0, %xmm1, %xmm14
  0x00007f303cadde50:   vmaxpd		%xmm14, %xmm13, %xmm12
  0x00007f303cadde55:   vcmpunordpd		%xmm13, %xmm13, %xmm14
                                                            ;   {other}
  0x00007f303cadde5b:   vblendvpd		%xmm14, %xmm13, %xmm12, %xmm0
  0x00007f303cadde61:   vblendvpd		%xmm2, %xmm2, %xmm0, %xmm12
  0x00007f303cadde67:   vblendvpd		%xmm2, %xmm0, %xmm2, %xmm13
  0x00007f303cadde6d:   vmaxpd		%xmm13, %xmm12, %xmm1
  0x00007f303cadde72:   vcmpunordpd		%xmm12, %xmm12, %xmm13
  0x00007f303cadde78:   vblendvpd		%xmm13, %xmm12, %xmm1, %xmm0
  0x00007f303cadde7e:   vblendvpd		%xmm3, %xmm3, %xmm0, %xmm2
  0x00007f303cadde84:   vblendvpd		%xmm3, %xmm0, %xmm3, %xmm12
  0x00007f303cadde8a:   vmaxpd		%xmm12, %xmm2, %xmm1
  0x00007f303cadde8f:   vcmpunordpd		%xmm2, %xmm2, %xmm12
  0x00007f303cadde94:   vblendvpd		%xmm12, %xmm2, %xmm1, %xmm0
  0x00007f303cadde9a:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
  0x00007f303caddea0:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
  0x00007f303caddea6:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddeab:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddeb0:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddeb6:   vblendvpd		%xmm5, %xmm5, %xmm0, %xmm2
  0x00007f303caddebc:   vblendvpd		%xmm5, %xmm0, %xmm5, %xmm3
  0x00007f303caddec2:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddec7:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddecc:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303cadded2:   vblendvpd		%xmm6, %xmm6, %xmm0, %xmm2
  0x00007f303cadded8:   vblendvpd		%xmm6, %xmm0, %xmm6, %xmm3
  0x00007f303caddede:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddee3:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddee8:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddeee:   vblendvpd		%xmm7, %xmm7, %xmm0, %xmm2
  0x00007f303caddef4:   vblendvpd		%xmm7, %xmm0, %xmm7, %xmm3
  0x00007f303caddefa:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddeff:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddf04:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddf0a:   vblendvpd		%xmm8, %xmm8, %xmm0, %xmm2
  0x00007f303caddf10:   vblendvpd		%xmm8, %xmm0, %xmm8, %xmm3
  0x00007f303caddf16:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddf1b:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddf20:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddf26:   vblendvpd		%xmm9, %xmm9, %xmm0, %xmm2
  0x00007f303caddf2c:   vblendvpd		%xmm9, %xmm0, %xmm9, %xmm3
  0x00007f303caddf32:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddf37:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddf3c:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddf42:   vblendvpd		%xmm10, %xmm10, %xmm0, %xmm2
  0x00007f303caddf48:   vblendvpd		%xmm10, %xmm0, %xmm10, %xmm3
  0x00007f303caddf4e:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddf53:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddf58:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
                                                            ;   {other}
  0x00007f303caddf5e:   vblendvpd		%xmm11, %xmm11, %xmm0, %xmm2
  0x00007f303caddf64:   vblendvpd		%xmm11, %xmm0, %xmm11, %xmm3
  0x00007f303caddf6a:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddf6f:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddf74:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddf7a:   vmovapd		%xmm19, %xmm4
  0x00007f303caddf80:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
  0x00007f303caddf86:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
  0x00007f303caddf8c:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddf91:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddf96:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddf9c:   vmovapd		%xmm18, %xmm4
  0x00007f303caddfa2:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
  0x00007f303caddfa8:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
  0x00007f303caddfae:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddfb3:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddfb8:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddfbe:   vmovapd		%xmm17, %xmm4
  0x00007f303caddfc4:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
  0x00007f303caddfca:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
  0x00007f303caddfd0:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddfd5:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddfda:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303caddfe0:   vmovapd		%xmm16, %xmm4
  0x00007f303caddfe6:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
  0x00007f303caddfec:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
  0x00007f303caddff2:   vmaxpd		%xmm3, %xmm2, %xmm1
  0x00007f303caddff7:   vcmpunordpd		%xmm2, %xmm2, %xmm3
  0x00007f303caddffc:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
  0x00007f303cade002:   vucomisd		%xmm0, %xmm15
  0x00007f303cade006:   ja		0x7f303cade041
  0x00007f303cade008:   jp		0x7f303cade029
  0x00007f303cade00a:   jb		0x7f303cade03d
  0x00007f303cade00c:   vpxor		%xmm1, %xmm1, %xmm1
  0x00007f303cade010:   vucomisd		%xmm1, %xmm15
  0x00007f303cade014:   je		0x7f303cade01b
  0x00007f303cade016:   jmp		0x7f303cade041
  0x00007f303cade01b:   vpand		%xmm0, %xmm15, %xmm15
  0x00007f303cade01f:   jmp		0x7f303cade041
  0x00007f303cade024:   jmp		0x7f303cade041
  0x00007f303cade029:   movabsq		$0x7ff8000000000000, %rdi
  0x00007f303cade033:   vmovq		%rdi, %xmm15
  0x00007f303cade038:   jmp		0x7f303cade041
  0x00007f303cade03d:   vmovapd		%xmm0, %xmm15       ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@20 (line 22)
  0x00007f303cade041:   addl		$0x10, %r9d         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@24 (line 20)
  0x00007f303cade045:   cmpl		%ecx, %r9d
  0x00007f303cade048:   jl		0x7f303cadddd0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - TestDoubleMax::test@9 (line 20)
#+end_src
* 22.1.26
** with superword
*** performance up
#+begin_src bash
Benchmark                                           (SIZE)  (seed)   Mode  Cnt       Base      Patch   Units   Diff
VectorReduction2.WithSuperword.byteMaxBig             2048       0  thrpt    3    270.808    295.733  ops/ms    +9%
VectorReduction2.WithSuperword.byteMaxDotProduct      2048       0  thrpt    3    416.865    483.741  ops/ms   +16%
VectorReduction2.WithSuperword.byteMaxSimple          2048       0  thrpt    3    461.964    574.125  ops/ms   +24%
VectorReduction2.WithSuperword.byteMinBig             2048       0  thrpt    3    270.952    295.729  ops/ms    +9%
VectorReduction2.WithSuperword.byteMinDotProduct      2048       0  thrpt    3    416.754    483.777  ops/ms   +16%
VectorReduction2.WithSuperword.byteMinSimple          2048       0  thrpt    3    461.955    574.010  ops/ms   +24%
VectorReduction2.WithSuperword.byteOrBig              2048       0  thrpt    3    311.531    342.391  ops/ms   +10%
VectorReduction2.WithSuperword.charMaxDotProduct      2048       0  thrpt    3    423.346    508.457  ops/ms   +20%
VectorReduction2.WithSuperword.charMaxSimple          2048       0  thrpt    3    464.078    987.273  ops/ms  +113%
VectorReduction2.WithSuperword.charMinDotProduct      2048       0  thrpt    3    430.221    507.495  ops/ms   +18%
VectorReduction2.WithSuperword.charMinSimple          2048       0  thrpt    3    463.839    986.987  ops/ms  +113%
VectorReduction2.WithSuperword.charOrSimple           2048       0  thrpt    3    924.255   1552.109  ops/ms   +68%
VectorReduction2.WithSuperword.charXorSimple          2048       0  thrpt    3    924.014   1551.430  ops/ms   +68%
VectorReduction2.WithSuperword.shortMaxDotProduct     2048       0  thrpt    3    433.411    508.707  ops/ms   +17%
VectorReduction2.WithSuperword.shortMaxSimple         2048       0  thrpt    3    463.843    987.276  ops/ms  +113%
VectorReduction2.WithSuperword.shortMinDotProduct     2048       0  thrpt    3    433.340    508.695  ops/ms   +17%
VectorReduction2.WithSuperword.shortMinSimple         2048       0  thrpt    3    463.968    987.562  ops/ms  +113%
VectorReduction2.WithSuperword.shortOrSimple          2048       0  thrpt    3    924.372   1551.642  ops/ms   +68%
VectorReduction2.WithSuperword.shortXorSimple         2048       0  thrpt    3    924.331   1552.338  ops/ms   +68%
#+end_src
*** performance down
#+begin_src bash
Benchmark                                           (SIZE)  (seed)   Mode  Cnt       Base      Patch   Units   Diff
VectorReduction2.WithSuperword.charMaxBig             2048       0  thrpt    3    320.193    288.223  ops/ms   -10%
VectorReduction2.WithSuperword.charMinBig             2048       0  thrpt    3    319.897    288.153  ops/ms   -10%
VectorReduction2.WithSuperword.charOrBig              2048       0  thrpt    3    361.109    327.742  ops/ms    -9%
VectorReduction2.WithSuperword.charXorBig             2048       0  thrpt    3    311.954    201.986  ops/ms   -35%
VectorReduction2.WithSuperword.charXorDotProduct      2048       0  thrpt    3    621.685    539.482  ops/ms   -13%
VectorReduction2.WithSuperword.shortMaxBig            2048       0  thrpt    3    308.113    196.756  ops/ms   -36%
VectorReduction2.WithSuperword.shortMinBig            2048       0  thrpt    3    308.262    196.788  ops/ms   -36%
VectorReduction2.WithSuperword.shortOrBig             2048       0  thrpt    3    356.743    292.456  ops/ms   -18%
VectorReduction2.WithSuperword.shortXorBig            2048       0  thrpt    3    305.427    174.760  ops/ms   -43%
VectorReduction2.WithSuperword.shortXorDotProduct     2048       0  thrpt    3    621.842    540.086  ops/ms   -13%
#+end_src
*** compare
#+begin_src bash
Benchmark                                           (SIZE)  (seed)   Mode  Cnt       Base      Patch   Units   Diff
VectorReduction2.WithSuperword.byteAddBig             2048       0  thrpt    3    307.266    307.178  ops/ms     0%
VectorReduction2.WithSuperword.byteAddDotProduct      2048       0  thrpt    3    397.532    397.507  ops/ms     0%
VectorReduction2.WithSuperword.byteAddSimple          2048       0  thrpt    3    462.270    462.343  ops/ms     0%
VectorReduction2.WithSuperword.byteAndBig             2048       0  thrpt    3    311.600    311.570  ops/ms     0%
VectorReduction2.WithSuperword.byteAndDotProduct      2048       0  thrpt    3    631.137    631.352  ops/ms     0%
VectorReduction2.WithSuperword.byteAndSimple          2048       0  thrpt    3    790.631    790.664  ops/ms     0%
VectorReduction2.WithSuperword.byteMaxBig             2048       0  thrpt    3    270.808    295.733  ops/ms    +9%
VectorReduction2.WithSuperword.byteMaxDotProduct      2048       0  thrpt    3    416.865    483.741  ops/ms   +16%
VectorReduction2.WithSuperword.byteMaxSimple          2048       0  thrpt    3    461.964    574.125  ops/ms   +24%
VectorReduction2.WithSuperword.byteMinBig             2048       0  thrpt    3    270.952    295.729  ops/ms    +9%
VectorReduction2.WithSuperword.byteMinDotProduct      2048       0  thrpt    3    416.754    483.777  ops/ms   +16%
VectorReduction2.WithSuperword.byteMinSimple          2048       0  thrpt    3    461.955    574.010  ops/ms   +24%
VectorReduction2.WithSuperword.byteMulBig             2048       0  thrpt    3    230.416    230.396  ops/ms     0%
VectorReduction2.WithSuperword.byteMulDotProduct      2048       0  thrpt    3    231.414    231.340  ops/ms     0%
VectorReduction2.WithSuperword.byteMulSimple          2048       0  thrpt    3    232.943    232.889  ops/ms     0%
VectorReduction2.WithSuperword.byteOrBig              2048       0  thrpt    3    311.531    342.391  ops/ms   +10%
VectorReduction2.WithSuperword.byteOrDotProduct       2048       0  thrpt    3    632.636    635.232  ops/ms     0%
VectorReduction2.WithSuperword.byteOrSimple           2048       0  thrpt    3    790.192    787.565  ops/ms     0%
VectorReduction2.WithSuperword.byteXorBig             2048       0  thrpt    3    344.813    344.457  ops/ms     0%
VectorReduction2.WithSuperword.byteXorDotProduct      2048       0  thrpt    3    653.181    634.046  ops/ms    -3%
VectorReduction2.WithSuperword.byteXorSimple          2048       0  thrpt    3    790.624    790.453  ops/ms     0%
VectorReduction2.WithSuperword.charAddBig             2048       0  thrpt    3    278.876    278.693  ops/ms     0%
VectorReduction2.WithSuperword.charAddDotProduct      2048       0  thrpt    3    401.025    401.013  ops/ms     0%
VectorReduction2.WithSuperword.charAddSimple          2048       0  thrpt    3    463.266    463.170  ops/ms     0%
VectorReduction2.WithSuperword.charAndBig             2048       0  thrpt    3    361.060    360.951  ops/ms     0%
VectorReduction2.WithSuperword.charAndDotProduct      2048       0  thrpt    3    680.814    681.147  ops/ms     0%
VectorReduction2.WithSuperword.charAndSimple          2048       0  thrpt    3    924.092    924.302  ops/ms     0%
VectorReduction2.WithSuperword.charMaxBig             2048       0  thrpt    3    320.193    288.223  ops/ms   -10%
VectorReduction2.WithSuperword.charMaxDotProduct      2048       0  thrpt    3    423.346    508.457  ops/ms   +20%
VectorReduction2.WithSuperword.charMaxSimple          2048       0  thrpt    3    464.078    987.273  ops/ms  +113%
VectorReduction2.WithSuperword.charMinBig             2048       0  thrpt    3    319.897    288.153  ops/ms   -10%
VectorReduction2.WithSuperword.charMinDotProduct      2048       0  thrpt    3    430.221    507.495  ops/ms   +18%
VectorReduction2.WithSuperword.charMinSimple          2048       0  thrpt    3    463.839    986.987  ops/ms  +113%
VectorReduction2.WithSuperword.charMulBig             2048       0  thrpt    3    209.969    209.934  ops/ms     0%
VectorReduction2.WithSuperword.charMulDotProduct      2048       0  thrpt    3    231.396    231.428  ops/ms     0%
VectorReduction2.WithSuperword.charMulSimple          2048       0  thrpt    3    232.988    232.996  ops/ms     0%
VectorReduction2.WithSuperword.charOrBig              2048       0  thrpt    3    361.109    327.742  ops/ms    -9%
VectorReduction2.WithSuperword.charOrDotProduct       2048       0  thrpt    3    677.813    667.551  ops/ms    -2%
VectorReduction2.WithSuperword.charOrSimple           2048       0  thrpt    3    924.255   1552.109  ops/ms   +68%
VectorReduction2.WithSuperword.charXorBig             2048       0  thrpt    3    311.954    201.986  ops/ms   -35%
VectorReduction2.WithSuperword.charXorDotProduct      2048       0  thrpt    3    621.685    539.482  ops/ms   -13%
VectorReduction2.WithSuperword.charXorSimple          2048       0  thrpt    3    924.014   1551.430  ops/ms   +68%
VectorReduction2.WithSuperword.doubleAddBig           2048       0  thrpt    3    183.057    183.059  ops/ms     0%
VectorReduction2.WithSuperword.doubleAddDotProduct    2048       0  thrpt    3    233.823    234.035  ops/ms     0%
VectorReduction2.WithSuperword.doubleAddSimple        2048       0  thrpt    3    236.282    236.292  ops/ms     0%
VectorReduction2.WithSuperword.doubleMaxBig           2048       0  thrpt    3    271.505    270.925  ops/ms     0%
VectorReduction2.WithSuperword.doubleMaxDotProduct    2048       0  thrpt    3    272.008    271.973  ops/ms     0%
VectorReduction2.WithSuperword.doubleMaxSimple        2048       0  thrpt    3    377.230    377.369  ops/ms     0%
VectorReduction2.WithSuperword.doubleMinBig           2048       0  thrpt    3    321.070    320.753  ops/ms     0%
VectorReduction2.WithSuperword.doubleMinDotProduct    2048       0  thrpt    3    309.528    309.530  ops/ms     0%
VectorReduction2.WithSuperword.doubleMinSimple        2048       0  thrpt    3    331.216    331.568  ops/ms     0%
VectorReduction2.WithSuperword.doubleMulBig           2048       0  thrpt    3     93.370     93.232  ops/ms     0%
VectorReduction2.WithSuperword.doubleMulDotProduct    2048       0  thrpt    3    182.664    183.070  ops/ms     0%
VectorReduction2.WithSuperword.doubleMulSimple        2048       0  thrpt    3    150.739    150.697  ops/ms     0%
VectorReduction2.WithSuperword.floatAddBig            2048       0  thrpt    3    184.574    185.734  ops/ms    +1%
VectorReduction2.WithSuperword.floatAddDotProduct     2048       0  thrpt    3    234.142    234.317  ops/ms     0%
VectorReduction2.WithSuperword.floatAddSimple         2048       0  thrpt    3    236.227    236.248  ops/ms     0%
VectorReduction2.WithSuperword.floatMaxBig            2048       0  thrpt    3    534.521    533.401  ops/ms     0%
VectorReduction2.WithSuperword.floatMaxDotProduct     2048       0  thrpt    3    534.595    533.221  ops/ms     0%
VectorReduction2.WithSuperword.floatMaxSimple         2048       0  thrpt    3    735.905    734.863  ops/ms     0%
VectorReduction2.WithSuperword.floatMinBig            2048       0  thrpt    3    624.509    624.689  ops/ms     0%
VectorReduction2.WithSuperword.floatMinDotProduct     2048       0  thrpt    3    607.058    606.966  ops/ms     0%
VectorReduction2.WithSuperword.floatMinSimple         2048       0  thrpt    3    666.463    666.698  ops/ms     0%
VectorReduction2.WithSuperword.floatMulBig            2048       0  thrpt    3    128.569    128.633  ops/ms     0%
VectorReduction2.WithSuperword.floatMulDotProduct     2048       0  thrpt    3    210.479    210.504  ops/ms     0%
VectorReduction2.WithSuperword.floatMulSimple         2048       0  thrpt    3    182.734    182.696  ops/ms     0%
VectorReduction2.WithSuperword.intAddBig              2048       0  thrpt    3   1580.912   1594.548  ops/ms    +1%
VectorReduction2.WithSuperword.intAddDotProduct       2048       0  thrpt    3   3041.620   3039.946  ops/ms     0%
VectorReduction2.WithSuperword.intAddSimple           2048       0  thrpt    3   6929.596   6939.765  ops/ms     0%
VectorReduction2.WithSuperword.intAndBig              2048       0  thrpt    3   1746.255   1745.936  ops/ms     0%
VectorReduction2.WithSuperword.intAndDotProduct       2048       0  thrpt    3   3468.199   3468.210  ops/ms     0%
VectorReduction2.WithSuperword.intAndSimple           2048       0  thrpt    3  10955.795  10964.187  ops/ms     0%
VectorReduction2.WithSuperword.intMaxBig              2048       0  thrpt    3   1613.565   1627.703  ops/ms    +1%
VectorReduction2.WithSuperword.intMaxDotProduct       2048       0  thrpt    3   2719.968   2727.226  ops/ms     0%
VectorReduction2.WithSuperword.intMaxSimple           2048       0  thrpt    3   6993.981   6995.456  ops/ms     0%
VectorReduction2.WithSuperword.intMinBig              2048       0  thrpt    3   1626.847   1626.963  ops/ms     0%
VectorReduction2.WithSuperword.intMinDotProduct       2048       0  thrpt    3   2744.196   2743.569  ops/ms     0%
VectorReduction2.WithSuperword.intMinSimple           2048       0  thrpt    3   6999.963   6942.129  ops/ms    -1%
VectorReduction2.WithSuperword.intMulBig              2048       0  thrpt    3    570.691    570.710  ops/ms     0%
VectorReduction2.WithSuperword.intMulDotProduct       2048       0  thrpt    3    585.234    585.145  ops/ms     0%
VectorReduction2.WithSuperword.intMulSimple           2048       0  thrpt    3    771.198    771.216  ops/ms     0%
VectorReduction2.WithSuperword.intOrBig               2048       0  thrpt    3   1693.346   1714.569  ops/ms    +1%
VectorReduction2.WithSuperword.intOrDotProduct        2048       0  thrpt    3   3521.571   3520.614  ops/ms     0%
VectorReduction2.WithSuperword.intOrSimple            2048       0  thrpt    3  10969.068  10945.403  ops/ms     0%
VectorReduction2.WithSuperword.intXorBig              2048       0  thrpt    3   1712.578   1683.884  ops/ms    -2%
VectorReduction2.WithSuperword.intXorDotProduct       2048       0  thrpt    3   3500.208   3501.492  ops/ms     0%
VectorReduction2.WithSuperword.intXorSimple           2048       0  thrpt    3  11009.225  11023.374  ops/ms     0%
VectorReduction2.WithSuperword.longAddBig             2048       0  thrpt    3    561.371    560.487  ops/ms     0%
VectorReduction2.WithSuperword.longAddDotProduct      2048       0  thrpt    3   1201.234   1193.903  ops/ms    -1%
VectorReduction2.WithSuperword.longAddSimple          2048       0  thrpt    3   3645.445   3645.694  ops/ms     0%
VectorReduction2.WithSuperword.longAndBig             2048       0  thrpt    3    588.523    589.927  ops/ms     0%
VectorReduction2.WithSuperword.longAndDotProduct      2048       0  thrpt    3   1297.352   1264.459  ops/ms    -3%
VectorReduction2.WithSuperword.longAndSimple          2048       0  thrpt    3   6431.085   6435.236  ops/ms     0%
VectorReduction2.WithSuperword.longMaxBig             2048       0  thrpt    3    547.323    556.307  ops/ms    +2%
VectorReduction2.WithSuperword.longMaxDotProduct      2048       0  thrpt    3    955.827    955.669  ops/ms     0%
VectorReduction2.WithSuperword.longMaxSimple          2048       0  thrpt    3   1290.457   1290.252  ops/ms     0%
VectorReduction2.WithSuperword.longMinBig             2048       0  thrpt    3    547.154    554.255  ops/ms    +1%
VectorReduction2.WithSuperword.longMinDotProduct      2048       0  thrpt    3    955.321    957.327  ops/ms     0%
VectorReduction2.WithSuperword.longMinSimple          2048       0  thrpt    3   1290.257   1290.708  ops/ms     0%
VectorReduction2.WithSuperword.longMulBig             2048       0  thrpt    3    228.545    228.781  ops/ms     0%
VectorReduction2.WithSuperword.longMulDotProduct      2048       0  thrpt    3    195.250    195.268  ops/ms     0%
VectorReduction2.WithSuperword.longMulSimple          2048       0  thrpt    3    251.205    251.318  ops/ms     0%
VectorReduction2.WithSuperword.longOrBig              2048       0  thrpt    3    580.646    584.536  ops/ms    +1%
VectorReduction2.WithSuperword.longOrDotProduct       2048       0  thrpt    3   1300.432   1281.840  ops/ms    -1%
VectorReduction2.WithSuperword.longOrSimple           2048       0  thrpt    3   6438.352   6438.390  ops/ms     0%
VectorReduction2.WithSuperword.longXorBig             2048       0  thrpt    3    586.244    580.693  ops/ms    -1%
VectorReduction2.WithSuperword.longXorDotProduct      2048       0  thrpt    3   1300.861   1261.397  ops/ms    -3%
VectorReduction2.WithSuperword.longXorSimple          2048       0  thrpt    3   6427.791   6435.064  ops/ms     0%
VectorReduction2.WithSuperword.shortAddBig            2048       0  thrpt    3    228.896    228.824  ops/ms     0%
VectorReduction2.WithSuperword.shortAddDotProduct     2048       0  thrpt    3    401.089    400.975  ops/ms     0%
VectorReduction2.WithSuperword.shortAddSimple         2048       0  thrpt    3    463.255    463.259  ops/ms     0%
VectorReduction2.WithSuperword.shortAndBig            2048       0  thrpt    3    356.013    356.011  ops/ms     0%
VectorReduction2.WithSuperword.shortAndDotProduct     2048       0  thrpt    3    684.273    684.519  ops/ms     0%
VectorReduction2.WithSuperword.shortAndSimple         2048       0  thrpt    3    924.154    924.458  ops/ms     0%
VectorReduction2.WithSuperword.shortMaxBig            2048       0  thrpt    3    308.113    196.756  ops/ms   -36%
VectorReduction2.WithSuperword.shortMaxDotProduct     2048       0  thrpt    3    433.411    508.707  ops/ms   +17%
VectorReduction2.WithSuperword.shortMaxSimple         2048       0  thrpt    3    463.843    987.276  ops/ms  +113%
VectorReduction2.WithSuperword.shortMinBig            2048       0  thrpt    3    308.262    196.788  ops/ms   -36%
VectorReduction2.WithSuperword.shortMinDotProduct     2048       0  thrpt    3    433.340    508.695  ops/ms   +17%
VectorReduction2.WithSuperword.shortMinSimple         2048       0  thrpt    3    463.968    987.562  ops/ms  +113%
VectorReduction2.WithSuperword.shortMulBig            2048       0  thrpt    3    194.862    194.912  ops/ms     0%
VectorReduction2.WithSuperword.shortMulDotProduct     2048       0  thrpt    3    231.440    231.472  ops/ms     0%
VectorReduction2.WithSuperword.shortMulSimple         2048       0  thrpt    3    233.051    232.997  ops/ms     0%
VectorReduction2.WithSuperword.shortOrBig             2048       0  thrpt    3    356.743    292.456  ops/ms   -18%
VectorReduction2.WithSuperword.shortOrDotProduct      2048       0  thrpt    3    678.666    668.359  ops/ms    -2%
VectorReduction2.WithSuperword.shortOrSimple          2048       0  thrpt    3    924.372   1551.642  ops/ms   +68%
VectorReduction2.WithSuperword.shortXorBig            2048       0  thrpt    3    305.427    174.760  ops/ms   -43%
VectorReduction2.WithSuperword.shortXorDotProduct     2048       0  thrpt    3    621.842    540.086  ops/ms   -13%
VectorReduction2.WithSuperword.shortXorSimple         2048       0  thrpt    3    924.331   1552.338  ops/ms   +68%

Process finished with exit code 0
#+end_src
** long max simple
*** perfasm xeon
**** patch
#+begin_src bash
c2, level 4, org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub, version 5, compile id 562

                 0x00007fae9baf3354:   addq		$0x30, %rsp
                 0x00007fae9baf3358:   popq		%rbp
                 0x00007fae9baf3359:   cmpq		0x28(%r15), %rsp    ;   {poll_return}
                 0x00007fae9baf335d:   ja		0x7fae9baf3630
                 0x00007fae9baf3363:   retq
           ↗     0x00007fae9baf3364:   vmovq		%xmm0, %rbx
           │     0x00007fae9baf3369:   vmovq		%xmm1, %rdi
           │     0x00007fae9baf336e:   vmovq		%xmm2, %rdx
           │     0x00007fae9baf3373:   vmovq		%xmm3, %rax
           │  ↗  0x00007fae9baf3378:   movl		%r10d, %esi
   0.03%   │  │  0x00007fae9baf337b:   subl		%r11d, %esi
           │  │  0x00007fae9baf337e:   cmpl		%r11d, %r10d
   0.07%   │  │  0x00007fae9baf3381:   cmovll		%r8d, %esi
           │  │  0x00007fae9baf3385:   cmpl		$0x3e80, %esi
   0.03%   │  │  0x00007fae9baf338b:   cmoval		%ecx, %esi
           │  │  0x00007fae9baf338e:   addl		%r11d, %esi
           │  │  0x00007fae9baf3391:   vmovq		%rbx, %xmm0
           │  │  0x00007fae9baf3396:   vmovq		%rdi, %xmm1
           │  │  0x00007fae9baf339b:   vmovq		%rdx, %xmm2
   0.03%   │  │  0x00007fae9baf33a0:   vmovq		%rax, %xmm3
           │  │  0x00007fae9baf33a5:   nopw		(%rax, %rax)        ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
           │  │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@16 (line 1058)
           │  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.16%  ↗│  │  0x00007fae9baf33b0:   movq		0x88(%r14, %r11, 8), %rdi
   2.68%  ││  │  0x00007fae9baf33b8:   movq		0x80(%r14, %r11, 8), %rdx
   3.20%  ││  │  0x00007fae9baf33c0:   movq		0x18(%r14, %r11, 8), %rax
   0.69%  ││  │  0x00007fae9baf33c5:   movq		0x10(%r14, %r11, 8), %rbx
   0.16%  ││  │  0x00007fae9baf33ca:   cmpq		%rbx, %rax
   2.81%  ││  │  0x00007fae9baf33cd:   cmovlq		%rbx, %rax
   3.17%  ││  │  0x00007fae9baf33d1:   movq		0x20(%r14, %r11, 8), %rbx
   0.69%  ││  │  0x00007fae9baf33d6:   cmpq		%rbx, %rax
   0.03%  ││  │  0x00007fae9baf33d9:   cmovlq		%rbx, %rax
   2.35%  ││  │  0x00007fae9baf33dd:   movq		0x28(%r14, %r11, 8), %rbx
   2.58%  ││  │  0x00007fae9baf33e2:   cmpq		%rbx, %rax
   0.75%  ││  │  0x00007fae9baf33e5:   cmovlq		%rbx, %rax
   0.20%  ││  │  0x00007fae9baf33e9:   movq		0x30(%r14, %r11, 8), %rbx
   2.42%  ││  │  0x00007fae9baf33ee:   cmpq		%rbx, %rax
   3.24%  ││  │  0x00007fae9baf33f1:   cmovlq		%rbx, %rax
   0.82%  ││  │  0x00007fae9baf33f5:   movq		0x38(%r14, %r11, 8), %rbx
   0.16%  ││  │  0x00007fae9baf33fa:   cmpq		%rbx, %rax
   2.88%  ││  │  0x00007fae9baf33fd:   cmovlq		%rbx, %rax
   3.04%  ││  │  0x00007fae9baf3401:   movq		0x40(%r14, %r11, 8), %rbx
   0.72%  ││  │  0x00007fae9baf3406:   cmpq		%rbx, %rax
   0.13%  ││  │  0x00007fae9baf3409:   cmovlq		%rbx, %rax
   3.01%  ││  │  0x00007fae9baf340d:   movq		0x48(%r14, %r11, 8), %rbx
   2.88%  ││  │  0x00007fae9baf3412:   cmpq		%rbx, %rax
   0.69%  ││  │  0x00007fae9baf3415:   cmovlq		%rbx, %rax
   0.07%  ││  │  0x00007fae9baf3419:   movq		0x50(%r14, %r11, 8), %rbx
   3.20%  ││  │  0x00007fae9baf341e:   cmpq		%rbx, %rax
   2.42%  ││  │  0x00007fae9baf3421:   cmovlq		%rbx, %rax
   0.75%  ││  │  0x00007fae9baf3425:   movq		0x58(%r14, %r11, 8), %rbx
   0.13%  ││  │  0x00007fae9baf342a:   cmpq		%rbx, %rax
   2.48%  ││  │  0x00007fae9baf342d:   cmovlq		%rbx, %rax
   2.42%  ││  │  0x00007fae9baf3431:   movq		0x60(%r14, %r11, 8), %rbx
   1.14%  ││  │  0x00007fae9baf3436:   cmpq		%rbx, %rax
   0.10%  ││  │  0x00007fae9baf3439:   cmovlq		%rbx, %rax
   3.04%  ││  │  0x00007fae9baf343d:   movq		0x68(%r14, %r11, 8), %rbx
   2.81%  ││  │  0x00007fae9baf3442:   cmpq		%rbx, %rax
   0.85%  ││  │  0x00007fae9baf3445:   cmovlq		%rbx, %rax
   0.20%  ││  │  0x00007fae9baf3449:   movq		0x70(%r14, %r11, 8), %rbx
   2.55%  ││  │  0x00007fae9baf344e:   cmpq		%rbx, %rax
   3.24%  ││  │  0x00007fae9baf3451:   cmovlq		%rbx, %rax
   1.01%  ││  │  0x00007fae9baf3455:   movq		0x78(%r14, %r11, 8), %rbx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││  │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          ││  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          ││  │                                                            ;   {other}
   0.03%  ││  │  0x00007fae9baf345a:   cmpq		%rbx, %rax
   2.91%  ││  │  0x00007fae9baf345d:   cmovlq		%rbx, %rax
   4.48%  ││  │  0x00007fae9baf3461:   cmpq		%rdx, %rax
   2.55%  ││  │  0x00007fae9baf3464:   cmovlq		%rdx, %rax
   2.75%  ││  │  0x00007fae9baf3468:   cmpq		%rdi, %rax
   6.44%  ││  │  0x00007fae9baf346b:   cmovlq		%rdi, %rax
   1.93%  ││  │  0x00007fae9baf346f:   cmpq		%rax, %r13
   1.86%  ││  │  0x00007fae9baf3472:   cmovlq		%rax, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││  │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          ││  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.42%  ││  │  0x00007fae9baf3476:   addl		$0x10, %r11d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││  │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@32 (line 1057)
          ││  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.91%  ││  │  0x00007fae9baf347a:   nopw		(%rax, %rax)
   0.85%  ││  │  0x00007fae9baf3480:   cmpl		%esi, %r11d
          ╰│  │  0x00007fae9baf3483:   jl		0x7fae9baf33b0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
           │  │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@13 (line 1057)
           │  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
           │  │  0x00007fae9baf3489:   movq		0x30(%r15), %rbx    ; ImmutableOopMap {r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop xmm3=Oop }
           │  │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
           │  │                                                            ; - (reexecute) org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@35 (line 1057)
           │  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.03%   │  │  0x00007fae9baf348d:   testl		%eax, (%rbx)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
           │  │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@35 (line 1057)
           │  │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
           │  │                                                            ;   {poll}
           │  │  0x00007fae9baf348f:   cmpl		%r10d, %r11d
           ╰  │  0x00007fae9baf3492:   jl		0x7fae9baf3364
              │  0x00007fae9baf3498:   vmovq		%xmm0, %rbx
              │  0x00007fae9baf349d:   vmovq		%xmm1, %rdi
   0.07%      │  0x00007fae9baf34a2:   vmovq		%xmm2, %rdx
              │  0x00007fae9baf34a7:   vmovq		%xmm3, %rax
              │  0x00007fae9baf34ac:   cmpl		%r9d, %r11d
            ╭ │  0x00007fae9baf34af:   jge		0x7fae9baf34c8
            │ │  0x00007fae9baf34b1:   nop		                    ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
            │ │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@16 (line 1058)
            │ │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.07%    │↗│  0x00007fae9baf34b4:   movq		0x10(%r14, %r11, 8), %r10;*laload {reexecute=0 rethrow=0 return_oop=0}
            │││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
            │││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.03%    │││  0x00007fae9baf34b9:   cmpq		%r10, %r13
   0.62%    │││  0x00007fae9baf34bc:   cmovlq		%r10, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
            │││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
            │││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.65%    │││  0x00007fae9baf34c0:   incl		%r11d               ;*iinc {reexecute=0 rethrow=0 return_oop=0}
            │││                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@32 (line 1057)
            │││                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.03%    │││  0x00007fae9baf34c3:   cmpl		%r9d, %r11d
            │╰│  0x00007fae9baf34c6:   jl		0x7fae9baf34b4      ;*invokestatic consumeCompiler {reexecute=0 rethrow=0 return_oop=0}
            │ │                                                            ; - org.openjdk.jmh.infra.Blackhole::consume@7 (line 401)
            │ │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@40 (line 1061)
            │ │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
            ↘ │  0x00007fae9baf34c8:   movzbl		0x94(%rax), %r10d   ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@27 (line 123)
              │  0x00007fae9baf34d0:   movq		0x30(%r15), %r11
   0.07%      │  0x00007fae9baf34d4:   incq		%rbp                ; ImmutableOopMap {rbx=Oop rdi=Oop rdx=Oop rax=Oop }
              │                                                            ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
              │                                                            ; - (reexecute) org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@30 (line 123)
              │  0x00007fae9baf34d7:   testl		%eax, (%r11)        ;   {poll}
              │  0x00007fae9baf34da:   nopw		(%rax, %rax)
              │  0x00007fae9baf34e0:   testl		%r10d, %r10d
              │  0x00007fae9baf34e3:   jne		0x7fae9baf3329      ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@33 (line 124)
   0.10%      │  0x00007fae9baf34e9:   movl		0xc(%rdi), %r9d     ;*getfield SIZE {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@10 (line 1057)
              │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
              │  0x00007fae9baf34ed:   testl		%r9d, %r9d
              │  0x00007fae9baf34f0:   jle		0x7fae9baf3551      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@13 (line 1057)
              │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.03%      │  0x00007fae9baf34f6:   movl		0x44(%rdi), %r10d   ;*getfield in1L {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@17 (line 1058)
              │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
              │  0x00007fae9baf34fa:   movl		0xc(%r12, %r10, 8), %r11d; implicit exception: dispatches to 0x00007fae9baf3565
   0.03%      │  0x00007fae9baf34ff:   nop
              │  0x00007fae9baf3500:   testl		%r11d, %r11d
              │  0x00007fae9baf3503:   jbe		0x7fae9baf3565
              │  0x00007fae9baf3509:   movslq		%r9d, %rsi
              │  0x00007fae9baf350c:   movslq		%r11d, %r11
   0.07%      │  0x00007fae9baf350f:   leaq		-1(%rsi), %r13
              │  0x00007fae9baf3513:   cmpq		%r11, %r13
              │  0x00007fae9baf3516:   jae		0x7fae9baf3565
   0.07%      │  0x00007fae9baf3518:   movq		0x10(%r12, %r10, 8), %r13;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
              │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
              │  0x00007fae9baf351d:   addq		$-0xf, %rsi
   0.07%      │  0x00007fae9baf3521:   leaq		(%r12, %r10, 8), %r14
              │  0x00007fae9baf3525:   cmpq		$-0x80000000, %rsi
              │  0x00007fae9baf352c:   movq		$18446744071562067968, %r10
              │  0x00007fae9baf3533:   cmovlq		%r10, %rsi
              │  0x00007fae9baf3537:   movl		%esi, %r10d
              │  0x00007fae9baf353a:   nopw		(%rax, %rax)
              │  0x00007fae9baf3540:   cmpl		$1, %r10d
              │  0x00007fae9baf3544:   jle		0x7fae9baf3590
              │  0x00007fae9baf3546:   movl		$1, %r11d
              ╰  0x00007fae9baf354c:   jmp		0x7fae9baf3378
                 0x00007fae9baf3551:   movabsq		$9223372036854775808, %r13
....................................................................................................
  97.09%  <total for region 1>
#+end_src
**** base
#+begin_src bash
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub, version 5, compile id 521

             0x00007f47c3af7000:   cmpl		$0x3e80, %esi
   0.07%     0x00007f47c3af7006:   cmoval		%ecx, %esi
             0x00007f47c3af7009:   addl		%r11d, %esi
             0x00007f47c3af700c:   vmovq		%rdi, %xmm0
             0x00007f47c3af7011:   vmovq		%rdx, %xmm1
             0x00007f47c3af7016:   vmovq		%rax, %xmm2
             0x00007f47c3af701b:   nopl		(%rax, %rax)        ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@16 (line 1058)
                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          ↗  0x00007f47c3af7020:   movq		0x88(%r14, %r11, 8), %rdx
   0.03%  │  0x00007f47c3af7028:   movq		0x80(%r14, %r11, 8), %rax
   3.51%  │  0x00007f47c3af7030:   movq		0x10(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.03%  │  0x00007f47c3af7035:   cmpq		%rdi, %r13
          │  0x00007f47c3af7038:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.95%  │  0x00007f47c3af703c:   movq		0x18(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af7041:   cmpq		%rdi, %r13
   2.72%  │  0x00007f47c3af7044:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   3.38%  │  0x00007f47c3af7048:   movq		0x20(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af704d:   cmpq		%rdi, %r13
   3.21%  │  0x00007f47c3af7050:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.79%  │  0x00007f47c3af7054:   movq		0x28(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af7059:   cmpq		%rdi, %r13
   3.48%  │  0x00007f47c3af705c:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   3.15%  │  0x00007f47c3af7060:   movq		0x30(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af7065:   cmpq		%rdi, %r13
   2.95%  │  0x00007f47c3af7068:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   3.57%  │  0x00007f47c3af706c:   movq		0x38(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af7071:   cmpq		%rdi, %r13
   3.28%  │  0x00007f47c3af7074:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.92%  │  0x00007f47c3af7078:   movq		0x40(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.03%  │  0x00007f47c3af707d:   cmpq		%rdi, %r13
   3.05%  │  0x00007f47c3af7080:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   3.11%  │  0x00007f47c3af7084:   movq		0x48(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af7089:   cmpq		%rdi, %r13
   2.85%  │  0x00007f47c3af708c:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.85%  │  0x00007f47c3af7090:   movq		0x50(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af7095:   cmpq		%rdi, %r13
   3.34%  │  0x00007f47c3af7098:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.89%  │  0x00007f47c3af709c:   movq		0x58(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af70a1:   cmpq		%rdi, %r13
   2.82%  │  0x00007f47c3af70a4:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.56%  │  0x00007f47c3af70a8:   movq		0x60(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af70ad:   cmpq		%rdi, %r13
   2.75%  │  0x00007f47c3af70b0:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.92%  │  0x00007f47c3af70b4:   movq		0x68(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af70b9:   cmpq		%rdi, %r13
   3.18%  │  0x00007f47c3af70bc:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   2.46%  │  0x00007f47c3af70c0:   movq		0x70(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   0.07%  │  0x00007f47c3af70c5:   cmpq		%rdi, %r13
   2.66%  │  0x00007f47c3af70c8:   cmovlq		%rdi, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   3.61%  │  0x00007f47c3af70cc:   movq		0x78(%r14, %r11, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@22 (line 1058)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af70d1:   cmpq		%rdi, %r13
   3.21%  │  0x00007f47c3af70d4:   cmovlq		%rdi, %r13
   4.26%  │  0x00007f47c3af70d8:   cmpq		%rax, %r13          ;   {other}
   1.44%  │  0x00007f47c3af70db:   cmovlq		%rax, %r13
   2.85%  │  0x00007f47c3af70df:   cmpq		%rdx, %r13
   2.56%  │  0x00007f47c3af70e2:   cmovlq		%rdx, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@28 (line 1059)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
   3.08%  │  0x00007f47c3af70e6:   addl		$0x10, %r11d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@32 (line 1057)
          │                                                            ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
          │  0x00007f47c3af70ea:   cmpl		%esi, %r11d
          ╰  0x00007f47c3af70ed:   jl		0x7f47c3af7020      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.vm.compiler.VectorReduction2::longMaxSimple@13 (line 1057)
                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_longMaxSimple_jmhTest::longMaxSimple_thrpt_jmhStub@17 (line 121)
             0x00007f47c3af70f3:   movq		0x30(%r15), %rdi    ; ImmutableOopMap {rbx=Oop r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
....................................................................................................
  96.52%  <total for region 1>
#+end_src
** double max simple
*** perfasm xeon
**** patch
#+begin_src bash
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_doubleMaxSimple_jmhTest::doubleMaxSimple_thrpt_jmhStub, version 5, compile id 560

             0x00007f2dafaf51b0:   movl		%r10d, %esi
             0x00007f2dafaf51b3:   subl		%r8d, %esi
             0x00007f2dafaf51b6:   cmpl		%r8d, %r10d
             0x00007f2dafaf51b9:   cmovll		%ecx, %esi
             0x00007f2dafaf51bc:   cmpl		$0x3e80, %esi
             0x00007f2dafaf51c2:   cmoval		%eax, %esi
             0x00007f2dafaf51c5:   addl		%r8d, %esi
             0x00007f2dafaf51c8:   nopl		(%rax, %rax)        ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.vm.compiler.VectorReduction2::doubleMaxSimple@16 (line 1364)
                                                                       ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_doubleMaxSimple_jmhTest::doubleMaxSimple_thrpt_jmhStub@17 (line 121)
   1.18%     0x00007f2dafaf51d0:   vmovsd		0x88(%r13, %r8, 8), %xmm17
             0x00007f2dafaf51d8:   vmovsd		0x80(%r13, %r8, 8), %xmm18
             0x00007f2dafaf51e0:   vmovsd		0x78(%r13, %r8, 8), %xmm19
             0x00007f2dafaf51e8:   vmovsd		0x70(%r13, %r8, 8), %xmm15
   1.01%     0x00007f2dafaf51ef:   vmovsd		0x68(%r13, %r8, 8), %xmm0
             0x00007f2dafaf51f6:   vmovsd		0x60(%r13, %r8, 8), %xmm1
   0.03%     0x00007f2dafaf51fd:   vmovsd		0x58(%r13, %r8, 8), %xmm2
             0x00007f2dafaf5204:   vmovsd		0x18(%r13, %r8, 8), %xmm3
   1.18%     0x00007f2dafaf520b:   vmovsd		0x10(%r13, %r8, 8), %xmm4
             0x00007f2dafaf5212:   vmovsd		0x20(%r13, %r8, 8), %xmm5
             0x00007f2dafaf5219:   vmovsd		0x28(%r13, %r8, 8), %xmm6
             0x00007f2dafaf5220:   vmovsd		0x30(%r13, %r8, 8), %xmm7
   1.21%     0x00007f2dafaf5227:   vmovsd		0x38(%r13, %r8, 8), %xmm8
             0x00007f2dafaf522e:   vmovsd		0x40(%r13, %r8, 8), %xmm9
             0x00007f2dafaf5235:   vmovsd		0x48(%r13, %r8, 8), %xmm10
             0x00007f2dafaf523c:   vmovsd		0x50(%r13, %r8, 8), %xmm11
   1.14%     0x00007f2dafaf5243:   vblendvpd		%xmm4, %xmm4, %xmm3, %xmm13
   1.28%     0x00007f2dafaf5249:   vblendvpd		%xmm4, %xmm3, %xmm4, %xmm14
   0.72%     0x00007f2dafaf524f:   vmaxpd		%xmm14, %xmm13, %xmm12
             0x00007f2dafaf5254:   vcmpunordpd		%xmm13, %xmm13, %xmm14
             0x00007f2dafaf525a:   vblendvpd		%xmm14, %xmm13, %xmm12, %xmm3
   0.98%     0x00007f2dafaf5260:   vblendvpd		%xmm5, %xmm5, %xmm3, %xmm12
   1.37%     0x00007f2dafaf5266:   vblendvpd		%xmm5, %xmm3, %xmm5, %xmm13
   1.31%     0x00007f2dafaf526c:   vmaxpd		%xmm13, %xmm12, %xmm4;   {other}
             0x00007f2dafaf5271:   vcmpunordpd		%xmm12, %xmm12, %xmm13
             0x00007f2dafaf5277:   vblendvpd		%xmm13, %xmm12, %xmm4, %xmm3
   0.92%     0x00007f2dafaf527d:   vblendvpd		%xmm6, %xmm6, %xmm3, %xmm5
   0.75%     0x00007f2dafaf5283:   vblendvpd		%xmm6, %xmm3, %xmm6, %xmm12
   1.37%     0x00007f2dafaf5289:   vmaxpd		%xmm12, %xmm5, %xmm4
             0x00007f2dafaf528e:   vcmpunordpd		%xmm5, %xmm5, %xmm12
             0x00007f2dafaf5293:   vblendvpd		%xmm12, %xmm5, %xmm4, %xmm3
   1.11%     0x00007f2dafaf5299:   vblendvpd		%xmm7, %xmm7, %xmm3, %xmm5
   1.24%     0x00007f2dafaf529f:   vblendvpd		%xmm7, %xmm3, %xmm7, %xmm6
   1.11%     0x00007f2dafaf52a5:   vmaxpd		%xmm6, %xmm5, %xmm4
             0x00007f2dafaf52aa:   vcmpunordpd		%xmm5, %xmm5, %xmm6
             0x00007f2dafaf52af:   vblendvpd		%xmm6, %xmm5, %xmm4, %xmm3
   1.01%     0x00007f2dafaf52b5:   vblendvpd		%xmm8, %xmm8, %xmm3, %xmm5
   1.01%     0x00007f2dafaf52bb:   vblendvpd		%xmm8, %xmm3, %xmm8, %xmm6
   1.24%     0x00007f2dafaf52c1:   vmaxpd		%xmm6, %xmm5, %xmm4
             0x00007f2dafaf52c6:   vcmpunordpd		%xmm5, %xmm5, %xmm6
             0x00007f2dafaf52cb:   vblendvpd		%xmm6, %xmm5, %xmm4, %xmm3
   1.24%     0x00007f2dafaf52d1:   vblendvpd		%xmm9, %xmm9, %xmm3, %xmm5
   1.31%     0x00007f2dafaf52d7:   vblendvpd		%xmm9, %xmm3, %xmm9, %xmm6
   0.62%     0x00007f2dafaf52dd:   vmaxpd		%xmm6, %xmm5, %xmm4
             0x00007f2dafaf52e2:   vcmpunordpd		%xmm5, %xmm5, %xmm6
             0x00007f2dafaf52e7:   vblendvpd		%xmm6, %xmm5, %xmm4, %xmm3
   1.31%     0x00007f2dafaf52ed:   vblendvpd		%xmm10, %xmm10, %xmm3, %xmm5
   1.11%     0x00007f2dafaf52f3:   vblendvpd		%xmm10, %xmm3, %xmm10, %xmm6
   1.57%     0x00007f2dafaf52f9:   vmaxpd		%xmm6, %xmm5, %xmm4
             0x00007f2dafaf52fe:   vcmpunordpd		%xmm5, %xmm5, %xmm6
             0x00007f2dafaf5303:   vblendvpd		%xmm6, %xmm5, %xmm4, %xmm3
   1.21%     0x00007f2dafaf5309:   vblendvpd		%xmm11, %xmm11, %xmm3, %xmm5
   0.79%     0x00007f2dafaf530f:   vblendvpd		%xmm11, %xmm3, %xmm11, %xmm6
   1.05%     0x00007f2dafaf5315:   vmaxpd		%xmm6, %xmm5, %xmm4
   0.03%     0x00007f2dafaf531a:   vcmpunordpd		%xmm5, %xmm5, %xmm6
             0x00007f2dafaf531f:   vblendvpd		%xmm6, %xmm5, %xmm4, %xmm3
   1.80%     0x00007f2dafaf5325:   vblendvpd		%xmm2, %xmm2, %xmm3, %xmm5
   1.54%     0x00007f2dafaf532b:   vblendvpd		%xmm2, %xmm3, %xmm2, %xmm6
   1.34%     0x00007f2dafaf5331:   vmaxpd		%xmm6, %xmm5, %xmm4
   0.13%     0x00007f2dafaf5336:   vcmpunordpd		%xmm5, %xmm5, %xmm6
             0x00007f2dafaf533b:   vblendvpd		%xmm6, %xmm5, %xmm4, %xmm2
   2.36%     0x00007f2dafaf5341:   vblendvpd		%xmm1, %xmm1, %xmm2, %xmm4
   1.86%     0x00007f2dafaf5347:   vblendvpd		%xmm1, %xmm2, %xmm1, %xmm5
   1.28%     0x00007f2dafaf534d:   vmaxpd		%xmm5, %xmm4, %xmm3
   0.95%     0x00007f2dafaf5352:   vcmpunordpd		%xmm4, %xmm4, %xmm5
             0x00007f2dafaf5357:   vblendvpd		%xmm5, %xmm4, %xmm3, %xmm1
   3.14%     0x00007f2dafaf535d:   vblendvpd		%xmm0, %xmm0, %xmm1, %xmm3
   2.36%     0x00007f2dafaf5363:   vblendvpd		%xmm0, %xmm1, %xmm0, %xmm4
   1.50%     0x00007f2dafaf5369:   vmaxpd		%xmm4, %xmm3, %xmm2 ;   {other}
   1.24%     0x00007f2dafaf536e:   vcmpunordpd		%xmm3, %xmm3, %xmm4
             0x00007f2dafaf5373:   vblendvpd		%xmm4, %xmm3, %xmm2, %xmm0
   4.19%     0x00007f2dafaf5379:   vblendvpd		%xmm15, %xmm15, %xmm0, %xmm2
   1.96%     0x00007f2dafaf537f:   vblendvpd		%xmm15, %xmm0, %xmm15, %xmm3
   1.34%     0x00007f2dafaf5385:   vmaxpd		%xmm3, %xmm2, %xmm1
   1.31%     0x00007f2dafaf538a:   vcmpunordpd		%xmm2, %xmm2, %xmm3
   0.07%     0x00007f2dafaf538f:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
   5.56%     0x00007f2dafaf5395:   vmovapd		%xmm19, %xmm4
             0x00007f2dafaf539b:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
   1.60%     0x00007f2dafaf53a1:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
   1.41%     0x00007f2dafaf53a7:   vmaxpd		%xmm3, %xmm2, %xmm1
   1.14%     0x00007f2dafaf53ac:   vcmpunordpd		%xmm2, %xmm2, %xmm3
   0.03%     0x00007f2dafaf53b1:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
   4.22%     0x00007f2dafaf53b7:   vmovapd		%xmm18, %xmm3
             0x00007f2dafaf53bd:   vblendvpd		%xmm3, %xmm3, %xmm0, %xmm4
   2.03%     0x00007f2dafaf53c3:   vblendvpd		%xmm3, %xmm0, %xmm3, %xmm2
   1.14%     0x00007f2dafaf53c9:   vmaxpd		%xmm2, %xmm4, %xmm1
   1.93%     0x00007f2dafaf53ce:   vcmpunordpd		%xmm4, %xmm4, %xmm2
             0x00007f2dafaf53d3:   vblendvpd		%xmm2, %xmm4, %xmm1, %xmm0
   4.94%     0x00007f2dafaf53d9:   vmovapd		%xmm17, %xmm4
             0x00007f2dafaf53df:   vblendvpd		%xmm4, %xmm4, %xmm0, %xmm2
   1.50%     0x00007f2dafaf53e5:   vblendvpd		%xmm4, %xmm0, %xmm4, %xmm3
   1.24%     0x00007f2dafaf53eb:   vmaxpd		%xmm3, %xmm2, %xmm1
   2.22%     0x00007f2dafaf53f0:   vcmpunordpd		%xmm2, %xmm2, %xmm3
             0x00007f2dafaf53f5:   vblendvpd		%xmm3, %xmm2, %xmm1, %xmm0
   4.78%     0x00007f2dafaf53fb:   vmovapd		%xmm16, %xmm2
             0x00007f2dafaf5401:   vucomisd		%xmm0, %xmm2
   0.46%     0x00007f2dafaf5405:   ja		0x7f2dafaf5427
             0x00007f2dafaf5407:   jp		0x7f2dafaf5430
             0x00007f2dafaf5409:   jb		0x7f2dafaf5444
             0x00007f2dafaf540b:   vpxor		%xmm1, %xmm1, %xmm1
             0x00007f2dafaf540f:   vucomisd		%xmm1, %xmm2
          ╭  0x00007f2dafaf5413:   je		0x7f2dafaf541e
          │  0x00007f2dafaf5415:   vmovapd		%xmm2, %xmm0
          │  0x00007f2dafaf5419:   jmp		0x7f2dafaf5444
          ↘  0x00007f2dafaf541e:   vpand		%xmm0, %xmm2, %xmm0
             0x00007f2dafaf5422:   jmp		0x7f2dafaf5444
   1.05%     0x00007f2dafaf5427:   vmovapd		%xmm2, %xmm0
....................................................................................................
  94.01%  <total for region 1>
#+end_src

**** base
#+begin_src bash
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_doubleMaxSimple_jmhTest::doubleMaxSimple_thrpt_jmhStub, version 5, compile id 540

                                                                        ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_doubleMaxSimple_jmhTest::doubleMaxSimple_thrpt_jmhStub@17 (line 121)
              0x00007f7127af59b4:   addq		$0x30, %rsp
              0x00007f7127af59b8:   popq		%rbp
              0x00007f7127af59b9:   cmpq		0x28(%r15), %rsp    ;   {poll_return}
              0x00007f7127af59bd:   ja		0x7f7127af60b0
              0x00007f7127af59c3:   retq
              0x00007f7127af59c4:   vmovq		%xmm16, %rbx
              0x00007f7127af59ca:   vmovq		%xmm17, %rdi
              0x00007f7127af59d0:   vmovq		%xmm18, %r11
              0x00007f7127af59d6:   vmovq		%xmm19, %rdx
   0.07%      0x00007f7127af59dc:   movl		%r10d, %esi
              0x00007f7127af59df:   subl		%r8d, %esi
              0x00007f7127af59e2:   cmpl		%r8d, %r10d
              0x00007f7127af59e5:   cmovll		%ecx, %esi
   0.07%      0x00007f7127af59e8:   cmpl		$0x3e80, %esi
              0x00007f7127af59ee:   cmoval		%eax, %esi
              0x00007f7127af59f1:   addl		%r8d, %esi
   0.03%      0x00007f7127af59f4:   vmovq		%rbx, %xmm16
              0x00007f7127af59fa:   vmovq		%rdi, %xmm17
              0x00007f7127af5a00:   vmovq		%r11, %xmm18
              0x00007f7127af5a06:   vmovq		%rdx, %xmm19
   0.03%      0x00007f7127af5a0c:   nopl		(%rax)              ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.vm.compiler.VectorReduction2::doubleMaxSimple@16 (line 1364)
                                                                        ; - org.openjdk.bench.vm.compiler.jmh_generated.VectorReduction2_NoSuperword_doubleMaxSimple_jmhTest::doubleMaxSimple_thrpt_jmhStub@17 (line 121)
   4.91%      0x00007f7127af5a10:   vmovsd		0x88(%r13, %r8, 8), %xmm20
   0.43%      0x00007f7127af5a18:   vmovsd		0x80(%r13, %r8, 8), %xmm21
              0x00007f7127af5a20:   vmovsd		0x78(%r13, %r8, 8), %xmm22
              0x00007f7127af5a28:   vmovsd		0x70(%r13, %r8, 8), %xmm23
   4.25%      0x00007f7127af5a30:   vmovsd		0x68(%r13, %r8, 8), %xmm1
   0.20%      0x00007f7127af5a37:   vmovsd		0x60(%r13, %r8, 8), %xmm2
   0.07%      0x00007f7127af5a3e:   vmovsd		0x58(%r13, %r8, 8), %xmm3
   0.07%      0x00007f7127af5a45:   vmovsd		0x10(%r13, %r8, 8), %xmm4
   3.99%      0x00007f7127af5a4c:   vmovsd		0x18(%r13, %r8, 8), %xmm5
   0.07%      0x00007f7127af5a53:   vmovsd		0x20(%r13, %r8, 8), %xmm6
   0.10%      0x00007f7127af5a5a:   vmovsd		0x28(%r13, %r8, 8), %xmm7
              0x00007f7127af5a61:   vmovsd		0x30(%r13, %r8, 8), %xmm8
   4.55%      0x00007f7127af5a68:   vmovsd		0x38(%r13, %r8, 8), %xmm9
   0.10%      0x00007f7127af5a6f:   vmovsd		0x40(%r13, %r8, 8), %xmm10
   0.10%      0x00007f7127af5a76:   vmovsd		0x48(%r13, %r8, 8), %xmm11
   0.07%      0x00007f7127af5a7d:   vmovsd		0x50(%r13, %r8, 8), %xmm12
   4.15%      0x00007f7127af5a84:   vucomisd		%xmm4, %xmm0
   0.03%      0x00007f7127af5a88:   ja		0x7f7127af5ac5
   0.29%  ╭   0x00007f7127af5a8a:   jp		0x7f7127af5aad
          │   0x00007f7127af5a8c:   jb		0x7f7127af5ac1
          │   0x00007f7127af5a8e:   vpxor		%xmm15, %xmm15, %xmm15
          │   0x00007f7127af5a93:   vucomisd		%xmm15, %xmm0
          │╭  0x00007f7127af5a98:   je		0x7f7127af5a9f
          ││  0x00007f7127af5a9a:   jmp		0x7f7127af5ac5
          │↘  0x00007f7127af5a9f:   vpand		%xmm4, %xmm0, %xmm0
          │   0x00007f7127af5aa3:   jmp		0x7f7127af5ac5
          │   0x00007f7127af5aa8:   jmp		0x7f7127af5ac5
          ↘   0x00007f7127af5aad:   movabsq		$0x7ff8000000000000, %r11
              0x00007f7127af5ab7:   vmovq		%r11, %xmm0         ;   {other}
....................................................................................................
  23.55%  <total for region 1>
#+end_src
*** xeon
patch:
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CONF=release CLASS=TestDoubleMax make run
rm -f *.log
/home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:-UseSuperWord -XX:CompileCommand=compileonly,TestDoubleMax::test -XX:CompileCommand=dontinline,*::*dontinline* /home/g/src/colata/reassoc-reduct-chain-8351409/TestDoubleMax.java
[0.001s][info][os] Use of CLOCK_MONOTONIC is supported
[0.001s][info][os] Use of pthread_condattr_setclock is supported
[0.001s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with CLOCK_MONOTONIC
[0.001s][info][os] HotSpot is running with glibc 2.40, NPTL 2.40
[0.001s][info][os] Glibc stack size guard page adjustment is not needed
[0.001s][info][os] SafePoint Polling address, bad (protected) page:0x00007fb0760b3000, good (unprotected) page:0x00007fb0760b4000
[0.002s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libjava.so
[0.003s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libjava.so was successful
CompileCommand: compileonly TestDoubleMax.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.050s][info][os] Initialized VM with process ID 8472
[0.053s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libsimdsort.so
[0.053s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libsimdsort.so was successful
[0.065s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnio.so
[0.066s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnio.so was successful
[0.079s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnet.so
[0.079s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnet.so was successful
Validate
Warmup
Running
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Throughput: 35 ops/ms
Validate
#+end_src

base:
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CONF=release CLASS=TestDoubleMax make run
rm -f *.log
pushd /home/g/src/jdk-reassoc-reduct-chain
CONF=release-linux-x86_64 make hotspot
cp /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/support/modules_libs/java.base/server/libjvm.so /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/server
popd
touch /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/bin/java
~/src/jdk-reassoc-reduct-chain ~/src/colata/reassoc-reduct-chain-8351409
make[1]: Entering directory '/home/g/src/jdk-reassoc-reduct-chain'
Building target 'hotspot' in configuration 'release-linux-x86_64'
Updating support/modules_libs/java.base/server/libjvm.so due to 1 file(s)
Finished building target 'hotspot' in configuration 'release-linux-x86_64'
make[1]: Leaving directory '/home/g/src/jdk-reassoc-reduct-chain'
~/src/colata/reassoc-reduct-chain-8351409
/home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:-UseSuperWord -XX:CompileCommand=compileonly,TestDoubleMax::test -XX:CompileCommand=dontinline,*::*dontinline* /home/g/src/colata/reassoc-reduct-chain-8351409/TestDoubleMax.java
[0.001s][info][os] Use of CLOCK_MONOTONIC is supported
[0.001s][info][os] Use of pthread_condattr_setclock is supported
[0.001s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with CLOCK_MONOTONIC
[0.001s][info][os] HotSpot is running with glibc 2.40, NPTL 2.40
[0.001s][info][os] Glibc stack size guard page adjustment is not needed
[0.001s][info][os] SafePoint Polling address, bad (protected) page:0x00007f1c1f25b000, good (unprotected) page:0x00007f1c1f25c000
[0.002s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libjava.so
[0.002s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libjava.so was successful
CompileCommand: compileonly TestDoubleMax.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.051s][info][os] Initialized VM with process ID 9089
[0.053s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libsimdsort.so
[0.053s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libsimdsort.so was successful
[0.066s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnio.so
[0.066s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnio.so was successful
[0.080s][info][os] attempting shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnet.so
[0.080s][info][os] shared library load of /home/g/src/jdk-reassoc-reduct-chain/build/release-linux-x86_64/jdk/lib/libnet.so was successful
Validate
Warmup
Running
Throughput: 138 ops/ms
Throughput: 138 ops/ms
Throughput: 138 ops/ms
Throughput: 138 ops/ms
Throughput: 137 ops/ms
Throughput: 137 ops/ms
Throughput: 137 ops/ms
Throughput: 137 ops/ms
Throughput: 138 ops/ms
Throughput: 137 ops/ms
Validate
#+end_src
*** mac
patch:
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestDoubleMax make run
rm -f *.log
pushd /Users/g/src/jdk-reassoc-reduct-chain
CONF=fast-darwin-arm64 make hotspot
cp /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/support/modules_libs/java.base/server/libjvm.dylib /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/server
rm -drf /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/server/libjvm.dylib.dSYM
cp -r /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/support/modules_libs/java.base/server/libjvm.dylib.dSYM /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/server || true
popd
touch /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java
~/src/jdk-reassoc-reduct-chain ~/src/colata/reassoc-reduct-chain-8351409
make[1]: Entering directory '/Users/g/src/jdk-reassoc-reduct-chain'
Building target 'hotspot' in configuration 'fast-darwin-arm64'
Updating support/modules_libs/java.base/server/libjvm.dylib due to 1 file(s)
Finished building target 'hotspot' in configuration 'fast-darwin-arm64'
make[1]: Leaving directory '/Users/g/src/jdk-reassoc-reduct-chain'
cp: cannot stat '/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/support/modules_libs/java.base/server/libjvm.dylib.dSYM': No such file or directory
~/src/colata/reassoc-reduct-chain-8351409
/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:-UseSuperWord -XX:CompileCommand=compileonly,TestDoubleMax::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 /Users/g/src/colata/reassoc-reduct-chain-8351409/TestDoubleMax.java
[0.008s][info][os] Use of CLOCK_MONOTONIC is supported
[0.008s][info][os] Use of pthread_condattr_setclock is not supported
[0.008s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with the default clock
[0.008s][info][os] SafePoint Polling address, bad (protected) page:0x00000001020e4000, good (unprotected) page:0x00000001020e8000
[0.011s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib
[0.012s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib was successful
CompileCommand: compileonly TestDoubleMax.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.085s][info][os] Initialized VM with process ID 30790
[0.103s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib
[0.105s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib was successful
[0.122s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib
[0.123s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib was successful
Validate
Warmup
Running
Throughput: 1283 ops/ms
Throughput: 1123 ops/ms
Throughput: 1106 ops/ms
Throughput: 1102 ops/ms
Throughput: 1114 ops/ms
Throughput: 1048 ops/ms
Throughput: 1070 ops/ms
Throughput: 999 ops/ms
Throughput: 1111 ops/ms
Throughput: 1154 ops/ms
Validate
#+end_src
base:
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ CLASS=TestDoubleMax make run
rm -f *.log
pushd /Users/g/src/jdk-reassoc-reduct-chain
CONF=fast-darwin-arm64 make hotspot
cp /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/support/modules_libs/java.base/server/libjvm.dylib /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/server
rm -drf /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/server/libjvm.dylib.dSYM
cp -r /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/support/modules_libs/java.base/server/libjvm.dylib.dSYM /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/server || true
popd
touch /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java
~/src/jdk-reassoc-reduct-chain ~/src/colata/reassoc-reduct-chain-8351409
make[1]: Entering directory '/Users/g/src/jdk-reassoc-reduct-chain'
Building target 'hotspot' in configuration 'fast-darwin-arm64'
Updating support/modules_libs/java.base/server/libjvm.dylib due to 1 file(s)
Finished building target 'hotspot' in configuration 'fast-darwin-arm64'
make[1]: Leaving directory '/Users/g/src/jdk-reassoc-reduct-chain'
cp: cannot stat '/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/support/modules_libs/java.base/server/libjvm.dylib.dSYM': No such file or directory
~/src/colata/reassoc-reduct-chain-8351409
/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:-UseSuperWord -XX:CompileCommand=compileonly,TestDoubleMax::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 /Users/g/src/colata/reassoc-reduct-chain-8351409/TestDoubleMax.java
[0.007s][info][os] Use of CLOCK_MONOTONIC is supported
[0.007s][info][os] Use of pthread_condattr_setclock is not supported
[0.007s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with the default clock
[0.007s][info][os] SafePoint Polling address, bad (protected) page:0x000000010019c000, good (unprotected) page:0x00000001001a0000
[0.010s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib
[0.011s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib was successful
CompileCommand: compileonly TestDoubleMax.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.080s][info][os] Initialized VM with process ID 31648
[0.098s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib
[0.099s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib was successful
[0.117s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib
[0.117s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib was successful
Validate
Warmup
Running
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 221 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Validate
#+end_src
** benchmark no superword
Performance Down:
#+begin_src bash
Benchmark                                         (SIZE)  (seed)   Mode  Cnt     Base     Patch   Units   Diff
VectorReduction2.NoSuperword.charXorBig             2048       0  thrpt    3  311.586   201.493  ops/ms   -35%
VectorReduction2.NoSuperword.charXorDotProduct      2048       0  thrpt    3  621.947   540.394  ops/ms   -13%
VectorReduction2.NoSuperword.doubleMaxBig           2048       0  thrpt    3  240.742   149.100  ops/ms   -38%
VectorReduction2.NoSuperword.doubleMaxDotProduct    2048       0  thrpt    3  346.652   171.615  ops/ms   -50%
VectorReduction2.NoSuperword.doubleMaxSimple        2048       0  thrpt    3  708.471   173.243  ops/ms   -76%
VectorReduction2.NoSuperword.doubleMinBig           2048       0  thrpt    3  227.311   153.924  ops/ms   -32%
VectorReduction2.NoSuperword.doubleMinDotProduct    2048       0  thrpt    3  520.809   180.773  ops/ms   -65%
VectorReduction2.NoSuperword.doubleMinSimple        2048       0  thrpt    3  379.364   141.065  ops/ms   -63%
VectorReduction2.NoSuperword.floatMaxBig            2048       0  thrpt    3  241.157   148.102  ops/ms   -39%
VectorReduction2.NoSuperword.floatMaxDotProduct     2048       0  thrpt    3  333.993   170.167  ops/ms   -49%
VectorReduction2.NoSuperword.floatMaxSimple         2048       0  thrpt    3  566.528   174.842  ops/ms   -69%
VectorReduction2.NoSuperword.floatMinBig            2048       0  thrpt    3  299.708   151.154  ops/ms   -50%
VectorReduction2.NoSuperword.floatMinDotProduct     2048       0  thrpt    3  476.948   184.426  ops/ms   -61%
VectorReduction2.NoSuperword.floatMinSimple         2048       0  thrpt    3  360.951   141.869  ops/ms   -61%
VectorReduction2.NoSuperword.shortXorBig            2048       0  thrpt    3  305.049   174.546  ops/ms   -43%
VectorReduction2.NoSuperword.shortXorDotProduct     2048       0  thrpt    3  622.019   540.479  ops/ms   -13%
#+end_src

Performance Up:
#+begin_src bash
Benchmark                                         (SIZE)  (seed)   Mode  Cnt     Base     Patch   Units   Diff
VectorReduction2.NoSuperword.byteMaxDotProduct      2048       0  thrpt    3  408.814   483.670  ops/ms   +18%
VectorReduction2.NoSuperword.byteMaxSimple          2048       0  thrpt    3  461.890   572.365  ops/ms   +24%
VectorReduction2.NoSuperword.byteMinDotProduct      2048       0  thrpt    3  408.742   483.519  ops/ms   +18%
VectorReduction2.NoSuperword.byteMinSimple          2048       0  thrpt    3  461.957   574.078  ops/ms   +24%
VectorReduction2.NoSuperword.charMaxDotProduct      2048       0  thrpt    3  409.836   508.462  ops/ms   +24%
VectorReduction2.NoSuperword.charMaxSimple          2048       0  thrpt    3  463.970   987.080  ops/ms  +113%
VectorReduction2.NoSuperword.charMinDotProduct      2048       0  thrpt    3  409.689   507.544  ops/ms   +24%
VectorReduction2.NoSuperword.charMinSimple          2048       0  thrpt    3  463.999   987.115  ops/ms  +113%
VectorReduction2.NoSuperword.charOrSimple           2048       0  thrpt    3  923.815  1551.373  ops/ms   +68%
VectorReduction2.NoSuperword.charXorSimple          2048       0  thrpt    3  924.207  1552.036  ops/ms   +68%
VectorReduction2.NoSuperword.intAddSimple           2048       0  thrpt    3  927.711  1568.668  ops/ms   +69%
VectorReduction2.NoSuperword.intMaxDotProduct       2048       0  thrpt    3  415.899   629.995  ops/ms   +51%
VectorReduction2.NoSuperword.intMaxSimple           2048       0  thrpt    3  463.831   987.068  ops/ms  +113%
VectorReduction2.NoSuperword.intMinDotProduct       2048       0  thrpt    3  415.789   629.789  ops/ms   +51%
VectorReduction2.NoSuperword.intMinSimple           2048       0  thrpt    3  463.968   986.614  ops/ms  +113%
VectorReduction2.NoSuperword.intOrSimple            2048       0  thrpt    3  927.654  1569.552  ops/ms   +69%
VectorReduction2.NoSuperword.intXorSimple           2048       0  thrpt    3  927.743  1569.145  ops/ms   +69%
VectorReduction2.NoSuperword.longAddSimple          2048       0  thrpt    3  927.702  1573.526  ops/ms   +70%
VectorReduction2.NoSuperword.longMaxDotProduct      2048       0  thrpt    3  408.261   604.996  ops/ms   +48%
VectorReduction2.NoSuperword.longMaxSimple          2048       0  thrpt    3  463.857   981.058  ops/ms  +111%
VectorReduction2.NoSuperword.longMinDotProduct      2048       0  thrpt    3  412.250   602.044  ops/ms   +46%
VectorReduction2.NoSuperword.longMinSimple          2048       0  thrpt    3  462.210   825.483  ops/ms   +79%
VectorReduction2.NoSuperword.longOrSimple           2048       0  thrpt    3  927.741  1573.390  ops/ms   +70%
VectorReduction2.NoSuperword.longXorBig             2048       0  thrpt    3  380.870   393.237  ops/ms    +3%
VectorReduction2.NoSuperword.longXorSimple          2048       0  thrpt    3  928.236  1573.573  ops/ms   +70%
VectorReduction2.NoSuperword.shortMaxDotProduct     2048       0  thrpt    3  404.618   508.912  ops/ms   +26%
VectorReduction2.NoSuperword.shortMaxSimple         2048       0  thrpt    3  464.021   987.337  ops/ms  +113%
VectorReduction2.NoSuperword.shortMinDotProduct     2048       0  thrpt    3  404.613   508.734  ops/ms   +26%
VectorReduction2.NoSuperword.shortMinSimple         2048       0  thrpt    3  463.846   987.392  ops/ms  +113%
VectorReduction2.NoSuperword.shortOrSimple          2048       0  thrpt    3  924.281  1552.101  ops/ms   +68%
VectorReduction2.NoSuperword.shortXorSimple         2048       0  thrpt    3  924.382  1552.250  ops/ms   +68%
#+end_src

All Results:
#+begin_src bash
Benchmark                                         (SIZE)  (seed)   Mode  Cnt     Base     Patch   Units   Diff
VectorReduction2.NoSuperword.byteAddBig             2048       0  thrpt    3  301.002   300.922  ops/ms     0%
VectorReduction2.NoSuperword.byteAddDotProduct      2048       0  thrpt    3  395.632   395.708  ops/ms     0%
VectorReduction2.NoSuperword.byteAddSimple          2048       0  thrpt    3  462.476   462.422  ops/ms     0%
VectorReduction2.NoSuperword.byteAndBig             2048       0  thrpt    3  341.738   341.843  ops/ms     0%
VectorReduction2.NoSuperword.byteAndDotProduct      2048       0  thrpt    3  644.273   644.554  ops/ms     0%
VectorReduction2.NoSuperword.byteAndSimple          2048       0  thrpt    3  790.690   786.439  ops/ms    -1%
VectorReduction2.NoSuperword.byteMaxBig             2048       0  thrpt    3  298.563   293.044  ops/ms    -2%
VectorReduction2.NoSuperword.byteMaxDotProduct      2048       0  thrpt    3  408.814   483.670  ops/ms   +18%
VectorReduction2.NoSuperword.byteMaxSimple          2048       0  thrpt    3  461.890   572.365  ops/ms   +24%
VectorReduction2.NoSuperword.byteMinBig             2048       0  thrpt    3  298.550   293.136  ops/ms    -2%
VectorReduction2.NoSuperword.byteMinDotProduct      2048       0  thrpt    3  408.742   483.519  ops/ms   +18%
VectorReduction2.NoSuperword.byteMinSimple          2048       0  thrpt    3  461.957   574.078  ops/ms   +24%
VectorReduction2.NoSuperword.byteMulBig             2048       0  thrpt    3  230.307   230.227  ops/ms     0%
VectorReduction2.NoSuperword.byteMulDotProduct      2048       0  thrpt    3  231.451   231.420  ops/ms     0%
VectorReduction2.NoSuperword.byteMulSimple          2048       0  thrpt    3  232.921   232.913  ops/ms     0%
VectorReduction2.NoSuperword.byteOrBig              2048       0  thrpt    3  341.910   342.970  ops/ms     0%
VectorReduction2.NoSuperword.byteOrDotProduct       2048       0  thrpt    3  639.483   635.157  ops/ms    -1%
VectorReduction2.NoSuperword.byteOrSimple           2048       0  thrpt    3  790.605   790.015  ops/ms     0%
VectorReduction2.NoSuperword.byteXorBig             2048       0  thrpt    3  344.639   344.373  ops/ms     0%
VectorReduction2.NoSuperword.byteXorDotProduct      2048       0  thrpt    3  653.551   634.577  ops/ms    -3%
VectorReduction2.NoSuperword.byteXorSimple          2048       0  thrpt    3  790.346   787.228  ops/ms     0%
VectorReduction2.NoSuperword.charAddBig             2048       0  thrpt    3  308.638   308.608  ops/ms     0%
VectorReduction2.NoSuperword.charAddDotProduct      2048       0  thrpt    3  403.723   403.733  ops/ms     0%
VectorReduction2.NoSuperword.charAddSimple          2048       0  thrpt    3  463.260   463.062  ops/ms     0%
VectorReduction2.NoSuperword.charAndBig             2048       0  thrpt    3  360.740   361.814  ops/ms     0%
VectorReduction2.NoSuperword.charAndDotProduct      2048       0  thrpt    3  667.726   667.856  ops/ms     0%
VectorReduction2.NoSuperword.charAndSimple          2048       0  thrpt    3  924.422   924.345  ops/ms     0%
VectorReduction2.NoSuperword.charMaxBig             2048       0  thrpt    3  310.928   303.584  ops/ms    -2%
VectorReduction2.NoSuperword.charMaxDotProduct      2048       0  thrpt    3  409.836   508.462  ops/ms   +24%
VectorReduction2.NoSuperword.charMaxSimple          2048       0  thrpt    3  463.970   987.080  ops/ms  +113%
VectorReduction2.NoSuperword.charMinBig             2048       0  thrpt    3  309.072   303.453  ops/ms    -2%
VectorReduction2.NoSuperword.charMinDotProduct      2048       0  thrpt    3  409.689   507.544  ops/ms   +24%
VectorReduction2.NoSuperword.charMinSimple          2048       0  thrpt    3  463.999   987.115  ops/ms  +113%
VectorReduction2.NoSuperword.charMulBig             2048       0  thrpt    3  230.161   230.203  ops/ms     0%
VectorReduction2.NoSuperword.charMulDotProduct      2048       0  thrpt    3  231.364   231.357  ops/ms     0%
VectorReduction2.NoSuperword.charMulSimple          2048       0  thrpt    3  232.909   233.001  ops/ms     0%
VectorReduction2.NoSuperword.charOrBig              2048       0  thrpt    3  356.855   353.663  ops/ms    -1%
VectorReduction2.NoSuperword.charOrDotProduct       2048       0  thrpt    3  667.645   667.650  ops/ms     0%
VectorReduction2.NoSuperword.charOrSimple           2048       0  thrpt    3  923.815  1551.373  ops/ms   +68%
VectorReduction2.NoSuperword.charXorBig             2048       0  thrpt    3  311.586   201.493  ops/ms   -35%
VectorReduction2.NoSuperword.charXorDotProduct      2048       0  thrpt    3  621.947   540.394  ops/ms   -13%
VectorReduction2.NoSuperword.charXorSimple          2048       0  thrpt    3  924.207  1552.036  ops/ms   +68%
VectorReduction2.NoSuperword.doubleAddBig           2048       0  thrpt    3  229.691   229.930  ops/ms     0%
VectorReduction2.NoSuperword.doubleAddDotProduct    2048       0  thrpt    3  232.644   232.604  ops/ms     0%
VectorReduction2.NoSuperword.doubleAddSimple        2048       0  thrpt    3  236.255   236.279  ops/ms     0%
VectorReduction2.NoSuperword.doubleMaxBig           2048       0  thrpt    3  240.742   149.100  ops/ms   -38%
VectorReduction2.NoSuperword.doubleMaxDotProduct    2048       0  thrpt    3  346.652   171.615  ops/ms   -50%
VectorReduction2.NoSuperword.doubleMaxSimple        2048       0  thrpt    3  708.471   173.243  ops/ms   -76%
VectorReduction2.NoSuperword.doubleMinBig           2048       0  thrpt    3  227.311   153.924  ops/ms   -32%
VectorReduction2.NoSuperword.doubleMinDotProduct    2048       0  thrpt    3  520.809   180.773  ops/ms   -65%
VectorReduction2.NoSuperword.doubleMinSimple        2048       0  thrpt    3  379.364   141.065  ops/ms   -63%
VectorReduction2.NoSuperword.doubleMulBig           2048       0  thrpt    3  115.676   115.729  ops/ms     0%
VectorReduction2.NoSuperword.doubleMulDotProduct    2048       0  thrpt    3  181.953   182.084  ops/ms     0%
VectorReduction2.NoSuperword.doubleMulSimple        2048       0  thrpt    3  150.683   150.602  ops/ms     0%
VectorReduction2.NoSuperword.floatAddBig            2048       0  thrpt    3  230.253   230.230  ops/ms     0%
VectorReduction2.NoSuperword.floatAddDotProduct     2048       0  thrpt    3  232.876   232.916  ops/ms     0%
VectorReduction2.NoSuperword.floatAddSimple         2048       0  thrpt    3  236.287   236.241  ops/ms     0%
VectorReduction2.NoSuperword.floatMaxBig            2048       0  thrpt    3  241.157   148.102  ops/ms   -39%
VectorReduction2.NoSuperword.floatMaxDotProduct     2048       0  thrpt    3  333.993   170.167  ops/ms   -49%
VectorReduction2.NoSuperword.floatMaxSimple         2048       0  thrpt    3  566.528   174.842  ops/ms   -69%
VectorReduction2.NoSuperword.floatMinBig            2048       0  thrpt    3  299.708   151.154  ops/ms   -50%
VectorReduction2.NoSuperword.floatMinDotProduct     2048       0  thrpt    3  476.948   184.426  ops/ms   -61%
VectorReduction2.NoSuperword.floatMinSimple         2048       0  thrpt    3  360.951   141.869  ops/ms   -61%
VectorReduction2.NoSuperword.floatMulBig            2048       0  thrpt    3  160.498   160.555  ops/ms     0%
VectorReduction2.NoSuperword.floatMulDotProduct     2048       0  thrpt    3  208.976   208.879  ops/ms     0%
VectorReduction2.NoSuperword.floatMulSimple         2048       0  thrpt    3  182.658   182.726  ops/ms     0%
VectorReduction2.NoSuperword.intAddBig              2048       0  thrpt    3  436.237   436.091  ops/ms     0%
VectorReduction2.NoSuperword.intAddDotProduct       2048       0  thrpt    3  772.468   781.185  ops/ms    +1%
VectorReduction2.NoSuperword.intAddSimple           2048       0  thrpt    3  927.711  1568.668  ops/ms   +69%
VectorReduction2.NoSuperword.intAndBig              2048       0  thrpt    3  435.862   436.728  ops/ms     0%
VectorReduction2.NoSuperword.intAndDotProduct       2048       0  thrpt    3  771.823   768.775  ops/ms     0%
VectorReduction2.NoSuperword.intAndSimple           2048       0  thrpt    3  927.638   927.653  ops/ms     0%
VectorReduction2.NoSuperword.intMaxBig              2048       0  thrpt    3  370.837   358.829  ops/ms    -3%
VectorReduction2.NoSuperword.intMaxDotProduct       2048       0  thrpt    3  415.899   629.995  ops/ms   +51%
VectorReduction2.NoSuperword.intMaxSimple           2048       0  thrpt    3  463.831   987.068  ops/ms  +113%
VectorReduction2.NoSuperword.intMinBig              2048       0  thrpt    3  370.814   358.657  ops/ms    -3%
VectorReduction2.NoSuperword.intMinDotProduct       2048       0  thrpt    3  415.789   629.789  ops/ms   +51%
VectorReduction2.NoSuperword.intMinSimple           2048       0  thrpt    3  463.968   986.614  ops/ms  +113%
VectorReduction2.NoSuperword.intMulBig              2048       0  thrpt    3  305.551   305.523  ops/ms     0%
VectorReduction2.NoSuperword.intMulDotProduct       2048       0  thrpt    3  309.677   309.540  ops/ms     0%
VectorReduction2.NoSuperword.intMulSimple           2048       0  thrpt    3  314.718   314.799  ops/ms     0%
VectorReduction2.NoSuperword.intOrBig               2048       0  thrpt    3  436.181   437.536  ops/ms     0%
VectorReduction2.NoSuperword.intOrDotProduct        2048       0  thrpt    3  780.253   778.861  ops/ms     0%
VectorReduction2.NoSuperword.intOrSimple            2048       0  thrpt    3  927.654  1569.552  ops/ms   +69%
VectorReduction2.NoSuperword.intXorBig              2048       0  thrpt    3  331.113   182.680  ops/ms   -45%
VectorReduction2.NoSuperword.intXorDotProduct       2048       0  thrpt    3  785.716   743.180  ops/ms    -5%
VectorReduction2.NoSuperword.intXorSimple           2048       0  thrpt    3  927.743  1569.145  ops/ms   +69%
VectorReduction2.NoSuperword.longAddBig             2048       0  thrpt    3  388.209   386.370  ops/ms     0%
VectorReduction2.NoSuperword.longAddDotProduct      2048       0  thrpt    3  710.167   718.247  ops/ms    +1%
VectorReduction2.NoSuperword.longAddSimple          2048       0  thrpt    3  927.702  1573.526  ops/ms   +70%
VectorReduction2.NoSuperword.longAndBig             2048       0  thrpt    3  383.109   382.524  ops/ms     0%
VectorReduction2.NoSuperword.longAndDotProduct      2048       0  thrpt    3  712.369   712.583  ops/ms     0%
VectorReduction2.NoSuperword.longAndSimple          2048       0  thrpt    3  928.207   927.625  ops/ms     0%
VectorReduction2.NoSuperword.longMaxBig             2048       0  thrpt    3  321.437   321.322  ops/ms     0%
VectorReduction2.NoSuperword.longMaxDotProduct      2048       0  thrpt    3  408.261   604.996  ops/ms   +48%
VectorReduction2.NoSuperword.longMaxSimple          2048       0  thrpt    3  463.857   981.058  ops/ms  +111%
VectorReduction2.NoSuperword.longMinBig             2048       0  thrpt    3  328.290   319.503  ops/ms    -3%
VectorReduction2.NoSuperword.longMinDotProduct      2048       0  thrpt    3  412.250   602.044  ops/ms   +46%
VectorReduction2.NoSuperword.longMinSimple          2048       0  thrpt    3  462.210   825.483  ops/ms   +79%
VectorReduction2.NoSuperword.longMulBig             2048       0  thrpt    3  228.174   228.541  ops/ms     0%
VectorReduction2.NoSuperword.longMulDotProduct      2048       0  thrpt    3  309.965   310.023  ops/ms     0%
VectorReduction2.NoSuperword.longMulSimple          2048       0  thrpt    3  314.604   314.551  ops/ms     0%
VectorReduction2.NoSuperword.longOrBig              2048       0  thrpt    3  383.239   383.935  ops/ms     0%
VectorReduction2.NoSuperword.longOrDotProduct       2048       0  thrpt    3  720.605   722.198  ops/ms     0%
VectorReduction2.NoSuperword.longOrSimple           2048       0  thrpt    3  927.741  1573.390  ops/ms   +70%
VectorReduction2.NoSuperword.longXorBig             2048       0  thrpt    3  380.870   393.237  ops/ms    +3%
VectorReduction2.NoSuperword.longXorDotProduct      2048       0  thrpt    3  719.393   718.064  ops/ms     0%
VectorReduction2.NoSuperword.longXorSimple          2048       0  thrpt    3  928.236  1573.573  ops/ms   +70%
VectorReduction2.NoSuperword.shortAddBig            2048       0  thrpt    3  309.122   309.191  ops/ms     0%
VectorReduction2.NoSuperword.shortAddDotProduct     2048       0  thrpt    3  399.842   399.754  ops/ms     0%
VectorReduction2.NoSuperword.shortAddSimple         2048       0  thrpt    3  463.121   463.309  ops/ms     0%
VectorReduction2.NoSuperword.shortAndBig            2048       0  thrpt    3  358.816   358.628  ops/ms     0%
VectorReduction2.NoSuperword.shortAndDotProduct     2048       0  thrpt    3  668.050   668.032  ops/ms     0%
VectorReduction2.NoSuperword.shortAndSimple         2048       0  thrpt    3  924.371   924.401  ops/ms     0%
VectorReduction2.NoSuperword.shortMaxBig            2048       0  thrpt    3  305.320   309.479  ops/ms    +1%
VectorReduction2.NoSuperword.shortMaxDotProduct     2048       0  thrpt    3  404.618   508.912  ops/ms   +26%
VectorReduction2.NoSuperword.shortMaxSimple         2048       0  thrpt    3  464.021   987.337  ops/ms  +113%
VectorReduction2.NoSuperword.shortMinBig            2048       0  thrpt    3  305.140   309.446  ops/ms    +1%
VectorReduction2.NoSuperword.shortMinDotProduct     2048       0  thrpt    3  404.613   508.734  ops/ms   +26%
VectorReduction2.NoSuperword.shortMinSimple         2048       0  thrpt    3  463.846   987.392  ops/ms  +113%
VectorReduction2.NoSuperword.shortMulBig            2048       0  thrpt    3  229.971   230.163  ops/ms     0%
VectorReduction2.NoSuperword.shortMulDotProduct     2048       0  thrpt    3  231.575   231.672  ops/ms     0%
VectorReduction2.NoSuperword.shortMulSimple         2048       0  thrpt    3  233.015   232.988  ops/ms     0%
VectorReduction2.NoSuperword.shortOrBig             2048       0  thrpt    3  357.613   358.958  ops/ms     0%
VectorReduction2.NoSuperword.shortOrDotProduct      2048       0  thrpt    3  668.795   668.142  ops/ms     0%
VectorReduction2.NoSuperword.shortOrSimple          2048       0  thrpt    3  924.281  1552.101  ops/ms   +68%
VectorReduction2.NoSuperword.shortXorBig            2048       0  thrpt    3  305.049   174.546  ops/ms   -43%
VectorReduction2.NoSuperword.shortXorDotProduct     2048       0  thrpt    3  622.019   540.479  ops/ms   -13%
VectorReduction2.NoSuperword.shortXorSimple         2048       0  thrpt    3  924.382  1552.250  ops/ms   +68%
#+end_src
* 21.1.26
** after fix
new errors:
#+begin_src bash
compiler/c2/cmove/TestFPComparison2.java: The test is to trigger code path of BoolTest::ge/gt in C2_MacroAssembler::enc_cmove_cmp_fp
compiler/loopopts/superword/RedTest_int.java: Add C2 x86 Superword support for scalar logical reduction optimizations : int test
compiler/loopopts/superword/RedTest_long.java: Add C2 x86 Superword support for scalar logical reduction optimizations : long test
#+end_src

patch
#+begin_src bash
Test results: passed: 2,052; failed: 8; error: 35; skipped: 6; did not match keywords: 6; did not meet platform requirements: 93
#+end_src
base:
#+begin_src bash
Test results: passed: 2,053; failed: 8; error: 32; skipped: 6; did not match keywords: 6; did not meet platform requirements: 93
#+end_src
** sum max
#+begin_src bash
 277  AddL  === _ 296 278  [[ 296 301 310 ]]  !orig=217,192 !jvms: TestSumMax::test @ bci:24 (line 21)
 278  MaxL  === _ 296 279  [[ 277 ]]  !orig=218,191 !jvms: TestSumMax::test @ bci:21 (line 21)
 296  Phi  === 288 33 277  [[ 277 278 313 ]]  #long !orig=[253],247
 313  Phi  === 305 296 344  [[ 178 ]]  #long



[avoid-cmov] try reassociate; chain length: 2
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  296  Phi  === 288 33 277  [[ 277 278 313 ]]  #long !orig=[253],247
[avoid-cmov] try reassociate; chain head:
 277  AddL  === _ 296 278  [[ 296 301 310 ]]  !orig=217,192 !jvms: TestSumMax::test @ bci:24 (line 21)
[avoid-cmov] after reassociate; new chain head:
 677  MaxL  === _ 296 278  [[ 310 301 296 ]]  !orig=[277],217,192 !jvms: TestSumMax::test @ bci:24 (line 21)
#+end_src
** compiler suite base vs patch
detail:
base:
#+begin_src bash
        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/colata/jdk-latest/JTwork/compiler/c2/irTests/TestDuplicateBackedge.d/driver.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.driver.irmatching.IRViolationException: There were one or multiple IR rule failures. Please check stderr for more information.

2 warnings

TEST RESULT: Failed. Compilation failed: Compilation failed
--
3 errors

TEST RESULT: Failed. Compilation failed: Compilation failed

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/colata/jdk-latest/JTwork/compiler/cpuflags/TestAESIntrinsicsOnSupportedConfig.d/main.4.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.AssertionError: Expected message not found: 'com\.sun\.crypto\.provider\.CipherBlockChaining::(implEncrypt|implDecrypt) \([0-9]+ bytes\)\s+\(intrinsic[,\)]'. Case testUseAES failed

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/colata/jdk-latest/JTwork/compiler/gallery/TestNormalMapping_visual.d/main.0.jta visual
TEST RESULT: Failed. Execution failed: `main' threw exception: java.awt.HeadlessException: No X11 DISPLAY variable was set, or no headful library support was found, but this program performed an operation which requires it.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/colata/jdk-latest/JTwork/compiler/jvmci/compilerToVM/IterateFramesNative.d/main.5.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.UnsatisfiedLinkError: no IterateFramesNative in java.library.path: /usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/colata/jdk-latest/JTwork/compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/ConstantPoolTest.d/testng.1.jta compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/ConstantPoolTest.java false jdk.vm.ci.runtime.test.ConstantPoolTest
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.Exception: config failures: 0, test failures: 1

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/colata/jdk-latest/JTwork/compiler/jvmci/TestUncaughtErrorInCompileMethod.d/driver.3.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Expected to get exit value of [0], exit value is: [134]
#+end_src
patch:
#+begin_src bash
        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/c2/irTests/TestDuplicateBackedge.d/driver.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.driver.irmatching.IRViolationException: There were one or multiple IR rule failures. Please check stderr for more information.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/c2/Test5091921.d/main.0.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]

2 warnings

TEST RESULT: Failed. Compilation failed: Compilation failed

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/codecache/TestStressCodeBuffers.d/main.0.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]

3 errors

TEST RESULT: Failed. Compilation failed: Compilation failed

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/cpuflags/TestAESIntrinsicsOnSupportedConfig.d/main.4.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.AssertionError: Expected message not found: 'com\.sun\.crypto\.provider\.CipherBlockChaining::(implEncrypt|implDecrypt) \([0-9]+ bytes\)\s+\(intrinsic[,\)]'. Case testUseAES failed

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/gallery/TestNormalMapping_visual.d/main.0.jta visual
TEST RESULT: Failed. Execution failed: `main' threw exception: java.awt.HeadlessException: No X11 DISPLAY variable was set, or no headful library support was found, but this program performed an operation which requires it.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/gcbarriers/TestMinMaxLongLoopBarrier.d/driver.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.driver.TestVMException: There were one or multiple errors. Please check stderr for more information.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/sanity/TestSHA1Intrinsics.d/main.4.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.Exception: java.lang.Exception: TestDigest Error

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/sanity/TestSHA1MultiBlockIntrinsics.d/main.4.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.Exception: java.lang.Exception: TestDigest Error

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/sanity/TestSHA256Intrinsics.d/main.4.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/sanity/TestSHA256MultiBlockIntrinsics.d/main.4.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/sanity/TestSHA512Intrinsics.d/main.4.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 139]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/sanity/TestSHA512MultiBlockIntrinsics.d/main.4.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 139]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/intrinsics/sha/TestDigest.d/main.2.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/jvmci/compilerToVM/IterateFramesNative.d/main.5.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.UnsatisfiedLinkError: no IterateFramesNative in java.library.path: /usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/ConstantPoolTest.d/testng.1.jta compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/ConstantPoolTest.java false jdk.vm.ci.runtime.test.ConstantPoolTest
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.Exception: config failures: 0, test failures: 1

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/jvmci/TestUncaughtErrorInCompileMethod.d/driver.3.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Expected to get exit value of [0], exit value is: [134]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/ReductionPerf.d/main.0.jta
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/RedTest_int.d/driver.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.shared.TestRunException: The following scenarios have failed: #0, #3, #4, #5. Please check stderr for more information.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/RedTest_long.d/driver.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.shared.TestRunException: The following scenarios have failed: #0, #3, #4, #5. Please check stderr for more information.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/TestLoopPhiApplyBadType_all-flags-2.d/main.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Failure

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/TestLoopPhiApplyBadType_fewer-flags-2.d/main.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Failure

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/TestLoopPhiApplyBadType_minimal-flags.d/main.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Failure

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/TestLoopPhiApplyBadType_no-flags.d/main.0.jta
TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Failure

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/TestReductions_force-vectorization.d/driver.0.jta P2
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.driver.TestVMException: There were one or multiple errors. Please check stderr for more information.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/loopopts/superword/TestReductions_no-vectorization.d/driver.0.jta P0
TEST RESULT: Failed. Execution failed: `main' threw exception: compiler.lib.ir_framework.driver.TestVMException: There were one or multiple errors. Please check stderr for more information.

        com.sun.javatest.regtest.agent.MainWrapper /home/g/src/jdk-reassoc-reduct-chain/JTwork/compiler/vectorapi/VectorMaskLoadStoreTest_id1.d/testng.0.jta compiler/vectorapi/VectorMaskLoadStoreTest.java#id1 false compiler.vectorapi.VectorMaskLoadStoreTest
TEST RESULT: Failed. Unexpected exit from test [exit code: 134]
#+end_src

summary
base:
#+begin_src bash
Test results: passed: 2,053; failed: 8; error: 32; skipped: 6; did not match keywords: 6; did not meet platform requirements: 93
#+end_src
patch:
#+begin_src bash
Test results: passed: 2,034; failed: 28; error: 32; skipped: 6; did not match keywords: 6; did not meet platform requirements: 93
#+end_src
* 20.1.26
** Progress
AddNode subclasses:
- [X] XorINode
- [X] XorLNode
- [X] OrINode
- [X] OrLNode
- [X] AddINode
- [X] AddLNode
- [X] MaxDNode
- [X] MaxFNode
- [-] MaxHFNode
- [X] MaxINode
- [X] MaxLNode
- [X] MinDNode
- [X] MinFNode
- [-] MinHFNode
- [X] MinINode
- [X] MinLNode
- [-] AddDNode (not associative)
- [-] AddFNode (not associative)
- [-] AddHFNode (not associative)
** Use replicate 2nd
Use last:
#+begin_src bash
  119  Phi  === 610 22 564  [[ 491 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestUseMiddle::test @ bci:12 (line 20)
  491  MaxL  === _ 119 649  [[ 492 ]]  !jvms: TestUseMiddle::test @ bci:137 (line 36)
  492  MaxL  === _ 491 694  [[ 493 ]]  !jvms: TestUseMiddle::test @ bci:146 (line 37)
  493  MaxL  === _ 492 742  [[ 494 ]]  !jvms: TestUseMiddle::test @ bci:155 (line 38)
  494  MaxL  === _ 493 790  [[ 495 ]]  !jvms: TestUseMiddle::test @ bci:164 (line 39)
  495  MaxL  === _ 494 838  [[ 496 ]]  !jvms: TestUseMiddle::test @ bci:173 (line 40)
  496  MaxL  === _ 495 886  [[ 497 ]]  !jvms: TestUseMiddle::test @ bci:182 (line 41)
  497  MaxL  === _ 496 934  [[ 498 ]]  !jvms: TestUseMiddle::test @ bci:191 (line 42)
  498  MaxL  === _ 497 982  [[ 552 542 525 525 557 544 ]]  !jvms: TestUseMiddle::test @ bci:200 (line 43)
#+end_src

No use:
#+begin_src bash
 147  MaxL  === _ 384 215  [[ 668 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 178  SafePoint  === 680 1 7 1 1 179 38 147 1 148 1 1  [[ 174 ]]  SafePoint  !orig=149 !jvms: Test::test @ bci:27 (line 19)
 322  Phi  === 314 301 147  [[ 240 247 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 529  MaxL  === _ 624 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 624  MaxL  === _ 625 636  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 625  MaxL  === _ 626 640  [[ 624 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 626  MaxL  === _ 627 644  [[ 625 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 627  MaxL  === _ 628 648  [[ 626 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 628  MaxL  === _ 631 629  [[ 627 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
 631  MaxL  === _ 632 654  [[ 628 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 632  MaxL  === _ 633 658  [[ 631 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
 633  MaxL  === _ 668 634  [[ 632 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 668  Phi  === 665 301 147  [[ 633 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
#+end_src
** Use replicate 1st
Use middle:
#+begin_src bash
  119  Phi  === 610 22 564  [[ 334 361 549 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestUseMiddle::test @ bci:12 (line 20)
  549  MaxL  === _ 119 649  [[ 550 ]]  !jvms: TestUseMiddle::test @ bci:156 (line 39)
  550  MaxL  === _ 549 694  [[ 551 ]]  !jvms: TestUseMiddle::test @ bci:165 (line 40)
  551  MaxL  === _ 550 742  [[ 552 ]]  !jvms: TestUseMiddle::test @ bci:174 (line 41)
  552  MaxL  === _ 551 790  [[ 553 ]]  !jvms: TestUseMiddle::test @ bci:183 (line 42)
  553  MaxL  === _ 552 838  [[ 554 ]]  !jvms: TestUseMiddle::test @ bci:192 (line 43)
  554  MaxL  === _ 553 886  [[ 555 ]]  !jvms: TestUseMiddle::test @ bci:201 (line 44)
  555  MaxL  === _ 554 934  [[ 556 ]]  !jvms: TestUseMiddle::test @ bci:210 (line 45)
  556  MaxL  === _ 555 982  [[ 557 ]]  !jvms: TestUseMiddle::test @ bci:219 (line 46)
  557  MaxL  === _ 556 1030  [[ 558 ]]  !jvms: TestUseMiddle::test @ bci:228 (line 47)
  558  MaxL  === _ 557 1078  [[ 559 ]]  !jvms: TestUseMiddle::test @ bci:237 (line 48)
  559  MaxL  === _ 558 1126  [[ 560 ]]  !jvms: TestUseMiddle::test @ bci:246 (line 49)
  560  MaxL  === _ 559 1174  [[ 561 ]]  !jvms: TestUseMiddle::test @ bci:255 (line 50)
  561  MaxL  === _ 560 1222  [[ 562 ]]  !jvms: TestUseMiddle::test @ bci:264 (line 51)
  562  MaxL  === _ 561 1270  [[ 563 ]]  !jvms: TestUseMiddle::test @ bci:273 (line 52)
  563  MaxL  === _ 562 1318  [[ 564 ]]  !jvms: TestUseMiddle::test @ bci:282 (line 53)
  564  MaxL  === _ 563 1366  [[ 584 119 ]]  !jvms: TestUseMiddle::test @ bci:291 (line 54)
#+end_src

Use last:
#+begin_src bash
  119  Phi  === 610 22 564  [[ 549 544 517 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestUseOut::test @ bci:12 (line 20)
  549  MaxL  === _ 119 649  [[ 550 ]]  !jvms: TestUseOut::test @ bci:156 (line 39)
  550  MaxL  === _ 549 694  [[ 551 ]]  !jvms: TestUseOut::test @ bci:165 (line 40)
  551  MaxL  === _ 550 742  [[ 552 ]]  !jvms: TestUseOut::test @ bci:174 (line 41)
  552  MaxL  === _ 551 790  [[ 553 ]]  !jvms: TestUseOut::test @ bci:183 (line 42)
  553  MaxL  === _ 552 838  [[ 554 ]]  !jvms: TestUseOut::test @ bci:192 (line 43)
  554  MaxL  === _ 553 886  [[ 555 ]]  !jvms: TestUseOut::test @ bci:201 (line 44)
  555  MaxL  === _ 554 934  [[ 556 ]]  !jvms: TestUseOut::test @ bci:210 (line 45)
  556  MaxL  === _ 555 982  [[ 557 ]]  !jvms: TestUseOut::test @ bci:219 (line 46)
  557  MaxL  === _ 556 1030  [[ 558 ]]  !jvms: TestUseOut::test @ bci:228 (line 47)
  558  MaxL  === _ 557 1078  [[ 559 ]]  !jvms: TestUseOut::test @ bci:237 (line 48)
  559  MaxL  === _ 558 1126  [[ 560 ]]  !jvms: TestUseOut::test @ bci:246 (line 49)
  560  MaxL  === _ 559 1174  [[ 561 ]]  !jvms: TestUseOut::test @ bci:255 (line 50)
  561  MaxL  === _ 560 1222  [[ 562 ]]  !jvms: TestUseOut::test @ bci:264 (line 51)
  562  MaxL  === _ 561 1270  [[ 563 ]]  !jvms: TestUseOut::test @ bci:273 (line 52)
  563  MaxL  === _ 562 1318  [[ 564 ]]  !jvms: TestUseOut::test @ bci:282 (line 53)
  564  MaxL  === _ 563 1366  [[ 584 119 ]]  !jvms: TestUseOut::test @ bci:291 (line 54)
  584  Phi  === 54 564 22  [[ 587 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestUseOut::test @ bci:9 (line 19)
#+end_src

No use:
#+begin_src bash
 147  MaxL  === _ 384 215  [[ 668 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 178  SafePoint  === 680 1 7 1 1 179 38 147 1 148 1 1  [[ 174 ]]  SafePoint  !orig=149 !jvms: Test::test @ bci:27 (line 19)
 322  Phi  === 314 301 147  [[ 240 247 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 529  MaxL  === _ 624 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 624  MaxL  === _ 625 636  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 625  MaxL  === _ 626 640  [[ 624 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 626  MaxL  === _ 627 644  [[ 625 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 627  MaxL  === _ 628 648  [[ 626 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 628  MaxL  === _ 631 629  [[ 627 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
 631  MaxL  === _ 632 654  [[ 628 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 632  MaxL  === _ 633 658  [[ 631 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
 633  MaxL  === _ 668 634  [[ 632 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 668  Phi  === 665 301 147  [[ 633 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
#+end_src
* 19.1.26
Baseline loop args:
#+begin_src bash
 147  MaxL  === _ 384 215  [[ 668 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 232  MaxL  === _ 240 233  [[ 240 247 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 301  MaxL  === _ 309 302  [[ 309 322 668 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 322  Phi  === 314 301 147  [[ 240 247 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 529  MaxL  === _ 624 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 624  MaxL  === _ 625 636  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 625  MaxL  === _ 626 640  [[ 624 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 626  MaxL  === _ 627 644  [[ 625 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 627  MaxL  === _ 628 648  [[ 626 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 628  MaxL  === _ 631 629  [[ 627 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
 631  MaxL  === _ 632 654  [[ 628 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 632  MaxL  === _ 633 658  [[ 631 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
 633  MaxL  === _ 668 634  [[ 632 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 665  CountedLoop  === 665 176 160  [[ 665 172 668 677 ]] inner stride: 16 main of N665 strip mined !orig=[550],[460],[389],[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
 668  Phi  === 665 301 147  [[ 633 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
#+end_src

Baseline
#+begin_src bash
[nix-shell:~/src/colata/reassoc-reduct-chain-8351409]$ GEN=Base make
cd /Users/g/src/colata/reassoc-reduct-chain-8351409/src/Base
/Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:-UseSuperWord -XX:CompileCommand=compileonly,Test::test -XX:CompileCommand=dontinline,*::*dontinline* -XX:VerifyIterativeGVN=1000 Test.java
[0.002s][info][os] Use of CLOCK_MONOTONIC is supported
[0.002s][info][os] Use of pthread_condattr_setclock is not supported
[0.002s][info][os] Relative timed-wait using pthread_cond_timedwait is associated with the default clock
[0.002s][info][os] SafePoint Polling address, bad (protected) page:0x00000001048c8000, good (unprotected) page:0x00000001048cc000
[0.004s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib
[0.004s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libjava.dylib was successful
CompileCommand: compileonly Test.test bool compileonly = true
CompileCommand: dontinline *.*dontinline* bool dontinline = true
[0.037s][info][os] Initialized VM with process ID 33390
[0.046s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib
[0.047s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnio.dylib was successful
[0.056s][info][os] attempting shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib
[0.056s][info][os] shared library load of /Users/g/src/jdk-reassoc-reduct-chain/build/fast-darwin-arm64/jdk/lib/libnet.dylib was successful
Validate
Warmup
Running
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Throughput: 224 ops/ms
Validate
#+end_src
* 16.1.26
Roland:
#+begin_src bash
 812  MaxL  === _ 813 920  [[ 865 897 ]]  !orig=370 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:115 (line 33)
 813  MaxL  === _ 814 837  [[ 812 ]]  !orig=357 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:107 (line 32)
 814  MaxL  === _ 826 817  [[ 813 ]]  !orig=344 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:98 (line 31)
 815  MaxL  === _ 816 837  [[ 865 910 920 ]]  !orig=318 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:80 (line 29)
 816  MaxL  === _ 827 817  [[ 815 ]]  !orig=305 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:71 (line 28)
 826  MaxL  === _ 829 833  [[ 814 ]]  !orig=331 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:89 (line 30)
 827  MaxL  === _ 828 833  [[ 816 ]]  !orig=292 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:62 (line 27)
 828  MaxL  === _ 920 829  [[ 827 ]]  !orig=279 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:53 (line 26)
 829  LoadL  === 858 7 830  [[ 826 828 257 235 212 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long !orig=201 !jvms: TestCommonRolandLongMax::test @ bci:23 (line 22)

  33  LoadL  === 5 7 31  [[ 74 910 920 105 ]]  @rawptr:BotPTR, idx=Raw; #long (does not depend only on test, raw access) !orig=[85] !jvms: TestCommonRolandLongMax::test @ bci:11 (line 21)
 829  LoadL  === 858 7 830  [[ 826 828 257 235 212 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long !orig=201 !jvms: TestCommonRolandLongMax::test @ bci:23 (line 22)
 833  LoadL  === 860 7 834  [[ 826 827 257 235 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long !orig=223 !jvms: TestCommonRolandLongMax::test @ bci:31 (line 23)
 817  LoadL  === 862 7 818  [[ 814 816 257 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long !orig=246 !jvms: TestCommonRolandLongMax::test @ bci:39 (line 24)
 837  LoadL  === 864 7 838  [[ 813 815 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long !orig=268 !jvms: TestCommonRolandLongMax::test @ bci:47 (line 25)
 872  Loop  === 872 868 173  [[ 855 872 920 926 ]] inner partial_peel  !orig=[809] !jvms: TestCommonRolandLongMax::test @ bci:139 (line 37)
 920  Phi  === 872 33 815  [[ 257 235 212 188 828 812 ]]  #long !orig=[917] !jvms: TestCommonRolandLongMax::test @ bci:139 (line 37)

 MaxL.812(MaxL.813(..), Phi.920)
 MaxL.813(MaxL.814(..), LoadL.837)
 MaxL.814(MaxL.826(..), LoadL.817)
 MaxL.815(MaxL.816(..), LoadL.837)
 MaxL.816(MaxL.827(..), LoadL.817)
 MaxL.826(LoadL.829, LoadL.833)
 MaxL.827(MaxL.828(..), LoadL.833)
 MaxL.828(Phi.920, LoadL.829)

 Phi.920 has two MaxL uses: 828 and 812
 Phi.920 has one MaxL input: 815
   MaxL.815 (line 29) long u3 = Long.max(v3, u2);
   -> MaxL.816 (line 28) long u2 = Long.max(v2, u1);
   -> MaxL.827 (line 27) long u1 = Long.max(v1, u0);
   -> MaxL.828 (line 26) long u0 = Long.max(v0, result);

You have to go through uses to find the associative operation that is a use of Phi.
This associative then has to have a use that is associative.
Max(y, Max(x, Phi()))
So it's fine that a Phi has multiple uses,
you have to iterate through those.
See this in action:

 920  Phi  === 872 33 815  [[ 257 235 212 188 828 812 ]]  #long !orig=[917] !jvms: TestCommonRolandLongMax::test @ bci:139 (line 37)

Has two uses MaxL:

 828  MaxL  === _ 920 829  [[ 827 ]]  !orig=279 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:53 (line 26)
 812  MaxL  === _ 813 920  [[ 865 897 ]]  !orig=370 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:115 (line 33)

We see that:

MaxL.812(MaxL.813(), Phi) has 2 uses none of which are associative operations:
 865  SafePoint  === 864 1 375 1 1 810 72 815 1 812 1 811 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1  [[ 172 ]]  SafePoint  !orig=374 !jvms: TestCommonRolandLongMax::test @ bci:129 (line 21)
 897  Phi  === 886 40 812  [[ 506 517 526 554 681 398 699 630 ]]  #long !jvms: TestCommonRolandLongMax::test @ bci:139 (line 37)

MaxL.828(Phi, LoadL.829) has a single use which is associative, this is the interesting path:
 827  MaxL  === _ 828 833  [[ 816 ]]  !orig=292 !jvms: Long::max @ bci:2 (line 1949) TestCommonRolandLongMax::test @ bci:62 (line 27)

#+end_src

#+begin_src bash
for (int i = 0; i < input_2.length; i += 4) {
      long v0 = input_2[i + 0];
      long v1 = input_2[i + 1];
      long v2 = input_2[i + 2];
      long v3 = input_2[i + 3];
      long u0 = v0 + result;
      long u1 = v1 + u0;
      long u2 = v2 + u1;
      long u3 = v3 + u2;
      result = u3;
      long t0 = v0 + v1;
      long t1 = v2 + t0;
      long t2 = v3 + t1;
      long t3 = result + t2;
      result2 = t3;
}

result(iteration i) = result(iteration i - 1) + v0 + v1 + v2 + v3
result2(iteration i) = result(iteration i - 1) + result(iteration i) + v0 + v1 + v2 + v3

result2(iteration i) = result(iteration i) + v0 + v1 + v2 + v3
#+end_src

** MaxL vs AddL v2
Without Identity MaxL fails with:
#+begin_src bash
Missed Identity optimization:
Old node:
dist dump
---------------------------------------------
   1  932  MaxL  === _ 914 807  [[ 904 914 862 806 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
   1  807  MaxL  === _ 808 831  [[ 806 932 ]]  !orig=357 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
   0  806  MaxL  === _ 807 932  [[ 862 896 ]]  !orig=370 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:128 (line 76)
New node:
dist dump
---------------------------------------------
   1  807  MaxL  === _ 808 831  [[ 806 932 ]]  !orig=357 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
   1  914  Phi  === 866 30 932  [[ 229 200 170 257 932 ]]  #long !orig=[911] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
   0  932  MaxL  === _ 914 807  [[ 904 914 862 806 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
#+end_src

MaxL:
#+begin_src bash
[avoid-cmov] try reassociate; chain length: 4
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  914  Phi  === 866 30 809  [[ 229 200 170 257 822 ]]  #long !orig=[911] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] try reassociate; chain head:
 809  MaxL  === _ 810 831  [[ 806 862 914 904 ]]  !orig=318 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:90 (line 71)
[avoid-cmov] after reassociate; new chain head:
 932  MaxL  === _ 914 931  [[ 904 914 862 806 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)

AFTER: AFTER_LOOP_OPTS
 806  MaxL  === _ 807 809  [[ 862 896 ]]  !orig=370 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:128 (line 76)
 807  MaxL  === _ 808 831  [[ 932 ]]  !orig=357 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
 932  MaxL  === _ 914 807  [[ 904 914 862 862 896 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
#+end_src

AddL:
#+begin_src bash
[avoid-cmov] try reassociate; chain length: 4
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  118  Phi  === 647 30 226  [[ 625 223 259 154 208 170 191 552 516 523 506 ]]  #long !jvms: TestReductionReassociation2::test_2 @ bci:11 (line 58)
[avoid-cmov] try reassociate; chain head:
 226  AddL  === _ 213 225  [[ 118 230 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:80 (line 66)
[avoid-cmov] after reassociate; new chain head:
 664  AddL  === _ 118 663  [[ 230 118 ]]  !orig=[226] !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)

AFTER: AFTER_LOOP_OPTS
 229  AddL  === _ 213 228  [[ 230 664 ]]  !orig=[663] !jvms: TestReductionReassociation2::test_2 @ bci:104 (line 70)
 664  AddL  === _ 118 229  [[ 230 118 ]]  !orig=[226] !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)
#+end_src
** MaxL vs AddL
*** MaxL
#+begin_src bash

#+end_src

#+begin_src bash
Missed Identity optimization:
Old node:
dist dump
---------------------------------------------
   1  932  MaxL  === _ 914 807  [[ 904 914 862 806 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
   1  807  MaxL  === _ 808 831  [[ 806 932 ]]  !orig=357 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
   0  806  MaxL  === _ 807 932  [[ 862 896 ]]  !orig=370 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:128 (line 76)
New node:
dist dump
---------------------------------------------
   1  807  MaxL  === _ 808 831  [[ 806 932 ]]  !orig=357 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
   1  914  Phi  === 866 30 932  [[ 229 200 170 257 932 ]]  #long !orig=[911] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
   0  932  MaxL  === _ 914 807  [[ 904 914 862 806 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)

MaxL.807(808, 831)
MaxL.932(Phi.914, MaxL.807(..))
MaxL.806(MaxL.807(..), MaxL.932(..))

MaxL.932(Phi.914, MaxL.807(808, 831))
MaxL.806(MaxL.807(808, 831), MaxL.932(..))

MaxL.806(MaxL.807(808, 831), MaxL.932(Phi.914, MaxL.807(808, 831)))

MaxL.806(MaxL.807, MaxL.932(Phi.914, MaxL.807))

MaxL.806(MaxL.932(Phi.914, MaxL.807))
#+end_src

#+begin_src bash
[avoid-cmov] try reassociate; chain length: 4
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  914  Phi  === 866 30 809  [[ 229 200 170 257 822 ]]  #long !orig=[911] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] try reassociate; chain head:
 809  MaxL  === _ 810 831  [[ 806 862 914 904 ]]  !orig=318 !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:90 (line 71)
[avoid-cmov] after reassociate; new chain head:
 932  MaxL  === _ 914 931  [[ 904 914 862 806 ]]  !orig=[809],318 !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)

  124  Phi  === 811 22 300  [[ 264 ]]  #long !jvms: TestReductionReassociation3::test_122 @ bci:20 (line 64)
  264  MaxL  === _ 124 858  [[ 276 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:63 (line 68)
  276  MaxL  === _ 264 903  [[ 288 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:72 (line 69)
  288  MaxL  === _ 276 951  [[ 300 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:81 (line 70)
  300  MaxL  === _ 288 1000  [[ 348 374 812 124 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:90 (line 71)
  312  MaxL  === _ 858 903  [[ 324 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:102 (line 73)
  324  MaxL  === _ 312 951  [[ 336 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:111 (line 74)
  336  MaxL  === _ 324 1000  [[ 348 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
  348  MaxL  === _ 300 336  [[ 375 812 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:128 (line 76)

[avoid-cmov] try reassociate; chain length: 4
[avoid-cmov] try reassociate:
[avoid-cmov] phi:   124  Phi  === 811 22 300  [[ 264 ]]  #long !jvms: TestReductionReassociation3::test_122 @ bci:20 (line 64)
[avoid-cmov] try reassociate; chain head:
  300  MaxL  === _ 288 1000  [[ 348 374 812 124 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:90 (line 71)
[avoid-cmov] after reassociate; new chain head:
 1052  MaxL  === _ 124 1051  [[ 124 812 374 348 ]]  !orig=[300] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)

[avoid-cmov] before hash find insert:   348  MaxL  === _ 336 1052  [[ 375 812 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:128 (line 76)
[avoid-cmov] after hash find insert: null
[avoid-cmov] before hash find insert:  1052  MaxL  === _ 124 1051  [[ 124 812 374 348 ]]  !orig=[300] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert: null
[avoid-cmov] before hash find insert:  1051  MaxL  === _ 1050 1000  [[ 1052 ]]  !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert: null
[avoid-cmov] before hash find insert:  1050  MaxL  === _ 1049 951  [[ 1051 ]]  !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert: null
[avoid-cmov] before hash find insert:  1049  MaxL  === _ 858 903  [[ 1050 ]]  !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert:   312  MaxL  === _ 858 903  [[ 324 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:102 (line 73)
[avoid-cmov] before hash find insert:  1050  MaxL  === _ 312 951  [[ 1051 ]]  !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert:   324  MaxL  === _ 312 951  [[ 336 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:111 (line 74)
[avoid-cmov] before hash find insert:  1051  MaxL  === _ 324 1000  [[ 1052 ]]  !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert:   336  MaxL  === _ 324 1000  [[ 348 ]]  !jvms: Long::max @ bci:2 (line 1949) TestReductionReassociation3::test_122 @ bci:120 (line 75)
[avoid-cmov] before hash find insert:  1052  MaxL  === _ 124 336  [[ 124 812 374 812 ]]  !orig=[300] !jvms: TestReductionReassociation3::test_122 @ bci:149 (line 79)
[avoid-cmov] after hash find insert: null

#+end_src
* 15.1.26
Graph before:
#+begin_src bash
 124  Phi  === 657 22 201  [[ 183 198 129 166 145 ]]  #long !jvms: TestReductionReassociation2::test_2 @ bci:20 (line 59)
 198  AddL  === _ 124 134  [[ 199 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:59 (line 63)
 199  AddL  === _ 150 198  [[ 200 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:66 (line 64)
 200  AddL  === _ 171 199  [[ 201 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:73 (line 65)
 201  AddL  === _ 188 200  [[ 241 205 124 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:80 (line 66)
 202  AddL  === _ 134 150  [[ 203 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:90 (line 68)
 203  AddL  === _ 171 202  [[ 204 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:97 (line 69)
 204  AddL  === _ 188 203  [[ 205 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:104 (line 70)
 205  AddL  === _ 201 204  [[ 242 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:110 (line 71)
#+end_src

#+begin_src bash
[avoid-cmov] try reassociate; chain head:
 201  AddL  === _ 188 200  [[ 241 205 124 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:80 (line 66)
[avoid-cmov] after reassociate; new chain head:
 672  AddL  === _ 124 671  [[ 124 205 241 ]]  !orig=[201] !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)

avoid-cmov] before hash find insert:  669  AddL  === _ 134 150  [[ 670 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)
[avoid-cmov] after hash find insert:  202  AddL  === _ 134 150  [[ 203 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:90 (line 68)
[avoid-cmov] before hash find insert:  670  AddL  === _ 171 202  [[ 671 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)
[avoid-cmov] after hash find insert:  203  AddL  === _ 171 202  [[ 204 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:97 (line 69)
[avoid-cmov] before hash find insert:  205  AddL  === _ 204 672  [[ 242 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:110 (line 71)
[avoid-cmov] after hash find insert: null
[avoid-cmov] before hash find insert:  671  AddL  === _ 188 203  [[ 672 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)
[avoid-cmov] after hash find insert:  204  AddL  === _ 188 203  [[ 205 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:104 (line 70)
[avoid-cmov] before hash find insert:  672  AddL  === _ 124 204  [[ 124 205 241 ]]  !orig=[201] !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)
[avoid-cmov] after hash find insert: null
#+end_src

Down to 5 nodes with a fix to walk through one of Phi outputs that is associative
#+begin_src bash

1) Method "public java.lang.Object[] compiler.loopopts.TestReductionReassociation2.test_2()" - [Failed IR rules: 1]:
   * @IR rule 1: "@compiler.lib.ir_framework.IR(phase={AFTER_LOOP_OPTS}, applyIfPlatformAnd={}, applyIfCPUFeatureOr={}, counts={"_#ADD_L#_", "= 4"}, failOn={}, applyIfPlatform={}, applyIfPlatformOr={}, applyIfOr={}, applyIfCPUFeatureAnd={}, applyIf={}, applyIfCPUFeature={}, applyIfAnd={}, applyIfNot={})"
     > Phase "After Loop Optimizations":
       - counts: Graph contains wrong number of nodes:
         * Constraint 1: "(\d+(\s){2}(AddL.*)+(\s){2}===.*)"
           - Failed comparison: [found] 5 = 4 [given]
             - Matched nodes (5):
               * 202  AddL  === _ 134 150  [[ 203 ]]  !orig=[669] !jvms: TestReductionReassociation2::test_2 @ bci:90 (line 68)
               * 203  AddL  === _ 171 202  [[ 204 ]]  !orig=[670] !jvms: TestReductionReassociation2::test_2 @ bci:97 (line 69)
               * 204  AddL  === _ 188 203  [[ 205 672 ]]  !orig=[671] !jvms: TestReductionReassociation2::test_2 @ bci:104 (line 70)
               * 205  AddL  === _ 204 672  [[ 242 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:110 (line 71)
               * 672  AddL  === _ 124 204  [[ 124 205 241 ]]  !orig=[201] !jvms: TestReductionReassociation2::test_2 @ bci:129 (line 74)

  55  IfTrue  === 54  [[ 59 ]] #1 !jvms: TestReductionReassociation2::test_2 @ bci:17 (line 58)
  59  Region  === 59 236 55  [[ 59 264 239 240 241 242 ]] #reducible  !jvms: TestReductionReassociation2::test_2 @ bci:122 (line 74)
 124  Phi  === 657 22 672  [[ 183 672 129 166 145 ]]  #long !jvms: TestReductionReassociation2::test_2 @ bci:20 (line 59)
 134  Proj  === 129  [[ 202 145 183 166 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:24 (line 59)
 150  Proj  === 145  [[ 202 166 183 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:33 (line 60)
 171  Proj  === 166  [[ 203 183 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:42 (line 61)
 188  Proj  === 183  [[ 204 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:51 (line 62)
 242  Phi  === 59 205 22  [[ 489 264 558 540 413 384 375 364 ]]  #long !jvms: TestReductionReassociation2::test_2 @ bci:17 (line 58)

 Phi.242(IfTrue.55, AddL.205, Region.59)

 AddL.202(Proj.134, Proj.150)
 AddL.203(Proj.171, AddL.202(..))
 AddL.204(Proj.188, AddL.203(..))
 AddL.672(Phi.124, AddL.204(..))
 AddL.205(AddL.204(..), AddL.672())

 Assume:
 v0 = Proj.134
 v1 = Proj.150
 v2 = Proj.171
 v3 = Proj.188
 result = Phi.124

 AddL.672(result, AddL.204(v3, AddL.203(v2, AddL.202(v0, v1))))
 AddL.205(AddL.204(..), AddL.672())

 AddL.672(result, v3 + v2 + v0 + v1)
 AddL.205(v3 + v2 + v0 + v1, AddL.672())

 AddL.205(v3 + v2 + v0 + v1, result + v3 + v2 + v0 + v1))

 AddL.202(Proj.134, Proj.150) // long u1 = v1 + u0;
 AddL.203(Proj.171, AddL.202(..)) // long u2 = v2 + u1;
 AddL.204(Proj.188, AddL.203(..)) // long u3 = v3 + u2;
 AddL.672(Phi.124, AddL.204(..)) //
 AddL.205(AddL.204(..), AddL.672()) //

 long u0 = v0 + result;
 long u1 = v1 + u0;
 long u2 = v2 + u1;
 long u3 = v3 + u2;
 result = u3;
 long t0 = v0 + v1;
 long t1 = v2 + t0;
 long t2 = v3 + t1;
 long t3 = result + t2;
 result2 = t3;

 long u0 = v0 + result;
 long u1 = v1 + u0;
 long u2 = v2 + u1;
 long u3 = v3 + u2;
 result = u3;
 // t2 == u3
 long t3 = result + u3; // AddL.672?
 result2 = t3;
#+end_src

Dont Inline experiment in ~TestUnrollLongAdd-dontinline.log~:
#+begin_src bash
 140  Phi  === 260 33 241  [[ 253 238 223 169 206 185 ]]  #long !jvms: TestUnrollLongAdd::test @ bci:6 (line 19)
 169  CallStaticJava  === 164 137 142 8 1 (141 157 157 140 1 141 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 170 171 172 174 ]] # Static  TestUnrollLongAdd::getArrayLong_dontinline long/half ( int, aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact,iid=bot ) TestUnrollLongAdd::test @ bci:16 (line 20) !jvms: TestUnrollLongAdd::test @ bci:16 (line 20)
 185  CallStaticJava  === 177 171 172 8 1 (184 157 157 140 1 141 174 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 186 187 188 190 ]] # Static  TestUnrollLongAdd::getArrayLong_dontinline long/half ( int, aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact,iid=bot ) TestUnrollLongAdd::test @ bci:25 (line 21) !jvms: TestUnrollLongAdd::test @ bci:25 (line 21)
 206  CallStaticJava  === 193 187 188 8 1 (205 157 157 140 1 141 174 1 190 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 207 208 209 211 ]] # Static  TestUnrollLongAdd::getArrayLong_dontinline long/half ( int, aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact,iid=bot ) TestUnrollLongAdd::test @ bci:34 (line 22) !jvms: TestUnrollLongAdd::test @ bci:34 (line 22)
 223  CallStaticJava  === 214 208 209 8 1 (222 157 157 140 1 141 174 1 190 1 211 1 1 1 1 1 1 1 1 1 1 1 ) [[ 224 225 226 228 ]] # Static  TestUnrollLongAdd::getArrayLong_dontinline long/half ( int, aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact,iid=bot ) TestUnrollLongAdd::test @ bci:43 (line 23) !jvms: TestUnrollLongAdd::test @ bci:43 (line 23)
 238  AddL  === _ 140 174  [[ 239 ]]  !jvms: TestUnrollLongAdd::test @ bci:51 (line 24)
 239  AddL  === _ 190 238  [[ 240 ]]  !jvms: TestUnrollLongAdd::test @ bci:58 (line 25)
 240  AddL  === _ 211 239  [[ 241 ]]  !jvms: TestUnrollLongAdd::test @ bci:65 (line 26)
 241  AddL  === _ 228 240  [[ 140 ]]  !jvms: TestUnrollLongAdd::test @ bci:72 (line 27)
 253  Return  === 165 137 16 8 9 returns 140  [[ 0 ]]
#+end_src

Moved array extraction to a separate method and made it non inline, then it fails with:
#+begin_src bash
         * Constraint 1: "(\d+(\s){2}(AddL.*)+(\s){2}===.*)"
           - Failed comparison: [found] 8 = 4 [given]
             - Matched nodes (8):
               * 198  AddL  === _ 124 134  [[ 199 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:59 (line 63)
               * 199  AddL  === _ 150 198  [[ 200 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:66 (line 64)
               * 200  AddL  === _ 171 199  [[ 201 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:73 (line 65)
               * 201  AddL  === _ 188 200  [[ 241 205 124 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:80 (line 66)
               * 202  AddL  === _ 134 150  [[ 203 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:90 (line 68)
               * 203  AddL  === _ 171 202  [[ 204 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:97 (line 69)
               * 204  AddL  === _ 188 203  [[ 205 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:104 (line 70)
               * 205  AddL  === _ 201 204  [[ 242 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:110 (line 71)

 198  AddL  === _ 124 134  [[ 199 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:59 (line 63)
 199  AddL  === _ 150 198  [[ 200 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:66 (line 64)
 200  AddL  === _ 171 199  [[ 201 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:73 (line 65)
 201  AddL  === _ 188 200  [[ 241 205 124 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:80 (line 66)
 202  AddL  === _ 134 150  [[ 203 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:90 (line 68)
 203  AddL  === _ 171 202  [[ 204 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:97 (line 69)
 204  AddL  === _ 188 203  [[ 205 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:104 (line 70)
 205  AddL  === _ 201 204  [[ 242 ]]  !jvms: TestReductionReassociation2::test_2 @ bci:110 (line 71)

 124  Phi  === 657 22 201  [[ 183 198 129 166 145 ]]  #long !jvms: TestReductionReassociation2::test_2 @ bci:20 (line 59)
 129  CallStaticJava  === 657 122 123 8 1 (125 1 124 1 1 1 125 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 130 131 132 134 ]] # Static  compiler.loopopts.TestReductionReassociation2::getArrayLong_dontinline long/half ( int ) TestReductionReassociation2::test_2 @ bci:24 (line 59) !jvms: TestReductionReassociation2::test_2 @ bci:24 (line 59)
 134  Proj  === 129  [[ 202 145 198 166 183 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:24 (line 59)

 145  CallStaticJava  === 137 131 132 8 1 (144 1 124 1 1 1 125 134 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 146 147 148 150 ]] # Static  compiler.loopopts.TestReductionReassociation2::getArrayLong_dontinline long/half ( int ) TestReductionReassociation2::test_2 @ bci:33 (line 60) !jvms: TestReductionReassociation2::test_2 @ bci:33 (line 60)
 150  Proj  === 145  [[ 202 166 199 183 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:33 (line 60)

 166  CallStaticJava  === 153 147 148 8 1 (165 1 124 1 1 1 125 134 1 150 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 167 168 169 171 ]] # Static  compiler.loopopts.TestReductionReassociation2::getArrayLong_dontinline long/half ( int ) TestReductionReassociation2::test_2 @ bci:42 (line 61) !jvms: TestReductionReassociation2::test_2 @ bci:42 (line 61)
 171  Proj  === 166  [[ 203 183 200 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:42 (line 61)

 183  CallStaticJava  === 174 168 169 8 1 (182 1 124 1 1 1 125 134 1 150 1 171 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ) [[ 184 185 186 188 ]] # Static  compiler.loopopts.TestReductionReassociation2::getArrayLong_dontinline long/half ( int ) TestReductionReassociation2::test_2 @ bci:51 (line 62) !jvms: TestReductionReassociation2::test_2 @ bci:51 (line 62)
 188  Proj  === 183  [[ 204 201 ]] #5 !jvms: TestReductionReassociation2::test_2 @ bci:51 (line 62)

 AddL.198(Phi.124, Proj.134(CallStaticJava.129))
 AddL.199(Proj.150(CallStaticJava.145), AddL.198(..))
 AddL.200(Proj.171(CallStaticJava.166), AddL.199(..))
 AddL.201(Proj.188(CallStaticJava.183), AddL.200(..))

 AddL.202(Proj.134(..), Proj.150(..))
 AddL.203(Proj.171(..), AddL.202(..))
 AddL.204(Proj.188(..), AddL.203(..))
 AddL.205(AddL.201(..), AddL.204(..))
#+end_src

Investigating the AddL nodes with ConvI2L nodes.

Why do ConvI2L nodes get created?
#+begin_src bash
ConvI2LNode::ConvI2LNode(Node *, const TypeLong *) convertnode.hpp:173
Compile::constrained_convI2L(PhaseGVN *, Node *, const TypeInt *, Node *, bool) compile.cpp:4588
Compile::conv_I2X_index(PhaseGVN *, Node *, const TypeInt *, Node *) compile.cpp:4571
GraphKit::array_element_address(Node *, Node *, BasicType, const TypeInt *, Node *) graphKit.cpp:1786
Parse::array_addressing(BasicType, int, const Type *&) parse2.cpp:207
Parse::array_load(BasicType) parse2.cpp:57
Parse::do_one_bytecode() parse2.cpp:2234
Parse::do_one_block() parse1.cpp:1593
Parse::do_all_blocks() parse1.cpp:724
Parse::Parse(JVMState *, ciMethod *, float) parse1.cpp:628
Parse::Parse(JVMState *, ciMethod *, float) parse1.cpp:404
ParseGenerator::generate(JVMState *) callGenerator.cpp:97
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:807
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:705
C2Compiler::compile_method(ciEnv *, ciMethod *, int, bool, DirectiveSet *) c2compiler.cpp:147
CompileBroker::invoke_compiler_on_method(CompileTask *) compileBroker.cpp:2345
CompileBroker::compiler_thread_loop() compileBroker.cpp:1989
CompilerThread::thread_entry(JavaThread *, JavaThread *) compilerThread.cpp:69
JavaThread::thread_main_inner() javaThread.cpp:776
JavaThread::run() javaThread.cpp:761
Thread::call_run() thread.cpp:242
thread_native_entry(Thread *) os_bsd.cpp:602
#+end_src

Source of additional AddLNodes:
#+begin_src cpp
Node* ConvI2LNode::Ideal(PhaseGVN* phase, bool can_reshape) {
  // Convert ConvI2L(AddI(x, y)) to AddL(ConvI2L(x), ConvI2L(y))
...
      case Op_AddI:  return new AddLNode(cx, cy);
#+end_src

#+begin_src bash
AddLNode::AddLNode(Node *, Node *) addnode.hpp:156
AddLNode::AddLNode(Node *, Node *) addnode.hpp:156
ConvI2LNode::Ideal(PhaseGVN *, bool) convertnode.cpp:810
PhaseGVN::apply_ideal(Node *, bool) phaseX.cpp:668
PhaseIterGVN::transform_old(Node *) phaseX.cpp:2108
PhaseIterGVN::optimize() phaseX.cpp:1054
Compile::process_for_post_loop_opts_igvn(PhaseIterGVN &) compile.cpp:1892
Compile::Optimize() compile.cpp:2525
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:862
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:705
C2Compiler::compile_method(ciEnv *, ciMethod *, int, bool, DirectiveSet *) c2compiler.cpp:147
CompileBroker::invoke_compiler_on_method(CompileTask *) compileBroker.cpp:2345
CompileBroker::compiler_thread_loop() compileBroker.cpp:1989
CompilerThread::thread_entry(JavaThread *, JavaThread *) compilerThread.cpp:69
JavaThread::thread_main_inner() javaThread.cpp:776
JavaThread::run() javaThread.cpp:761
Thread::call_run() thread.cpp:242
thread_native_entry(Thread *) os_bsd.cpp:602
#+end_src
* 14.1.26
** AddL / AddI
IR failures:
#+begin_src bash
         * Constraint 1: "(\d+(\s){2}(AddL.*)+(\s){2}===.*)"
           - Failed comparison: [found] 14 = 4 [given]
             - Matched nodes (14):
               * 258  AddL  === _ 771 816  [[ 259 ]]  !orig=[962] !jvms: ReductionReassociation::test_2 @ bci:94 (line 42)
               * 259  AddL  === _ 258 864  [[ 260 ]]  !orig=[963] !jvms: ReductionReassociation::test_2 @ bci:101 (line 43)
               * 260  AddL  === _ 259 913  [[ 261 965 ]]  !orig=[964] !jvms: ReductionReassociation::test_2 @ bci:108 (line 44)
               * 261  AddL  === _ 260 965  [[ 288 725 ]]  !jvms: ReductionReassociation::test_2 @ bci:114 (line 45)
               * 783  AddL  === _ 741 933  [[ 785 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 793  AddL  === _ 791 932  [[ 795 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 828  AddL  === _ 741 948  [[ 830 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 838  AddL  === _ 836 947  [[ 840 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 854  AddL  === _ 852 947  [[ 856 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 876  AddL  === _ 741 953  [[ 878 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 886  AddL  === _ 884 936  [[ 888 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 902  AddL  === _ 900 936  [[ 904 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 921  AddL  === _ 741 920  [[ 745 ]]  !orig=[743] !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
               * 965  AddL  === _ 124 260  [[ 124 725 261 287 ]]  !orig=[257] !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)

  23  ConI  === 0  [[ 125 110 606 309 52 110 835 790 77 77 721 733 883 750 606 588 461 ]]  #int:0
 124  Phi  === 724 22 965  [[ 965 ]]  #long !jvms: ReductionReassociation::test_2 @ bci:20 (line 33)
 258  AddL  === _ 771 816  [[ 259 ]]  !orig=[962] !jvms: ReductionReassociation::test_2 @ bci:94 (line 42)
 259  AddL  === _ 258 864  [[ 260 ]]  !orig=[963] !jvms: ReductionReassociation::test_2 @ bci:101 (line 43)
 260  AddL  === _ 259 913  [[ 261 965 ]]  !orig=[964] !jvms: ReductionReassociation::test_2 @ bci:108 (line 44)
 261  AddL  === _ 260 965  [[ 288 725 ]]  !jvms: ReductionReassociation::test_2 @ bci:114 (line 45)
 733  LoopLimit  === _ 23 46 262  [[ 741 ]]  !orig=[773] !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 741  ConvI2L  === _ 733  [[ 921 783 828 876 ]]  #long:minint..maxint, 0u..maxulong, widen: 3 !orig=[780] !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 771  LoadL  === 770 7 166  [[ 258 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long (does not depend only on test, unknown control) !orig=[168] !jvms: ReductionReassociation::test_2 @ bci:27 (line 33)
 783  AddL  === _ 741 933  [[ 785 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 790  OpaqueLoopInit  === _ 23  [[ 791 935 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 791  ConvI2L  === _ 790  [[ 793 ]]  #long:minint..maxint, 0u..maxulong, widen: 3 !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 793  AddL  === _ 791 932  [[ 795 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 816  LoadL  === 815 7 194  [[ 258 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long (does not depend only on test, unknown control) !orig=[196] !jvms: ReductionReassociation::test_2 @ bci:37 (line 34)
 828  AddL  === _ 741 948  [[ 830 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 835  OpaqueLoopInit  === _ 23  [[ 836 952 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 836  ConvI2L  === _ 835  [[ 838 ]]  #long:minint..maxint, 0u..maxulong, widen: 3 !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 847  IfTrue  === 843  [[ 851 859 ]] #1 !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 850  AddI  === _ 952 922  [[ 851 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 851  CastII  === 847 850  [[ 852 ]]  #int:0..maxint-1, widen: 3 floating narrowing dependency !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 838  AddL  === _ 836 947  [[ 840 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 852  ConvI2L  === _ 851  [[ 854 ]]  #long:0..maxint-1, widen: 3 !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 854  AddL  === _ 852 947  [[ 856 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 864  LoadL  === 863 7 223  [[ 259 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long (does not depend only on test, unknown control) !orig=[225] !jvms: ReductionReassociation::test_2 @ bci:47 (line 35)
 876  AddL  === _ 741 953  [[ 878 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 883  OpaqueLoopInit  === _ 23  [[ 884 945 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 884  ConvI2L  === _ 883  [[ 886 ]]  #long:minint..maxint, 0u..maxulong, widen: 3 !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 886  AddL  === _ 884 936  [[ 888 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 899  CastII  === 895 898  [[ 900 ]]  #int:0..maxint-1, widen: 3 floating narrowing dependency !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 900  ConvI2L  === _ 899  [[ 902 ]]  #long:0..maxint-1, widen: 3 !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 902  AddL  === _ 900 936  [[ 904 ]]  !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 913  LoadL  === 911 7 251  [[ 260 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long (does not depend only on test, unknown control) !orig=[253] !jvms: ReductionReassociation::test_2 @ bci:57 (line 36)
 920  ConL  === 0  [[ 921 ]]  #long:-4
 932  ConL  === 0  [[ 793 ]]  #long:1
 933  ConL  === 0  [[ 783 ]]  #long:-3
 921  AddL  === _ 741 920  [[ 745 ]]  !orig=[743] !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)
 936  ConL  === 0  [[ 902 886 ]]  #long:3
 947  ConL  === 0  [[ 854 838 ]]  #long:2
 948  ConL  === 0  [[ 828 ]]  #long:-2
 953  ConL  === 0  [[ 876 ]]  #long:-1
 965  AddL  === _ 124 260  [[ 124 725 261 287 ]]  !orig=[257] !jvms: ReductionReassociation::test_2 @ bci:133 (line 48)

 AddL[965](Phi[124], AddL[260](AddL[259](AddL[258](LoadL, LoadL), LoadL), LoadL)) = 4
 AddL[261](AddL[260](..), AddL[965](..)) 5
 AddL[783](ConvI2L[741](LoopLimit[733]), ConL[933]) 6
 AddL[793](ConvI2L[791](OpaqueLoopLimit[790](ConI[23])), ConL) 7
 AddL[828](ConvI2L[741](LoopLimit[733]), ConL[948]) 8
 AddL[838](ConvI2L[836](OpaqueLoopLimit[835](ConI[23])), ConL[947]) 9
 AddL[854](ConvI2L[852](CastII[851](...)), ConL[947]) 10
 AddL[876](ConvI2L[741](LoopLimit[733]), ConL[953]) 11
 AddL[886](ConvI2L[884](OpaqueLoopLimit[883](ConI[23])), ConL[936]) 12
 AddL[902](ConvI2L[900](CastII[899](...), ConL[936]) 13
 AddL[921](ConvI2L[741](LoopLimit[733]), ConL[920]) 14
#+end_src

#+begin_src bash
before:

 216  AddL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 274  AddL  === _ 292 275  [[ 292 297 306 ]]  !orig=216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 310  AddL  === _ 328 311  [[ 328 337 ]]  !orig=216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 347  AddL  === _ 365 348  [[ 365 374 629 ]]  !orig=216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 454  AddL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 535  AddL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 538  AddL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 593  AddL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 596  AddL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 603  AddL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 606  AddL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 607  LoadL  === 385 7 608  [[ 606 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long !orig=539,455,217,190 !jvms: TestLongAdd::test @ bci:14 (line 20)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]

 add(add(add(add(add(add(add(add(629, 607), 604), 597), 594), 539), 536), 455), 217)

after:

 274  AddL  === _ 292 275  [[ 292 297 306 ]]  !orig=[216],191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 310  AddL  === _ 328 311  [[ 328 337 ]]  !orig=[216],191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 347  AddL  === _ 365 348  [[ 365 374 629 ]]  !orig=[216],191 !jvms: TestLongAdd::test @ bci:20 (line 21)
 664  AddL  === _ 604 607  [[ 665 ]]
 665  AddL  === _ 664 597  [[ 666 ]]
 666  AddL  === _ 665 594  [[ 667 ]]
 667  AddL  === _ 666 539  [[ 668 ]]
 668  AddL  === _ 667 536  [[ 669 ]]
 669  AddL  === _ 668 455  [[ 670 ]]
 670  AddL  === _ 669 217  [[ 671 ]]
 671  AddL  === _ 629 670  [[ 268 629 374 ]]  !orig=[216],191 !jvms: TestLongAdd::test @ bci:20 (line 21)

 add(629, add(add(add(add(add(add(add(604, 607), 597), 594), 539), 536), 455), 217)
#+end_src

#+begin_src bash
i = max(a, max(b, max(c, max(d, i))))
i' = max(i, max(a, max(b, max(c, d))))
#+end_src
#+begin_src bash
i = a + b + c + d + i;
i' = i + a + b + c + d;

i = i + a + b + c + d;
i' = i + a + b + c + d;
#+end_src
** Float16
#+begin_quote
Have you looked at what the other uses are?
#+end_quote
#+begin_src bash
 698  MinHF  === _ 699 703  [[ 697 267 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 698 users -> 697 (ReinterpreteHF2S...), 267 (MinHF)

 163  If  === 731 160  [[ 164 745 ]] P=0.999999, C=-1.000000 !jvms: Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 164  IfTrue  === 163  [[ 241 171 ]] #1 !orig=[199] !jvms: Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 171  CastPP  === 164 148  [[ 190 190 ]]  #instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):NotNull:exact+0,iid=bot floating narrowing dependency  Oop:instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):NotNull:exact+0,iid=bot !jvms: Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 241  Allocate  === 164 717 722 8 1 (139 172 24 1 1 39 1 706 1 1 1 228 ) [[ 242 243 244 251 252 253 ]]  rawptr:NotNull ( int:>=0, instptr:java/lang/Object:NotNull+0,iid=bot, bool, top, bool ) allocationKlass:jdk/incubator/vector/Float16 Float16::valueOf @ bci:0 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22) !jvms: Float16::valueOf @ bci:0 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 226  ConvHF2F  === _ 697  [[ 228 ]]  #float !jvms: Float16::floatValue @ bci:4 (line 879) Float16::min @ bci:5 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 228  MinF  === _ 192 226  [[ 241 ]]  !jvms: Float16::min @ bci:8 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 241  Allocate  === 164 717 722 8 1 (139 172 24 1 1 39 1 706 1 1 1 228 ) [[ 242 243 244 251 252 253 ]]  rawptr:NotNull ( int:>=0, instptr:java/lang/Object:NotNull+0,iid=bot, bool, top, bool ) allocationKlass:jdk/incubator/vector/Float16 Float16::valueOf @ bci:0 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22) !jvms: Float16::valueOf @ bci:0 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 267  MinHF  === _ 265 698  [[ 268 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 692  MergeMem  === _ 1 724 734 1 1 693 735 736  [[ 723 ]]  { N734:rawptr:BotPTR - - N693:instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot N735:instptr:java/lang/Object:BotPTR+0,iid=bot N736:instptr:java/lang/Object:BotPTR+8,iid=bot [narrowklass] }  Memory: @ptr:BotPTR+bot, idx=Bot; !orig=274 !jvms: Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 693  StoreC  === 739 737 694 697  [[ 692 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=6;  Memory: @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):NotNull:exact+12,iid=bot, name=value, idx=6; !orig=321,[323],[273] !jvms: Float16::<init> @ bci:6 (line 129) Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 697  ReinterpretHF2S  === _ 698  [[ 693 226 ]]  !orig=268 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 698  MinHF  === _ 699 703  [[ 697 267 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 722  Proj  === 723  [[ 274 764 763 257 403 241 191 ]] #2  Memory: @ptr:BotPTR+bot, idx=Bot; !orig=328,760 !jvms: Float16::<init> @ bci:-1 (line 128) Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 723  MemBarStoreStore  === 739 1 692 1 1 718  [[ 722 731 ]]  !orig=326 !jvms: Float16::<init> @ bci:-1 (line 128) Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 731  Proj  === 723  [[ 163 ]] #0 !orig=327,335 !jvms: Float16::<init> @ bci:-1 (line 128) Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 745  IfFalse  === 163  [[ 744 ]] #0 !orig=[603],[476],[165] !jvms: Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
#+end_src
* 13.1.26
Reassociation not kicking in for Float16 Min/Max:
#+begin_src bash
 248  LoadS  === _ 153 247  [[ 249 324 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=7; #short !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 283  LoadS  === _ 153 282  [[ 284 325 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=7; #short !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:5 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 324  ReinterpretS2HF  === _ 248  [[ 326 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 325  ReinterpretS2HF  === _ 283  [[ 326 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 326  MinHF  === _ 324 325  [[ 327 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)

 191  LoadS  === _ 722 190  [[ 192 265 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=6; #short !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 265  ReinterpretS2HF  === _ 191  [[ 267 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 267  MinHF  === _ 265 698  [[ 268 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 427  MinHF  === _ 428 432  [[ 426 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 554  MinHF  === _ 555 559  [[ 553 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 698  MinHF  === _ 699 703  [[ 697 267 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 699  ReinterpretS2HF  === _ 700  [[ 698 ]]  !orig=265 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 700  LoadS  === _ 724 701  [[ 696 699 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=6; #short !orig=191 !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 703  ReinterpretS2HF  === _ 704  [[ 698 ]]  !orig=[266] !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 724  Phi  === 725 578 328  [[ 692 700 704 709 715 720 763 764 ]]  #memory  Memory: @ptr:BotPTR+bot, idx=Bot; !orig=119,[273] !jvms: TestHalfFloatMin::test @ bci:12 (line 21)

 190  AddP  === _ 171 171 40  [[ 191 ]]   Oop:instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):NotNull:exact+12,iid=bot !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 191  LoadS  === _ 722 190  [[ 192 265 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=6; #short !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 265  ReinterpretS2HF  === _ 191  [[ 267 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 267  MinHF  === _ 265 698  [[ 268 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 268  ReinterpretHF2S  === _ 267  [[ 321 ]]  !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 426  ReinterpretHF2S  === _ 427  [[ 422 ]]  !orig=268 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 427  MinHF  === _ 428 432  [[ 426 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 554  MinHF  === _ 555 559  [[ 553 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 697  ReinterpretHF2S  === _ 698  [[ 693 226 ]]  !orig=268 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 698  MinHF  === _ 699 703  [[ 697 267 ]]  !orig=267 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 699  ReinterpretS2HF  === _ 700  [[ 698 ]]  !orig=265 !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 700  LoadS  === _ 724 701  [[ 696 699 ]]  @instptr:jdk/incubator/vector/Float16 (java/io/Serializable,java/lang/Comparable):BotPTR:exact+12,iid=bot, name=value, idx=6; #short !orig=191 !jvms: Float16::floatValue @ bci:1 (line 879) Float16::min @ bci:1 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 703  ReinterpretS2HF  === _ 704  [[ 698 ]]  !orig=[266] !jvms: Float16::valueOf @ bci:5 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 722  Proj  === 723  [[ 274 764 763 257 403 241 191 ]] #2  Memory: @ptr:BotPTR+bot, idx=Bot; !orig=328,760 !jvms: Float16::<init> @ bci:-1 (line 128) Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 723  MemBarStoreStore  === 739 1 692 1 1 718  [[ 722 731 ]]  !orig=326 !jvms: Float16::<init> @ bci:-1 (line 128) Float16::valueOf @ bci:8 (line 364) Float16::min @ bci:11 (line 1097) TestHalfFloatMin::test @ bci:18 (line 22)
 724  Phi  === 725 578 328  [[ 692 700 704 709 715 720 763 764 ]]  #memory  Memory: @ptr:BotPTR+bot, idx=Bot; !orig=119,[273] !jvms: TestHalfFloatMin::test @ bci:12 (line 21)
#+end_src

vs MinL:
#+begin_src bash
 216  MinL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: TestLongMin::test @ bci:20 (line 21)
 454  MinL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 535  MinL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 538  MinL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 593  MinL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 596  MinL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 603  MinL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 606  MinL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: TestLongMin::test @ bci:20 (line 21)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
#+end_src
* 12.1.26
AddNode subclasses:
- [ ] AddINode
- [ ] AddLNode
- [ ] OrINode
- [ ] OrLNode
- [ ] XorINode
- [ ] XorLNode
- [X] MaxDNode
- [X] MaxFNode
- [-] MaxHFNode
- [X] MaxINode
- [X] MaxLNode
- [X] MinDNode
- [X] MinFNode
- [-] MinHFNode
- [X] MinINode
- [X] MinLNode
- [-] AddDNode (not associative)
- [-] AddFNode (not associative)
- [-] AddHFNode (not associative)
* 9.1.26
Failure:
#+begin_src bash
Missed Identity optimization:
Old node:
dist dump
---------------------------------------------
   1  1048  MaxL  === _ 124 336  [[ 124 812 374 348 ]]  !orig=[300] !jvms: ReductionReassociation::test_2 @ bci:149 (line 38)
   1   336  MinL  === _ 324 1000  [[ 348 1048 ]]  !orig=[1047] !jvms: Long::min @ bci:2 (line 1961) ReductionReassociation::test_2 @ bci:120 (line 36)
   0   348  MinL  === _ 336 1048  [[ 375 812 ]]  !jvms: Long::min @ bci:2 (line 1961) ReductionReassociation::test_2 @ bci:128 (line 37)
New node:
dist dump
---------------------------------------------
   1  1000  LoadL  === 998 7 251  [[ 336 ]]  @aryptr:long[int:>=0] (java/lang/Cloneable,java/io/Serializable):BotPTR:exact+any,iid=bot, idx=6; #long (does not depend only on test, unknown control) !orig=[253] !jvms: ReductionReassociation::test_2 @ bci:57 (line 31)
   1   324  MinL  === _ 312 951  [[ 336 ]]  !orig=[1046] !jvms: Long::min @ bci:2 (line 1961) ReductionReassociation::test_2 @ bci:111 (line 35)
   0   336  MinL  === _ 324 1000  [[ 348 1048 ]]  !orig=[1047] !jvms: Long::min @ bci:2 (line 1961) ReductionReassociation::test_2 @ bci:120 (line 36)
#+end_src

min(min(324, 1000), max(124, min(324, 1000)))
=
min(min(312, 951), 1000)

* 8.1.26
#+begin_src bash
[avoid-cmov] try reassociate; chain length: 8
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
[avoid-cmov] try reassociate; chain head:
 216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)

 216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 274  MaxL  === _ 292 275  [[ 292 297 306 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 310  MaxL  === _ 328 311  [[ 328 337 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 347  MaxL  === _ 365 348  [[ 365 374 629 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 407  MaxL  === _ 402 389  [[ 408 ]]
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
 606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]

 216 = max(max(max(max(max(max(max(max(629, 607), 604), 597), 594), 539), 536), 455), 217)

 to

 = max(max(max(max(max(max(max(max(607, 604), 597), 594), 539), 536), 455), 217), 629)
#+end_src
* 4.12.25
More debugging when it goes wrong
#+begin_src bash
transform_old(222  MaxL  === _ 917 221  [[ 243 677 ]]  !jvms: TestPlain::test @ bci:118 (line 38))
operation:  917  MaxL  === _ 119 916  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42)

transform_old(917  MaxL  === _ 119 916  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42))
-

n:  916  MaxL  === _ 914 915  [[ 917 ]]  !jvms: TestPlain::test @ bci:139 (line 42)
transform_old(916)
operation:  916  MaxL  === _ 914 915  [[ 917 ]]  !jvms: TestPlain::test @ bci:139 (line 42)

n:  222  MaxL  === _ 221 917  [[ 243 677 ]]  !jvms: TestPlain::test @ bci:118 (line 38)
transform_old(222)
operation: 917  MaxL  === _ 119 916  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42)

n:  916  MaxL  === _ 220 219  [[ 917 ]]  !jvms: TestPlain::test @ bci:139 (line 42)
transform_old(916)
operation: 220  MaxL  === _ 817 865  [[ 221 916 ]]  !orig=[914] !jvms: TestPlain::test @ bci:101 (line 36)
identity: 916  MaxL  === _ 219 220  [[ 917 ]]  !jvms: TestPlain::test @ bci:139 (line 42)
global value numbering:  221  MaxL  === _ 219 220  [[ 222 ]]  !jvms: TestPlain::test @ bci:110 (line 37)

transform_old(917  MaxL  === _ 119 221  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42))
#+end_src

Further debugging that doesn't work:
#+begin_src bash
MaxNode::find_identity_operation(in(2), in(1))
 n: 222  MaxL  === _ 917 221  [[ 243 677 ]]  !jvms: TestPlain::test @ bci:118 (line 38)

 operation:  917  MaxL  === _ 119 916  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42)
 operand:  221  MaxL  === _ 219 220  [[ 222 ]]  !jvms: TestPlain::test @ bci:110 (line 37)
 n1: 119  Phi  === 676 22 917  [[ 917 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestPlain::test @ bci:18 (line 22)
 n2: 916  MaxL  === _ 914 915  [[ 917 ]]  !jvms: TestPlain::test @ bci:139 (line 42)

 n1 == operand = false
 n2 == operand = false

MaxNode::find_identity_operation(in(1), in(2))
 n: 222  MaxL  === _ 917 221  [[ 243 677 ]]  !jvms: TestPlain::test @ bci:118 (line 38)

 operation: 221  MaxL  === _ 219 220  [[ 222 ]]  !jvms: TestPlain::test @ bci:110 (line 37)
 operand: 917  MaxL  === _ 119 916  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42)
 n1: 219  MaxL  === _ 724 769  [[ 221 ]]  !jvms: TestPlain::test @ bci:92 (line 35)
 n2: 220  MaxL  === _ 817 865  [[ 221 ]]  !jvms: TestPlain::test @ bci:101 (line 36)

 n1 == operand = false
 n2 == operand = false
#+end_src

Further debugging that works:
#+begin_src bash
n: 205  MaxL  === _ 204 677  [[ 469 643 538 242 520 394 365 356 345 ]]  !jvms: TestReductionReassociation::test @ bci:128 (line 77)

operation:  677  MaxL  === _ 102 204  [[ 102 509 502 538 492 242 643 205 611 ]]  !orig=[201] !jvms: TestReductionReassociation::test @ bci:149 (line 81)
operand:  204  MaxL  === _ 202 203  [[ 205 677 ]]  !orig=[676] !jvms: TestReductionReassociation::test @ bci:120 (line 76)
n1:  102  Phi  === 642 22 677  [[ 677 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestReductionReassociation::test @ bci:20 (line 61)
n2:  204  MaxL  === _ 202 203  [[ 205 677 ]]  !orig=[676] !jvms: TestReductionReassociation::test @ bci:120 (line 76)

n2 == operand = true
operation->Opcode() == Opcode() == true

205 = Max(204, Max(102, 204))
#+end_src

Trace GVN differences:
#+begin_src bash
# 205 replaced by 677
< 		< 205  MaxL  === _ _ _  [[ ]]   [10430000000205]
> long:minint..maxlong, 0u..maxulong, widen: 3	 677  MaxL  === _ 102 204  [[ 102 509 502 538 492 242 643 469 611 345 356 365 394 520 242 538 643 ]]  !orig=[201] !jvms: TestReductionReassociation::test @ bci:149 (line 81)
#+end_src

Trave GVN, nodes 4:
#+begin_src bash
[avoid-cmov] try reassociate; chain length: 4
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  102  Phi  === 642 22 201  [[ 198 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestReductionReassociation::test @ bci:20 (line 61)
[avoid-cmov] try reassociate; chain head:
 201  MaxL  === _ 200 197  [[ 611 205 643 242 492 538 502 509 102 ]]  !jvms: TestReductionReassociation::test @ bci:90 (line 70)
< 		< 674  MaxL  === _ _ _  [[ ]]   [10430000000674]
> long		 203  MaxL  === _ 175 197  [[ 204 676 ]]  !orig=[674] !jvms: TestReductionReassociation::test @ bci:111 (line 75)
< 		< 675  MaxL  === _ _ _  [[ ]]   [10430000000675]
> long		 202  MaxL  === _ 130 152  [[ 204 676 ]]  !orig=[675] !jvms: TestReductionReassociation::test @ bci:102 (line 74)
< 		< 676  MaxL  === _ _ _  [[ ]]   [10430000000676]
> long		 204  MaxL  === _ 202 203  [[ 205 677 ]]  !orig=[676] !jvms: TestReductionReassociation::test @ bci:120 (line 76)
= long:minint..maxlong, 0u..maxulong, widen: 3	 677  MaxL  === _ 102 204  [[ 102 509 502 538 492 242 643 205 611 ]]  !orig=[201] !jvms: TestReductionReassociation::test @ bci:149 (line 81)
< 		< 205  MaxL  === _ _ _  [[ ]]   [10430000000205]
> long:minint..maxlong, 0u..maxulong, widen: 3	 677  MaxL  === _ 102 204  [[ 102 509 502 538 492 242 643 469 611 345 356 365 394 520 242 538 643 ]]  !orig=[201] !jvms: TestReductionReassociation::test @ bci:149 (line 81)
< 		< 365  ConvL2I  === _ _  [[ ]]   [10430000000365]
> int		 509  ConvL2I  === _ 677  [[ 510 366 ]]  #int !orig=[365] !jvms: Long::valueOf @ bci:24 (line 959) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 356  CmpL  === _ _ _  [[ ]]   [10430000000356]
> int:-1..1, 0u..maxuint	 502  CmpL  === _ 677 353  [[ 503 357 ]]  !orig=[356] !jvms: Long::valueOf @ bci:17 (line 958) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 345  CmpL  === _ _ _  [[ ]]   [10430000000345]
> int:-1..1, 0u..maxuint	 492  CmpL  === _ 677 342  [[ 493 346 ]]  !orig=[345] !jvms: Long::valueOf @ bci:9 (line 958) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 366  AddI  === _ _ _  [[ ]]   [10430000000366]
> int		 510  AddI  === _ 509 341  [[ 526 513 520 378 371 384 ]]  !orig=[366] !jvms: Long::valueOf @ bci:28 (line 959) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 346  Bool  === _ _  [[ ]]   [10430000000346]
> bool		 493  Bool  === _ 492  [[ 494 347 ]] [lt] !orig=[346] !jvms: Long::valueOf @ bci:9 (line 958) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 371  CmpU  === _ _ _  [[ ]]   [10430000000371]
> int:-1..1, 0u..maxuint	 513  CmpU  === _ 510 370  [[ 514 372 ]]  !orig=[371] !jvms: Long::valueOf @ bci:29 (line 959) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 357  Bool  === _ _  [[ ]]   [10430000000357]
> bool		 503  Bool  === _ 502  [[ 504 358 ]] [le] !orig=[357] !jvms: Long::valueOf @ bci:17 (line 958) TestReductionReassociation::test @ bci:149 (line 81)
< 		< 372  Bool  === _ _  [[ ]]   [10430000000372]
> bool		 514  Bool  === _ 513  [[ 515 373 ]] [lt] !orig=[372] !jvms: Long::valueOf @ bci:29 (line 959) TestReductionReassociation::test @ bci:149 (line 81)
AFTER: AFTER_LOOP_OPTS
#+end_src

Trace GVN, nodes 5:
#+begin_src bash
[nix-shell:~/src/colata/avoid-cmov-long-min-max-8351409]$ CLASS=TestPlain LOOP_ARGS=true NO_LOOP_UNROLL=true GVN_ARGS=true make run
...
[avoid-cmov] try reassociate; chain length: 4
[avoid-cmov] try reassociate:
[avoid-cmov] phi:  119  Phi  === 676 22 218  [[ 215 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: TestPlain::test @ bci:18 (line 22)
[avoid-cmov] try reassociate; chain head:
 218  MaxL  === _ 217 865  [[ 242 222 677 119 ]]  !jvms: TestPlain::test @ bci:80 (line 31)
= long		 222  MaxL  === _ 221 917  [[ 243 677 ]]  !jvms: TestPlain::test @ bci:118 (line 38)
= long:minint..maxlong, 0u..maxulong, widen: 3	 917  MaxL  === _ 119 916  [[ 119 677 222 242 ]]  !orig=[218] !jvms: TestPlain::test @ bci:139 (line 42)
< 		< 915  MaxL  === _ _ _  [[ ]]   [1060000000915]
> long		 219  MaxL  === _ 724 769  [[ 221 916 ]]  !orig=[915] !jvms: TestPlain::test @ bci:92 (line 35)
< 		< 914  MaxL  === _ _ _  [[ ]]   [1060000000914]
> long		 220  MaxL  === _ 817 865  [[ 221 916 ]]  !orig=[914] !jvms: TestPlain::test @ bci:101 (line 36)
= long:minint..maxlong, 0u..maxulong, widen: 3	 222  MaxL  === _ 221 917  [[ 243 677 ]]  !jvms: TestPlain::test @ bci:118 (line 38)
< 		< 916  MaxL  === _ _ _  [[ ]]   [1060000000916]
> long		 221  MaxL  === _ 219 220  [[ 222 917 ]]  !orig=[916] !jvms: TestPlain::test @ bci:110 (line 37)
AFTER: AFTER_LOOP_OPTS
#+end_src

Nodes 4, before iter GVN 11
#+begin_src bash
674 MaxL = 197 175
675 MaxL = 152 130
676 MaxL = 674 675
677 MaxL = 102 676

202 MaxL = 130 152
203 MaxL = 175 197
204 MaxL = 202 203
205 MaxL = 677 204
#+end_src

Nodes 4, after iter GVN 11
205 replaced by 677
#+begin_src bash
202 MaxL = 130 152
203 MaxL = 175 197
204 MaxL = 202 203
677 MaxL = 102 204
#+end_src

Nodes 5, before iter GVN 13
#+begin_src bash
914 MaxL = 865 817
915 MaxL = 769 724
916 MaxL = 914 915
917 MaxL = 119 916

219 MaxL = 724 769
220 MaxL = 817 865
221 MaxL = 219 220
222 MaxL = 917 221
#+end_src

Nodes 5, after iter GVN 13
222 not replaced by 917
#+begin_src bash
219 MaxL = 724 769
220 MaxL = 817 865
221 MaxL = 219 220
917 MaxL = 119 221

222 MaxL = 221 917
#+end_src
* 2.12.25
** Comparison
#+begin_src bash
uica.log:97:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Reassoc4.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Reassoc4.html
uica.log:98-Throughput (in cycles per iteration): 3.52
--
uica.log:137:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Reassoc8.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Reassoc8.html
uica.log:138-Throughput (in cycles per iteration): 6.50
--
uica.log:17:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Reassoc16.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Reassoc16.html
uica.log:18-Throughput (in cycles per iteration): 14.50
--
uica.log:272:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree4x1.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree4x1.html
uica.log:273-Throughput (in cycles per iteration): 3.51
--
uica.log:312:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree8x1.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree8x1.html
uica.log:313-Throughput (in cycles per iteration): 6.50
--
uica.log:189:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree16x1.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree16x1.html
uica.log:190-Throughput (in cycles per iteration): 15.00
--
uica.log:448:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll4.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll4.html
uica.log:449-Throughput (in cycles per iteration): 8.00
--
uica.log:488:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll8.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll8.html
uica.log:489-Throughput (in cycles per iteration): 16.00
--
uica.log:364:+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll16.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll16.html
uica.log:365-Throughput (in cycles per iteration): 32.00
#+end_src
** Patch performance
It's the same performance as ReTree16x1:
#+begin_src bash
Warmup
Running
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Throughput: 204 ops/ms
Throughput: 205 ops/ms
Throughput: 205 ops/ms
Validate
#+end_src
** Unroll16
Theoretical results:
#+begin_src bash
+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll16.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/Unroll16.html
Throughput (in cycles per iteration): 32.00
Bottleneck: Dependencies

The following throughputs could be achieved if the given property were the only bottleneck:

  - Decoder: 22.00
  - DSB: 9.33
  - Issue: 14.00
  - Ports: 10.50
  - Dependencies: 32.00

1.90 Ghz is 1.9 x 1_000_000 cycles per millisecond = 1_900_000 cycles per ms
Array size = 10_000
Manual unroll size = 16
Loop iterations per op = 10_000 / 16 = 625
Cycles per iteration = 32
Cycles per loop = 22
625 loops/op * 32 cycles/loop = 20_000 cycles/op
1_900_000 cycles/ms / 20_000 cycles/op = 95 ops/ms
#+end_src

Benchmark results:
#+begin_src bash
Validate
Warmup
Running
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Validate
#+end_src
** ReTree16x1
Theoretical results:
#+begin_src bash
+ ./uiCA.py /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree16x1.o -arch CLX -trace /home/g/tmp/avoid-cmov-long-min-max/0212/xeon/ReTree16x1.html
Throughput (in cycles per iteration): 15.00
Bottleneck: LSD

The following throughputs could be achieved if the given property were the only bottleneck:

  - LSD: 15.00
  - Issue: 14.25
  - Ports: 8.50
  - Dependencies: 2.00

1.90 Ghz is 1.9 x 1_000_000 cycles per millisecond = 1_900_000 cycles per ms
Array size = 10_000
Manual unroll size = 16
Loop iterations per op = 10_000 / 16 = 625
Cycles per iteration = 15
Cycles per loop = 15
625 loops/op * 15 cycles/loop = 9_375 cycles/op
1_900_000 cycles/ms / 9_375 cycles/op = 202.666 ops/ms
#+end_src

Benchmark results:
#+begin_src bash
Running
Throughput: 203 ops/ms
Throughput: 203 ops/ms
Throughput: 203 ops/ms
Throughput: 203 ops/ms
Throughput: 203 ops/ms
Throughput: 202 ops/ms
Throughput: 203 ops/ms
Throughput: 203 ops/ms
Throughput: 203 ops/ms
Throughput: 203 ops/ms
#+end_src

~perf record -e cycles:pp~:
#+begin_src bash
Running
Throughput: 200 ops/ms
Throughput: 201 ops/ms
Throughput: 201 ops/ms
Throughput: 201 ops/ms
Throughput: 201 ops/ms
Throughput: 201 ops/ms
Throughput: 202 ops/ms
Throughput: 201 ops/ms
Throughput: 201 ops/ms
Throughput: 201 ops/ms
Validate

$ perf report --header
# sample duration :  13164.125 ms
# MEM_TOPOLOGY info available, use -I to display
# cpu pmu capabilities: branches=32, max_precise=3, pmu_name=skylake
# intel_pt pmu capabilities: topa_multiple_entries=1, psb_cyc=1, single_range_output=1, mtc_periods=249, ip_filtering=1, output_subsys=0, cr3_filtering=1, psb_periods=3f, event_trace=0, cycle_thresholds=3fff, power_event_trace=0, mtc=1, payloads_lip=0, ptwrite=0, num_address_ran>
# missing features: TRACING_DATA BRANCH_STACK GROUP_DESC AUXTRACE STAT CLOCKID DIR_FORMAT COMPRESSED CLOCK_DATA HYBRID_TOPOLOGY
# ========
#
#
# Total Lost Samples: 0
#
# Samples: 53K of event 'cycles:pp'
# Event count (approx.): 25165394499

200 ops/ms (recorded)
Manual unroll size = 16
Loop iterations per op = 10_000 / 16 = 625

25165394499 cycles
13164.125 ms

200 ops/ms * 13164 ms = 2_632_800 ops
2_632_800 ops * 625 loops/op = 1,645,500,000 loops
25165394499 cycles / 1,645,500,000 loops = 15.2934636882 cycles/iteration
#+end_src
* 1.12.25
#+begin_src bash
1.90 Ghz is 1.9 x 1_000_000 cycles per millisecond = 1_900_000 cycles per ms
204 ops/ms
1 op has ~625 loop iterations
204 * 625 = 127_500 loop interations per ms
uica says 32.33 cycles per loop iteration
1_900_000 / 127_500 = 15 cycles per loop iteration

--

25,583,732,176 cycles
12.857476989 seconds = 12_857 ms
1_989_867 = cycles per ms
204 ops/ms measured
1 op has ~625 loop iterations
204 * 625 = 127_500 loop interations per ms
1_989_867 / 127_500 = ~15 cycles per ms
#+end_src
* 26.11.25
unroll5:
#+begin_src bash
 238  MaxL  === _ 119 323  [[ 239 ]]  !jvms: Unroll5::test @ bci:50 (line 25)
 239  MaxL  === _ 238 368  [[ 240 ]]  !jvms: Unroll5::test @ bci:59 (line 26)
 240  MaxL  === _ 239 416  [[ 241 ]]  !jvms: Unroll5::test @ bci:68 (line 27)
 241  MaxL  === _ 240 464  [[ 242 ]]  !jvms: Unroll5::test @ bci:77 (line 28)
 242  MaxL  === _ 241 512  [[ 262 282 119 ]]  !jvms: Unroll5::test @ bci:86 (line 29)
 119  Phi  === 281 22 242  [[ 238 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !jvms: Unroll5::test @ bci:12 (line 20)

 max(max(max(max(max(323, 119), 368), 416), 464), 512)

 568  MaxL  === _ 464 512  [[ 571 ]]
 569  MaxL  === _ 323 368  [[ 570 ]]
 570  MaxL  === _ 569 416  [[ 571 ]]
 571  MaxL  === _ 568 570  [[ 572 ]]
 572  MaxL  === _ 119 571  [[ 119 282 262 ]]  !orig=[242] !jvms: Unroll5::test @ bci:86 (line 29)

 max(119, max(max(464, 512), max(max(323, 368), 416)))
#+end_src

reassoc2 unroll crash
#+begin_src bash
 170  MaxL  === _ 252 297  [[ 171 ]]  !jvms: Test::test @ bci:34 (line 23)
 171  MaxL  === _ 170 591  [[ 705 472 211 ]]  !orig=614 !jvms: Test::test @ bci:42 (line 25)
 322  MaxL  === _ 339 323  [[ 339 346 ]]  !orig=171,614 !jvms: Test::test @ bci:42 (line 25)
 323  MaxL  === _ 324 331  [[ 322 ]]  !orig=170 !jvms: Test::test @ bci:34 (line 23)
 448  MaxL  === _ 465 449  [[ 465 472 705 ]]  !orig=171,614 !jvms: Test::test @ bci:42 (line 25)
 449  MaxL  === _ 450 457  [[ 448 ]]  !orig=170 !jvms: Test::test @ bci:34 (line 23)
 591  MaxL  === _ 592 675  [[ 171 ]]  !orig=171,614 !jvms: Test::test @ bci:42 (line 25)
 592  MaxL  === _ 593 600  [[ 591 ]]  !orig=170 !jvms: Test::test @ bci:34 (line 23)
 675  MaxL  === _ 676 685  [[ 591 ]]  !orig=171,614 !jvms: Test::test @ bci:42 (line 25)
 676  MaxL  === _ 677 705  [[ 675 ]]  !orig=591,171,614 !jvms: Test::test @ bci:42 (line 25)
 677  MaxL  === _ 678 688  [[ 676 ]]  !orig=592,170 !jvms: Test::test @ bci:34 (line 23)
 685  MaxL  === _ 686 690  [[ 675 ]]  !orig=170 !jvms: Test::test @ bci:34 (line 23)
 705  Phi  === 702 448 171  [[ 676 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=608,119 !jvms: Test::test @ bci:12 (line 20)

 171 = max(max(252, 297), max(max(593, 600), max(max(677, 705), max(686, 690))))
#+end_src
* 20.11.25
Tests:
- IR tests: disable superword, disable loop unrolling, test different unroll/reassoc-basic/reassoc-tree structures
- Non-IR tests: +- superword, +- loop unrolling, different sizes

TestAliasingFuzzer example:
#+begin_src bash
// --- test_751 start ---
// invarRest fields:
private static int invar0_751 = 0;
// Containers fields:
private static MemorySegment original_container0_751  = MemorySegment.ofArray(new short[37266]);
private static MemorySegment test_container0_751      = MemorySegment.ofArray(new short[37266]);
private static MemorySegment reference_container0_751 = MemorySegment.ofArray(new short[37266]);
private static MemorySegment original_container1_751  = MemorySegment.ofArray(new short[37266]);
private static MemorySegment test_container1_751      = MemorySegment.ofArray(new short[37266]);
private static MemorySegment reference_container1_751 = MemorySegment.ofArray(new short[37266]);
// Index forms for the accesses:
private static IndexForm index0_751 = new IndexForm(-5541, -4, -4, new int[] {0}, 4);
private static IndexForm index1_751 = new IndexForm(-28322, -2, 2, new int[] {-1}, 2);
// Count the run invocations.
private static int iterations_751 = 0;

@Run(test = "test_751")
@Warmup(100)
public static void run_751(RunInfo info) {

    // Once warmup is over (100x), repeat 10x to get reasonable coverage of the
    // randomness in the tests.
    int reps = info.isWarmUp() ? 10 : 1;
    for (int r = 0; r < reps; r++) {

        iterations_751++;
// Init containers from original data:
test_container0_751.copyFrom(original_container0_751);
reference_container0_751.copyFrom(original_container0_751);
test_container1_751.copyFrom(original_container1_751);
reference_container1_751.copyFrom(original_container1_751);
// Container aliasing:
var test_0      = (iterations_751 % 2 == 0) ? test_container0_751      : test_container0_751;
var reference_0 = (iterations_751 % 2 == 0) ? reference_container0_751 : reference_container0_751;
var test_1      = (iterations_751 % 2 == 0) ? test_container0_751      : test_container0_751;
var reference_1 = (iterations_751 % 2 == 0) ? reference_container0_751 : reference_container0_751;
// Generate ranges:
int rnd = Math.min(256, 74532 / 10);
int middle = 74532 / 2 + RANDOM.nextInt(-rnd, rnd);
int range = 74532 / 3 - RANDOM.nextInt(rnd);
int overlap = RANDOM.nextInt(-rnd, rnd);
var r0 = new IndexForm.Range(middle - range + overlap, middle + overlap);
var r1 = new IndexForm.Range(middle, middle + range);
if (RANDOM.nextBoolean()) {
    var tmp = r0;
    r0 = r1;
    r1 = tmp;
}
// Compute loop bounds and loop invariants.
int ivLo = RANDOM.nextInt(-1000, 1000);
int ivHi = ivLo + 74532;
int invar0_0 = index0_751.invar0ForIvLo(r0, ivLo);
ivHi = Math.min(ivHi, index0_751.ivHiForInvar0(r0, invar0_0));
int invar0_1 = index1_751.invar0ForIvLo(r1, ivLo);
ivHi = Math.min(ivHi, index1_751.ivHiForInvar0(r1, invar0_1));
// Let's check that the range is large enough, so that the vectorized
// main loop can even be entered.
if (ivLo + 1000 > ivHi) { throw new RuntimeException("iv range too small: " + ivLo + " " + ivHi); }
invar0_751 = RANDOM.nextInt(-1, 2);
// Verify the bounds we just created, just to be sure there is no unexpected aliasing!
int i = ivLo;
int lo_0 = (int)(-5541 + -4 * i + -4 * invar0_0 + 0 * invar0_751);
int lo_1 = (int)(-28322 + -2 * i + 2 * invar0_1 + -1 * invar0_751);
i = ivHi;
int hi_0 =  (int)(-5541 + -4 * i + -4 * invar0_0 + 0 * invar0_751);
int hi_1 =  (int)(-28322 + -2 * i + 2 * invar0_1 + -1 * invar0_751);
// Aliasing unknown, cannot verify bounds.
        // Run test and compare with interpreter results.
var result = test_751(test_0, invar0_0, test_1, invar0_1, ivLo, ivHi);
var expected = reference_751(reference_0, invar0_0, reference_1, invar0_1, ivLo, ivHi);
        Verify.checkEQ(result, expected);
    } // end reps
} // end run_751
#+end_src

Reassoc2 test failure:
#+begin_src bash
 170  MaxL  === _ 252 297  [[ 171 ]]  !jvms: Test::test @ bci:30 (line 22)
 171  MaxL  === _ 170 591  [[ 705 472 211 ]]  !orig=614 !jvms: Test::test @ bci:38 (line 24)
 322  MaxL  === _ 339 323  [[ 339 346 ]]  !orig=171,614 !jvms: Test::test @ bci:38 (line 24)
 323  MaxL  === _ 324 331  [[ 322 ]]  !orig=170 !jvms: Test::test @ bci:30 (line 22)
 448  MaxL  === _ 465 449  [[ 465 472 705 ]]  !orig=171,614 !jvms: Test::test @ bci:38 (line 24)
 449  MaxL  === _ 450 457  [[ 448 ]]  !orig=170 !jvms: Test::test @ bci:30 (line 22)
 591  MaxL  === _ 592 675  [[ 171 ]]  !orig=171,614 !jvms: Test::test @ bci:38 (line 24)
 592  MaxL  === _ 593 600  [[ 591 ]]  !orig=170 !jvms: Test::test @ bci:30 (line 22)
 675  MaxL  === _ 676 685  [[ 591 ]]  !orig=171,614 !jvms: Test::test @ bci:38 (line 24)
 676  MaxL  === _ 677 705  [[ 675 ]]  !orig=591,171,614 !jvms: Test::test @ bci:38 (line 24)
 677  MaxL  === _ 678 688  [[ 676 ]]  !orig=592,170 !jvms: Test::test @ bci:30 (line 22)
 685  MaxL  === _ 686 690  [[ 675 ]]  !orig=170 !jvms: Test::test @ bci:30 (line 22)
 686  LoadL  === 503 7 687  [[ 685 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=5; #long (does not depend only on test, unknown control) !orig=297,[169] !jvms: Test::test @ bci:23 (line 21)
 690  LoadL  === 551 7 691  [[ 685 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=5; #long (does not depend only on test, unknown control) !orig=252,[147] !jvms: Test::test @ bci:16 (line 20)
 705  Phi  === 702 448 171  [[ 676 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=608,119 !jvms: Test::test @ bci:12 (line 20)
g#+end_src

Test failure:
#+begin_src bash
[avoid-cmov] try reassociate; chain head:
  219  MaxL  === _ 218 1257  [[ 1290 511 1027 ]]  !orig=1296 !jvms: TestReductionReassociationManual::testMaxLongManualUnroll4 @ bci:74 (line 69)
#+end_src

Base output:
#+begin_src bash
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 232  MaxL  === _ 240 233  [[ 240 247 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 301  MaxL  === _ 309 302  [[ 309 322 667 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 529  MaxL  === _ 623 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 623  MaxL  === _ 624 635  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 624  MaxL  === _ 625 639  [[ 623 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 625  MaxL  === _ 626 643  [[ 624 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 626  MaxL  === _ 627 647  [[ 625 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 627  MaxL  === _ 630 628  [[ 626 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
 630  MaxL  === _ 631 653  [[ 627 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 631  MaxL  === _ 632 657  [[ 630 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
 632  MaxL  === _ 667 633  [[ 631 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 633  LoadL  === 342 7 634  [[ 632 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=5; #long (does not depend only on test, unknown control) !orig=530,451,385,215,[146] !jvms: Test::test @ bci:14 (line 20)
 667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)

 147 = max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(667, 633), 657), 653), 628), 647), 643), 639), 635), 530), 538), 534), 525), 451), 453), 385), 215)
 to:
 147 = max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(633, 657), 653), 628), 647), 643), 639), 635), 530), 538), 534), 525), 451), 453), 385), 215), 667)
#+end_src
* 19.11.25
Phi and input:
#+begin_src bash
[avoid-cmov] loop head: 306  CountedLoop  === 306 191 311  [[ 306 308 309 310 ]] inner stride: 1 pre of N177 !orig=[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
[avoid-cmov] try reassociate:
  309  Phi  === 306 22 301  [[ 301 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=119 !jvms: Test::test @ bci:12 (line 20)
  301  MaxL  === _ 309 302  [[ 309 322 667 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] loop head: 664  CountedLoop  === 664 176 160  [[ 664 172 667 676 ]] inner stride: 16 main of N664 strip mined !orig=[550],[460],[389],[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
[avoid-cmov] try reassociate:
  667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
  301  MaxL  === _ 309 302  [[ 309 322 667 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] try reassociate:
  667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] loop head: 237  CountedLoop  === 237 278 242  [[ 237 239 240 241 ]] inner stride: 1 post of N177 !orig=[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
[avoid-cmov] try reassociate:
  240  Phi  === 237 322 232  [[ 232 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=119 !jvms: Test::test @ bci:12 (line 20)
  232  MaxL  === _ 240 233  [[ 240 247 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
#+end_src

Loop head:
#+begin_src bash
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 232  MaxL  === _ 240 233  [[ 240 247 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 301  MaxL  === _ 309 302  [[ 309 322 667 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 529  MaxL  === _ 623 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 623  MaxL  === _ 624 635  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 624  MaxL  === _ 625 639  [[ 623 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
 625  MaxL  === _ 626 643  [[ 624 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
 626  MaxL  === _ 627 647  [[ 625 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 627  MaxL  === _ 630 628  [[ 626 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
 630  MaxL  === _ 631 653  [[ 627 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 631  MaxL  === _ 632 657  [[ 630 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
 632  MaxL  === _ 667 633  [[ 631 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
 633  LoadL  === 342 7 634  [[ 632 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=5; #long (does not depend only on test, unknown control) !orig=530,451,385,215,[146] !jvms: Test::test @ bci:14 (line 20)
 664  CountedLoop  === 664 176 160  [[ 664 172 667 676 ]] inner stride: 16 main of N664 strip mined !orig=[550],[460],[389],[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
 301  MaxL  === _ 302 22  [[ 667 322 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)

 147 = max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(max(667, 633), 657), 653), 628), 647), 643), 639), 635), 530), 538), 534), 525), 451), 453), 385), 215)

[avoid-cmov] loop head: 306  CountedLoop  === 306 191 311  [[ 306 308 309 310 ]] inner stride: 1 pre of N177 !orig=[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
 308  Phi  === 306 23 300  [[ 300 307 431 745 ]]  #int:0..maxint-1, widen: 3 #tripcount !orig=120,[214],[140] !jvms: Test::test @ bci:12 (line 20)
 309  Phi  === 306 22 301  [[ 301 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=119 !jvms: Test::test @ bci:12 (line 20)
 310  CountedLoopEnd  === 306 298  [[ 311 324 ]] [lt] P=0.500000, C=112637.000000 !orig=172,[159] !jvms: Test::test @ bci:9 (line 19)

[avoid-cmov] loop head: 664  CountedLoop  === 664 176 160  [[ 664 172 667 676 ]] inner stride: 16 main of N664 strip mined !orig=[550],[460],[389],[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
 172  CountedLoopEnd  === 664 171  [[ 679 160 ]] [lt] P=0.999902, C=112637.000000 !orig=[159] !jvms: Test::test @ bci:9 (line 19)
 667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
 676  Phi  === 664 433 148  [[ 743 668 669 670 671 672 673 674 675 707 710 712 714 716 718 148 740 ]]  #int:1..maxint-1, widen: 3 #tripcount !orig=549,[466],391,120,[214],[140] !jvms: Test::test @ bci:12 (line 20)

[avoid-cmov] loop head: 237  CountedLoop  === 237 278 242  [[ 237 239 240 241 ]] inner stride: 1 post of N177 !orig=[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
 239  Phi  === 237 297 231  [[ 231 238 ]]  #int:0..maxint-1, widen: 3 #tripcount !orig=120,[214],[140] !jvms: Test::test @ bci:12 (line 20)
 240  Phi  === 237 322 232  [[ 232 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=119 !jvms: Test::test @ bci:12 (line 20)
 241  CountedLoopEnd  === 237 229  [[ 242 243 ]] [lt] P=0.500000, C=112637.000000 !orig=172,[159] !jvms: Test::test @ bci:9 (line 19)
#+end_src
* 13.11.25
** chat
testMaxLAndBarrierInLoop/testMinLAndBarrierInLoop don't fit in TestIfMinMax
  "Test that if expressions are properly folded into min/max nodes"
MinMaxVector.java does not have copyright header, what do we do?

Restrict shapes more
Superword maybe better than igvn (don't know what's inside the loop)
Once block nodes schedule as alternative way? Everything would be ordered, we would know if they're part of a loop...etc
  Platform dependant part ^
  After scheduling
  Compile::optimize -> Code_Gen() -> global_code_motion -> maybe part of peephole or part of it

reassociate_in_loop_rebuild(int depth, Node*& queue_head, PhaseGVN* phase) {

reassociate_in_loop_rebuild(int depth, Node** queue_head, PhaseGVN* phase) {

for (DUIterator_Fast imax, i = fast_outs(imax); i < imax; i++) {
tmp = fast_out(i);
if (tmp->Opcode() == Op_MaxL) {   // Check for MaxL users
has_max_out = true;
break;
}
      }|
->
find_out_with(Op_MaxL)
** crash
Reassoc4 crashes with the way the code is now:
#+begin_src bash
#  Internal Error (/Users/galder/src/jdk-avoid-cmov-long-min-max/src/hotspot/share/opto/node.hpp:418), pid=77714, tid=26371
#  assert(i < _max) failed: oob: i=2, _max=2

 5 Node::in(unsigned int) const + 128 in libjvm.dylib at /Users/galder/src/jdk-avoid-cmov-long-min-max/src/hotspot/share/opto/node.hpp:418:28

   416│
   417│   // Reference to the i'th input Node.  Error if out of bounds.
   418│   Node* in(uint i) const { assert(i < _max, "oob: i=%d, _max=%d", i, _max); return _in[i]; }
      │                            ▲
   419│   // Reference to the i'th input Node.  null if out of bounds.
   420│   Node* lookup(uint i) const { return ((i < _max) ? _in[i] : nullptr); }

 6 PhaseIterGVN::reassociate_in_loop(Node*) + 88 in libjvm.dylib at /Users/galder/src/jdk-avoid-cmov-long-min-max/src/hotspot/share/opto/phaseX.cpp:2780:28

  2778│   do {
  2779│     Node* left = current->in(1);
  2780│     Node* right = current->in(2);
      │                            ▲
  2781│     if (left->Opcode() == Op_MaxL || left->is_Phi()) {
  2782│       current = left;
#+end_src
* 11.11.25
** Reassoc Simple Reworked
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 149  MaxL  === _ 388 148  [[ 470 326 180 ]]  !orig=405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 313 305  [[ 313 326 470 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 388  MaxL  === _ 454 389  [[ 149 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 454  MaxL  === _ 456 455  [[ 388 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 456  MaxL  === _ 470 457  [[ 454 ]]  !orig=388,149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 149 = max(148, max(389, max(455, max(457, 470))))

AFTER: BEFORE_MACRO_EXPANSION
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 305 22  [[ 470 326 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 523  MaxL  === _ 457 455  [[ 524 ]]
 524  MaxL  === _ 523 389  [[ 525 ]]
 525  MaxL  === _ 524 148  [[ 526 ]]
 526  MaxL  === _ 525 470  [[ 180 326 470 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 526 = max(470, max(148, max(389, max(455, 457)))
#+end_src

Invalid:
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 149  MaxL  === _ 388 148  [[ 470 326 180 ]]  !orig=405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 313 305  [[ 313 326 470 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 388  MaxL  === _ 454 389  [[ 149 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 454  MaxL  === _ 456 455  [[ 388 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 456  MaxL  === _ 470 457  [[ 454 ]]  !orig=388,149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 470  Phi  === 467 304 149  [[ 456 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=397,119 !jvms: LongReductionMultiplyMax::test @ bci:12 (line 23)

 149 = max(148, max(389, max(455, max(457, 470))))

AFTER: BEFORE_MACRO_EXPANSION
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 305 22  [[ 470 326 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 523  MaxL  === _ 470 457  [[ 180 326 470 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
#+end_src
** Debugging
xeon:
PhaseIterGVN::reassociate_in_loop(n)
 218  MaxL  === _ 219 460  [[ 565 271 380 ]]  !orig=193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
PhaseIterGVN::reassociate_in_loop(n)
 149  MaxL  === _ 148 388  [[ 470 326 180 ]]  !orig=405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)            |

macos:
PhaseIterGVN::reassociate_in_loop(n)
n= 218  MaxL  === _ 460 219  [[ 565 271 380 ]]  !orig=193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
PhaseIterGVN::reassociate_in_loop(n)
n= 149  MaxL  === _ 388 148  [[ 470 326 180 ]]  !orig=405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
** Long reduction multiply max no superword
*** xeon
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 149  MaxL  === _ 148 388  [[ 470 326 180 ]]  !orig=405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 313 305  [[ 313 326 470 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 388  MaxL  === _ 389 454  [[ 149 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 454  MaxL  === _ 455 456  [[ 388 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 456  MaxL  === _ 457 470  [[ 454 ]]  !orig=388,149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 149 = max(148, max(389, max(455, max(457, 470))))

AFTER: BEFORE_MACRO_EXPANSION
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 305 22  [[ 470 326 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 388  MaxL  === _ 389 454  [[ 523 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 454  MaxL  === _ 455 456  [[ 388 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 456  MaxL  === _ 457 470  [[ 454 ]]  !orig=388,[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 523  MaxL  === _ 148 388  [[ 180 326 470 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 532 = max(148, max(389, max(455, max(457, 470))))

 ;; B8: #	out( B9 ) <- in( B9 ) top-of-loop Freq: 1.04888e+08
  0x00007f0940addc10:   movq		%rax, %r10          ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@12 (line 23)
 ;; B9: #	out( B8 B10 ) <- in( B12 B8 ) Loop( B9-B8 inner main of N58 strip mined) Freq: 1.04898e+08
  0x00007f0940addc13:   imulq		$0xb, 0x10(%rsi, %rcx, 8), %r11
  0x00007f0940addc19:   imulq		$0xb, 0x18(%rsi, %rcx, 8), %rbp
  0x00007f0940addc1f:   imulq		$0xb, 0x20(%rsi, %rcx, 8), %r13
  0x00007f0940addc25:   imulq		$0xb, 0x28(%rsi, %rcx, 8), %rax
                                                            ;*lmul {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@18 (line 23)
  0x00007f0940addc2b:   cmpq		%r10, %r11
  0x00007f0940addc2e:   cmovlq		%r10, %r11
  0x00007f0940addc32:   cmpq		%r11, %rbp
  0x00007f0940addc35:   cmovlq		%r11, %rbp
  0x00007f0940addc39:   cmpq		%rbp, %r13
  0x00007f0940addc3c:   cmovlq		%rbp, %r13
  0x00007f0940addc40:   cmpq		%r13, %rax
  0x00007f0940addc43:   cmovlq		%r13, %rax          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@24 (line 24)
  (r10 is the carrier)
  rax = cmovlq(rax, cmovlq(r13, cmovlq(rbp, cmovlq(r11, r10))))

  0x00007f0940addc47:   addl		$4, %ecx            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@28 (line 21)
  0x00007f0940addc4a:   cmpl		%edi, %ecx
  0x00007f0940addc4c:   jl		0x7f0940addc10      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@9 (line 21)
 ;; B10: #	out( B14 B11 ) <- in( B9 )  Freq: 10241.4
  0x00007f0940addc4e:   movq		0x30(%r15), %r10    ; ImmutableOopMap {rsi=Oop }
                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                            ; - (reexecute) LongReductionMultiplyMax::test@31 (line 21)
  0x00007f0940addc52:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@31 (line 21)
                                                            ;   {poll}
  0x00007f0940addc55:   cmpl		%ebx, %ecx
  0x00007f0940addc57:   jge		0x7f0940addc7a
 ;; B11: #	out( B12 ) <- in( B10 )  Freq: 10240.4
  0x00007f0940addc59:   movq		%rax, %r10
 ;; B12: #	out( B9 ) <- in( B7 B11 ) Loop( B12-B11 ) Freq: 10241.4
  0x00007f0940addc5c:   movl		%r9d, %edi
  0x00007f0940addc5f:   subl		%ecx, %edi
  0x00007f0940addc61:   addl		$-3, %edi
  0x00007f0940addc64:   cmpl		%ecx, %ebx
  0x00007f0940addc66:   cmovll		%r8d, %edi
  0x00007f0940addc6a:   cmpl		$0xfa0, %edi
  0x00007f0940addc70:   cmoval		%edx, %edi
  0x00007f0940addc73:   addl		%ecx, %edi
  0x00007f0940addc75:   jmp		0x7f0940addc13
#+end_src

* 10.11.25
** Long reduction multiply max
*** xeon
vectorization kicks in, run without superword
#+begin_src bash
 ;; B11: #	out( B12 ) <- in( B12 ) top-of-loop Freq: 1.04888e+08
  0x00007f0250adddf0:   movl		%r8d, %edi          ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@12 (line 23)
 ;; B12: #	out( B11 B13 ) <- in( B15 B11 ) Loop( B12-B11 inner main of N41 strip mined) Freq: 1.04898e+08
  0x00007f0250adddf3:   vpmullq		0x10(%rsi, %rdi, 8), %ymm0, %ymm2
  0x00007f0250adddfe:   vpmullq		0x30(%rsi, %rdi, 8), %ymm0, %ymm3
  0x00007f0250adde09:   vpmullq		0x50(%rsi, %rdi, 8), %ymm0, %ymm4
  0x00007f0250adde14:   vpmullq		0xf0(%rsi, %rdi, 8), %ymm0, %ymm5
  0x00007f0250adde1f:   vpmullq		0xd0(%rsi, %rdi, 8), %ymm0, %ymm6
  0x00007f0250adde2a:   vpmullq		0xb0(%rsi, %rdi, 8), %ymm0, %ymm7
  0x00007f0250adde35:   vpmullq		0x90(%rsi, %rdi, 8), %ymm0, %ymm8
  0x00007f0250adde40:   vpmullq		0x70(%rsi, %rdi, 8), %ymm0, %ymm9
  0x00007f0250adde4b:   vpmaxsq		%ymm1, %ymm2, %ymm1
  0x00007f0250adde51:   vpmaxsq		%ymm1, %ymm3, %ymm1
  0x00007f0250adde57:   vpmaxsq		%ymm1, %ymm4, %ymm1
  0x00007f0250adde5d:   vpmaxsq		%ymm1, %ymm9, %ymm1
  0x00007f0250adde63:   vpmaxsq		%ymm1, %ymm8, %ymm1
  0x00007f0250adde69:   vpmaxsq		%ymm1, %ymm7, %ymm1
  0x00007f0250adde6f:   vpmaxsq		%ymm1, %ymm6, %ymm1
  0x00007f0250adde75:   vpmaxsq		%ymm1, %ymm5, %ymm1
  0x00007f0250adde7b:   leal		0x20(%rdi), %r8d
  0x00007f0250adde7f:   nop
  0x00007f0250adde80:   cmpl		%r11d, %r8d
  0x00007f0250adde83:   jl		0x7f0250adddf0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@9 (line 21)
 ;; B13: #	out( B16 B14 ) <- in( B12 )  Freq: 10241.4
  0x00007f0250adde89:   movq		0x30(%r15), %r11
  0x00007f0250adde8d:   vextracti128		$1, %ymm1, %xmm2
  0x00007f0250adde93:   vpmaxsq		%xmm1, %xmm2, %xmm2
  0x00007f0250adde99:   vpshufd		$0xe, %xmm2, %xmm3
  0x00007f0250adde9e:   vpmaxsq		%xmm2, %xmm3, %xmm3
  0x00007f0250addea4:   vmovq		%rbx, %xmm2
  0x00007f0250addea9:   vpmaxsq		%xmm3, %xmm2, %xmm2
  0x00007f0250addeaf:   vmovq		%xmm2, %rax         ; ImmutableOopMap {rsi=Oop }
                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                            ; - (reexecute) LongReductionMultiplyMax::test@31 (line 21)
  0x00007f0250addeb4:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@31 (line 21)
                                                            ;   {poll}
  0x00007f0250addeb7:   cmpl		%ebp, %r8d
  0x00007f0250addeba:   jge		0x7f0250addee5
 ;; B14: #	out( B15 ) <- in( B13 )  Freq: 10240.4
  0x00007f0250addebc:   movl		%r8d, %edi
 ;; B15: #	out( B12 ) <- in( B10 B14 ) Loop( B15-B14 ) Freq: 10241.4
  0x00007f0250addebf:   movl		%ecx, %r11d
  0x00007f0250addec2:   subl		%edi, %r11d
  0x00007f0250addec5:   addl		$-0x1f, %r11d
  0x00007f0250addec9:   cmpl		%edi, %ebp
  0x00007f0250addecb:   cmovll		%r9d, %r11d
  0x00007f0250addecf:   cmpl		$0x7d00, %r11d
  0x00007f0250added6:   cmoval		%r10d, %r11d
  0x00007f0250addeda:   addl		%edi, %r11d
  0x00007f0250addedd:   nop
  0x00007f0250addede:   nop
  0x00007f0250addedf:   nop
  0x00007f0250addee0:   jmp		0x7f0250adddf3
#+end_src
*** macos M4
2nd compilation:
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 149  MaxL  === _ 388 148  [[ 470 326 180 ]]  !orig=405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 234  MaxL  === _ 243 235  [[ 243 250 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 304  MaxL  === _ 313 305  [[ 313 326 470 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 388  MaxL  === _ 454 389  [[ 149 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 454  MaxL  === _ 456 455  [[ 388 ]]  !orig=149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 456  MaxL  === _ 470 457  [[ 454 ]]  !orig=388,149,405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 149 = max(148, max(389, max(455, max(457, 470)))
 // 456 = max(148, max(389, max(455, max(470, 457))))

AFTER: BEFORE_MACRO_EXPANSION
 304  MaxL  === _ 305 22  [[ 470 326 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 523  MaxL  === _ 148 389  [[ 525 ]]
 524  MaxL  === _ 455 457  [[ 525 ]]
 525  MaxL  === _ 523 524  [[ 526 ]]
 526  MaxL  === _ 470 525  [[ 180 326 470 ]]  !orig=[149],405 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 526 = max(470, max(max(148, 389), max(455, 457)))

 ;; B8: #	out( B9 ) <- in( B7 B10 ) Loop( B8-B10 ) Freq: 10241.4
  0x000000010feb3190:   sub		w13, w15, w10
  0x000000010feb3194:   cmp		w12, w10
  0x000000010feb3198:   sub		w11, w13, #3
  0x000000010feb319c:   csel		w11, wzr, w11, lt
  0x000000010feb31a0:   cmp		w11, #0xfa0
  0x000000010feb31a4:   csel		w11, w17, w11, hi
  0x000000010feb31a8:   add		w3, w11, w10
  0x000000010feb31ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@12 (line 23)
 ;; B9: #	out( B9 B10 ) <- in( B8 B9 ) Loop( B9-B9 inner main of N53 strip mined) Freq: 1.04898e+08
  0x000000010feb31b0:   add		x11, x1, w10, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@17 (line 23)
 ;; merged ldr pair
  0x000000010feb31b4:   ldp		x16, x13, [x11, #0x20]
 ;; merged ldr pair
  0x000000010feb31b8:   ldp		x14, x11, [x11, #0x10]
  0x000000010feb31bc:   mul		x16, x16, x2
  0x000000010feb31c0:   mul		x13, x13, x2
  0x000000010feb31c4:   mul		x14, x14, x2
  0x000000010feb31c8:   mul		x11, x11, x2        ;*lmul {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@18 (line 23)
  0x000000010feb31cc:   cmp		x13, x16
  0x000000010feb31d0:   csel		x13, x16, x13, lt
  0x000000010feb31d4:   cmp		x11, x14
  0x000000010feb31d8:   csel		x11, x14, x11, lt
  0x000000010feb31dc:   cmp		x13, x11
  0x000000010feb31e0:   csel		x11, x11, x13, lt
  0x000000010feb31e4:   cmp		x0, x11
  0x000000010feb31e8:   add		w10, w10, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@28 (line 21)
  0x000000010feb31ec:   csel		x0, x11, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@24 (line 24)

  x0 = csel(x0, csel(csel(x11, x14), csel(x13, x16)))

  0x000000010feb31f0:   cmp		w10, w3
  0x000000010feb31f4:   b.lt		#0x10feb31b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@9 (line 21)
 ;; B10: #	out( B8 B11 ) <- in( B9 )  Freq: 10241.4
  0x000000010feb31f8:   ldr		x13, [x28, #0x30]   ; ImmutableOopMap {c_rarg1=Oop }
                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                            ; - (reexecute) LongReductionMultiplyMax::test@31 (line 21)
  0x000000010feb31fc:   ldr		wzr, [x13]          ;   {poll}
  0x000000010feb3200:   ldrb		w8, [x28, #0x510]
  0x000000010feb3204:   cbz		x8, #0x10feb321c
 ;; 0x105F6F0D4
  0x000000010feb3208:   mov		x8, #0xf0d4         ;   {runtime_call JavaThread::verify_cross_modify_fence_failure(JavaThread*)}
  0x000000010feb320c:   movk		x8, #0x5f6, lsl #16
  0x000000010feb3210:   movk		x8, #1, lsl #32
  0x000000010feb3214:   mov		x0, x28
  0x000000010feb3218:   blr		x8                  ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - LongReductionMultiplyMax::test@31 (line 21)
  0x000000010feb321c:   cmp		w10, w12
  0x000000010feb3220:   b.lt		#0x10feb3190
#+end_src

1st compilation:
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS (round 2)
 218  MaxL  === _ 219 460  [[ 565 271 380 ]]  !orig=193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 277  MaxL  === _ 296 278  [[ 296 301 310 ]]  !orig=218,193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 314  MaxL  === _ 333 315  [[ 333 342 ]]  !orig=218,193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 352  MaxL  === _ 371 353  [[ 371 380 565 ]]  !orig=218,193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 413  MaxL  === _ 408 395  [[ 414 ]]
 460  MaxL  === _ 461 542  [[ 218 ]]  !orig=218,193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 542  MaxL  === _ 543 546  [[ 460 ]]  !orig=218,193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 546  MaxL  === _ 547 565  [[ 542 ]]  !orig=460,218,193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 546 = mmax(219, max(461, max(543, max(547, 565))))

AFTER: BEFORE_MACRO_EXPANSION
 314  MaxL  === _ 333 315  [[ 333 342 ]]  !orig=[218],193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 352  MaxL  === _ 371 353  [[ 371 380 565 ]]  !orig=[218],193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)
 413  MaxL  === _ 408 395  [[ 414 ]]
 597  MaxL  === _ 219 461  [[ 599 ]]
 598  MaxL  === _ 543 547  [[ 599 ]]
 599  MaxL  === _ 597 598  [[ 600 ]]
 600  MaxL  === _ 565 599  [[ 380 271 565 ]]  !orig=[218],193 !jvms: LongReductionMultiplyMax::test @ bci:24 (line 24)

 600 = max(565, max(max(219, 461), max(543, 547)))
#+end_src
* 7.11.25
** Long reduction multiply max
Next: validate that the reassociation happens on mac and linux

In macos, before:
#+begin_src bash
Before:
Running
Throughput: 217 ops/ms
Throughput: 222 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 221 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Validate

After:
Running
Throughput: 641 ops/ms
Throughput: 641 ops/ms
Throughput: 643 ops/ms
Throughput: 641 ops/ms
Throughput: 640 ops/ms
Throughput: 640 ops/ms
Throughput: 641 ops/ms
Throughput: 642 ops/ms
Throughput: 640 ops/ms
Throughput: 640 ops/ms
Validate
#+end_src

On xeon:
#+begin_src bash
Before:
Warmup
Running
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 194 ops/ms
Throughput: 194 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Validate

After:
Warmup
Running
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 194 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 195 ops/ms
Throughput: 193 ops/ms
Validate
#+end_src
** Fix attempts
Second attempt:
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
 606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
 607  LoadL  === 385 7 608  [[ 606 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=6; #long !orig=539,455,217,190 !jvms: Test::test @ bci:14 (line 20)

216 = max(217, max(455, max(536, max(539, max(594, max(597, max(604, max(607, 629)))))))

AFTER: BEFORE_MACRO_EXPANSION
 664  MaxL  === _ 217 455  [[ 666 ]]
 665  MaxL  === _ 536 539  [[ 666 ]]
 666  MaxL  === _ 664 665  [[ 670 ]]
 667  MaxL  === _ 594 597  [[ 669 ]]
 668  MaxL  === _ 604 607  [[ 669 ]]
 669  MaxL  === _ 667 668  [[ 670 ]]
 670  MaxL  === _ 666 669  [[ 671 ]]
 671  MaxL  === _ 629 670  [[ 268 629 374 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)

671 = max(629, max(max(max(217, 455), max(536, 539)), max(max(594, 597), max(604, 607))))
#+end_src

First attempt not complete:
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
 606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
 607  LoadL  === 385 7 608  [[ 606 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=6; #long !orig=539,455,217,190 !jvms: Test::test @ bci:14 (line 20)

216 = max(217, max(455, max(536, max(539, max(594, max(597, max(604, max(607, 629)))))))

AFTER: BEFORE_MACRO_EXPANSION
 664  MaxL  === _ 217 455  [[ 666 ]]
 665  MaxL  === _ 536 539  [[ 666 ]]
 666  MaxL  === _ 664 665  [[ 670 ]]
 667  MaxL  === _ 594 597  [[ 669 ]]
 668  MaxL  === _ 604 607  [[ 669 ]]
 669  MaxL  === _ 667 668  [[ 670 ]]
 670  MaxL  === _ 666 669  [[ 671 ]]
 671  MaxL  === _ 347 670  [[ 268 374 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)

671 = max(347, ...)
^ 347 is wrong, should be 217
#+end_src
** TestIfMinMax debug analysis
Debugging:
n        557  MaxL  === _ 929 558  [[ 639 1058 794 ]]  !orig=552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
current 1033  MaxL  === _ 1058 1034  [[ 1032 ]]  !orig=929,557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
last    1058  Phi  === 1055 753 557  [[ 1033 ]]  #long !orig=[958],[618],[603] !jvms: TestIfMinMax::test @ bci:58 (line 29)

What does TestIfMinMax show in *reassoc-tree* picking the same logging as below?
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
  557  MaxL  === _ 558 929  [[ 639 1058 794 ]]  !orig=552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  929  MaxL  === _ 930 1032  [[ 557 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1032  MaxL  === _ 1033 1042  [[ 929 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1033  MaxL  === _ 1034 1058  [[ 1032 ]]  !orig=929,557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1034  MulL  === _ 1035 1038  [[ 1033 ]]  !orig=930,558,247 !jvms: TestIfMinMax::test @ bci:20 (line 24)
 1058  Phi  === 1055 753 557  [[ 1033 ]]  #long !orig=[958],[618],[603] !jvms: TestIfMinMax::test @ bci:58 (line 29)

v557 = max(v558, max(v930, max(v1042, max(v1034, v1058)))

AFTER: BEFORE_MACRO_EXPANSION
  699  MaxL  === _ 728 700  [[ 728 740 ]]  !orig=[557],552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  753  MaxL  === _ 782 754  [[ 782 794 1058 ]]  !orig=[557],552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  830  MaxL  === _ 825 812  [[ 883 ]]  !orig=[878] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1101  MaxL  === _ 930 1042  [[ 1102 ]]  !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1102  MaxL  === _ 558 1101  [[ 1103 ]]  !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1103  MaxL  === _ 1058 1102  [[ 794 1058 639 ]]  !orig=[557],552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)

v1103 = max(v1058, max(v558, max(v930, v1042)))
v1034 MulL is missing...?
#+end_src

What does TestIfMinMax show in *base* picking the same logging as below?
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
  557  MaxL  === _ 558 929  [[ 639 1058 794 ]]  !orig=552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  645  MaxL  === _ 674 646  [[ 674 679 691 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  699  MaxL  === _ 728 700  [[ 728 740 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  753  MaxL  === _ 782 754  [[ 782 794 1058 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  830  MaxL  === _ 825 812  [[ 883 ]]  !orig=[878] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  929  MaxL  === _ 930 1032  [[ 557 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1032  MaxL  === _ 1033 1042  [[ 929 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1033  MaxL  === _ 1034 1058  [[ 1032 ]]  !orig=929,557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)

AFTER: BEFORE_MACRO_EXPANSION
  557  MaxL  === _ 929 558  [[ 639 1058 794 ]]  !orig=552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  699  MaxL  === _ 728 700  [[ 728 740 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  753  MaxL  === _ 782 754  [[ 782 794 1058 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  830  MaxL  === _ 825 812  [[ 883 ]]  !orig=[878] !jvms: TestIfMinMax::test @ bci:58 (line 29)
  929  MaxL  === _ 1032 930  [[ 557 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1032  MaxL  === _ 1033 1042  [[ 929 ]]  !orig=557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
 1033  MaxL  === _ 1058 1034  [[ 1032 ]]  !orig=929,557,552,[541],[258] !jvms: TestIfMinMax::test @ bci:58 (line 29)
#+end_src
** Base debug log analysis
Some errors observed.
How can you obtain same kind of logging without custom logging?

With ~-XX:CompileCommand=PrintIdealPhase,$(CLASS)::test,"AFTER_LOOP_OPTS,BEFORE_MACRO_EXPANSION"~ we see this.
We are seeing the reassociated chain.
How can we then see the chain before reassociating?
#+begin_src bash
AFTER: PHASEIDEALLOOP_ITERATIONS
 216  MaxL  === _ 454 217  [[ 374 472 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 472 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
...
AFTER: PHASEIDEALLOOP_ITERATIONS
 216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 538  MaxL  === _ 556 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
...
AFTER: PHASEIDEALLOOP_ITERATIONS
 216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
 603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
 606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
...
AFTER: BEFORE_MACRO_EXPANSION
 664  MaxL  === _ 455 536  [[ 665 ]]
 665  MaxL  === _ 217 664  [[ 669 ]]
 666  MaxL  === _ 539 594  [[ 668 ]]
 667  MaxL  === _ 597 604  [[ 668 ]]
 668  MaxL  === _ 666 667  [[ 669 ]]
 669  MaxL  === _ 665 668  [[ 670 ]]
 670  MaxL  === _ 629 669  [[ 268 629 374 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)
#+end_src

How does the Base debug logging looked like?
#+begin_src bash
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 479 472 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; chain:
    0:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
    1:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)

216 = max(217, max(455, max(536, max(539, max(594, max(597, max(604, max(607, 629)))))))

[avoid-cmov] reassociate in loop; last:  629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
[avoid-cmov] reassociate in loop; reassociated chain:
    0:  670  MaxL  === _ 629 669  [[ 268 629 374 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)
    1:  669  MaxL  === _ 665 668  [[ 670 ]]
    2:  665  MaxL  === _ 217 664  [[ 669 ]]
    3:  664  MaxL  === _ 455 536  [[ 665 ]]
    2:  668  MaxL  === _ 666 667  [[ 669 ]]
    3:  666  MaxL  === _ 539 594  [[ 668 ]]
    3:  667  MaxL  === _ 597 604  [[ 668 ]]

670 = max(629, max(max(217, max(455, 536)), max(max(539, 594), max(597, 604))))
where is 607??

[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 392 400 ]]  !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; chain:
    0:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
    1:  384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
    2:  449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
    3:  450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
    4:  524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
    5:  527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
    6:  528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
    7:  529  MaxL  === _ 623 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
    8:  623  MaxL  === _ 624 635  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
    9:  624  MaxL  === _ 625 639  [[ 623 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
   10:  625  MaxL  === _ 626 643  [[ 624 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
   11:  626  MaxL  === _ 627 647  [[ 625 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
   12:  627  MaxL  === _ 630 628  [[ 626 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
   13:  630  MaxL  === _ 631 653  [[ 627 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
   14:  631  MaxL  === _ 632 657  [[ 630 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
   15:  632  MaxL  === _ 667 633  [[ 631 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; last:  667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
[avoid-cmov] reassociate in loop; reassociated chain:
    0:  778  MaxL  === _ 667 777  [[ 178 322 667 ]]  !orig=[147],400 !jvms: Test::test @ bci:20 (line 21)
    1:  777  MaxL  === _ 769 776  [[ 778 ]]
    2:  769  MaxL  === _ 765 768  [[ 777 ]]
    3:  765  MaxL  === _ 215 764  [[ 769 ]]
    4:  764  MaxL  === _ 385 453  [[ 765 ]]
    3:  768  MaxL  === _ 766 767  [[ 769 ]]
    4:  766  MaxL  === _ 451 525  [[ 768 ]]
    4:  767  MaxL  === _ 534 538  [[ 768 ]]
    2:  776  MaxL  === _ 772 775  [[ 777 ]]
    3:  772  MaxL  === _ 770 771  [[ 776 ]]
    4:  770  MaxL  === _ 530 635  [[ 772 ]]
    4:  771  MaxL  === _ 639 643  [[ 772 ]]
    3:  775  MaxL  === _ 773 774  [[ 776 ]]
    4:  773  MaxL  === _ 647 628  [[ 775 ]]
    4:  774  MaxL  === _ 653 657  [[ 775 ]]
Running
Throughput: 850 ops/ms
Throughput: 854 ops/ms
Throughput: 850 ops/ms
Throughput: 850 ops/ms
Throughput: 853 ops/ms
Throughput: 852 ops/ms
Throughput: 851 ops/ms
Throughput: 848 ops/ms
Throughput: 853 ops/ms
Throughput: 847 ops/ms
Validate
#+end_src
* 6.11.25
Tier 1 test failures:
#+begin_src bash
compiler/c2/irTests/TestIfMinMax.java: Test that if expressions are properly folded into min/max nodes
compiler/loopopts/superword/ReductionPerf.java: Test SuperWord Reduction Perf.
#+end_src
* 5.11.25
#+begin_src bash
[avoid-cmov] reassociate in loop; chain:
    0:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
    1:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
#+end_src

v216 = max(v217, max(v455, max(536, max(v539, max(v594, max(v597, max(v604, max(v607, v629))))))))

#+begin_src bash
[avoid-cmov] reassociate in loop; reassociated chain:
    0:  670  MaxL  === _ 666 669  [[ 268 374 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)
    1:  666  MaxL  === _ 664 665  [[ 670 ]]
    2:  664  MaxL  === _ 217 455  [[ 666 ]]
    2:  665  MaxL  === _ 536 539  [[ 666 ]]
    1:  669  MaxL  === _ 667 668  [[ 670 ]]
    2:  667  MaxL  === _ 594 597  [[ 669 ]]
    2:  668  MaxL  === _ 604 607  [[ 669 ]]
#+end_src

v670 = max(max(max(217, 455), max(536, 539)), max(max(594, 597), max(604, 607)))
* 24.9.25
** unroll 16 vs reassoc 4x4 vs retree 8x2/16
*** mac
#+begin_src bash
Unroll16
Throughput: 219 ops/ms

Reassoc4x4
Throughput: 753 ops/ms

ReTree4x4
Throughput: 764 ops/ms

ReTree8x2
Throughput: 794 ops/ms

ReTree16x1
Throughput: 793 ops/ms
#+end_src
*** xeon
**** benchmark
#+begin_src bash
Unroll16
Throughput: 93 ops/ms

Reassoc4x4
Throughput: 217 ops/ms

ReTree4x4
Throughput: 209 ops/ms

ReTree8x2
Throughput: 208 ops/ms

ReTree16x1
Throughput: 203 ops/ms
#+end_src
**** uica
#+begin_src bash
Unroll16
Throughput (in cycles per iteration): 32.33

Reassoc4x4
Throughput (in cycles per iteration): 13.31

ReTree4x4
Throughput (in cycles per iteration): 13.00

ReTree8x2
Throughput (in cycles per iteration): 12.88

ReTree16x1
Throughput (in cycles per iteration): 13.00
#+end_src
* 22.9.25
** darwin: unroll 16 vs reassoc 16/4x4/8x2/8x2
#+begin_src bash
Unroll16:
Throughput: 222 ops/ms

Reassoc16:
Throughput: 556 ops/ms

Reassoc8x2
Throughput: 663 ops/ms

Reassoc4x4:
Throughput: 722 ops/ms

Reassoc2x8:
Throughput: 432 ops/ms
#+end_src
** xeon: unroll 16 vs reassoc 16/4x4/8x2/8x2
*** uica
#+begin_src bash
Unroll16:
Throughput (in cycles per iteration): 32.33

Reassoc16:
Throughput (in cycles per iteration): 13.67

Reassoc8x2
Throughput (in cycles per iteration): 13.24

Reassoc4x4:
Throughput (in cycles per iteration): 13.31

Reassoc2x8:
Throughput (in cycles per iteration): 16.00
#+end_src
*** benchmark
#+begin_src bash
Unroll16:
Throughput: 93 ops/ms

Reassoc16:
Throughput: 166 ops/ms

Reassoc8x2
Throughput: 204 ops/ms

Reassoc4x4:
Throughput: 209 ops/ms

Reassoc2x8:
Throughput: 184 ops/ms
#+end_src
* 19.9.25
** xeon reassoc4x4 asm
#+begin_src asm
 ;; B13: #	out( B13 B14 ) <- in( B12 B13 ) Loop( B13-B13 inner  strip mined) Freq: 6.55618e+06
  0x00007f3a94adcd60:   movq		0x28(%rsi, %r8, 8), %rcx;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x00007f3a94adcd65:   movq		0x20(%rsi, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x00007f3a94adcd6a:   movq		0x10(%rsi, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@16 (line 20)
  0x00007f3a94adcd6f:   movq		0x18(%rsi, %r8, 8), %rbp;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@23 (line 21)
  0x00007f3a94adcd74:   cmpq		%rbp, %rdx
  0x00007f3a94adcd77:   cmovlq		%rbp, %rdx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x00007f3a94adcd7b:   cmpq		%rdi, %rdx
  0x00007f3a94adcd7e:   cmovlq		%rdi, %rdx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@53 (line 25)
                                                            ;   {other}
  0x00007f3a94adcd82:   cmpq		%rcx, %rdx
  0x00007f3a94adcd85:   cmovlq		%rcx, %rdx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@62 (line 26)
  0x00007f3a94adcd89:   cmpq		%rdx, %rax
  0x00007f3a94adcd8c:   cmovlq		%rdx, %rax          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@70 (line 28)
  0x00007f3a94adcd90:   addl		$4, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@74 (line 19)
  0x00007f3a94adcd94:   cmpl		%ebx, %r8d
  0x00007f3a94adcd97:   jl		0x7f3a94adcd60      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@9 (line 19)
#+end_src
** xeon reassoc4x4
#+begin_src bash
cd /home/g/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc4
/home/g/src/jdk-avoid-cmov-long-min-max/build/fast-linux-x86_64/jdk/bin/java \
   -XX:LoopMaxUnroll=0 -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 189 ops/ms
Throughput: 189 ops/ms
Throughput: 190 ops/ms
Throughput: 189 ops/ms
Throughput: 190 ops/ms
Throughput: 189 ops/ms
Throughput: 189 ops/ms
Throughput: 189 ops/ms
Throughput: 190 ops/ms
Throughput: 189 ops/ms
Validate

cd /home/g/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc16
/home/g/src/jdk-avoid-cmov-long-min-max/build/fast-linux-x86_64/jdk/bin/java \
   -XX:LoopMaxUnroll=0 -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 168 ops/ms
Throughput: 168 ops/ms
Throughput: 169 ops/ms
Throughput: 169 ops/ms
Throughput: 168 ops/ms
Throughput: 168 ops/ms
Throughput: 169 ops/ms
Throughput: 169 ops/ms
Throughput: 168 ops/ms
Throughput: 169 ops/ms
Validate

cd /home/g/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc4x4
/home/g/src/jdk-avoid-cmov-long-min-max/build/fast-linux-x86_64/jdk/bin/java \
   -XX:LoopMaxUnroll=0 -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Throughput: 216 ops/ms
Throughput: 217 ops/ms
Throughput: 217 ops/ms
Validate
#+end_src
** reassoc4x4 with no hotspot loop unrolling
#+begin_src bash
cd /Users/galder/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc4
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java \
   -XX:LoopMaxUnroll=0 -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 691 ops/ms
Throughput: 683 ops/ms
Throughput: 685 ops/ms
Throughput: 686 ops/ms
Throughput: 695 ops/ms
Throughput: 692 ops/ms
Throughput: 688 ops/ms
Throughput: 691 ops/ms
Throughput: 695 ops/ms
Throughput: 691 ops/ms
Validate

cd /Users/galder/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc16
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java \
   -XX:LoopMaxUnroll=0 -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 558 ops/ms
Throughput: 564 ops/ms
Throughput: 563 ops/ms
Throughput: 564 ops/ms
Throughput: 563 ops/ms
Throughput: 479 ops/ms
Throughput: 493 ops/ms
Throughput: 463 ops/ms
Throughput: 460 ops/ms
Throughput: 451 ops/ms
Validate

cd /Users/galder/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc4x4
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java \
   -XX:LoopMaxUnroll=0 -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 755 ops/ms
Throughput: 756 ops/ms
Throughput: 756 ops/ms
Throughput: 751 ops/ms
Throughput: 757 ops/ms
Throughput: 750 ops/ms
Throughput: 752 ops/ms
Throughput: 757 ops/ms
Throughput: 759 ops/ms
Throughput: 750 ops/ms
Validate
#+end_src
** reassoc4x4 with hotspot loop unrolling
#+begin_src bash
[nix-shell:~/src/colata/avoid-cmov-long-min-max-8351409]$ GEN=Reassoc4x4 make gen run-gen
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java -cp src-gen/target/lib/* src-gen/Gen.java Reassoc4x4
cd /Users/galder/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc4x4
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 747 ops/ms
Throughput: 743 ops/ms
Throughput: 749 ops/ms
Throughput: 752 ops/ms
Throughput: 749 ops/ms
Throughput: 751 ops/ms
Throughput: 750 ops/ms
Throughput: 738 ops/ms
Throughput: 759 ops/ms
Throughput: 756 ops/ms
Validate

[nix-shell:~/src/colata/avoid-cmov-long-min-max-8351409]$ GEN=Reassoc4 make gen run-gen
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java -cp src-gen/target/lib/* src-gen/Gen.java Reassoc4
cd /Users/galder/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc4
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 717 ops/ms
Throughput: 718 ops/ms
Throughput: 723 ops/ms
Throughput: 724 ops/ms
Throughput: 720 ops/ms
Throughput: 728 ops/ms
Throughput: 718 ops/ms
Throughput: 725 ops/ms
Throughput: 729 ops/ms
Throughput: 725 ops/ms
Validate

[nix-shell:~/src/colata/avoid-cmov-long-min-max-8351409]$ GEN=Reassoc16 make gen run-gen
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java -cp src-gen/target/lib/* src-gen/Gen.java Reassoc16
cd /Users/galder/src/colata/avoid-cmov-long-min-max-8351409/target/Reassoc16
/Users/galder/src/jdk-avoid-cmov-long-min-max/build/fast-darwin-arm64/jdk/bin/java \
   -Xbatch -Xlog:os -XX:-BackgroundCompilation -XX:CompileCommand=compileonly,Test::test Test.java
Warmup
Running
Throughput: 561 ops/ms
Throughput: 558 ops/ms
Throughput: 561 ops/ms
Throughput: 557 ops/ms
Throughput: 559 ops/ms
Throughput: 558 ops/ms
Throughput: 562 ops/ms
Throughput: 558 ops/ms
Throughput: 557 ops/ms
Throughput: 558 ops/ms
Validate
#+end_src
* 18.9.25
** manual loops no hotspot unroll
*** reassoc 16 trace partial peeling
#+begin_src bash
[OSR]101  Test::test @ 6 (284 bytes)
Loop: N0/N0  has_sfpt
  Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
Predicate IC   Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
Loop: N0/N0  has_sfpt
  Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
PartialPeel    Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
before partial peel one iteration
 567  Loop  === 567 135 554  [[ 567 141 140 163 ]] inner  !orig=[136] !jvms: Test::test @ bci:6 (line 19)
 163  If  === 567 162  [[ 164 165 ]] P=0.998391, C=101322.000000 !jvms: Test::test @ bci:9 (line 19)
 164  IfTrue  === 163  [[ 173 ]] #1 !jvms: Test::test @ bci:9 (line 19)
-- cut --
 173  RangeCheck  === 164 172  [[ 174 177 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:16 (line 20)
 174  IfTrue  === 173  [[ 198 186 192 ]] #1 !jvms: Test::test @ bci:16 (line 20)
 198  RangeCheck  === 174 197  [[ 199 202 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:23 (line 21)
 199  IfTrue  === 198  [[ 221 209 214 ]] #1 !jvms: Test::test @ bci:23 (line 21)
 221  RangeCheck  === 199 220  [[ 222 225 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:30 (line 22)
 222  IfTrue  === 221  [[ 243 232 237 ]] #1 !jvms: Test::test @ bci:30 (line 22)
 243  RangeCheck  === 222 242  [[ 244 247 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:37 (line 23)
 244  IfTrue  === 243  [[ 266 254 259 ]] #1 !jvms: Test::test @ bci:37 (line 23)
 266  RangeCheck  === 244 265  [[ 267 270 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:44 (line 24)
 267  IfTrue  === 266  [[ 289 277 282 ]] #1 !jvms: Test::test @ bci:44 (line 24)
 289  RangeCheck  === 267 288  [[ 290 293 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:51 (line 25)
 290  IfTrue  === 289  [[ 312 300 305 ]] #1 !jvms: Test::test @ bci:51 (line 25)
 312  RangeCheck  === 290 311  [[ 313 316 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:59 (line 26)
 313  IfTrue  === 312  [[ 335 323 328 ]] #1 !jvms: Test::test @ bci:59 (line 26)
 335  RangeCheck  === 313 334  [[ 336 339 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:67 (line 27)
 336  IfTrue  === 335  [[ 358 346 351 ]] #1 !jvms: Test::test @ bci:67 (line 27)
 358  RangeCheck  === 336 357  [[ 359 362 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:75 (line 28)
 359  IfTrue  === 358  [[ 381 369 374 ]] #1 !jvms: Test::test @ bci:75 (line 28)
 381  RangeCheck  === 359 380  [[ 382 385 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:83 (line 29)
 382  IfTrue  === 381  [[ 404 392 397 ]] #1 !jvms: Test::test @ bci:83 (line 29)
 404  RangeCheck  === 382 403  [[ 405 408 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:91 (line 30)
 405  IfTrue  === 404  [[ 427 415 420 ]] #1 !jvms: Test::test @ bci:91 (line 30)
 427  RangeCheck  === 405 426  [[ 428 431 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:99 (line 31)
 428  IfTrue  === 427  [[ 450 438 443 ]] #1 !jvms: Test::test @ bci:99 (line 31)
 450  RangeCheck  === 428 449  [[ 451 454 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:107 (line 32)
 451  IfTrue  === 450  [[ 473 461 466 ]] #1 !jvms: Test::test @ bci:107 (line 32)
 473  RangeCheck  === 451 472  [[ 474 477 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:115 (line 33)
 474  IfTrue  === 473  [[ 496 484 489 ]] #1 !jvms: Test::test @ bci:115 (line 33)
 496  RangeCheck  === 474 495  [[ 497 500 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:123 (line 34)
 497  IfTrue  === 496  [[ 519 507 512 ]] #1 !jvms: Test::test @ bci:123 (line 34)
 519  RangeCheck  === 497 518  [[ 520 523 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:131 (line 35)
 520  IfTrue  === 519  [[ 559 530 535 554 ]] #1 !jvms: Test::test @ bci:131 (line 35)
 554  SafePoint  === 520 1 555 1 1 559 157 551 1 553 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1  [[ 567 ]]  SafePoint  !jvms: Test::test @ bci:279 (line 19)

peeled list
 164  IfTrue  === 163  [[ 173 ]] #1 !jvms: Test::test @ bci:9 (line 19)
 163  If  === 567 162  [[ 164 165 ]] P=0.998391, C=101322.000000 !jvms: Test::test @ bci:9 (line 19)
 162  Bool  === _ 161  [[ 163 ]] [lt] !jvms: Test::test @ bci:9 (line 19)
 161  CmpI  === _ 141 160  [[ 162 ]]  !jvms: Test::test @ bci:9 (line 19)
 172  Bool  === _ 171  [[ 173 ]] [lt] !jvms: Test::test @ bci:16 (line 20)
sink to not_peeled region: 172 newbb: 164
 171  CmpU  === _ 141 160  [[ 172 ]]  !jvms: Test::test @ bci:16 (line 20)
sink to not_peeled region: 171 newbb: 164
 141  Phi  === 567 37 553  [[ 524 553 514 161 501 186 171 179 179 193 203 216 226 238 248 261 271 284 294 307 317 330 340 353 363 376 386 399 409 422 432 445 455 468 478 491 ]]  #int !jvms: Test::test @ bci:6 (line 19)
 140  Phi  === 567 33 551  [[ 524 551 561 179 203 226 248 271 294 317 340 363 386 409 432 455 478 501 ]]  #long !jvms: Test::test @ bci:6 (line 19)
 567  Loop  === 567 135 554  [[ 567 141 140 163 ]] inner  !orig=[136] !jvms: Test::test @ bci:6 (line 19)

after partial peel one iteration
clone head
  748  Loop  === 748 135 1  [[ 748 749 775 776 ]] inner  !orig=567,[136] !jvms: Test::test @ bci:6 (line 19)
  749  If  === 748 639  [[ 750 793 ]] P=0.998391, C=101322.000000 !orig=163 !jvms: Test::test @ bci:9 (line 19)
  750  IfTrue  === 749  [[ 777 ]] #1 !orig=164 !jvms: Test::test @ bci:9 (line 19)
new head
  777  Loop  === 777 750 164  [[ 751 777 998 1032 ]] partial_peel  !orig=575
  751  RangeCheck  === 777 641  [[ 754 796 ]] P=0.999999, C=-1.000000 !orig=173 !jvms: Test::test @ bci:16 (line 20)
  754  IfTrue  === 751  [[ 663 753 755 ]] #1 !orig=174 !jvms: Test::test @ bci:16 (line 20)
v  755  RangeCheck  === 754 636  [[ 756 799 ]] P=0.999999, C=-1.000000 !orig=198 !jvms: Test::test @ bci:23 (line 21)
  756  IfTrue  === 755  [[ 630 635 757 ]] #1 !orig=199 !jvms: Test::test @ bci:23 (line 21)
  757  RangeCheck  === 756 643  [[ 758 802 ]] P=0.999999, C=-1.000000 !orig=221 !jvms: Test::test @ bci:30 (line 22)
  758  IfTrue  === 757  [[ 665 711 759 ]] #1 !orig=222 !jvms: Test::test @ bci:30 (line 22)
  759  RangeCheck  === 758 645  [[ 760 805 ]] P=0.999999, C=-1.000000 !orig=243 !jvms: Test::test @ bci:37 (line 23)
  760  IfTrue  === 759  [[ 667 692 761 ]] #1 !orig=244 !jvms: Test::test @ bci:37 (line 23)
  761  RangeCheck  === 760 647  [[ 762 808 ]] P=0.999999, C=-1.000000 !orig=266 !jvms: Test::test @ bci:44 (line 24)
  762  IfTrue  === 761  [[ 671 714 763 ]] #1 !orig=267 !jvms: Test::test @ bci:44 (line 24)
  763  RangeCheck  === 762 649  [[ 764 811 ]] P=0.999999, C=-1.000000 !orig=289 !jvms: Test::test @ bci:51 (line 25)
  764  IfTrue  === 763  [[ 675 717 765 ]] #1 !orig=290 !jvms: Test::test @ bci:51 (line 25)
  765  RangeCheck  === 764 651  [[ 766 814 ]] P=0.999999, C=-1.000000 !orig=312 !jvms: Test::test @ bci:59 (line 26)
  766  IfTrue  === 765  [[ 679 720 767 ]] #1 !orig=313 !jvms: Test::test @ bci:59 (line 26)
  767  RangeCheck  === 766 653  [[ 768 817 ]] P=0.999999, C=-1.000000 !orig=335 !jvms: Test::test @ bci:67 (line 27)
  768  IfTrue  === 767  [[ 683 723 769 ]] #1 !orig=336 !jvms: Test::test @ bci:67 (line 27)
  769  RangeCheck  === 768 655  [[ 770 820 ]] P=0.999999, C=-1.000000 !orig=358 !jvms: Test::test @ bci:75 (line 28)
  770  IfTrue  === 769  [[ 681 726 771 ]] #1 !orig=359 !jvms: Test::test @ bci:75 (line 28)
  771  RangeCheck  === 770 657  [[ 772 823 ]] P=0.999999, C=-1.000000 !orig=381 !jvms: Test::test @ bci:83 (line 29)
  772  IfTrue  === 771  [[ 677 729 773 ]] #1 !orig=382 !jvms: Test::test @ bci:83 (line 29)
  773  RangeCheck  === 772 659  [[ 774 826 ]] P=0.999999, C=-1.000000 !orig=404 !jvms: Test::test @ bci:91 (line 30)
  774  IfTrue  === 773  [[ 673 732 737 ]] #1 !orig=405 !jvms: Test::test @ bci:91 (line 30)
  737  RangeCheck  === 774 661  [[ 738 778 ]] P=0.999999, C=-1.000000 !orig=427 !jvms: Test::test @ bci:99 (line 31)
  738  IfTrue  === 737  [[ 669 735 739 ]] #1 !orig=428 !jvms: Test::test @ bci:99 (line 31)
  739  RangeCheck  === 738 616  [[ 740 781 ]] P=0.999999, C=-1.000000 !orig=450 !jvms: Test::test @ bci:107 (line 32)
  740  IfTrue  === 739  [[ 610 615 741 ]] #1 !orig=451 !jvms: Test::test @ bci:107 (line 32)
  741  RangeCheck  === 740 606  [[ 742 784 ]] P=0.999999, C=-1.000000 !orig=473 !jvms: Test::test @ bci:115 (line 33)
  742  IfTrue  === 741  [[ 600 605 743 ]] #1 !orig=474 !jvms: Test::test @ bci:115 (line 33)
  743  RangeCheck  === 742 596  [[ 744 787 ]] P=0.999999, C=-1.000000 !orig=496 !jvms: Test::test @ bci:123 (line 34)
  744  IfTrue  === 743  [[ 590 595 745 ]] #1 !orig=497 !jvms: Test::test @ bci:123 (line 34)
  745  RangeCheck  === 744 586  [[ 746 790 ]] P=0.999999, C=-1.000000 !orig=519 !jvms: Test::test @ bci:131 (line 35)
  746  IfTrue  === 745  [[ 576 580 585 747 ]] #1 !orig=520 !jvms: Test::test @ bci:131 (line 35)
  747  SafePoint  === 746 1 555 1 1 576 157 578 1 577 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1  [[ 567 ]]  SafePoint  !orig=554 !jvms: Test::test @ bci:279 (line 19)
orig head
  567  Loop  === 567 747 1  [[ 567 141 140 163 ]] inner  !orig=[136] !jvms: Test::test @ bci:6 (line 19)
  163  If  === 567 162  [[ 164 795 ]] P=0.998391, C=101322.000000 !jvms: Test::test @ bci:9 (line 19)
  164  IfTrue  === 163  [[ 777 ]] #1 !jvms: Test::test @ bci:9 (line 19)
Exceeding node budget: 336 < 407
Loop: N0/N0  has_sfpt
  Loop: N777/N164  sfpts={ 747 }
Loop: N0/N0  has_sfpt
  Loop: N777/N164  sfpts={ 747 }
Split 144 CmpP through 1051 Phi in 46 RegionSplit 145 Bool through 1055 Phi in 46 RegionSplit-If
Loop: N0/N0  has_sfpt
  Loop: N777/N164  sfpts={ 747 }
102  Test::test (284 bytes)
Counted          Loop: N545/N520  counted [0,int),+16 (-1 iters)
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (-1 iters)  has_sfpt strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
PredicatesOff
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check predicated sfpts={ 546 }
    Loop: N545/N520  limit_check predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
#+end_src
*** reassoc 4 trace partial peeling
#+begin_src bash
[OSR]101  Test::test @ 6 (82 bytes)
Loop: N0/N0  has_sfpt
  Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
Predicate IC   Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
Loop: N0/N0  has_sfpt
  Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
PartialPeel    Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
before partial peel one iteration
 279  Loop  === 279 135 266  [[ 279 141 140 163 ]] inner  !orig=[136] !jvms: Test::test @ bci:6 (line 19)
 163  If  === 279 162  [[ 164 165 ]] P=0.999610, C=105001.000000 !jvms: Test::test @ bci:9 (line 19)
 164  IfTrue  === 163  [[ 173 ]] #1 !jvms: Test::test @ bci:9 (line 19)
-- cut --
 173  RangeCheck  === 164 172  [[ 174 177 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:16 (line 20)
 174  IfTrue  === 173  [[ 198 186 192 ]] #1 !jvms: Test::test @ bci:16 (line 20)
 198  RangeCheck  === 174 197  [[ 199 202 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:23 (line 21)
 199  IfTrue  === 198  [[ 221 209 214 ]] #1 !jvms: Test::test @ bci:23 (line 21)
 221  RangeCheck  === 199 220  [[ 222 225 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:30 (line 22)
 222  IfTrue  === 221  [[ 243 232 237 ]] #1 !jvms: Test::test @ bci:30 (line 22)
 243  RangeCheck  === 222 242  [[ 244 247 ]] P=0.999999, C=-1.000000 !jvms: Test::test @ bci:37 (line 23)
 244  IfTrue  === 243  [[ 271 254 259 266 ]] #1 !jvms: Test::test @ bci:37 (line 23)
 266  SafePoint  === 244 1 267 1 1 271 157 263 1 265 1 1 1 1 1 1 1 1 1 1 1 1 1 1  [[ 279 ]]  SafePoint  !jvms: Test::test @ bci:77 (line 19)

peeled list
 164  IfTrue  === 163  [[ 173 ]] #1 !jvms: Test::test @ bci:9 (line 19)
 163  If  === 279 162  [[ 164 165 ]] P=0.999610, C=105001.000000 !jvms: Test::test @ bci:9 (line 19)
 162  Bool  === _ 161  [[ 163 ]] [lt] !jvms: Test::test @ bci:9 (line 19)
 161  CmpI  === _ 141 160  [[ 162 ]]  !jvms: Test::test @ bci:9 (line 19)
 172  Bool  === _ 171  [[ 173 ]] [lt] !jvms: Test::test @ bci:16 (line 20)
sink to not_peeled region: 172 newbb: 164
 171  CmpU  === _ 141 160  [[ 172 ]]  !jvms: Test::test @ bci:16 (line 20)
sink to not_peeled region: 171 newbb: 164
 141  Phi  === 279 37 265  [[ 248 265 238 161 226 186 171 179 179 193 203 216 ]]  #int !jvms: Test::test @ bci:6 (line 19)
 140  Phi  === 279 33 263  [[ 248 263 273 179 203 226 ]]  #long !jvms: Test::test @ bci:6 (line 19)
 279  Loop  === 279 135 266  [[ 279 141 140 163 ]] inner  !orig=[136] !jvms: Test::test @ bci:6 (line 19)

after partial peel one iteration
clone head
 340  Loop  === 340 135 1  [[ 340 341 343 344 ]] inner  !orig=279,[136] !jvms: Test::test @ bci:6 (line 19)
 341  If  === 340 325  [[ 342 358 ]] P=0.999610, C=105001.000000 !orig=163 !jvms: Test::test @ bci:9 (line 19)
 342  IfTrue  === 341  [[ 345 ]] #1 !orig=164 !jvms: Test::test @ bci:9 (line 19)
new head
 345  Loop  === 345 342 164  [[ 329 345 380 390 ]] partial_peel  !orig=287
 329  RangeCheck  === 345 327  [[ 332 346 ]] P=0.999999, C=-1.000000 !orig=173 !jvms: Test::test @ bci:16 (line 20)
 332  IfTrue  === 329  [[ 303 331 333 ]] #1 !orig=174 !jvms: Test::test @ bci:16 (line 20)
 333  RangeCheck  === 332 322  [[ 334 349 ]] P=0.999999, C=-1.000000 !orig=198 !jvms: Test::test @ bci:23 (line 21)
 334  IfTrue  === 333  [[ 307 321 335 ]] #1 !orig=199 !jvms: Test::test @ bci:23 (line 21)
 335  RangeCheck  === 334 299  [[ 336 352 ]] P=0.999999, C=-1.000000 !orig=221 !jvms: Test::test @ bci:30 (line 22)
 336  IfTrue  === 335  [[ 293 298 337 ]] #1 !orig=222 !jvms: Test::test @ bci:30 (line 22)
 337  RangeCheck  === 336 317  [[ 338 355 ]] P=0.999999, C=-1.000000 !orig=243 !jvms: Test::test @ bci:37 (line 23)
 338  IfTrue  === 337  [[ 288 311 316 339 ]] #1 !orig=244 !jvms: Test::test @ bci:37 (line 23)
 339  SafePoint  === 338 1 267 1 1 288 157 290 1 289 1 1 1 1 1 1 1 1 1 1 1 1 1 1  [[ 279 ]]  SafePoint  !orig=266 !jvms: Test::test @ bci:77 (line 19)
orig head
 279  Loop  === 279 339 1  [[ 279 141 140 163 ]] inner  !orig=[136] !jvms: Test::test @ bci:6 (line 19)
 163  If  === 279 162  [[ 164 360 ]] P=0.999610, C=105001.000000 !jvms: Test::test @ bci:9 (line 19)
 164  IfTrue  === 163  [[ 345 ]] #1 !jvms: Test::test @ bci:9 (line 19)
Loop: N0/N0  has_sfpt
  Loop: N345/N164  sfpts={ 339 }
Loop: N0/N0  has_sfpt
  Loop: N345/N164  sfpts={ 339 }
Split 144 CmpP through 397 Phi in 46 RegionSplit 145 Bool through 401 Phi in 46 RegionSplit-If
Loop: N0/N0  has_sfpt
  Loop: N345/N164  sfpts={ 339 }
102  Test::test (82 bytes)
Counted          Loop: N257/N232  counted [0,int),+4 (-1 iters)
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (-1 iters)  has_sfpt strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
PredicatesOff
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check predicated sfpts={ 258 }
    Loop: N257/N232  limit_check predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
#+end_src
*** reassoc16 trace loops
#+begin_src bash
Loop: N0/N0  has_sfpt
  Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
Predicate IC   Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
Loop: N0/N0  has_sfpt
  Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
PartialPeel    Loop: N567/N554  limit_check short_running profile_predicated predicated sfpts={ 554 }
Exceeding node budget: 336 < 407
Loop: N0/N0  has_sfpt
  Loop: N777/N164  sfpts={ 747 }
Loop: N0/N0  has_sfpt
  Loop: N777/N164  sfpts={ 747 }
Split 144 CmpP through 1051 Phi in 46 RegionSplit 145 Bool through 1055 Phi in 46 RegionSplit-If
Loop: N0/N0  has_sfpt
  Loop: N777/N164  sfpts={ 747 }
Counted          Loop: N545/N520  counted [0,int),+16 (-1 iters)
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (-1 iters)  has_sfpt strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt rce strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check short_running profile_predicated predicated sfpts={ 546 }
    Loop: N545/N520  limit_check short_running profile_predicated predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
PredicatesOff
Loop: N0/N0  has_sfpt
  Loop: N544/N543  limit_check predicated sfpts={ 546 }
    Loop: N545/N520  limit_check predicated counted [0,int),+16 (622 iters)  has_sfpt strip_mined
#+end_src
*** reassoc8 trace loops
#+begin_src bash
Loop: N0/N0  has_sfpt
  Loop: N375/N362  limit_check short_running profile_predicated predicated sfpts={ 362 }
Predicate IC   Loop: N375/N362  limit_check short_running profile_predicated predicated sfpts={ 362 }
Loop: N0/N0  has_sfpt
  Loop: N375/N362  limit_check short_running profile_predicated predicated sfpts={ 362 }
PartialPeel    Loop: N375/N362  limit_check short_running profile_predicated predicated sfpts={ 362 }
Loop: N0/N0  has_sfpt
  Loop: N489/N164  sfpts={ 475 }
Loop: N0/N0  has_sfpt
  Loop: N489/N164  sfpts={ 475 }
Split 144 CmpP through 599 Phi in 46 RegionSplit 145 Bool through 603 Phi in 46 RegionSplit-If
Loop: N0/N0  has_sfpt
  Loop: N489/N164  sfpts={ 475 }
Counted          Loop: N353/N328  counted [0,int),+8 (-1 iters)
Loop: N0/N0  has_sfpt
  Loop: N352/N351  limit_check short_running profile_predicated predicated
    Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (-1 iters)  has_sfpt strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt rce strip_mined
Loop: N0/N0  has_sfpt
  Loop: N352/N351  limit_check short_running profile_predicated predicated sfpts={ 354 }
    Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N352/N351  limit_check short_running profile_predicated predicated sfpts={ 354 }
    Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N352/N351  limit_check short_running profile_predicated predicated sfpts={ 354 }
    Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N352/N351  limit_check short_running profile_predicated predicated sfpts={ 354 }
    Loop: N353/N328  limit_check short_running profile_predicated predicated counted [0,int),+8 (1242 iters)  has_sfpt strip_mined
PredicatesOff
Loop: N0/N0  has_sfpt
  Loop: N352/N351  limit_check predicated sfpts={ 354 }
    Loop: N353/N328  limit_check predicated counted [0,int),+8 (1242 iters)  has_sfpt strip_mined
#+end_src
*** reassoc4 trace loops
#+begin_src bash
Loop: N0/N0  has_sfpt
  Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
Predicate IC   Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
Loop: N0/N0  has_sfpt
  Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
PartialPeel    Loop: N279/N266  limit_check short_running profile_predicated predicated sfpts={ 266 }
Loop: N0/N0  has_sfpt
  Loop: N345/N164  sfpts={ 339 }
Loop: N0/N0  has_sfpt
  Loop: N345/N164  sfpts={ 339 }
Split 144 CmpP through 397 Phi in 46 RegionSplit 145 Bool through 401 Phi in 46 RegionSplit-If
Loop: N0/N0  has_sfpt
  Loop: N345/N164  sfpts={ 339 }
Counted          Loop: N257/N232  counted [0,int),+4 (-1 iters)
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (-1 iters)  has_sfpt strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Predicate RC     Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt rce strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check short_running profile_predicated predicated sfpts={ 258 }
    Loop: N257/N232  limit_check short_running profile_predicated predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
PredicatesOff
Loop: N0/N0  has_sfpt
  Loop: N256/N255  limit_check predicated sfpts={ 258 }
    Loop: N257/N232  limit_check predicated counted [0,int),+4 (2561 iters)  has_sfpt strip_mined
#+end_src
*** reassoc16 asm
#+begin_src asm
 ;; B36: #	out( B37 ) <- in( B35 B38 ) Loop( B36-B38 ) Freq: 620.588
  0x00000001382d2828:   cmp		w10, w16
  0x00000001382d282c:   sub		w12, w10, w16
  0x00000001382d2830:   csel		w12, wzr, w12, lt
 ;; 0x3E80
  0x00000001382d2834:   mov		w8, #0x3e80
  0x00000001382d2838:   cmp		w12, w8
  0x00000001382d283c:   csel		w12, w1, w12, hi
  0x00000001382d2840:   add		w12, w12, w16
  0x00000001382d2844:   nop
  0x00000001382d2848:   nop
  0x00000001382d284c:   nop		                    ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@12 (line 20)
 ;; B37: #	out( B37 B38 ) <- in( B36 B37 ) Loop( B37-B37 inner  strip mined) Freq: 385763
  0x00000001382d2850:   add		x17, x11, w16, sxtw #3
 ;; merged ldr pair
  0x00000001382d2854:   ldp		x13, x14, [x17, #0x10];*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@16 (line 20)
  0x00000001382d2858:   cmp		x13, x14
  0x00000001382d285c:   ldr		x15, [x17, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x00000001382d2860:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@138 (line 36)
  0x00000001382d2864:   cmp		x13, x15
  0x00000001382d2868:   ldr		x14, [x17, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x00000001382d286c:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@147 (line 37)
  0x00000001382d2870:   cmp		x13, x14
  0x00000001382d2874:   ldr		x15, [x17, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x00000001382d2878:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@156 (line 38)
  0x00000001382d287c:   cmp		x13, x15
  0x00000001382d2880:   ldr		x14, [x17, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@51 (line 25)
  0x00000001382d2884:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@165 (line 39)
  0x00000001382d2888:   cmp		x13, x14
  0x00000001382d288c:   ldr		x15, [x17, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@59 (line 26)
  0x00000001382d2890:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@174 (line 40)
  0x00000001382d2894:   cmp		x13, x15
  0x00000001382d2898:   ldr		x14, [x17, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@67 (line 27)
  0x00000001382d289c:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@183 (line 41)
  0x00000001382d28a0:   cmp		x13, x14
  0x00000001382d28a4:   ldr		x15, [x17, #0x50]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@75 (line 28)
  0x00000001382d28a8:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@192 (line 42)
  0x00000001382d28ac:   cmp		x13, x15
  0x00000001382d28b0:   ldr		x14, [x17, #0x58]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@83 (line 29)
  0x00000001382d28b4:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@201 (line 43)
  0x00000001382d28b8:   cmp		x13, x14
  0x00000001382d28bc:   ldr		x15, [x17, #0x60]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@91 (line 30)
  0x00000001382d28c0:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@210 (line 44)
  0x00000001382d28c4:   cmp		x13, x15
  0x00000001382d28c8:   ldr		x14, [x17, #0x68]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@99 (line 31)
  0x00000001382d28cc:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@219 (line 45)
  0x00000001382d28d0:   cmp		x13, x14
  0x00000001382d28d4:   ldr		x15, [x17, #0x70]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@107 (line 32)
  0x00000001382d28d8:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@228 (line 46)
  0x00000001382d28dc:   cmp		x13, x15
  0x00000001382d28e0:   ldr		x14, [x17, #0x78]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@115 (line 33)
  0x00000001382d28e4:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@237 (line 47)
  0x00000001382d28e8:   cmp		x13, x14
  0x00000001382d28ec:   ldr		x15, [x17, #0x80]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@123 (line 34)
  0x00000001382d28f0:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@246 (line 48)
  0x00000001382d28f4:   cmp		x13, x15
  0x00000001382d28f8:   ldr		x14, [x17, #0x88]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@131 (line 35)
  0x00000001382d28fc:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@255 (line 49)
  0x00000001382d2900:   cmp		x13, x14
  0x00000001382d2904:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@264 (line 50)
  0x00000001382d2908:   cmp		x0, x13
  0x00000001382d290c:   add		w16, w16, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@276 (line 19)
  0x00000001382d2910:   csel		x0, x13, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@272 (line 52)
  0x00000001382d2914:   cmp		w16, w12
  0x00000001382d2918:   b.lt		#0x1382d2850        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@9 (line 19)
 ;; B38: #	out( B36 B39 ) <- in( B37 )  Freq: 620.588
  0x00000001382d291c:   ldr		x12, [x28, #0x30]   ; ImmutableOopMap {r11=Oop }
                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                            ; - (reexecute) Test::test@279 (line 19)
  0x00000001382d2920:   ldr		wzr, [x12]          ;   {poll}
  0x00000001382d2924:   ldrb		w8, [x28, #0x540]
  0x00000001382d2928:   cbz		x8, #0x1382d2940
 ;; 0x103B2094C
  0x00000001382d292c:   mov		x8, #0x94c          ;   {runtime_call JavaThread::verify_cross_modify_fence_failure(JavaThread*)}
  0x00000001382d2930:   movk		x8, #0x3b2, lsl #16
  0x00000001382d2934:   movk		x8, #1, lsl #32
  0x00000001382d2938:   mov		x0, x28
  0x00000001382d293c:   blr		x8                  ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@279 (line 19)
  0x00000001382d2940:   cmp		w16, w10
  0x00000001382d2944:   b.lt		#0x1382d2828
#+end_src
*** reassoc8 asm
#+begin_src asm
 ;; B20: #	out( B21 ) <- in( B19 B22 ) Loop( B20-B22 ) Freq: 1241.18
  0x000000010e836748:   cmp		w10, w1
  0x000000010e83674c:   sub		w12, w10, w1
  0x000000010e836750:   csel		w12, wzr, w12, lt
 ;; 0x1F40
  0x000000010e836754:   mov		w8, #0x1f40
  0x000000010e836758:   cmp		w12, w8
  0x000000010e83675c:   csel		w12, w17, w12, hi
  0x000000010e836760:   add		w12, w12, w1
  0x000000010e836764:   nop
  0x000000010e836768:   nop
  0x000000010e83676c:   nop		                    ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@12 (line 20)
 ;; B21: #	out( B21 B22 ) <- in( B20 B21 ) Loop( B21-B21 inner  strip mined) Freq: 1.5418e+06
  0x000000010e836770:   add		x13, x11, w1, sxtw #3
 ;; merged ldr pair
  0x000000010e836774:   ldp		x14, x15, [x13, #0x10];*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@16 (line 20)
  0x000000010e836778:   cmp		x14, x15
  0x000000010e83677c:   ldr		x16, [x13, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x000000010e836780:   csel		x14, x15, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@74 (line 28)
  0x000000010e836784:   cmp		x14, x16
  0x000000010e836788:   ldr		x15, [x13, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x000000010e83678c:   csel		x14, x16, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@83 (line 29)
  0x000000010e836790:   cmp		x14, x15
  0x000000010e836794:   ldr		x16, [x13, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x000000010e836798:   csel		x14, x15, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@92 (line 30)
  0x000000010e83679c:   cmp		x14, x16
  0x000000010e8367a0:   ldr		x15, [x13, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@51 (line 25)
  0x000000010e8367a4:   csel		x14, x16, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@101 (line 31)
  0x000000010e8367a8:   cmp		x14, x15
  0x000000010e8367ac:   ldr		x16, [x13, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@59 (line 26)
  0x000000010e8367b0:   csel		x14, x15, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@110 (line 32)
  0x000000010e8367b4:   cmp		x14, x16
  0x000000010e8367b8:   ldr		x13, [x13, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@67 (line 27)
  0x000000010e8367bc:   csel		x14, x16, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@119 (line 33)
  0x000000010e8367c0:   cmp		x14, x13
  0x000000010e8367c4:   csel		x13, x13, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@128 (line 34)
  0x000000010e8367c8:   cmp		x0, x13
  0x000000010e8367cc:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@140 (line 19)
  0x000000010e8367d0:   csel		x0, x13, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@136 (line 36)
  0x000000010e8367d4:   cmp		w1, w12
  0x000000010e8367d8:   b.lt		#0x10e836770        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@9 (line 19)
 ;; B22: #	out( B20 B23 ) <- in( B21 )  Freq: 1241.18
  0x000000010e8367dc:   ldr		x12, [x28, #0x30]   ; ImmutableOopMap {r11=Oop }
                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                            ; - (reexecute) Test::test@143 (line 19)
  0x000000010e8367e0:   ldr		wzr, [x12]          ;   {poll}
  0x000000010e8367e4:   ldrb		w8, [x28, #0x540]
  0x000000010e8367e8:   cbz		x8, #0x10e836800
 ;; 0x10522C94C
  0x000000010e8367ec:   mov		x8, #0xc94c         ;   {runtime_call JavaThread::verify_cross_modify_fence_failure(JavaThread*)}
  0x000000010e8367f0:   movk		x8, #0x522, lsl #16
  0x000000010e8367f4:   movk		x8, #1, lsl #32
  0x000000010e8367f8:   mov		x0, x28
  0x000000010e8367fc:   blr		x8                  ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@143 (line 19)
  0x000000010e836800:   cmp		w1, w10
  0x000000010e836804:   b.lt		#0x10e836748
#+end_src
*** reassoc4 asm
#+begin_src asm
 ;; B12: #	out( B13 ) <- in( B11 B14 ) Loop( B12-B14 ) Freq: 2559.99
  0x000000010d6126b4:   cmp		w15, w16
  0x000000010d6126b8:   sub		w11, w15, w16
  0x000000010d6126bc:   csel		w11, wzr, w11, lt
  0x000000010d6126c0:   cmp		w11, #0xfa0
  0x000000010d6126c4:   csel		w11, w2, w11, hi
  0x000000010d6126c8:   add		w10, w11, w16
  0x000000010d6126cc:   nop		                    ;*aload_0 {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@12 (line 20)
 ;; B13: #	out( B13 B14 ) <- in( B12 B13 ) Loop( B13-B13 inner  strip mined) Freq: 6.55618e+06
  0x000000010d6126d0:   add		x11, x1, w16, sxtw #3
 ;; merged ldr pair
  0x000000010d6126d4:   ldp		x12, x13, [x11, #0x10];*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@16 (line 20)
  0x000000010d6126d8:   cmp		x12, x13
  0x000000010d6126dc:   ldr		x14, [x11, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x000000010d6126e0:   csel		x12, x13, x12, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x000000010d6126e4:   cmp		x12, x14
  0x000000010d6126e8:   ldr		x11, [x11, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x000000010d6126ec:   csel		x12, x14, x12, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@53 (line 25)
  0x000000010d6126f0:   cmp		x12, x11
  0x000000010d6126f4:   csel		x11, x11, x12, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@62 (line 26)
  0x000000010d6126f8:   cmp		x0, x11
  0x000000010d6126fc:   add		w16, w16, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@74 (line 19)
  0x000000010d612700:   csel		x0, x11, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@70 (line 28)
  0x000000010d612704:   cmp		w16, w10
  0x000000010d612708:   b.lt		#0x10d6126d0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@9 (line 19)
 ;; B14: #	out( B12 B15 ) <- in( B13 )  Freq: 2559.99
  0x000000010d61270c:   ldr		x10, [x28, #0x30]   ; ImmutableOopMap {c_rarg1=Oop }
                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                            ; - (reexecute) Test::test@77 (line 19)
  0x000000010d612710:   ldr		wzr, [x10]          ;   {poll}
  0x000000010d612714:   ldrb		w8, [x28, #0x540]
  0x000000010d612718:   cbz		x8, #0x10d612730
 ;; 0x10400894C
  0x000000010d61271c:   mov		x8, #0x894c         ;   {runtime_call JavaThread::verify_cross_modify_fence_failure(JavaThread*)}
  0x000000010d612720:   movk		x8, #0x400, lsl #16
  0x000000010d612724:   movk		x8, #1, lsl #32
  0x000000010d612728:   mov		x0, x28
  0x000000010d61272c:   blr		x8                  ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@77 (line 19)
  0x000000010d612730:   cmp		w16, w15
  0x000000010d612734:   b.lt		#0x10d6126b4
#+end_src
*** performance numbers
#+begin_src bash
Base
Throughput: 219 ops/ms

Unroll2
Throughput: 219 ops/ms

Reassoc2
Throughput: 405 ops/ms

Unroll4
Throughput: 222 ops/ms

Reassoc4
Throughput: 624 ops/ms

Unroll8
Throughput: 209 ops/ms

Reassoc8
Throughput: 632 ops/ms

Unroll16
Throughput: 221 ops/ms

Reassoc16
Throughput: 501 ops/ms
#+end_src
* 17.9.25
** xeon performance
#+begin_src bash
Base
Throughput: 93 ops/ms

Unroll2
Throughput: 93 ops/ms

Reassoc2
Throughput: 184 ops/ms

Unroll4
Throughput: 93 ops/ms

Reassoc4
Throughput: 211 ops/ms

Unroll8
Throughput: 93 ops/ms

Reassoc8
Throughput: 194 ops/ms

Unroll16
Throughput: 93 ops/ms

Reassoc16
Throughput: 166 ops/ms
#+end_src
** manual reassoc 4 asm
#+begin_src asm
 ;; B22: #	out( B22 B23 ) <- in( B21 B22 ) Loop( B22-B22 inner main of N142 strip mined) Freq: 6.55612e+06
  0x000000011144e760:   add		x11, x12, w1, sxtw #3
 ;; merged ldr pair
  0x000000011144e764:   ldp		x14, x13, [x11, #0x10];*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@23 (line 21)
  0x000000011144e768:   ldr		x3, [x11, #0x30]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@16 (line 20)
  0x000000011144e76c:   cmp		x13, x14
  0x000000011144e770:   ldr		x2, [x11, #0x38]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@23 (line 21)
  0x000000011144e774:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x000000011144e778:   ldr		x14, [x11, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x000000011144e77c:   cmp		x2, x3
  0x000000011144e780:   csel		x2, x3, x2, lt      ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x000000011144e784:   cmp		x14, x13
  0x000000011144e788:   csel		x13, x13, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@53 (line 25)
  0x000000011144e78c:   ldr		x14, [x11, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x000000011144e790:   cmp		x14, x13
  0x000000011144e794:   ldr		x4, [x11, #0x40]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x000000011144e798:   csel		x13, x13, x14, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@62 (line 26)
  0x000000011144e79c:   cmp		x4, x2
  0x000000011144e7a0:   ldr		x11, [x11, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x000000011144e7a4:   csel		x14, x2, x4, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@53 (line 25)
  0x000000011144e7a8:   cmp		x13, x0
  0x000000011144e7ac:   csel		x13, x0, x13, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@70 (line 28)
  0x000000011144e7b0:   cmp		x11, x14
  0x000000011144e7b4:   csel		x11, x14, x11, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@62 (line 26)
  0x000000011144e7b8:   cmp		x11, x13
  0x000000011144e7bc:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@74 (line 19)
  0x000000011144e7c0:   csel		x0, x13, x11, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@70 (line 28)
  0x000000011144e7c4:   cmp		w1, w5
  0x000000011144e7c8:   b.lt		#0x11144e760        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@9 (line 19)
 ;; B23: #	out( B21 B24 ) <- in( B22 )  Freq: 2559.97
#+end_src
** manual reassoc 16 asm
#+begin_src asm
 ;; B37: #	out( B37 B38 ) <- in( B36 B37 ) Loop( B37-B37 inner  strip mined) Freq: 385763
  0x000000010e92e850:   add		x17, x11, w16, sxtw #3
 ;; merged ldr pair
  0x000000010e92e854:   ldp		x13, x14, [x17, #0x10];*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@16 (line 20)
  0x000000010e92e858:   cmp		x13, x14
  0x000000010e92e85c:   ldr		x15, [x17, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@30 (line 22)
  0x000000010e92e860:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@138 (line 36)
  0x000000010e92e864:   cmp		x13, x15
  0x000000010e92e868:   ldr		x14, [x17, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@37 (line 23)
  0x000000010e92e86c:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@147 (line 37)
  0x000000010e92e870:   cmp		x13, x14
  0x000000010e92e874:   ldr		x15, [x17, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@44 (line 24)
  0x000000010e92e878:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@156 (line 38)
  0x000000010e92e87c:   cmp		x13, x15
  0x000000010e92e880:   ldr		x14, [x17, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@51 (line 25)
  0x000000010e92e884:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@165 (line 39)
  0x000000010e92e888:   cmp		x13, x14
  0x000000010e92e88c:   ldr		x15, [x17, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@59 (line 26)
  0x000000010e92e890:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@174 (line 40)
  0x000000010e92e894:   cmp		x13, x15
  0x000000010e92e898:   ldr		x14, [x17, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@67 (line 27)
  0x000000010e92e89c:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@183 (line 41)
  0x000000010e92e8a0:   cmp		x13, x14
  0x000000010e92e8a4:   ldr		x15, [x17, #0x50]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@75 (line 28)
  0x000000010e92e8a8:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@192 (line 42)
  0x000000010e92e8ac:   cmp		x13, x15
  0x000000010e92e8b0:   ldr		x14, [x17, #0x58]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@83 (line 29)
  0x000000010e92e8b4:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@201 (line 43)
  0x000000010e92e8b8:   cmp		x13, x14
  0x000000010e92e8bc:   ldr		x15, [x17, #0x60]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@91 (line 30)
  0x000000010e92e8c0:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@210 (line 44)
  0x000000010e92e8c4:   cmp		x13, x15
  0x000000010e92e8c8:   ldr		x14, [x17, #0x68]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@99 (line 31)
  0x000000010e92e8cc:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@219 (line 45)
  0x000000010e92e8d0:   cmp		x13, x14
  0x000000010e92e8d4:   ldr		x15, [x17, #0x70]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@107 (line 32)
  0x000000010e92e8d8:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@228 (line 46)
  0x000000010e92e8dc:   cmp		x13, x15
  0x000000010e92e8e0:   ldr		x14, [x17, #0x78]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@115 (line 33)
  0x000000010e92e8e4:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@237 (line 47)
  0x000000010e92e8e8:   cmp		x13, x14
  0x000000010e92e8ec:   ldr		x15, [x17, #0x80]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@123 (line 34)
  0x000000010e92e8f0:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@246 (line 48)
  0x000000010e92e8f4:   cmp		x13, x15
  0x000000010e92e8f8:   ldr		x14, [x17, #0x88]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@131 (line 35)
  0x000000010e92e8fc:   csel		x13, x15, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@255 (line 49)
  0x000000010e92e900:   cmp		x13, x14
  0x000000010e92e904:   csel		x13, x14, x13, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@264 (line 50)
  0x000000010e92e908:   cmp		x0, x13
  0x000000010e92e90c:   add		w16, w16, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@276 (line 19)
  0x000000010e92e910:   csel		x0, x13, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@272 (line 52)
  0x000000010e92e914:   cmp		w16, w12
  0x000000010e92e918:   b.lt		#0x10e92e850        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@9 (line 19)

#+end_src
** manual loops
#+begin_src bash
Base
Throughput: 222 ops/ms

Unroll2
Throughput: 222 ops/ms

Reassoc2
Throughput: 439 ops/ms

Unroll4
Throughput: 222 ops/ms

Reassoc4
Throughput: 701 ops/ms

Unroll8
Throughput: 221 ops/ms

Reassoc8
Throughput: 653 ops/ms

Unroll16
Throughput: 222 ops/ms

Reassoc16
Throughput: 515 ops/ms
#+end_src
* 16.9.25
** manual unroll vs reassoc performance
*** manual reassoc 16
#+begin_src bash
Running
Throughput: 67136 ops/ms
Throughput: 62828 ops/ms
Throughput: 63302 ops/ms
Throughput: 66511 ops/ms
Throughput: 64355 ops/ms
Throughput: 67115 ops/ms
Throughput: 66019 ops/ms
Throughput: 66945 ops/ms
Throughput: 66042 ops/ms
Throughput: 62530 ops/ms
Validate
#+end_src
*** manual unroll 16
#+begin_src bash
Running
Throughput: 213 ops/ms
Throughput: 222 ops/ms
Throughput: 217 ops/ms
Throughput: 183 ops/ms
Throughput: 213 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 221 ops/ms
Throughput: 222 ops/ms
Validate
#+end_src
*** manual reassoc 4
#+begin_src bash
Running
Throughput: 721 ops/ms
Throughput: 716 ops/ms
Throughput: 710 ops/ms
Throughput: 711 ops/ms
Throughput: 714 ops/ms
Throughput: 721 ops/ms
Throughput: 716 ops/ms
Throughput: 718 ops/ms
Throughput: 716 ops/ms
Throughput: 713 ops/ms
Validate
#+end_src
*** manual unroll 4
#+begin_src bash
Running
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Validate
#+end_src
*** manual reassoc 2
#+begin_src bash
Running
Throughput: 439 ops/ms
Throughput: 437 ops/ms
Throughput: 438 ops/ms
Throughput: 438 ops/ms
Throughput: 437 ops/ms
Throughput: 437 ops/ms
Throughput: 437 ops/ms
Throughput: 438 ops/ms
Throughput: 438 ops/ms
Throughput: 438 ops/ms
Validate
#+end_src
*** manual unroll 2
#+begin_src bash
Running
Throughput: 221 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 218 ops/ms
Throughput: 213 ops/ms
Throughput: 218 ops/ms
Throughput: 222 ops/ms
Throughput: 221 ops/ms
Validate
#+end_src
*** no unroll
#+begin_src bash
Running
Throughput: 213 ops/ms
Throughput: 213 ops/ms
Throughput: 207 ops/ms
Throughput: 197 ops/ms
Throughput: 211 ops/ms
Throughput: 216 ops/ms
Throughput: 204 ops/ms
Throughput: 194 ops/ms
Throughput: 193 ops/ms
Throughput: 204 ops/ms
Validate
#+end_src
** patch assembly
x0 = max(x0, max(x16, ...max(x17, max(x16, max(x17, max(x16, x15))))

#+begin_src asm
  0x00000001382d27b4:   ldp		x15, x16, [x1, #0x10]
  0x00000001382d27b8:   cmp		x15, x16
  0x00000001382d27c0:   csel		x15, x16, x15, lt

  0x00000001382d27bc:   ldr		x17, [x1, #0x20]
  0x00000001382d27c4:   cmp		x15, x17
  0x00000001382d27cc:   csel		x15, x17, x15, lt

  0x00000001382d27c8:   ldr		x16, [x1, #0x28]
  0x00000001382d27d0:   cmp		x15, x16
  0x00000001382d27d8:   csel		x15, x16, x15, lt

  0x00000001382d27d4:   ldr		x17, [x1, #0x30]
  0x00000001382d27dc:   cmp		x15, x17
  0x00000001382d27e4:   csel		x15, x17, x15, lt

  0x00000001382d27e0:   ldr		x16, [x1, #0x38]
  0x00000001382d27e8:   cmp		x15, x16
  0x00000001382d27f0:   csel		x15, x16, x15, lt

  0x00000001382d27ec:   ldr		x17, [x1, #0x40]
  0x00000001382d27f4:   cmp		x15, x17
  0x00000001382d27fc:   csel		x15, x17, x15, lt

  0x00000001382d27f8:   ldr		x16, [x1, #0x48]
  0x00000001382d2800:   cmp		x15, x16
  0x00000001382d2808:   csel		x15, x16, x15, lt

  0x00000001382d2804:   ldr		x17, [x1, #0x50]
  0x00000001382d280c:   cmp		x15, x17
  0x00000001382d2814:   csel		x15, x17, x15, lt

  0x00000001382d2810:   ldr		x16, [x1, #0x58]
  0x00000001382d2818:   cmp		x15, x16
  0x00000001382d2820:   csel		x15, x16, x15, lt

  0x00000001382d281c:   ldr		x17, [x1, #0x60]
  0x00000001382d2824:   cmp		x15, x17
  0x00000001382d282c:   csel		x15, x17, x15, lt

  0x00000001382d2828:   ldr		x16, [x1, #0x68]
  0x00000001382d2830:   cmp		x15, x16
  0x00000001382d2838:   csel		x15, x16, x15, lt

  0x00000001382d2834:   ldr		x17, [x1, #0x70]
  0x00000001382d283c:   cmp		x15, x17
  0x00000001382d2844:   csel		x15, x17, x15, lt

  0x00000001382d2840:   ldr		x16, [x1, #0x78]
  0x00000001382d2848:   cmp		x15, x16
  0x00000001382d2850:   csel		x15, x16, x15, lt

  0x00000001382d284c:   ldr		x17, [x1, #0x80]
  0x00000001382d2854:   cmp		x15, x17
  0x00000001382d285c:   csel		x15, x17, x15, lt

  0x00000001382d2858:   ldr		x16, [x1, #0x88]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x00000001382d2860:   cmp		x15, x16
  0x00000001382d2864:   csel		x15, x16, x15, lt

  0x00000001382d2868:   cmp		x15, x0
  0x00000001382d2870:   csel		x0, x0, x15, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
#+end_src
** base assembly
x0 = max(x16, ... max(x17, max(x16, max(x17, max(x16, max(x15, x0)))))

#+begin_src asm
  0x000000010cda27b4:   ldr		x15, [x2, #0x10]
  0x000000010cda27b8:   cmp		x0, x15
  0x000000010cda27c0:   csel		x15, x15, x0, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda27bc:   ldr		x16, [x2, #0x18]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda27c4:   cmp		x15, x16
  0x000000010cda27cc:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda27c8:   ldr		x17, [x2, #0x20]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda27d0:   cmp		x15, x17
  0x000000010cda27d8:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda27d4:   ldr		x16, [x2, #0x28]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda27dc:   cmp		x15, x16
  0x000000010cda27e4:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda27e0:   ldr		x17, [x2, #0x30]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda27e8:   cmp		x15, x17
  0x000000010cda27f0:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda27ec:   ldr		x16, [x2, #0x38]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda27f4:   cmp		x15, x16
  0x000000010cda27fc:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda27f8:   ldr		x17, [x2, #0x40]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2800:   cmp		x15, x17
  0x000000010cda2808:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2804:   ldr		x16, [x2, #0x48]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda280c:   cmp		x15, x16
  0x000000010cda2814:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2810:   ldr		x17, [x2, #0x50]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2818:   cmp		x15, x17
  0x000000010cda2820:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda281c:   ldr		x16, [x2, #0x58]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2824:   cmp		x15, x16
  0x000000010cda282c:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2828:   ldr		x17, [x2, #0x60]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2830:   cmp		x15, x17
  0x000000010cda2838:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2834:   ldr		x16, [x2, #0x68]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda283c:   cmp		x15, x16
  0x000000010cda2844:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2840:   ldr		x17, [x2, #0x70]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2848:   cmp		x15, x17
  0x000000010cda2850:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda284c:   ldr		x16, [x2, #0x78]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2854:   cmp		x15, x16
  0x000000010cda285c:   csel		x15, x16, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2858:   ldr		x17, [x2, #0x80]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda2860:   cmp		x15, x17
  0x000000010cda2868:   csel		x15, x17, x15, lt   ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}

  0x000000010cda2864:   ldr		x16, [x2, #0x88]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
  0x000000010cda286c:   cmp		x15, x16
  0x000000010cda2874:   csel		x0, x16, x15, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
#+end_src
* 15.9.25
** early first draft
From:
#+begin_src bash
    0:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
    1:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)

v216 = max(v217, max(v455, max(536, max(v539, max(v594, max(v597, max(v604, max(v607, v629))))))))

Running
Throughput: 223 ops/ms
Throughput: 222 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 223 ops/ms
Throughput: 222 ops/ms
Throughput: 222 ops/ms
Throughput: 221 ops/ms
Throughput: 222 ops/ms
Throughput: 221 ops/ms
Validate
#+end_src

To:
#+begin_src bash
    0:  671  MaxL  === _ 670 629  [[ ]]
    1:  670  MaxL  === _ 669 217  [[ 671 ]]
    2:  669  MaxL  === _ 668 455  [[ 670 ]]
    3:  668  MaxL  === _ 667 536  [[ 669 ]]
    4:  667  MaxL  === _ 666 539  [[ 668 ]]
    5:  666  MaxL  === _ 665 594  [[ 667 ]]
    6:  665  MaxL  === _ 664 597  [[ 666 ]]
    7:  664  MaxL  === _ 607 604  [[ 665 ]]

v671 = max(v629, max(v217, max(v455, max(v536, max(v539, max(v594, max(v597, max(v604, v607))))))

Running
Throughput: 537 ops/ms
Throughput: 549 ops/ms
Throughput: 547 ops/ms
Throughput: 546 ops/ms
Throughput: 552 ops/ms
Throughput: 550 ops/ms
Throughput: 553 ops/ms
Throughput: 548 ops/ms
Throughput: 548 ops/ms
Throughput: 549 ops/ms
Validate
#+end_src
** prototypes
#+begin_src bash
[avoid-cmov] reassociate in loop; chain:
    0:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
    1:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
#+end_src
x5 = x4 + (x3 + (x2 + (x1 + x))) ~= v216 = max(v217, max(v455, max(536, max(v539, max(v594, max(v597, max(v604, max(v607, v629))))))))

we want to transform to:

x5 = x + (x4 + (x3 + (x2 + x1))) ~= v216 = max(v629, max(v217, max(v455, max(vx1536, max(v539, max(v594, max(v597, max(v604, v607))))))))

What is looking like:
#+begin_src bash
    0:  671  MaxL  === _ 670 629  [[ ]]
    1:  670  MaxL  === _ 669 217  [[ 671 ]]
    2:  669  MaxL  === _ 668 455  [[ 670 ]]
    3:  668  MaxL  === _ 667 536  [[ 669 ]]
    4:  667  MaxL  === _ 666 539  [[ 668 ]]
    5:  666  MaxL  === _ 665 594  [[ 667 ]]
    6:  665  MaxL  === _ 664 597  [[ 666 ]]
    7:  664  MaxL  === _ 629 604  [[ 665 ]]

v671 = max(v629, max(v217, max(v455, max(v536, max(v539, max(v594, max(v597, max(v604, v629))))))))
#+end_src

And now:
#+begin_src bash
    0:  671  MaxL  === _ 670 629  [[ ]]
    1:  670  MaxL  === _ 669 217  [[ 671 ]]
    2:  669  MaxL  === _ 668 455  [[ 670 ]]
    3:  668  MaxL  === _ 667 536  [[ 669 ]]
    4:  667  MaxL  === _ 666 539  [[ 668 ]]
    5:  666  MaxL  === _ 665 594  [[ 667 ]]
    6:  665  MaxL  === _ 664 597  [[ 666 ]]
    7:  664  MaxL  === _ 607 604  [[ 665 ]]

v671 = max(v629, max(v217, max(v455, max(v536, max(v539, max(v594, max(v597, max(v604, v607))))))
#+end_src

* 12.9.25
#+begin_src bash
 Pair-chain 1:
    0:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
    1:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
#+end_src
v216 = max(max(max(max(max(max(max(max(v629, v607), v604), v597), v594), v539), v536), v455), v217)
=
v216 = max(v217, max(v455, max(536, max(v539, max(v594, max(v597, max(v604, max(v607, v629))))))))

After reassociation:
#+begin_src bash
[avoid-cmov] reassociate in loop; root:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; chain length: 8
[avoid-cmov] reassociate in loop; last:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; reassociated:  664  MaxL  === _ 606 217  [[ ]]

 217  LoadL  === 385 7 218  [[ 664 ]]  @long[int:>=0] (java/lang/Cloneable,java/io/Serializable):exact+any *, idx=6; #long !orig=190 !jvms: Test::test @ bci:14 (line 20)


 365  Phi  === 357 33 347  [[ 347 339 ]]  #long !orig=[251],[246]
 347  MaxL  === _ 365 348  [[ 365 374 629 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)

 629  Phi  === 627 347 664  [[ 606 ]]  #long !orig=[556],[472],[251],[246]
 606  MaxL  === _ 629 607  [[ 664 ]]  !orig=[538],[454],[216],191 !jvms: Test::test @ bci:20 (line 21)

 664  MaxL  === _ 606 217  [[ 268 629 374 ]]  !orig=[216],191 !jvms: Test::test @ bci:20 (line 21)
#+end_src

v664 = ...

continue trying to reassociate, got this far.
need to see why the final value is wrong, maybe reassociated chain is not right, maybe values missing?
#+begin_src bash
Warmup
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 479 472 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; root:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; chain length: 8
[avoid-cmov] reassociate in loop; last:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; reassociated:  664  MaxL  === _ 606 217  [[ ]]
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 392 400 ]]  !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; root:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; chain length: 16
[avoid-cmov] reassociate in loop; last:  632  MaxL  === _ 667 633  [[ 631 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop; reassociated:  764  MaxL  === _ 632 215  [[ ]]
Running
Throughput: 1726 ops/ms
Throughput: 1737 ops/ms
Throughput: 1762 ops/ms
Throughput: 1761 ops/ms
Throughput: 1759 ops/ms
Throughput: 1749 ops/ms
Throughput: 1759 ops/ms
Throughput: 1714 ops/ms
Throughput: 1751 ops/ms
Throughput: 1748 ops/ms
Validate
Exception in thread "main" java.lang.AssertionError: Failed: expected: 4294334221, actual: 4293477055
	at Test.validate(Test.java:84)
	at Test.main(Test.java:54)
make: *** [Makefile:166: run-gen] Error 1
#+end_src
* 11.9.25
next: do something akin to PhaseIterGVN::optimize in reassociation loop node.
create new add nodes and then check what logging/verification needs doing.
** finding last maxl node
216-606 chain of 8 expected, that's what superword was showing.
but what is the 147-632 chain of 16?
#+begin_src bash
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 479 472 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop, root:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop, last: 8
[avoid-cmov] reassociate in loop, last:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 392 400 ]]  !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] add max node for post-loop opts:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop, root:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] reassociate in loop, last: 16
[avoid-cmov] reassociate in loop, last:  632  MaxL  === _ 667 633  [[ 631 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
#+end_src

Seems like it unrolls up to 16:
#+begin_src bash
 Pair-chain 1:
    0:  632  MaxL  === _ 667 633  [[ 631 ]]  !orig=529,450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
    1:  631  MaxL  === _ 632 657  [[ 630 ]]  !orig=528,449,147,400 !jvms: Test::test @ bci:20 (line 21)
    2:  630  MaxL  === _ 631 653  [[ 627 ]]  !orig=527,384,147,400 !jvms: Test::test @ bci:20 (line 21)
    3:  627  MaxL  === _ 630 628  [[ 626 ]]  !orig=524,147,400 !jvms: Test::test @ bci:20 (line 21)
    4:  626  MaxL  === _ 627 647  [[ 625 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
    5:  625  MaxL  === _ 626 643  [[ 624 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
    6:  624  MaxL  === _ 625 639  [[ 623 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
    7:  623  MaxL  === _ 624 635  [[ 529 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
    8:  529  MaxL  === _ 623 530  [[ 528 ]]  !orig=450,384,147,400 !jvms: Test::test @ bci:20 (line 21)
    9:  528  MaxL  === _ 529 538  [[ 527 ]]  !orig=449,147,400 !jvms: Test::test @ bci:20 (line 21)
   10:  527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
   11:  524  MaxL  === _ 527 525  [[ 450 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
   12:  450  MaxL  === _ 524 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)
   13:  449  MaxL  === _ 450 453  [[ 384 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
   14:  384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
   15:  147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
#+end_src

Yes, it manages to unroll it for 16:
#+begin_src bash
Loop: N0/N0  has_sfpt
  Loop: N306/N311  limit_check short_running profile_predicated predicated counted [0,int),+1 (4 iters)  pre
  Loop: N176/N175  limit_check sfpts={ 178 }
    Loop: N550/N160  limit_check counted [int,int),+8 (10243 iters)  main has_sfpt strip_mined
  Loop: N237/N242  limit_check counted [int,int),+1 (4 iters)  post
Unroll 16         Loop: N550/N160  limit_check counted [int,int),+8 (10243 iters)  main has_sfpt strip_mined
#+end_src
* 9.9.25
** draw the chain
#+begin_src bash
 Pair-chain 1:
    0:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
    1:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
#+end_src

max(max(max(max(max(max(max(max(v629, v607), v604), v597), v594), v539), v536), v455), v217)
=
max(v217, max(v455, max(536, max(v539, max(v594, max(v597, max(v604, max(v607, v629))))))))

max(v217, max(v455, max(536, max(v539, max(v594, max(v597, max(v604, max(v607, v629))))))))

max(8, max(7, max(6, max(5, max(4, max(3, max(2, 1)))))))
->
max(1, max(8, max(7, max(6, max(5, max(4, max(3, 2)))))))
** filter for strip mined loops
#+begin_src bash
 216  MaxL  === _ 251 217  [[ 479 472 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 464  CountedLoop  === 464 266 164  [[ 464 465 471 472 ]] stride: 1 main of N464 strip mined multiversion_fast !orig=267,[236],[214]
 472  Phi  === 464 347 216  [[ 454 484 ]]  #long !orig=251,[246]

 216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 553  CountedLoop  === 553 266 164  [[ 549 552 553 262 556 557 467 227 ]] inner stride: 4 main of N553 strip mined multiversion_fast !orig=[464],[267],[236],[214] !jvms: Test::test @ bci:14 (line 20)
 556  Phi  === 553 347 216  [[ 538 ]]  #long !orig=[472],[251],[246]

 216  MaxL  === _ 454 217  [[ 635 629 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 627  CountedLoop  === 627 266 164  [[ 616 619 622 626 627 628 629 630 ]] inner stride: 4 main of N627 strip mined multiversion_fast !orig=553,[464],[267],[236],[214] !jvms: Test::test @ bci:14 (line 20)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=556,[472],[251],[246]


 147  MaxL  === _ 119 215  [[ 392 400 ]]  !jvms: Test::test @ bci:20 (line 21)
 392  Phi  === 389 301 147  [[ 384 ]]  #long !orig=119 !jvms: Test::test @ bci:12 (line 20)
 389  CountedLoop  === 389 176 160  [[ 389 391 392 393 ]] inner stride: 1 main of N389 strip mined !orig=177,[168],[116] !jvms: Test::test @ bci:12 (line 20)

 147  MaxL  === _ 384 215  [[ 667 680 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 664  CountedLoop  === 664 176 160  [[ 664 665 667 676 ]] inner stride: 8 main of N664 strip mined !orig=550,[460],[389],[177],[168],[116] !jvms: Test::test @ bci:12 (line 20)
 667  Phi  === 664 301 147  [[ 632 ]]  #long:minint..maxlong, 0u..maxulong, widen: 3 !orig=551,463,392,119 !jvms: Test::test @ bci:12 (line 20)
#+end_src

#+begin_src bash
[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 479 472 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 392 400 ]]  !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
#+end_src
** what makes ~216  MaxL~ different v1
#+begin_src bash
 216  MaxL  === _ 454 217  [[ 561 556 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
                                   |
                                   > 553  CountedLoop  === 553 266 164  [[ 549 552 553 554 556 557 ]] inner stride: 2 main of N553 strip mined multiversion_fast !orig=464,[267],[236],[214] !jvms: Test::test @ bci:14 (line 20)
                                     556  Phi  === 553 347 216  [[ 538 ]]  #long !orig=472,[251],[246]

 535  MaxL  === _ 538 536  [[ 472 561 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
                               |
                               > 464  CountedLoop  === 464 555 1  [[ 464 467 471 472 227 262 ]] inner main of N464 multiversion_fast !orig=[267],[236],[214] !jvms: Test::test @ bci:14 (line 20)
                                 472  Phi  === 464 535 1  [[ 454 ]]  #long !orig=[251],[246]

[avoid-cmov] max without max out but has max in
 535  MaxL  === _ 538 536  [[ 472 561 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
#+end_src
** understanding phi nodes
#+begin_src cpp
// PhiNodes merge values from different Control paths.  Slot 0 points to the
// controlling RegionNode.  Other slots map 1-for-1 with incoming control flow
// paths to the RegionNode.
#+end_src

So, for ~629  Phi~ the 0-slot is ~627  CountedLoop~, and that counted loop node is a region node.
#+begin_src bash
 216  MaxL  === _ 454 217  [[ 635 629 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 627  CountedLoop  === 627 266 164  [[ 616 619 622 626 627 628 629 630 ]] inner stride: 4 main of N627 strip mined multiversion_fast !orig=553,[464],[267],[236],[214] !jvms: Test::test @ bci:14 (line 20)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=556,[472],[251],[246]
#+end_src
** what makes ~216  MaxL~ different v0
Looking at clues that differentiate 216 from the rest of the nodes.
There's a Phi after 216 with the other node being a CountedLoop, as Roland suggested:

#+begin_src bash
[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 479 472 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 472 455  [[ 216 479 484 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 535  MaxL  === _ 538 536  [[ 472 561 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 538  MaxL  === _ 556 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 268 556 374 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 593  MaxL  === _ 596 594  [[ 556 635 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
 596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 392 400 ]]  !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 392 385  [[ 147 400 ]]  !orig=147 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 449  MaxL  === _ 450 453  [[ 392 470 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 450  MaxL  === _ 463 451  [[ 449 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 463 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 524  MaxL  === _ 527 525  [[ 463 557 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 527  MaxL  === _ 528 534  [[ 524 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 551 178 322 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

--
 216  MaxL  === _ 454 217  [[ 635 629 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
 627  CountedLoop  === 627 266 164  [[ 616 619 622 626 627 628 629 630 ]] inner stride: 4 main of N627 strip mined multiversion_fast !orig=553,[464],[267],[236],[214] !jvms: Test::test @ bci:14 (line 20)
 629  Phi  === 627 347 216  [[ 606 ]]  #long !orig=556,[472],[251],[246]
--

[avoid-cmov] max without max out but has max in
 623  MaxL  === _ 624 635  [[ 551 680 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
 624  MaxL  === _ 625 639  [[ 623 ]]  !orig=384,147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)

[avoid-cmov] max without max out but has max in
 147  MaxL  === _ 384 215  [[ 667 322 178 ]]  !orig=400 !jvms: Test::test @ bci:20 (line 21)
 384  MaxL  === _ 449 385  [[ 147 ]]  !orig=147,400 !jvms: Test::test @ bci:20 (line 21)
#+end_src
* 5.9.25
max(a, x);

max(b, max(a, x));
-> max(x, max(a, b));

max(c, max(b, max(a, x)));
-> max(x, max(a, b));


TraceIterativeGVN:
#+begin_src bash
< 		< 479  Phi  === _ 1 _  [[ ]]  #long
> long		 216  MaxL  === _ 454 217  [[ 374 472 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
= long:minint..maxint-1, 0u..maxulong	 452  MaxL  === _ 501 398  [[ 453 ]]
= long:minint-1..maxint-1, 0u..maxulong, widen: 3	 501  AddL  === _ 450 500  [[ 452 ]]  !orig=[451]
= int:>=0, widen: 3	 447  MinI  === _ 408 160  [[ 388 ]]
= int:-1..maxint-1, 0u..maxuint	 502  AddI  === _ 160 498  [[ 410 ]]  !orig=[449],[392]
= long:>=0	 450  ConvI2L  === _ 160  [[ 501 ]]  #long:>=0
#+end_src

superword log:
#+begin_src bash
 Pair-chain 1:
    0:  606  MaxL  === _ 629 607  [[ 603 ]]  !orig=538,454,216,191 !jvms: Test::test @ bci:20 (line 21)
    1:  603  MaxL  === _ 606 604  [[ 596 ]]  !orig=535,216,191 !jvms: Test::test @ bci:20 (line 21)
    2:  596  MaxL  === _ 603 597  [[ 593 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    3:  593  MaxL  === _ 596 594  [[ 538 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    4:  538  MaxL  === _ 593 539  [[ 535 ]]  !orig=454,216,191 !jvms: Test::test @ bci:20 (line 21)
    5:  535  MaxL  === _ 538 536  [[ 454 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    6:  454  MaxL  === _ 535 455  [[ 216 ]]  !orig=216,191 !jvms: Test::test @ bci:20 (line 21)
    7:  216  MaxL  === _ 454 217  [[ 374 629 268 ]]  !orig=191 !jvms: Test::test @ bci:20 (line 21)
#+end_src
* 2.9.25
** exploring unroll pseudo code
base:
#+begin_src java
long v0 = array[i];
x = Math.max(v0, x);
#+end_src

unroll 2:
#+begin_src java
long v0 = array[i + 0];
long v1 = array[i + 1];

x = Math.max(v1, Math.max(v0, x));
#+end_src

reassoc 2:
#+begin_src java
long v0 = array[i + 0];
long v1 = array[i + 1];

x = Math.max(x, Math.max(v1, v0));
#+end_src
** exploring unrolling logs
base log:
#+begin_src bash
before-after-unrolling.log:140: 216  MaxL  === _ 251 217  [[ 268 251 374 ]]  !orig=191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:174: 274  MaxL  === _ 292 275  [[ 292 297 306 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:207: 310  MaxL  === _ 328 311  [[ 328 337 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:240: 347  MaxL  === _ 365 348  [[ 365 374 251 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)

Unroll 2         Loop: N267/N164  limit_check counted [int,int),+1 (10243 iters)  main multiversion_fast has_sfpt strip_mined

before-after-unrolling.log:445: 216  MaxL  === _ 251 217  [[ 479 472 ]]  !orig=191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:478: 274  MaxL  === _ 292 275  [[ 292 297 306 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:511: 310  MaxL  === _ 328 311  [[ 328 337 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:544: 347  MaxL  === _ 365 348  [[ 365 374 472 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:643: 454  MaxL  === _ 472 455  [[ 251 479 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)

...

before-after-unrolling.log:760: 216  MaxL  === _ 454 217  [[ 374 472 268 ]]  !orig=191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:787: 274  MaxL  === _ 292 275  [[ 292 297 306 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:819: 310  MaxL  === _ 328 311  [[ 328 337 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:852: 347  MaxL  === _ 365 348  [[ 365 374 472 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:915: 454  MaxL  === _ 472 455  [[ 216 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)

Unroll 4         Loop: N464/N164  limit_check counted [int,int),+2 (10243 iters)  main multiversion_fast has_sfpt strip_mined

before-after-unrolling.log:1004: 216  MaxL  === _ 454 217  [[ 561 556 ]]  !orig=191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:1031: 274  MaxL  === _ 292 275  [[ 292 297 306 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:1063: 310  MaxL  === _ 328 311  [[ 328 337 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:1096: 347  MaxL  === _ 365 348  [[ 365 374 556 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:1159: 454  MaxL  === _ 472 455  [[ 216 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:1188: 535  MaxL  === _ 538 536  [[ 472 561 ]]  !orig=216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)
before-after-unrolling.log:1191: 538  MaxL  === _ 556 539  [[ 535 ]]  !orig=454,216,191 !jvms: PrimitiveAndIf::test @ bci:20 (line 17)

#+end_src
** clarification on emanuel's reassoacion
#+begin_quote
Having a chain might keep register pressure down (Quan).
My approach was more "binary-tree" style, but that could possibly get the register pressure up.
You'd basically  have to develop a test that is register pressure sensitive - or just go with Quan Anh's approach.
Assuming we have a lot of iterations, his approach is probably better.
If we only execute the unrolled main body once, then we'd have still a long chain.
Maybe then a "binary-tree" would be better as long register pressure does not hit a critical threshold.
That's all speculation at this point though, you'd have to do the experiments if you care to dig that deep.
Or you just go with the linear pattern.
#+end_quote
* 1.9.25
** llvm-mca
easier to consume output, less hassle:
#+begin_src bash
$ llvm-mca -mcpu=cascadelake -timeline reassoc-optimal.asm
#+end_src
** summary with uica
both reassociation show better performance than unrolled version
basic and optimal do not shown performance differences
** reassociation optimal
#+begin_src bash
$ as reassoc-optimal.asm -o reassoc-optimal.o

$ ./uiCA.py reassoc-optimal.o -arch SKL -trace reassoc-optimal.html
Throughput (in cycles per iteration): 3.51
Bottleneck: Issue

The following throughputs could be achieved if the given property were the only bottleneck:

  - DSB: 2.33
  - Issue: 3.50
  - Ports: 2.50
  - Dependencies: 2.00

M - Macro-fused with previous instruction

┌───────────────────────┬────────┬───────┬───────────────────────────────────────────────────────────────────────┬───────┐
│ MITE   MS   DSB   LSD │ Issued │ Exec. │ Port 0   Port 1   Port 2   Port 3   Port 4   Port 5   Port 6   Port 7 │ Notes │
├───────────────────────┼────────┼───────┼───────────────────────────────────────────────────────────────────────┼───────┤
│              1        │   1    │   1   │                     1                                                 │       │ mov r10, qword ptr [rsi+r8*8+0x20]
│              1        │   1    │   1   │                              1                                        │       │ mov r9, qword ptr [rsi+r8*8+0x28]
│              1        │   1    │   1   │                     1                                                 │       │ mov rcx, qword ptr [rsi+r8*8+0x18]
│              1        │   1    │   1   │                              1                                        │       │ mov rbx, qword ptr [rsi+r8*8+0x10]
│              1        │   1    │   1   │  0.04     0.41                                0.53     0.01           │       │ cmp r9, r10
│              1        │   1    │   1   │  0.65                                                  0.35           │       │ cmovl r9, r10
│              1        │   1    │   1   │  0.03     0.4                                 0.54     0.03           │       │ cmp rcx, rbx
│              1        │   1    │   1   │  0.63                                                  0.37           │       │ cmovl rcx, rbx
│              1        │   1    │   1   │  0.01     0.51                                0.43     0.04           │       │ cmp rcx, r9
│              1        │   1    │   1   │  0.54                                                  0.46           │       │ cmovl rcx, r9
│              1        │   1    │   1   │           0.5                                 0.44     0.06           │       │ cmp rax, rcx
│              1        │   1    │   1   │  0.49                                                  0.51           │       │ cmovl rax, rcx
│              1        │   1    │   1   │           0.46                                0.5      0.04           │       │ add r8d, 0x4
│              1        │   1    │   1   │                                                         1             │       │ cmp r8d, r11d
│                       │        │       │                                                                       │   M   │ jl 0xffffffffffffffc9
├───────────────────────┼────────┼───────┼───────────────────────────────────────────────────────────────────────┼───────┤
│             14        │   14   │  14   │  2.4      2.28      2        2                2.44     2.88           │       │ Total
└───────────────────────┴────────┴───────┴───────────────────────────────────────────────────────────────────────┴───────┘
#+end_src

#+begin_src asm
.loop:
movq		0x20(%rsi, %r8, 8), %r10
movq		0x28(%rsi, %r8, 8), %r9
movq		0x18(%rsi, %r8, 8), %rcx
movq		0x10(%rsi, %r8, 8), %rbx
cmpq		%r10, %r9
cmovlq		%r10, %r9
cmpq		%rbx, %rcx
cmovlq		%rbx, %rcx
cmpq		%r9, %rcx
cmovlq		%r9, %rcx
cmpq		%rcx, %rax
cmovlq		%rcx, %rax
addl		$4, %r8d
cmpl		%r11d, %r8d
jl		.loop
#+end_src

#+begin_src bash
Running
Throughput: 207 ops/ms
Throughput: 206 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
Throughput: 207 ops/ms
#+end_src
** reassociation basic
#+begin_src bash
$ as reassoc-basic.asm -o reassoc-basic.o

$ ./uiCA.py reassoc-basic.o -arch SKL -trace reassoc-basic.html
Throughput (in cycles per iteration): 3.52
Bottleneck: Issue

The following throughputs could be achieved if the given property were the only bottleneck:

  - DSB: 2.33
  - Issue: 3.50
  - Ports: 2.50
  - Dependencies: 2.00

M - Macro-fused with previous instruction

┌───────────────────────┬────────┬───────┬───────────────────────────────────────────────────────────────────────┬───────┐
│ MITE   MS   DSB   LSD │ Issued │ Exec. │ Port 0   Port 1   Port 2   Port 3   Port 4   Port 5   Port 6   Port 7 │ Notes │
├───────────────────────┼────────┼───────┼───────────────────────────────────────────────────────────────────────┼───────┤
│              1        │   1    │   1   │                     1                                                 │       │ mov r11, qword ptr [rsi+r9*8+0x28]
│              1        │   1    │   1   │                              1                                        │       │ mov r8, qword ptr [rsi+r9*8+0x20]
│              1        │   1    │   1   │                     1                                                 │       │ mov rcx, qword ptr [rsi+r9*8+0x18]
│              1        │   1    │   1   │                              1                                        │       │ mov rbx, qword ptr [rsi+r9*8+0x10]
│              1        │   1    │   1   │           0.41                                0.58     0.02           │       │ cmp rcx, rbx
│              1        │   1    │   1   │  0.83                                                  0.17           │       │ cmovl rcx, rbx
│              1        │   1    │   1   │           0.39                                0.55     0.06           │       │ cmp rcx, r8
│              1        │   1    │   1   │  0.73                                                  0.27           │       │ cmovl rcx, r8
│              1        │   1    │   1   │           0.5                                 0.42     0.08           │       │ cmp rcx, r11
│              1        │   1    │   1   │  0.44                                                  0.56           │       │ cmovl rcx, r11
│              1        │   1    │   1   │  0.02     0.52                                0.41     0.06           │       │ cmp rax, rcx
│              1        │   1    │   1   │  0.48                                                  0.52           │       │ cmovl rax, rcx
│              1        │   1    │   1   │  0.05     0.41                                0.47     0.08           │       │ add r9d, 0x4
│              1        │   1    │   1   │                                                         1             │       │ cmp r9d, r10d
│                       │        │       │                                                                       │   M   │ jl 0xffffffffffffffc9
├───────────────────────┼────────┼───────┼───────────────────────────────────────────────────────────────────────┼───────┤
│             14        │   14   │  14   │  2.55     2.23      2        2                2.42     2.8            │       │ Total
└───────────────────────┴────────┴───────┴───────────────────────────────────────────────────────────────────────┴───────┘
#+end_src
** unrolled
#+begin_src bash
$ as unrolled.asm -o unrolled.o

$ ./uiCA.py unrolled.o -arch SKL -trace unrolled-trace.html
Throughput (in cycles per iteration): 8.00
Bottleneck: Dependencies

The following throughputs could be achieved if the given property were the only bottleneck:

  - DSB: 2.33
  - Issue: 3.50
  - Ports: 2.50
  - Dependencies: 8.00

M - Macro-fused with previous instruction

┌───────────────────────┬────────┬───────┬───────────────────────────────────────────────────────────────────────┬───────┐
│ MITE   MS   DSB   LSD │ Issued │ Exec. │ Port 0   Port 1   Port 2   Port 3   Port 4   Port 5   Port 6   Port 7 │ Notes │
├───────────────────────┼────────┼───────┼───────────────────────────────────────────────────────────────────────┼───────┤
│              1        │   1    │   1   │                     1                                                 │       │ mov r11, qword ptr [rsi+r9*8+0x28]
│              1        │   1    │   1   │                              1                                        │       │ mov r8, qword ptr [rsi+r9*8+0x20]
│              1        │   1    │   1   │                     1                                                 │       │ mov rcx, qword ptr [rsi+r9*8+0x10]
│              1        │   1    │   1   │                              1                                        │       │ mov rbx, qword ptr [rsi+r9*8+0x18]
│              1        │   1    │   1   │           0.43                                0.53     0.03           │       │ cmp rax, rcx
│              1        │   1    │   1   │  0.6                                                   0.4            │       │ cmovl rax, rcx
│              1        │   1    │   1   │           0.43                                0.5      0.07           │       │ cmp rax, rbx
│              1        │   1    │   1   │  0.63                                                  0.37           │       │ cmovl rax, rbx
│              1        │   1    │   1   │           0.5                                 0.4      0.1            │       │ cmp rax, r8
│              1        │   1    │   1   │  0.6                                                   0.4            │       │ cmovl rax, r8
│              1        │   1    │   1   │           0.53                                0.43     0.03           │       │ cmp rax, r11
│              1        │   1    │   1   │  0.57                                                  0.43           │       │ cmovl rax, r11
│              1        │   1    │   1   │           0.47                                0.5      0.03           │       │ add r9d, 0x4
│              1        │   1    │   1   │                                                         1             │       │ cmp r9d, r10d
│                       │        │       │                                                                       │   M   │ jl 0xffffffffffffffc9
├───────────────────────┼────────┼───────┼───────────────────────────────────────────────────────────────────────┼───────┤
│             14        │   14   │  14   │  2.4      2.37      2        2                2.37     2.87           │       │ Total
└───────────────────────┴────────┴───────┴───────────────────────────────────────────────────────────────────────┴───────┘
#+end_src
* 28.8.25
** reassociated basic
#+begin_src bash
Running
Throughput: 208 ops/ms
Throughput: 208 ops/ms
Throughput: 208 ops/ms
Throughput: 208 ops/ms
Throughput: 207 ops/ms
Throughput: 208 ops/ms
Throughput: 208 ops/ms
Throughput: 209 ops/ms
Throughput: 208 ops/ms
Throughput: 209 ops/ms
#+end_src

#+begin_src asm
.loop:
movq		0x28(%rsi, %r9, 8), %r11
movq		0x20(%rsi, %r9, 8), %r8
movq		0x18(%rsi, %r9, 8), %rcx
movq		0x10(%rsi, %r9, 8), %rbx
cmpq		%rbx, %rcx
cmovlq		%rbx, %rcx
cmpq		%r8, %rcx
cmovlq		%r8, %rcx
cmpq		%r11, %rcx
cmovlq		%r11, %rcx
cmpq		%rcx, %rax
cmovlq		%rcx, %rax
addl		$4, %r9d
cmpl		%r10d, %r9d
jl		.loop
#+end_src
** unrolled howard
#+begin_src bash
Running
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
Throughput: 93 ops/ms
#+end_src
https://uica.uops.info/?code=.loop%3A%0D%0Amovq%09%090x28(%25rsi%2C%20%25r9%2C%208)%2C%20%25r11%0D%0Amovq%09%090x20(%25rsi%2C%20%25r9%2C%208)%2C%20%25r8%0D%0Amovq%09%090x10(%25rsi%2C%20%25r9%2C%208)%2C%20%25rcx%0D%0Amovq%09%090x18(%25rsi%2C%20%25r9%2C%208)%2C%20%25rbx%0D%0Acmpq%09%09%25rcx%2C%20%25rax%0D%0Acmovlq%09%09%25rcx%2C%20%25rax%0D%0Acmpq%09%09%25rbx%2C%20%25rax%0D%0Acmovlq%09%09%25rbx%2C%20%25rax%0D%0Acmpq%09%09%25r8%2C%20%25rax%0D%0Acmovlq%09%09%25r8%2C%20%25rax%0D%0Acmpq%09%09%25r11%2C%20%25rax%0D%0Acmovlq%09%09%25r11%2C%20%25rax%0D%0Aaddl%09%09%244%2C%20%25r9d%0D%0Acmpl%09%09%25r10d%2C%20%25r9d%0D%0Ajl%09%09.loop&syntax=asATT&uArchs=SKL&tools=uiCA&alignment=0&uiCAHtmlOptions=traceTable
#+begin_src asm
.loop:
movq		0x28(%rsi, %r9, 8), %r11
movq		0x20(%rsi, %r9, 8), %r8
movq		0x10(%rsi, %r9, 8), %rcx
movq		0x18(%rsi, %r9, 8), %rbx
cmpq		%rcx, %rax
cmovlq		%rcx, %rax
cmpq		%rbx, %rax
cmovlq		%rbx, %rax
cmpq		%r8, %rax
cmovlq		%r8, %rax
cmpq		%r11, %rax
cmovlq		%r11, %rax
addl		$4, %r9d
cmpl		%r10d, %r9d
jl		.loop
#+end_src
* 27.8.25
** roland's how to
#+begin_quote
It seems like some pattern matching during igvn and then reshaping the IR.
But with everything that is performance sensitive,
you would have to run testing on several platforms to make sure it does not cause regressions and be prepared for performance regressions down the road,
once it's integrated.
So it's possibly a lot of work. But that sounds interesting to me.
#+end_quote
** latency bound v2 howard
#+begin_src asm
.loop:
movq	0x28(%rsi, %r9, 8), %r11
movq	0x20(%rsi, %r9, 8), %r8
movq	0x10(%rsi, %r9, 8), %rcx
movq	0x18(%rsi, %r9, 8), %rbx
cmpq	%rcx, %rax
cmovlq  %rcx, %rax
cmpq	%rbx, %rax
cmovlq	%rbx, %rax
cmpq	%r8, %rax
cmovlq	%r8, %rax
cmpq	%r11, %rax
cmovlq	%r11, %rax
addl	$4, %r9d
cmpl	%r10d, %r9d
jl	.loop
#+end_src
https://uica.uops.info/?code=.loop%3A%0D%0Amovq%090x28(%25rsi%2C%20%25r9%2C%208)%2C%20%25r11%0D%0Amovq%090x20(%25rsi%2C%20%25r9%2C%208)%2C%20%25r8%0D%0Amovq%090x10(%25rsi%2C%20%25r9%2C%208)%2C%20%25rcx%0D%0Amovq%090x18(%25rsi%2C%20%25r9%2C%208)%2C%20%25rbx%0D%0Acmpq%09%25rcx%2C%20%25rax%0D%0Acmovlq%20%20%25rcx%2C%20%25rax%0D%0Acmpq%09%25rbx%2C%20%25rax%0D%0Acmovlq%09%25rbx%2C%20%25rax%0D%0Acmpq%09%25r8%2C%20%25rax%0D%0Acmovlq%09%25r8%2C%20%25rax%0D%0Acmpq%09%25r11%2C%20%25rax%0D%0Acmovlq%09%25r11%2C%20%25rax%0D%0Aaddl%09%244%2C%20%25r9d%0D%0Acmpl%09%25r10d%2C%20%25r9d%0D%0Ajl%20%20%20%20%20%20.loop&syntax=asATT&uArchs=SKL&tools=uiCA&alignment=0&uiCAHtmlOptions=traceTable
** latency bound v1 chatgpt
#+begin_src asm
.loop4:
    mov     r8,  [rdi]
    mov     r9,  [rdi+8]
    mov     r10, [rdi+16]
    mov     r11, [rdi+24]
    cmp     rax, r8
    cmovl   rax, r8
    cmp     rax, r9
    cmovl   rax, r9
    cmp     rax, r10
    cmovl   rax, r10
    cmp     rax, r11
    cmovl   rax, r11
    add     rdi, 32
    sub     rcx, 4
    cmp     rcx, 4
    jae     .loop4
#+end_src
https://uica.uops.info/?code=.loop4%3A%0D%0A%20%20%20%20mov%20%20%20%20%20r8%2C%20%20%5Brdi%5D%0D%0A%20%20%20%20mov%20%20%20%20%20r9%2C%20%20%5Brdi%2B8%5D%0D%0A%20%20%20%20mov%20%20%20%20%20r10%2C%20%5Brdi%2B16%5D%0D%0A%20%20%20%20mov%20%20%20%20%20r11%2C%20%5Brdi%2B24%5D%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r8%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r8%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r9%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r9%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r10%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r10%0D%0A%20%20%20%20cmp%20%20%20%20%20rax%2C%20r11%0D%0A%20%20%20%20cmovl%20%20%20rax%2C%20r11%0D%0A%20%20%20%20add%20%20%20%20%20rdi%2C%2032%0D%0A%20%20%20%20sub%20%20%20%20%20rcx%2C%204%0D%0A%20%20%20%20cmp%20%20%20%20%20rcx%2C%204%0D%0A%20%20%20%20jae%20%20%20%20%20.loop4&syntax=asIntel&uArchs=SKL&tools=uiCA&alignment=0&uiCAHtmlOptions=traceTable&uiCAHtmlOptions=dependencies
** latency bound v0
Sample assembly for
x = max(v3, max(v2, max(v1, max(v0, x))))
#+begin_src asm
mov     rax, rdi
cmp     rax, rsi
cmovl   rax, rsi
cmp     rax, rdx
cmovl   rax, rdx
cmp     rax, rcx
cmovl   rax, rcx
cmp     rax, r8
cmovl   rax, r8
#+end_src
uica: https://uica.uops.info/?code=mov%20%20%20%20%20rax%2C%20rdi%0D%0Acmp%20%20%20%20%20rax%2C%20rsi%0D%0Acmovl%20%20%20rax%2C%20rsi%0D%0Acmp%20%20%20%20%20rax%2C%20rdx%0D%0Acmovl%20%20%20rax%2C%20rdx%0D%0Acmp%20%20%20%20%20rax%2C%20rcx%0D%0Acmovl%20%20%20rax%2C%20rcx%0D%0Acmp%20%20%20%20%20rax%2C%20r8%0D%0Acmovl%20%20%20rax%2C%20r8&syntax=asIntel&uArchs=SKL&tools=uiCA&alignment=0
* 20-24.6.25
** simple 100
*** branch never
#+begin_src asm
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longReductionSimpleMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

   2.68%  │                ││       │   0x00007eff34b15e68:   movq		0x68(%rbp, %r10, 8), %r11
   1.13%  │                ││       │   0x00007eff34b15e6d:   movq		0x60(%rbp, %r10, 8), %r8
   0.18%  │                ││       │   0x00007eff34b15e72:   movq		0x58(%rbp, %r10, 8), %r9
   1.33%  │                ││       │   0x00007eff34b15e77:   movq		0x50(%rbp, %r10, 8), %rbx
   2.75%  │                ││       │   0x00007eff34b15e7c:   movq		0x48(%rbp, %r10, 8), %rdi
   1.27%  │                ││       │   0x00007eff34b15e81:   movq		0x40(%rbp, %r10, 8), %rdx
   0.17%  │                ││       │   0x00007eff34b15e86:   movq		0x38(%rbp, %r10, 8), %rsi
   1.25%  │                ││       │   0x00007eff34b15e8b:   movq		0x30(%rbp, %r10, 8), %rax
   2.62%  │                ││       │   0x00007eff34b15e90:   movq		0x28(%rbp, %r10, 8), %r13
   1.26%  │                ││       │   0x00007eff34b15e95:   movq		0x20(%rbp, %r10, 8), %r14
   0.17%  │                ││       │   0x00007eff34b15e9a:   cmpq		%r14, %rcx
          │  ╭             ││       │   0x00007eff34b15e9d:   jg		0x7eff34b15ea2
   1.31%  │  │             ││       │   0x00007eff34b15e9f:   movq		%r14, %rcx
   2.71%  │  ↘             ││       │   0x00007eff34b15ea2:   cmpq		%r13, %rcx
          │   ╭            ││       │   0x00007eff34b15ea5:   jg		0x7eff34b15eaa
   1.12%  │   │            ││       │   0x00007eff34b15ea7:   movq		%r13, %rcx
   0.16%  │   ↘            ││       │   0x00007eff34b15eaa:   cmpq		%rax, %rcx
          │    ╭           ││       │   0x00007eff34b15ead:   jg		0x7eff34b15eb2
   3.94%  │    │           ││       │   0x00007eff34b15eaf:   movq		%rax, %rcx
   0.08%  │    ↘           ││       │   0x00007eff34b15eb2:   cmpq		%rsi, %rcx
          │     ╭          ││       │   0x00007eff34b15eb5:   jg		0x7eff34b15eba
   1.16%  │     │          ││       │   0x00007eff34b15eb7:   movq		%rsi, %rcx
   0.10%  │     ↘          ││       │   0x00007eff34b15eba:   cmpq		%rdx, %rcx
          │      ╭         ││       │   0x00007eff34b15ebd:   jg		0x7eff34b15ec2
   4.05%  │      │         ││       │   0x00007eff34b15ebf:   movq		%rdx, %rcx
   0.08%  │      ↘         ││       │   0x00007eff34b15ec2:   cmpq		%rdi, %rcx
          │       ╭        ││       │   0x00007eff34b15ec5:   jg		0x7eff34b15eca
   1.20%  │       │        ││       │   0x00007eff34b15ec7:   movq		%rdi, %rcx
   0.16%  │       ↘        ││       │   0x00007eff34b15eca:   cmpq		%rbx, %rcx
          │        ╭       ││       │   0x00007eff34b15ecd:   jg		0x7eff34b15ed2
   3.89%  │        │       ││       │   0x00007eff34b15ecf:   movq		%rbx, %rcx
   0.12%  │        ↘       ││       │   0x00007eff34b15ed2:   cmpq		%r9, %rcx
          │         ╭      ││       │   0x00007eff34b15ed5:   jg		0x7eff34b15eda
   1.31%  │         │      ││       │   0x00007eff34b15ed7:   movq		%r9, %rcx
   0.21%  │         ↘      ││       │   0x00007eff34b15eda:   cmpq		%r8, %rcx
          │          ╭     ││       │   0x00007eff34b15edd:   jg		0x7eff34b15ee2
   3.73%  │          │     ││       │   0x00007eff34b15edf:   movq		%r8, %rcx
   0.13%  │          ↘     ││       │   0x00007eff34b15ee2:   cmpq		%r11, %rcx
          │           ╭    ││       │   0x00007eff34b15ee5:   jg		0x7eff34b15eea
   5.06%  │           │    ││       │   0x00007eff34b15ee7:   movq		%r11, %rcx
   0.13%  │           ↘    ││       │   0x00007eff34b15eea:   vmovq		%xmm8, %r11
   6.43%  │                ││       │   0x00007eff34b15eef:   cmpq		%r11, %rcx
          │            ╭   ││       │   0x00007eff34b15ef2:   jg		0x7eff34b15ef7
   0.31%  │            │   ││       │   0x00007eff34b15ef4:   movq		%r11, %rcx
   1.38%  │            ↘   ││       │   0x00007eff34b15ef7:   vmovq		%xmm7, %r11
   0.14%  │                ││       │   0x00007eff34b15efc:   cmpq		%r11, %rcx
          │             ╭  ││       │   0x00007eff34b15eff:   jg		0x7eff34b15f04
   7.54%  │             │  ││       │   0x00007eff34b15f01:   movq		%r11, %rcx
   0.11%  │             ↘  ││       │   0x00007eff34b15f04:   vmovq		%xmm6, %r11
   1.37%  │                ││       │   0x00007eff34b15f09:   cmpq		%r11, %rcx
          │              ╭ ││       │   0x00007eff34b15f0c:   jg		0x7eff34b15f11
   0.14%  │              │ ││       │   0x00007eff34b15f0e:   movq		%r11, %rcx
   3.82%  │              ↘ ││       │   0x00007eff34b15f11:   vmovq		%xmm5, %r11
   0.15%  │                ││       │   0x00007eff34b15f16:   cmpq		%r11, %rcx
          │               ╭││       │   0x00007eff34b15f19:   jg		0x7eff34b15f1e
   2.63%  │               │││       │   0x00007eff34b15f1b:   movq		%r11, %rcx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │               │││       │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 313)
          │               │││       │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
#+end_src
*** ool
#+begin_src asm
# OOL
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longReductionSimpleMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

   3.60%     ││││││  0x00007fb52cb17baa:   movq		0x68(%rsi, %r8, 8), %r11
             ││││││  0x00007fb52cb17baf:   movq		0x60(%rsi, %r8, 8), %r9
   1.15%     ││││││  0x00007fb52cb17bb4:   movq		0x58(%rsi, %r8, 8), %rcx
   0.01%     ││││││  0x00007fb52cb17bb9:   movq		0x50(%rsi, %r8, 8), %rbx
   3.36%     ││││││  0x00007fb52cb17bbe:   movq		0x48(%rsi, %r8, 8), %rdi
             ││││││  0x00007fb52cb17bc3:   movq		0x40(%rsi, %r8, 8), %rdx
   1.19%     ││││││  0x00007fb52cb17bc8:   movq		0x38(%rsi, %r8, 8), %rax
   0.01%     ││││││  0x00007fb52cb17bcd:   movq		0x30(%rsi, %r8, 8), %rbp
   3.46%     ││││││  0x00007fb52cb17bd2:   movq		0x28(%rsi, %r8, 8), %r13
             ││││││  0x00007fb52cb17bd7:   movq		0x20(%rsi, %r8, 8), %r14
   1.19%     ││││││  0x00007fb52cb17bdc:   cmpq		%r14, %r10
             ││││││  0x00007fb52cb17bdf:   jg		0x7fb52cb17e76
   0.16%     ││││││  0x00007fb52cb17be5:   cmpq		%r13, %r14
             ││││││  0x00007fb52cb17be8:   jg		0x7fb52cb17e6e
   3.46%     ││││││  0x00007fb52cb17bee:   cmpq		%rbp, %r13
             ││││││  0x00007fb52cb17bf1:   jg		0x7fb52cb17e66
             ││││││  0x00007fb52cb17bf7:   cmpq		%rax, %rbp
             ││││││  0x00007fb52cb17bfa:   jg		0x7fb52cb17e5e
   1.19%     ││││││  0x00007fb52cb17c00:   cmpq		%rdx, %rax
             ││││││  0x00007fb52cb17c03:   jg		0x7fb52cb17e56
   0.05%     ││││││  0x00007fb52cb17c09:   cmpq		%rdi, %rdx
             ││││││  0x00007fb52cb17c0c:   jg		0x7fb52cb17e4e
  13.21%     ││││││  0x00007fb52cb17c12:   cmpq		%rbx, %rdi
             ││││││  0x00007fb52cb17c15:   jg		0x7fb52cb17e46
   4.64%     ││││││  0x00007fb52cb17c1b:   cmpq		%rcx, %rbx
             ││││││  0x00007fb52cb17c1e:   jg		0x7fb52cb17e3e
   0.08%     ││││││  0x00007fb52cb17c24:   cmpq		%r9, %rcx
             ││││││  0x00007fb52cb17c27:   jg		0x7fb52cb17e36
   0.03%     ││││││  0x00007fb52cb17c2d:   cmpq		%r11, %r9
             ││││││  0x00007fb52cb17c30:   jg		0x7fb52cb17e2e
   6.88%     ││││││  0x00007fb52cb17c36:   vmovq		%xmm9, %r10
   2.28%     ││││││  0x00007fb52cb17c3b:   cmpq		%r10, %r11
             ││││││  0x00007fb52cb17c3e:   jg		0x7fb52cb17e26
   0.31%     ││││││  0x00007fb52cb17c44:   vmovq		%xmm8, %r11
   0.00%     ││││││  0x00007fb52cb17c49:   cmpq		%r11, %r10
             ││││││  0x00007fb52cb17c4c:   jg		0x7fb52cb17e1e
   6.94%     ││││││  0x00007fb52cb17c52:   vmovq		%xmm7, %r10
   2.21%     ││││││  0x00007fb52cb17c57:   cmpq		%r10, %r11
             ││││││  0x00007fb52cb17c5a:   jg		0x7fb52cb17e16
   0.21%     ││││││  0x00007fb52cb17c60:   vmovq		%xmm6, %r11
   0.01%     ││││││  0x00007fb52cb17c65:   cmpq		%r11, %r10
             ││││││  0x00007fb52cb17c68:   jg		0x7fb52cb17e0e      ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 313)
             ││││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
#+end_src
** clip range 90
*** branch never
#+begin_src asm
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 90, seed = 0, size = 1000)

   1.52%  │                        ││││  0x00007f81b0b17bf0:   movq		0x20(%rax, %r9, 8), %r10;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
   1.54%  │                        ││││  0x00007f81b0b17bf5:   movq		%rbp, %rdx
   1.56%  │                        ││││  0x00007f81b0b17bf8:   cmpq		%r10, %rdx
          │            ╭           ││││  0x00007f81b0b17bfb:   jg		0x7f81b0b17c00
   1.31%  │            │           ││││  0x00007f81b0b17bfd:   movq		%r10, %rdx
   1.65%  │            ↘           ││││  0x00007f81b0b17c00:   movq		%r8, %r10
   1.36%  │                        ││││  0x00007f81b0b17c03:   cmpq		%rdx, %r10
          │             ╭          ││││  0x00007f81b0b17c06:   jl		0x7f81b0b17c0b
   1.18%  │             │          ││││  0x00007f81b0b17c08:   movq		%rdx, %r10
   1.61%  │             ↘          ││││  0x00007f81b0b17c0b:   movq		%r10, 0x20(%r11, %r9, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
          │                        ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
#+end_src

*** ool
#+begin_src asm
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 90, seed = 0, size = 1000)

   0.40%  │   ↗│││  0x00007fd238b181d2:   movq		0x10(%rax, %r11, 8), %r9;*laload {reexecute=0 rethrow=0 return_oop=0}
          │   ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
          │   ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
   5.07%  │   ││││  0x00007fd238b181d7:   cmpq		%r9, %rdx
          │   ││││  0x00007fd238b181da:   jg		0x7fd238b18496
   5.06%  │   ││││  0x00007fd238b181e0:   cmpq		%r9, %rbp
          │   ││││  0x00007fd238b181e3:   jl		0x7fd238b1848e
   1.20%  │   ││││  0x00007fd238b181e9:   movq		%r9, 0x10(%r14, %r11, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
          │   ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
          │   ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 124)
#+end_src
* 18.6.25
** clipping range oddities
Actually things look fine with clipping range and branch-never.
The oddities from the previous day might be due using the wrong UseNewCode flag settings.

Initial command:
#+begin_src bash
TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping" MICRO="OPTIONS=-p range=100 -jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:-UseSuperWord -jvmArgs -XX:+UseNewCode -jvmArgs -XX:+UseNewCode2;FORK=1" CONF=slow LOG=warn make test
#+end_src

#+begin_src asm
// Branch never with GT
instruct maxL_reg_reg_gt(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(UseNewCode);
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg)); // src1 (b) > src2 (a) ?
    __ br(Assembler::GT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}

// Branch never with LT
instruct minL_reg_reg_lt(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(UseNewCode2);
  match(Set dst (MinL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg)); // src2 (b) < src1 (a) ?
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
highestLong: 9209124015426240512
lowestLong: -9215797459577170060
longs: [-3109364765729502342, -6688467811848818630, 2158390814503909950, ...

  0x00007fffe8ad3589:   movq            0x10(%r12, %r9, 8), %rdi
  0x00007fffe8ad358e:   movq            0x10(%rdx), %r11    ;*getfield highestLong {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@29 (line 260)
  0x00007fffe8ad3592:   movq            0x18(%rdx), %r8     ;*getfield lowestLong {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@22 (line 260)

r8             0x801ae909b3f49774  -9215797459577170060
r11            0x7fcd618000000000  9209124015426240512

  0x00007fffe8ad3596:   movq            %r8, %rax

rax            0x801ae909b3f49774  -9215797459577170060
Vrdi            0x0                 0

  0x00007fffe8ad3599:   cmpq            %rdi, %rax          ; Math.max(longs[i], lowestLong)
  0x00007fffe8ad359c:   jg              0x7fffe8ad35a1      ; lowestLong > longs[i] ? false
  0x00007fffe8ad359e:   movq            %rdi, %rax
  0x00007fffe8ad35a1:   movq            %r11, %rdi

rax            0x0                 0
rdi            0x7fcd618000000000  9209124015426240512

  0x00007fffe8ad35a4:   cmpq            %rax, %rdi          ; Math.min(longs[i], highestLong)
  0x00007fffe8ad35a7:   jl              0x7fffe8ad35ac      ; highestLong < longs[i] ? false
  0x00007fffe8ad35a9:   movq            %rax, %rdi
  0x00007fffe8ad35ac:   movq            %rdi, 0x10(%r12, %rsi, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 260)
#+end_src

#+begin_src asm
highestLong: 9209124015426240512
lowestLong: -9215797459577170060
longs: [-3109364765729502342, -6688467811848818630, 2158390814503909950, ...

rdx            0xa32dc9f64f1df03a  -6688467811848818630
rsi            0x801ae909b3f49774  -9215797459577170060

  0x00007fffe8ad3648:   cmpq            %rdx, %rsi          ; Math.max(longs[i], lowestLong)
  0x00007fffe8ad364b:   jg              0x7fffe8ad3650      ; lowestLong > longs[i] ? false
  0x00007fffe8ad364d:   movq            %rdx, %rsi
  0x00007fffe8ad3650:   movq            %r11, %rdx

rdx            0x7fcd618000000000  9209124015426240512
rsi            0xa32dc9f64f1df03a  -6688467811848818630

  0x00007fffe8ad3653:   cmpq            %rsi, %rdx          ; Math.min(longs[i], highestLong)
  0x00007fffe8ad3656:   jl              0x7fffe8ad365b      ; highestLong < longs[i] ? false
  0x00007fffe8ad3658:   movq            %rsi, %rdx
  0x00007fffe8ad365b:   movq            %rdx, 0x10(%r13, %rdi, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 260)
#+end_src
* 12.6.25
** clipping range (range=100) with branch never
The assembly looks slightly ood.
lowestLong seems very high?
The banch jumps to ~0x7fffe8ad2fd0~ when the branch never is designed not to jump
Next: print lowest/highest and array contents and then use that as guidance
#+begin_src java
@Benchmark
public long[] longClippingRange(RangeState state) {
    for (int i = 0; i < state.size; i++) {
        state.resultLongs[i] = Math.min(Math.max(state.longs[i], state.lowestLong), state.highestLong);
    }
    return state.resultLongs;
}
#+end_src
#+begin_src asm
  0x00007fffe8ad2fc0:   movq            0x10(%rbp, %rdi, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
  0x00007fffe8ad2fc5:   movq            %r8, %rsi

rdx            0xa32dc9f64f1df03a  -6688467811848818630     ; (a) state.longs[i]
rsi            0x7fe84a89b3f49775  9216698592703846261      ; (b) state.lowestLong

  0x00007fffe8ad2fc8:   cmpq            %rdx, %rsi          ; %rsi (b) > rdx (a) ? true
  0x00007fffe8ad2fcb:   jg              0x7fffe8ad2fd0      ; maxL_reg_reg_gt
  0x00007fffe8ad2fcd:   movq            %rdx, %rsi
  0x00007fffe8ad2fd0:   movq            %r11, %rdx          ; ...
  0x00007fffe8ad2fd3:   cmpq            %rsi, %rdx
  0x00007fffe8ad2fd6:   jl              0x7fffe8ad2fdb
  0x00007fffe8ad2fd8:   movq            %rsi, %rdx
  0x00007fffe8ad2fdb:   movq            %rdx, 0x10(%r13, %rdi, 8);*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
  0x00007fffe8ad2fe0:   movq            0x18(%rbp, %rdi, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
#+end_src
** clipping range (range=100)
Both "not taken" ~100% when branch always (-XX:-UseNewCode -XX:-UseNewCode2).
How does it compare with long reduction min/max with branch always?
Hard to say because the bytecode is opposite to the comparisons in the source:
ifgt for min, iflt for max
>= for max in source code
<= for min in source code

So instead run with branch never on gdb,
and see if branch never does actually happen for both max and min.
#+begin_src bash
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:     1552301
  invocation_counter:               1552301
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 416 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(1690) displacement(56)
                                    not taken(1550158)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(1550158) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:     1552136
  invocation_counter:               1552136
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 416 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(1540) displacement(56)
                                    not taken(1550214)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(1550214) displacement(24)
  10 lload_2
  11 lreturn
#+end_src
* 5.6.25
** clipping range aarch64 analysis
Branch always shows a decrease in performance.
*Branch never show an increase in performance of ~10%.*
** disable intrinsic aarch64 analysis
Clipping range branch never substantially better than disable intrinsic, 25-30%.
Branch always/never ~45% worse with loop at 50% probability.
Branch never 10% worse with loop at 80% probability.
Branch never equals with loop at 100% probability.
In reduction cases, branch never always wins no matter probability.
In reduction cases, branch always wins except in 100% probability.
** clipping range x64 analysis
Branch always shows a decrease in performance.
*Branch never show an decrease in performance of ~10%.*
** disable intrinsic x64 analysis
Branch always/never better performance all accross the board.
* 2.6.25
** aarch64 MMV longLoopMax
*** print method data, branch always, 50
#+begin_src bash
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:+UnlockDiagnosticVMOptions -XX:+PrintMethodData -XX:-UseSuperWord -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 50, size = 2048)

# Run progress: 0.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1:
maxLongA: [
3, 3, 0, 11, 8, 13, 18, 12, 27, 20, 27, 21, 29, 23, 32, 26, 25, 29, 35, 33, 31, 34, 27, 31, 28, 34, 29, 42, 49, 41, 42, 55, 58, 53, 56, 54, 54, 62, 63, 60, 58, 55, 61, 61, 68, 67, 70, 62, 64, 70, 63, 73, 76, 83, 74, 85, 91, 90, 84, 92, 92, 83, 93, 95, 99, 102, 109, 100, 117, 110, 109, 111, 109, 112, 122, 126, 129, 120, 125, 121, 137, 140, 131, 148, 157, 154, 151, 161, 169, 163, 173, 170, 165, 176, 185, 181, 188, 195, 199, 196, 200, 205, 202, 202, 212, 210, 216, 212, 207, 224, 224, 233, 239, 248, 244, 240, 255, 249, 253, 258, 259, 257, 257, 265, 257, 256, 261, 259, 268, 264, 259, 270, 266, 274, 270, 276, 271, 283, 292, 289, 295, 289, 296, 304, 299, 313, 309, 306, 312, 310, 317, 322, 319, 316, 317, 327, 326, 331, 329, 340, 337, 340, 339, 337, 345, 344, 345, 353, 348, 349, 349, 354, 354, 361, 362, 356, 357, 361, 367, 370, 376, 375, 377, 381, 383, 383, 387, 396, 400, 403, 403, 395, 399, 396, 396, 408, 405, 407, 399, 404, 401, 411, 409, 416, 423, 432, 427, 427, 431, 431, 440, 445, 453, 451, 460, 468, 469, 465, 477, 475, 473, 486, 491, 486, 482, 490, 488, 494, 497, 505, 498, 504, 512, 506, 521, 528, 531, 538, 534, 532, 546, 538, 541, 540, 549, 554, 549, 547, 561, 569, 561, 578, 574, 587, 578, 595, 593, 593, 594, 586, 586, 587, 595, 596, 605, 613, 611, 611, 610, 612, 608, 621, 626, 623, 617, 618, 633, 636, 633, 630, 644, 649, 652, 654, 662, 665, 667, 675, 679, 670, 680, 681, 672, 672, 673, 683, 675, 692, 684, 689, 692, 697, 698, 699, 698, 701, 692, 695, 703, 698, 699, 697, 703, 694, 709, 714, 705, 705, 719, 728, 730, 721, 721, 738, 735, 744, 741, 737, 739, 742, 735, 749, 750, 755, 747, 754, 761, 769, 774, 766, 779, 779, 770, 774, 773, 788, 780, 786, 784, 779, 790, 793, 784, 801, 801, 806, 801, 797, 804, 807, 798, 814, 808, 809, 808, 820, 823, 828, 836, 843, 838, 845, 846, 839, 854, 849, 853, 846, 852, 862, 867, 864, 863, 875, 867, 876, 880, 873, 883, 878, 874, 875, 879, 874, 890, 886, 889, 889, 888, 895, 886, 890, 888, 891, 896, 889, 901, 903, 894, 911, 909, 904, 913, 912, 915, 913, 913, 914, 915, 910, 922, 913, 924, 916, 928, 931, 922, 928, 935, 943, 943, 942, 935, 944, 943, 944, 943, 947, 955, 963, 972, 979, 974, 977, 974, 981, 988, 982, 983, 979, 980, 984, 996, 995, 994, 999, 1007, 1015, 1011, 1007, 1022, 1021, 1014, 1023, 1028, 1021, 1032, 1031, 1032, 1041, 1049, 1046, 1055, 1047, 1049, 1056, 1058, 1058, 1052, 1057, 1049, 1053, 1052, 1052, 1059, 1059, 1066, 1066, 1063, 1074, 1075, 1066, 1070, 1069, 1071, 1072, 1078, 1072, 1069, 1076, 1085, 1085, 1087, 1096, 1095, 1100, 1092, 1104, 1103, 1104, 1109, 1107, 1113, 1114, 1107, 1108, 1123, 1118, 1125, 1127, 1119, 1132, 1124, 1123, 1130, 1124, 1132, 1123, 1135, 1135, 1127, 1131, 1127, 1139, 1143, 1151, 1159, 1158, 1151, 1166, 1167, 1174, 1179, 1181, 1174, 1174, 1185, 1186, 1182, 1189, 1183, 1187, 1196, 1202, 1205, 1202, 1201, 1201, 1200, 1196, 1198, 1198, 1199, 1206, 1213, 1210, 1217, 1219, 1212, 1218, 1210, 1214, 1210, 1217, 1210, 1217, 1219, 1218, 1224, 1226, 1233, 1228, 1235, 1242, 1237, 1248, 1254, 1247, 1262, 1262, 1266, 1273, 1273, 1273, 1265, 1276, 1280, 1281, 1280, 1273, 1273, 1287, 1279, 1278, 1279, 1290, 1287, 1293, 1291, 1286, 1290, 1297, 1304, 1297, 1310, 1309, 1318, 1327, 1327, 1323, 1323, 1329, 1323, 1325, 1333, 1339, 1338, 1331, 1348, 1340, 1343, 1353, 1344, 1351, 1345, 1351, 1360, 1362, 1360, 1356, 1364, 1359, 1357, 1373, 1373, 1374, 1383, 1376, 1381, 1386, 1379, 1394, 1395, 1396, 1402, 1410, 1412, 1420, 1415, 1412, 1426, 1434, 1432, 1442, 1450, 1446, 1449, 1458, 1454, 1465, 1459, 1467, 1461, 1465, 1466, 1471, 1470, 1472, 1481, 1475, 1486, 1492, 1498, 1499, 1506, 1505, 1503, 1514, 1511, 1515, 1508, 1516, 1523, 1517, 1530, 1530, 1528, 1534, 1542, 1540, 1542, 1538, 1548, 1546, 1550, 1558, 1554, 1554, 1556, 1552, 1561, 1556, 1557, 1555, 1566, 1560, 1559, 1572, 1569, 1572, 1564, 1564, 1580, 1574, 1577, 1577, 1576, 1575, 1581, 1578, 1588, 1579, 1587, 1589, 1586, 1593, 1594, 1587, 1601, 1597, 1593, 1601, 1597, 1597, 1596, 1596, 1592, 1603, 1596, 1610, 1613, 1611, 1616, 1607, 1625, 1619, 1629, 1622, 1632, 1628, 1626, 1639, 1639, 1634, 1646, 1637, 1652, 1650, 1648, 1659, 1657, 1663, 1665, 1662, 1666, 1674, 1677, 1683, 1692, 1686, 1699, 1699, 1692, 1690, 1693, 1699, 1695, 1694, 1703, 1711, 1718, 1721, 1721, 1715, 1725, 1727, 1732, 1723, 1738, 1732, 1738, 1735, 1733, 1744, 1749, 1743, 1740, 1743, 1758, 1755, 1758, 1750, 1750, 1757, 1759, 1767, 1762, 1769, 1769, 1773, 1778, 1786, 1781, 1784, 1778, 1783, 1777, 1777, 1788, 1785, 1786, 1791, 1786, 1800, 1803, 1809, 1814, 1822, 1824, 1832, 1837, 1846, 1851, 1846, 1850, 1852, 1859, 1854, 1850, 1857, 1864, 1860, 1868, 1865, 1868, 1876, 1885, 1894, 1902, 1898, 1910, 1907, 1902, 1911, 1909, 1912, 1918, 1919, 1922, 1913, 1917, 1930, 1923, 1928, 1938, 1945, 1939, 1938, 1936, 1952, 1960, 1958, 1968, 1977, 1972, 1968, 1968, 1979, 1981, 1974, 1974, 1986, 1984, 1986, 1979, 1981, 1995, 1988, 1996, 1996, 2004, 2002, 2010, 2005, 2009, 2003, 2002, 2018, 2017, 2014, 2016, 2025, 2026, 2017, 2035, 2032, 2032, 2032, 2037, 2029, 2045, 2045, 2048, 2055, 2054, 2058, 2057, 2061, 2063, 2062, 2061, 2067, 2062, 2060, 2058, 2076, 2079, 2083, 2085, 2091, 2092, 2095, 2099, 2098, 2096, 2106, 2104, 2100, 2098, 2104, 2113, 2110, 2113, 2118, 2126, 2133, 2136, 2142, 2148, 2142, 2144, 2151, 2151, 2142, 2154, 2146, 2146, 2157, 2154, 2163, 2168, 2159, 2177, 2178, 2174, 2179, 2186, 2180, 2190, 2192, 2199, 2207, 2210, 2209, 2214, 2209, 2221, 2219, 2214, 2212, 2216, 2215, 2221, 2221, 2224, 2224, 2230, 2239, 2233, 2232, 2230, 2235, 2245, 2238, 2242, 2245, 2250, 2251, 2254, 2254, 2254, 2246, 2248, 2250, 2261, 2260, 2258, 2260, 2255, 2267, 2262, 2260, 2259, 2259, 2264, 2274, 2282, 2275, 2290, 2285, 2295, 2294, 2300, 2292, 2298, 2309, 2308, 2300, 2316, 2308, 2311, 2317, 2309, 2313, 2321, 2322, 2316, 2316, 2324, 2323, 2328, 2324, 2337, 2336, 2337, 2341, 2348, 2339, 2348, 2353, 2349, 2354, 2350, 2345, 2356, 2360, 2363, 2356, 2358, 2361, 2355, 2359, 2372, 2368, 2367, 2369, 2372, 2377, 2385, 2392, 2400, 2393, 2401, 2401, 2398, 2395, 2392, 2410, 2401, 2417, 2416, 2413, 2415, 2412, 2410, 2410, 2410, 2415, 2415, 2424, 2424, 2433, 2425, 2441, 2439, 2434, 2434, 2440, 2432, 2440, 2437, 2439, 2434, 2449, 2446, 2448, 2444, 2454, 2458, 2450, 2452, 2465, 2458, 2459, 2460, 2471, 2469, 2476, 2476, 2483, 2477, 2491, 2488, 2488, 2493, 2500, 2502, 2498, 2508, 2510, 2516, 2510, 2524, 2516, 2526, 2533, 2525, 2526, 2524, 2525, 2525, 2542, 2546, 2541, 2545, 2537, 2541, 2549, 2551, 2557, 2551, 2550, 2560, 2557, 2561, 2556, 2566, 2558, 2559, 2563, 2575, 2582, 2585, 2583, 2588, 2592, 2591, 2593, 2593, 2596, 2601, 2593, 2596, 2606, 2609, 2607, 2612, 2608, 2618, 2622, 2631, 2630, 2635, 2640, 2642, 2647, 2641, 2645, 2653, 2657, 2650, 2666, 2657, 2675, 2682, 2686, 2685, 2677, 2687, 2687, 2696, 2699, 2698, 2691, 2696, 2692, 2703, 2701, 2703, 2705, 2713, 2721, 2721, 2723, 2720, 2718, 2717, 2715, 2726, 2721, 2725, 2729, 2731, 2727, 2722, 2723, 2722, 2728, 2740, 2738, 2738, 2740, 2745, 2753, 2745, 2758, 2765, 2769, 2763, 2775, 2784, 2782, 2784, 2792, 2793, 2797, 2801, 2806, 2804, 2811, 2804, 2817, 2815, 2809, 2808, 2822, 2820, 2814, 2829, 2826, 2833, 2842, 2834, 2844, 2851, 2857, 2860, 2851, 2855, 2861, 2860, 2866, 2869, 2861, 2867, 2872, 2875, 2883, 2879, 2874, 2889, 2896, 2887, 2887, 2887, 2898, 2897, 2905, 2910, 2909, 2906, 2908, 2915, 2913, 2918, 2919, 2913, 2921, 2913, 2916, 2927, 2936, 2928, 2940, 2931, 2943, 2947, 2947, 2956, 2950, 2964, 2972, 2965, 2973, 2972, 2980, 2981, 2979, 2972, 2987, 2981, 2978, 2978, 2982, 2996, 3002, 3000, 3010, 3015, 3011, 3008, 3014, 3021, 3016, 3022, 3024, 3022, 3028, 3033, 3026, 3040, 3038, 3032, 3045, 3050, 3051, 3044, 3059, 3062, 3054, 3067, 3076, 3083, 3087, 3081, 3096, 3090, 3092, 3098, 3099, 3100, 3093, 3102, 3094, 3106, 3107, 3109, 3116, 3108, 3110, 3109, 3107, 3119, 3112, 3112, 3123, 3120, 3122, 3129, 3137, 3143, 3152, 3145, 3159, 3167, 3161, 3163, 3166, 3166, 3165, 3165, 3160, 3171, 3166, 3177, 3169, 3179, 3186, 3180, 3183, 3178, 3187, 3187, 3188, 3180, 3187, 3195, 3193, 3204, 3213, 3219, 3213, 3223, 3229, 3231, 3230, 3223, 3234, 3231, 3236, 3242, 3243, 3243, 3244, 3249, 3240, 3246, 3255, 3251, 3257, 3265, 3262, 3271, 3280, 3284, 3290, 3296, 3293, 3296, 3291, 3297, 3306, 3308, 3307, 3304, 3299, 3301, 3301, 3314, 3318, 3310, 3325, 3324, 3332, 3337, 3342, 3334, 3342, 3339, 3346, 3352, 3346, 3352, 3349, 3343, 3358, 3355, 3363, 3360, 3361, 3359, 3362, 3368, 3364, 3376, 3367, 3370, 3370, 3375, 3382, 3377, 3386, 3381, 3388, 3387, 3388, 3390, 3390, 3388, 3388, 3384, 3387, 3383, 3381, 3399, 3401, 3392, 3398, 3409, 3418, 3423, 3427, 3436, 3445, 3453, 3459, 3463, 3472, 3467, 3466, 3478, 3472, 3475, 3469, 3478, 3472, 3485, 3488, 3490, 3482, 3486, 3491, 3498, 3503, 3509, 3512, 3505, 3518, 3520, 3528, 3530, 3535, 3534, 3532, 3534, 3526, 3533, 3534, 3537, 3544, 3550, 3544, 3551, 3556, 3559, 3561, 3557, 3554, 3565, 3563, 3562, 3563, 3570, 3578, 3585, 3591, 3591, 3582, 3584, 3596, 3593, 3600, 3595, 3600, 3595, 3609, 3609, 3614, 3607, 3611, 3617, 3623, 3626, 3632, 3637, 3639, 3633, 3639, 3633, 3634, 3631, 3637, 3640, 3636, 3635, 3635, 3640, 3648, 3644, 3652, 3647, 3643, 3649, 3646, 3644, 3658, 3649, 3662, 3662, 3659, 3660, 3663, 3672, 3669, 3677, 3679, 3685, 3693, 3689, 3690, 3693, 3700, 3692, 3691, 3697, 3697, 3697, 3691, 3707, 3700, 3707, 3709, 3700, 3706, 3703, 3716, 3720, 3729, 3722, 3730, 3735, 3732, 3744, 3750, 3748, 3748, 3753, 3762, 3753, 3766, 3763, 3772, 3773, 3765, 3769, 3769, 3767, 3776, 3774, 3770, 3785, 3776, 3787, 3792, 3799, 3790, 3794, 3808, 3816, 3817, 3823, 3823, 3815, 3831, 3836, 3833, 3842, 3833, 3851, 3843, 3856, 3861, 3864, 3855, 3862, 3870, 3875, 3877, 3883, 3889, 3891, 3885, 3882, 3897, 3901, 3893, 3901, 3904, 3896, 3911, 3904, 3904, 3912, 3908, 3916, 3919, 3910, 3914, 3925, 3917, 3916, 3917, 3926, 3932, 3940, 3934, 3932, 3940, 3944, 3952, 3950, 3959, 3967, 3968, 3970, 3975, 3973, 3982, 3990, 3981, 3983, 3985, 3992, 3986, 3990, 3988, 3987, 3993, 3989, 3998, 4004, 4012, 4006, 4005, 4016, 4008, 4023, 4017, 4023, 4022, 4018, 4019, 4026, 4029, 4029, 4026, 4025, 4022, 4027, 4024, 4020, 4030, 4022, 4039, 4036, 4044, 4049, 4040, 4054, 4051, 4054, 4056, 4063, 4058, 4065, 4067, 4058, 4061, 4061, 4064, 4058, 4063, 4058, 4067, 4063, 4059, 4074, 4082, 4076, 4089, 4085, 4095, 4101, 4093, 4108, 4104, 4102, 4103, 4116, 4109, 4119, 4119, 4112, 4114, 4116, 4128, 4124, 4136, 4129, 4127, 4138, 4131, 4132, 4144, 4138, 4141, 4147, 4149, 4141, 4152, 4152, 4160, 4168, 4169, 4165, 4165, 4174, 4171, 4174, 4169, 4170, 4177, 4184, 4176, 4183, 4175, 4182, 4185, 4176, 4194, 4187, 4186, 4194, 4197, 4193, 4202, 4198, 4204, 4204, 4212, 4212, 4210, 4219, 4228, 4221, 4231, 4237, 4232, 4243, 4252, 4250, 4258, 4260, 4266, 4258, 4267, 4263, 4272, 4278, 4281, 4277, 4276, 4275, 4289, 4295, 4286, 4290, 4287, 4287, 4292, 4296, 4305, 4313, 4317, 4315, 4311, 4317, 4316, 4326, 4333, 4324, 4332, 4336, 4344, 4353, 4360, 4354, 4367, 4376, 4378, 4381, 4376, 4387, 4391, 4397, 4406, 4413, 4409, 4420, 4418, 4414, 4417, 4424, 4421, 4427, 4433, 4441, 4447, 4454, 4454, 4460, 4461, 4460, 4454, 4459, 4463, 4467, 4474, 4483, 4474, 4484, 4480, 4481, 4488, 4494, 4498, 4502, 4505, 4502, 4501, 4501, 4508, 4515, 4512, 4513, 4520, 4523, 4523, 4521, 4514, 4526, 4531, 4528, 4528, 4522, 4532, 4526, 4537, 4541, 4534, 4547, 4539, 4549, 4541, 4554, 4556, 4554, 4559, 4557, 4554, 4556, 4565, 4570, 4569, 4577, 4573, 4583, 4577, 4574, 4576, 4591, 4598, 4590, 4599, 4600, 4596, 4609, 4607, 4618, 4616, 4612, 4609, 4627, 4626, 4630, 4629, 4627, 4625, 4622, 4622, 4625, 4637, 4646, 4638, 4637, 4651, 4643, 4648, 4657, 4650, 4661, 4670, 4668, 4665, 4662, 4674, 4666, 4670, 4668, 4681, 4675, 4683, 4689, 4693, 4696, 4687, 4697, 4697, 4697, 4695, 4694, 4704, 4711, 4704, 4715, 4719, 4721, 4719, 4717, 4712, 4728, 4737, 4734, 4743, 4740, 4743, 4735, 4745]
maxLongB: [
2, 3, 3, 3, 11, 11, 13, 18, 18, 27, 27, 27, 27, 29, 29, 32, 32, 32, 32, 35, 35, 35, 35, 35, 35, 35, 35, 35, 42, 49, 49, 49, 55, 58, 58, 58, 58, 58, 62, 63, 63, 63, 63, 63, 63, 68, 68, 70, 70, 70, 70, 70, 73, 76, 83, 83, 85, 91, 91, 91, 92, 92, 92, 93, 95, 99, 102, 109, 109, 117, 117, 117, 117, 117, 117, 122, 126, 129, 129, 129, 129, 137, 140, 140, 148, 157, 157, 157, 161, 169, 169, 173, 173, 173, 176, 185, 185, 188, 195, 199, 199, 200, 205, 205, 205, 212, 212, 216, 216, 216, 224, 224, 233, 239, 248, 248, 248, 255, 255, 255, 258, 259, 259, 259, 265, 265, 265, 265, 265, 268, 268, 268, 270, 270, 274, 274, 276, 276, 283, 292, 292, 295, 295, 296, 304, 304, 313, 313, 313, 313, 313, 317, 322, 322, 322, 322, 327, 327, 331, 331, 340, 340, 340, 340, 340, 345, 345, 345, 353, 353, 353, 353, 354, 354, 361, 362, 362, 362, 362, 367, 370, 376, 376, 377, 381, 383, 383, 387, 396, 400, 403, 403, 403, 403, 403, 403, 408, 408, 408, 408, 408, 408, 411, 411, 416, 423, 432, 432, 432, 432, 432, 440, 445, 453, 453, 460, 468, 469, 469, 477, 477, 477, 486, 491, 491, 491, 491, 491, 494, 497, 505, 505, 505, 512, 512, 521, 528, 531, 538, 538, 538, 546, 546, 546, 546, 549, 554, 554, 554, 561, 569, 569, 578, 578, 587, 587, 595, 595, 595, 595, 595, 595, 595, 595, 596, 605, 613, 613, 613, 613, 613, 613, 621, 626, 626, 626, 626, 633, 636, 636, 636, 644, 649, 652, 654, 662, 665, 667, 675, 679, 679, 680, 681, 681, 681, 681, 683, 683, 692, 692, 692, 692, 697, 698, 699, 699, 701, 701, 701, 703, 703, 703, 703, 703, 703, 709, 714, 714, 714, 719, 728, 730, 730, 730, 738, 738, 744, 744, 744, 744, 744, 744, 749, 750, 755, 755, 755, 761, 769, 774, 774, 779, 779, 779, 779, 779, 788, 788, 788, 788, 788, 790, 793, 793, 801, 801, 806, 806, 806, 806, 807, 807, 814, 814, 814, 814, 820, 823, 828, 836, 843, 843, 845, 846, 846, 854, 854, 854, 854, 854, 862, 867, 867, 867, 875, 875, 876, 880, 880, 883, 883, 883, 883, 883, 883, 890, 890, 890, 890, 890, 895, 895, 895, 895, 895, 896, 896, 901, 903, 903, 911, 911, 911, 913, 913, 915, 915, 915, 915, 915, 915, 922, 922, 924, 924, 928, 931, 931, 931, 935, 943, 943, 943, 943, 944, 944, 944, 944, 947, 955, 963, 972, 979, 979, 979, 979, 981, 988, 988, 988, 988, 988, 988, 996, 996, 996, 999, 1007, 1015, 1015, 1015, 1022, 1022, 1022, 1023, 1028, 1028, 1032, 1032, 1032, 1041, 1049, 1049, 1055, 1055, 1055, 1056, 1058, 1058, 1058, 1058, 1058, 1058, 1058, 1058, 1059, 1059, 1066, 1066, 1066, 1074, 1075, 1075, 1075, 1075, 1075, 1075, 1078, 1078, 1078, 1078, 1085, 1085, 1087, 1096, 1096, 1100, 1100, 1104, 1104, 1104, 1109, 1109, 1113, 1114, 1114, 1114, 1123, 1123, 1125, 1127, 1127, 1132, 1132, 1132, 1132, 1132, 1132, 1132, 1135, 1135, 1135, 1135, 1135, 1139, 1143, 1151, 1159, 1159, 1159, 1166, 1167, 1174, 1179, 1181, 1181, 1181, 1185, 1186, 1186, 1189, 1189, 1189, 1196, 1202, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1206, 1213, 1213, 1217, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1224, 1226, 1233, 1233, 1235, 1242, 1242, 1248, 1254, 1254, 1262, 1262, 1266, 1273, 1273, 1273, 1273, 1276, 1280, 1281, 1281, 1281, 1281, 1287, 1287, 1287, 1287, 1290, 1290, 1293, 1293, 1293, 1293, 1297, 1304, 1304, 1310, 1310, 1318, 1327, 1327, 1327, 1327, 1329, 1329, 1329, 1333, 1339, 1339, 1339, 1348, 1348, 1348, 1353, 1353, 1353, 1353, 1353, 1360, 1362, 1362, 1362, 1364, 1364, 1364, 1373, 1373, 1374, 1383, 1383, 1383, 1386, 1386, 1394, 1395, 1396, 1402, 1410, 1412, 1420, 1420, 1420, 1426, 1434, 1434, 1442, 1450, 1450, 1450, 1458, 1458, 1465, 1465, 1467, 1467, 1467, 1467, 1471, 1471, 1472, 1481, 1481, 1486, 1492, 1498, 1499, 1506, 1506, 1506, 1514, 1514, 1515, 1515, 1516, 1523, 1523, 1530, 1530, 1530, 1534, 1542, 1542, 1542, 1542, 1548, 1548, 1550, 1558, 1558, 1558, 1558, 1558, 1561, 1561, 1561, 1561, 1566, 1566, 1566, 1572, 1572, 1572, 1572, 1572, 1580, 1580, 1580, 1580, 1580, 1580, 1581, 1581, 1588, 1588, 1588, 1589, 1589, 1593, 1594, 1594, 1601, 1601, 1601, 1601, 1601, 1601, 1601, 1601, 1601, 1603, 1603, 1610, 1613, 1613, 1616, 1616, 1625, 1625, 1629, 1629, 1632, 1632, 1632, 1639, 1639, 1639, 1646, 1646, 1652, 1652, 1652, 1659, 1659, 1663, 1665, 1665, 1666, 1674, 1677, 1683, 1692, 1692, 1699, 1699, 1699, 1699, 1699, 1699, 1699, 1699, 1703, 1711, 1718, 1721, 1721, 1721, 1725, 1727, 1732, 1732, 1738, 1738, 1738, 1738, 1738, 1744, 1749, 1749, 1749, 1749, 1758, 1758, 1758, 1758, 1758, 1758, 1759, 1767, 1767, 1769, 1769, 1773, 1778, 1786, 1786, 1786, 1786, 1786, 1786, 1786, 1788, 1788, 1788, 1791, 1791, 1800, 1803, 1809, 1814, 1822, 1824, 1832, 1837, 1846, 1851, 1851, 1851, 1852, 1859, 1859, 1859, 1859, 1864, 1864, 1868, 1868, 1868, 1876, 1885, 1894, 1902, 1902, 1910, 1910, 1910, 1911, 1911, 1912, 1918, 1919, 1922, 1922, 1922, 1930, 1930, 1930, 1938, 1945, 1945, 1945, 1945, 1952, 1960, 1960, 1968, 1977, 1977, 1977, 1977, 1979, 1981, 1981, 1981, 1986, 1986, 1986, 1986, 1986, 1995, 1995, 1996, 1996, 2004, 2004, 2010, 2010, 2010, 2010, 2010, 2018, 2018, 2018, 2018, 2025, 2026, 2026, 2035, 2035, 2035, 2035, 2037, 2037, 2045, 2045, 2048, 2055, 2055, 2058, 2058, 2061, 2063, 2063, 2063, 2067, 2067, 2067, 2067, 2076, 2079, 2083, 2085, 2091, 2092, 2095, 2099, 2099, 2099, 2106, 2106, 2106, 2106, 2106, 2113, 2113, 2113, 2118, 2126, 2133, 2136, 2142, 2148, 2148, 2148, 2151, 2151, 2151, 2154, 2154, 2154, 2157, 2157, 2163, 2168, 2168, 2177, 2178, 2178, 2179, 2186, 2186, 2190, 2192, 2199, 2207, 2210, 2210, 2214, 2214, 2221, 2221, 2221, 2221, 2221, 2221, 2221, 2221, 2224, 2224, 2230, 2239, 2239, 2239, 2239, 2239, 2245, 2245, 2245, 2245, 2250, 2251, 2254, 2254, 2254, 2254, 2254, 2254, 2261, 2261, 2261, 2261, 2261, 2267, 2267, 2267, 2267, 2267, 2267, 2274, 2282, 2282, 2290, 2290, 2295, 2295, 2300, 2300, 2300, 2309, 2309, 2309, 2316, 2316, 2316, 2317, 2317, 2317, 2321, 2322, 2322, 2322, 2324, 2324, 2328, 2328, 2337, 2337, 2337, 2341, 2348, 2348, 2348, 2353, 2353, 2354, 2354, 2354, 2356, 2360, 2363, 2363, 2363, 2363, 2363, 2363, 2372, 2372, 2372, 2372, 2372, 2377, 2385, 2392, 2400, 2400, 2401, 2401, 2401, 2401, 2401, 2410, 2410, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2417, 2424, 2424, 2433, 2433, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2441, 2449, 2449, 2449, 2449, 2454, 2458, 2458, 2458, 2465, 2465, 2465, 2465, 2471, 2471, 2476, 2476, 2483, 2483, 2491, 2491, 2491, 2493, 2500, 2502, 2502, 2508, 2510, 2516, 2516, 2524, 2524, 2526, 2533, 2533, 2533, 2533, 2533, 2533, 2542, 2546, 2546, 2546, 2546, 2546, 2549, 2551, 2557, 2557, 2557, 2560, 2560, 2561, 2561, 2566, 2566, 2566, 2566, 2575, 2582, 2585, 2585, 2588, 2592, 2592, 2593, 2593, 2596, 2601, 2601, 2601, 2606, 2609, 2609, 2612, 2612, 2618, 2622, 2631, 2631, 2635, 2640, 2642, 2647, 2647, 2647, 2653, 2657, 2657, 2666, 2666, 2675, 2682, 2686, 2686, 2686, 2687, 2687, 2696, 2699, 2699, 2699, 2699, 2699, 2703, 2703, 2703, 2705, 2713, 2721, 2721, 2723, 2723, 2723, 2723, 2723, 2726, 2726, 2726, 2729, 2731, 2731, 2731, 2731, 2731, 2731, 2740, 2740, 2740, 2740, 2745, 2753, 2753, 2758, 2765, 2769, 2769, 2775, 2784, 2784, 2784, 2792, 2793, 2797, 2801, 2806, 2806, 2811, 2811, 2817, 2817, 2817, 2817, 2822, 2822, 2822, 2829, 2829, 2833, 2842, 2842, 2844, 2851, 2857, 2860, 2860, 2860, 2861, 2861, 2866, 2869, 2869, 2869, 2872, 2875, 2883, 2883, 2883, 2889, 2896, 2896, 2896, 2896, 2898, 2898, 2905, 2910, 2910, 2910, 2910, 2915, 2915, 2918, 2919, 2919, 2921, 2921, 2921, 2927, 2936, 2936, 2940, 2940, 2943, 2947, 2947, 2956, 2956, 2964, 2972, 2972, 2973, 2973, 2980, 2981, 2981, 2981, 2987, 2987, 2987, 2987, 2987, 2996, 3002, 3002, 3010, 3015, 3015, 3015, 3015, 3021, 3021, 3022, 3024, 3024, 3028, 3033, 3033, 3040, 3040, 3040, 3045, 3050, 3051, 3051, 3059, 3062, 3062, 3067, 3076, 3083, 3087, 3087, 3096, 3096, 3096, 3098, 3099, 3100, 3100, 3102, 3102, 3106, 3107, 3109, 3116, 3116, 3116, 3116, 3116, 3119, 3119, 3119, 3123, 3123, 3123, 3129, 3137, 3143, 3152, 3152, 3159, 3167, 3167, 3167, 3167, 3167, 3167, 3167, 3167, 3171, 3171, 3177, 3177, 3179, 3186, 3186, 3186, 3186, 3187, 3187, 3188, 3188, 3188, 3195, 3195, 3204, 3213, 3219, 3219, 3223, 3229, 3231, 3231, 3231, 3234, 3234, 3236, 3242, 3243, 3243, 3244, 3249, 3249, 3249, 3255, 3255, 3257, 3265, 3265, 3271, 3280, 3284, 3290, 3296, 3296, 3296, 3296, 3297, 3306, 3308, 3308, 3308, 3308, 3308, 3308, 3314, 3318, 3318, 3325, 3325, 3332, 3337, 3342, 3342, 3342, 3342, 3346, 3352, 3352, 3352, 3352, 3352, 3358, 3358, 3363, 3363, 3363, 3363, 3363, 3368, 3368, 3376, 3376, 3376, 3376, 3376, 3382, 3382, 3386, 3386, 3388, 3388, 3388, 3390, 3390, 3390, 3390, 3390, 3390, 3390, 3390, 3399, 3401, 3401, 3401, 3409, 3418, 3423, 3427, 3436, 3445, 3453, 3459, 3463, 3472, 3472, 3472, 3478, 3478, 3478, 3478, 3478, 3478, 3485, 3488, 3490, 3490, 3490, 3491, 3498, 3503, 3509, 3512, 3512, 3518, 3520, 3528, 3530, 3535, 3535, 3535, 3535, 3535, 3535, 3535, 3537, 3544, 3550, 3550, 3551, 3556, 3559, 3561, 3561, 3561, 3565, 3565, 3565, 3565, 3570, 3578, 3585, 3591, 3591, 3591, 3591, 3596, 3596, 3600, 3600, 3600, 3600, 3609, 3609, 3614, 3614, 3614, 3617, 3623, 3626, 3632, 3637, 3639, 3639, 3639, 3639, 3639, 3639, 3639, 3640, 3640, 3640, 3640, 3640, 3648, 3648, 3652, 3652, 3652, 3652, 3652, 3652, 3658, 3658, 3662, 3662, 3662, 3662, 3663, 3672, 3672, 3677, 3679, 3685, 3693, 3693, 3693, 3693, 3700, 3700, 3700, 3700, 3700, 3700, 3700, 3707, 3707, 3707, 3709, 3709, 3709, 3709, 3716, 3720, 3729, 3729, 3730, 3735, 3735, 3744, 3750, 3750, 3750, 3753, 3762, 3762, 3766, 3766, 3772, 3773, 3773, 3773, 3773, 3773, 3776, 3776, 3776, 3785, 3785, 3787, 3792, 3799, 3799, 3799, 3808, 3816, 3817, 3823, 3823, 3823, 3831, 3836, 3836, 3842, 3842, 3851, 3851, 3856, 3861, 3864, 3864, 3864, 3870, 3875, 3877, 3883, 3889, 3891, 3891, 3891, 3897, 3901, 3901, 3901, 3904, 3904, 3911, 3911, 3911, 3912, 3912, 3916, 3919, 3919, 3919, 3925, 3925, 3925, 3925, 3926, 3932, 3940, 3940, 3940, 3940, 3944, 3952, 3952, 3959, 3967, 3968, 3970, 3975, 3975, 3982, 3990, 3990, 3990, 3990, 3992, 3992, 3992, 3992, 3992, 3993, 3993, 3998, 4004, 4012, 4012, 4012, 4016, 4016, 4023, 4023, 4023, 4023, 4023, 4023, 4026, 4029, 4029, 4029, 4029, 4029, 4029, 4029, 4029, 4030, 4030, 4039, 4039, 4044, 4049, 4049, 4054, 4054, 4054, 4056, 4063, 4063, 4065, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4067, 4074, 4082, 4082, 4089, 4089, 4095, 4101, 4101, 4108, 4108, 4108, 4108, 4116, 4116, 4119, 4119, 4119, 4119, 4119, 4128, 4128, 4136, 4136, 4136, 4138, 4138, 4138, 4144, 4144, 4144, 4147, 4149, 4149, 4152, 4152, 4160, 4168, 4169, 4169, 4169, 4174, 4174, 4174, 4174, 4174, 4177, 4184, 4184, 4184, 4184, 4184, 4185, 4185, 4194, 4194, 4194, 4194, 4197, 4197, 4202, 4202, 4204, 4204, 4212, 4212, 4212, 4219, 4228, 4228, 4231, 4237, 4237, 4243, 4252, 4252, 4258, 4260, 4266, 4266, 4267, 4267, 4272, 4278, 4281, 4281, 4281, 4281, 4289, 4295, 4295, 4295, 4295, 4295, 4295, 4296, 4305, 4313, 4317, 4317, 4317, 4317, 4317, 4326, 4333, 4333, 4333, 4336, 4344, 4353, 4360, 4360, 4367, 4376, 4378, 4381, 4381, 4387, 4391, 4397, 4406, 4413, 4413, 4420, 4420, 4420, 4420, 4424, 4424, 4427, 4433, 4441, 4447, 4454, 4454, 4460, 4461, 4461, 4461, 4461, 4463, 4467, 4474, 4483, 4483, 4484, 4484, 4484, 4488, 4494, 4498, 4502, 4505, 4505, 4505, 4505, 4508, 4515, 4515, 4515, 4520, 4523, 4523, 4523, 4523, 4526, 4531, 4531, 4531, 4531, 4532, 4532, 4537, 4541, 4541, 4547, 4547, 4549, 4549, 4554, 4556, 4556, 4559, 4559, 4559, 4559, 4565, 4570, 4570, 4577, 4577, 4583, 4583, 4583, 4583, 4591, 4598, 4598, 4599, 4600, 4600, 4609, 4609, 4618, 4618, 4618, 4618, 4627, 4627, 4630, 4630, 4630, 4630, 4630, 4630, 4630, 4637, 4646, 4646, 4646, 4651, 4651, 4651, 4657, 4657, 4661, 4670, 4670, 4670, 4670, 4674, 4674, 4674, 4674, 4681, 4681, 4683, 4689, 4693, 4696, 4696, 4697, 4697, 4697, 4697, 4697, 4704, 4711, 4711, 4715, 4719, 4721, 4721, 4721, 4721, 4728, 4737, 4737, 4743, 4743, 4743, 4743]
1325.511 ops/ms
# Warmup Iteration   2: 1333.368 ops/ms
# Warmup Iteration   3: 1429.237 ops/ms
Iteration   1: 1443.217 ops/ms
Iteration   2: 1366.159 ops/ms
Iteration   3: 1353.547 ops/ms
Iteration   4: 1389.852 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:     1185704
  invocation_counter:               1185704
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(584089) displacement(56)
                                    not taken(601104)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(601104) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
#+end_src
*** print method data, branch always, 100
#+begin_src bash
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:+UnlockDiagnosticVMOptions -XX:+PrintMethodData -XX:-UseSuperWord -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 0.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1:
maxLongA: [
8, 8, 17, 19, 24, 26, 35, 40, 49, 56, 60, 62, 66, 74, 74, 79, 86, 86, 87, 89, 93, 96, 102, 104, 105, 107, 109, 111, 115, 121, 130, 135, 143, 149, 157, 160, 166, 174, 183, 183, 183, 188, 196, 197, 199, 203, 211, 211, 216, 222, 231, 232, 240, 244, 252, 260, 266, 270, 279, 281, 282, 290, 298, 307, 308, 317, 322, 325, 327, 331, 337, 345, 351, 352, 353, 356, 362, 367, 373, 382, 390, 390, 397, 405, 408, 412, 418, 421, 425, 430, 438, 441, 448, 456, 458, 466, 470, 472, 475, 475, 476, 481, 482, 487, 491, 495, 496, 498, 506, 509, 516, 516, 524, 531, 533, 534, 540, 545, 551, 554, 554, 559, 560, 563, 569, 577, 584, 588, 591, 600, 601, 607, 615, 617, 623, 627, 630, 637, 638, 643, 649, 654, 658, 660, 662, 663, 670, 672, 676, 679, 688, 694, 702, 703, 707, 711, 717, 718, 720, 729, 729, 731, 740, 745, 745, 745, 747, 747, 754, 759, 767, 767, 772, 774, 775, 783, 784, 789, 789, 790, 794, 800, 801, 805, 807, 807, 816, 819, 827, 832, 840, 842, 844, 850, 858, 862, 862, 863, 865, 871, 879, 883, 889, 894, 894, 900, 905, 913, 918, 919, 927, 932, 939, 940, 948, 956, 961, 961, 961, 963, 970, 977, 977, 980, 983, 984, 987, 993, 1000, 1009, 1013, 1020, 1026, 1028, 1031, 1032, 1040, 1046, 1054, 1061, 1066, 1069, 1077, 1082, 1091, 1096, 1099, 1106, 1110, 1112, 1121, 1124, 1131, 1135, 1137, 1144, 1147, 1149, 1158, 1166, 1173, 1180, 1188, 1189, 1190, 1196, 1197, 1204, 1205, 1205, 1207, 1210, 1213, 1214, 1220, 1227, 1232, 1238, 1243, 1243, 1252, 1258, 1258, 1260, 1268, 1274, 1278, 1283, 1289, 1293, 1294, 1297, 1304, 1310, 1319, 1324, 1326, 1328, 1330, 1338, 1347, 1350, 1351, 1359, 1367, 1371, 1371, 1376, 1376, 1382, 1390, 1392, 1392, 1395, 1399, 1402, 1403, 1411, 1414, 1419, 1423, 1432, 1433, 1439, 1447, 1450, 1456, 1464, 1473, 1480, 1481, 1488, 1492, 1497, 1500, 1502, 1511, 1515, 1523, 1523, 1524, 1527, 1529, 1530, 1533, 1538, 1540, 1543, 1552, 1557, 1566, 1570, 1570, 1578, 1586, 1593, 1594, 1595, 1595, 1602, 1606, 1613, 1617, 1626, 1630, 1636, 1636, 1643, 1649, 1657, 1659, 1662, 1664, 1666, 1667, 1668, 1668, 1674, 1680, 1680, 1682, 1690, 1692, 1692, 1700, 1707, 1708, 1713, 1716, 1716, 1716, 1724, 1725, 1725, 1734, 1739, 1742, 1751, 1759, 1768, 1768, 1769, 1775, 1779, 1787, 1788, 1790, 1793, 1802, 1807, 1813, 1821, 1829, 1831, 1839, 1844, 1844, 1845, 1848, 1849, 1856, 1860, 1869, 1878, 1882, 1889, 1897, 1902, 1906, 1913, 1914, 1918, 1921, 1928, 1935, 1936, 1937, 1940, 1948, 1948, 1950, 1952, 1958, 1961, 1968, 1968, 1975, 1979, 1982, 1985, 1989, 1997, 2003, 2003, 2010, 2010, 2013, 2017, 2020, 2023, 2030, 2038, 2046, 2050, 2052, 2052, 2058, 2059, 2064, 2070, 2077, 2078, 2084, 2084, 2087, 2096, 2097, 2105, 2109, 2109, 2113, 2119, 2127, 2135, 2141, 2148, 2148, 2155, 2162, 2162, 2165, 2168, 2169, 2169, 2177, 2185, 2186, 2188, 2192, 2199, 2208, 2214, 2217, 2226, 2228, 2231, 2240, 2242, 2248, 2256, 2263, 2264, 2272, 2278, 2279, 2286, 2287, 2293, 2299, 2300, 2305, 2311, 2318, 2326, 2329, 2331, 2334, 2338, 2341, 2345, 2347, 2350, 2353, 2354, 2363, 2364, 2365, 2369, 2374, 2377, 2386, 2389, 2394, 2397, 2403, 2407, 2409, 2416, 2424, 2427, 2433, 2433, 2439, 2445, 2452, 2453, 2459, 2465, 2473, 2479, 2488, 2493, 2500, 2507, 2511, 2520, 2522, 2525, 2527, 2532, 2540, 2546, 2549, 2555, 2558, 2559, 2561, 2568, 2573, 2580, 2583, 2586, 2593, 2598, 2607, 2616, 2619, 2626, 2630, 2632, 2633, 2641, 2641, 2649, 2649, 2651, 2660, 2660, 2667, 2674, 2682, 2682, 2685, 2691, 2698, 2700, 2703, 2707, 2713, 2718, 2726, 2727, 2730, 2734, 2734, 2740, 2747, 2756, 2764, 2764, 2765, 2771, 2780, 2788, 2797, 2804, 2806, 2806, 2813, 2821, 2823, 2825, 2829, 2830, 2830, 2838, 2843, 2848, 2855, 2863, 2871, 2877, 2885, 2889, 2897, 2904, 2913, 2922, 2928, 2930, 2938, 2947, 2956, 2964, 2968, 2976, 2979, 2985, 2993, 2997, 3001, 3010, 3013, 3021, 3024, 3028, 3029, 3031, 3031, 3039, 3046, 3047, 3047, 3054, 3061, 3068, 3076, 3080, 3080, 3081, 3084, 3084, 3085, 3085, 3089, 3096, 3101, 3110, 3114, 3117, 3122, 3129, 3137, 3138, 3139, 3144, 3149, 3157, 3162, 3167, 3175, 3175, 3182, 3189, 3190, 3193, 3201, 3207, 3211, 3216, 3219, 3219, 3223, 3223, 3223, 3224, 3233, 3242, 3243, 3247, 3247, 3252, 3252, 3260, 3264, 3270, 3271, 3278, 3283, 3284, 3292, 3298, 3300, 3301, 3301, 3306, 3306, 3315, 3323, 3326, 3326, 3327, 3333, 3340, 3347, 3351, 3356, 3362, 3368, 3374, 3374, 3380, 3388, 3396, 3397, 3401, 3406, 3406, 3406, 3413, 3417, 3422, 3425, 3425, 3425, 3431, 3431, 3432, 3434, 3443, 3445, 3453, 3461, 3462, 3466, 3473, 3476, 3485, 3491, 3494, 3501, 3510, 3514, 3514, 3517, 3519, 3519, 3519, 3521, 3529, 3530, 3533, 3542, 3545, 3552, 3561, 3568, 3573, 3574, 3579, 3585, 3589, 3589, 3596, 3596, 3604, 3611, 3620, 3625, 3627, 3627, 3629, 3631, 3633, 3641, 3650, 3656, 3656, 3657, 3664, 3669, 3669, 3678, 3682, 3684, 3686, 3687, 3691, 3691, 3700, 3702, 3709, 3711, 3719, 3722, 3730, 3733, 3733, 3742, 3746, 3748, 3754, 3759, 3760, 3760, 3765, 3772, 3779, 3779, 3785, 3791, 3798, 3805, 3814, 3821, 3825, 3830, 3831, 3837, 3839, 3847, 3851, 3852, 3859, 3863, 3864, 3872, 3881, 3885, 3893, 3899, 3902, 3911, 3916, 3924, 3929, 3936, 3943, 3943, 3946, 3948, 3950, 3957, 3966, 3967, 3970, 3970, 3971, 3978, 3982, 3986, 3990, 3997, 4003, 4007, 4016, 4021, 4028, 4031, 4033, 4038, 4043, 4049, 4053, 4056, 4064, 4067, 4069, 4071, 4075, 4076, 4080, 4084, 4087, 4087, 4093, 4093, 4099, 4102, 4111, 4118, 4123, 4128, 4129, 4129, 4135, 4135, 4136, 4136, 4141, 4146, 4155, 4163, 4166, 4174, 4179, 4183, 4190, 4194, 4197, 4206, 4207, 4211, 4211, 4218, 4225, 4226, 4229, 4230, 4235, 4237, 4240, 4249, 4249, 4249, 4257, 4260, 4268, 4275, 4278, 4282, 4285, 4291, 4292, 4295, 4299, 4304, 4309, 4318, 4318, 4326, 4331, 4331, 4334, 4339, 4341, 4350, 4355, 4355, 4357, 4366, 4366, 4370, 4374, 4382, 4383, 4383, 4384, 4389, 4393, 4399, 4406, 4407, 4407, 4414, 4418, 4422, 4431, 4436, 4441, 4449, 4458, 4458, 4458, 4461, 4462, 4468, 4472, 4476, 4485, 4490, 4491, 4491, 4500, 4508, 4516, 4516, 4522, 4530, 4530, 4534, 4542, 4550, 4550, 4553, 4562, 4569, 4574, 4581, 4584, 4592, 4600, 4608, 4610, 4610, 4611, 4614, 4622, 4631, 4639, 4641, 4644, 4646, 4653, 4662, 4668, 4677, 4684, 4684, 4686, 4686, 4690, 4696, 4696, 4696, 4702, 4703, 4709, 4711, 4712, 4713, 4719, 4722, 4725, 4734, 4734, 4739, 4740, 4740, 4744, 4751, 4759, 4767, 4770, 4776, 4784, 4790, 4793, 4799, 4802, 4811, 4816, 4823, 4826, 4827, 4828, 4829, 4831, 4833, 4842, 4849, 4854, 4855, 4862, 4864, 4867, 4874, 4878, 4884, 4885, 4885, 4889, 4894, 4899, 4903, 4904, 4905, 4907, 4914, 4921, 4924, 4931, 4934, 4941, 4950, 4959, 4960, 4961, 4968, 4976, 4984, 4984, 4992, 4994, 4996, 4998, 4999, 5008, 5014, 5016, 5016, 5020, 5024, 5031, 5039, 5041, 5042, 5043, 5048, 5052, 5053, 5055, 5058, 5058, 5065, 5070, 5070, 5072, 5073, 5075, 5080, 5085, 5091, 5099, 5100, 5104, 5107, 5107, 5108, 5110, 5118, 5125, 5125, 5132, 5141, 5148, 5157, 5163, 5164, 5168, 5174, 5183, 5186, 5191, 5191, 5192, 5201, 5208, 5211, 5219, 5225, 5225, 5228, 5230, 5235, 5238, 5240, 5240, 5246, 5254, 5262, 5267, 5269, 5275, 5279, 5283, 5290, 5290, 5298, 5304, 5306, 5312, 5313, 5319, 5328, 5333, 5338, 5344, 5347, 5350, 5358, 5359, 5361, 5369, 5372, 5379, 5382, 5385, 5385, 5385, 5385, 5389, 5396, 5405, 5407, 5409, 5409, 5417, 5421, 5429, 5435, 5437, 5442, 5443, 5449, 5453, 5458, 5467, 5468, 5473, 5477, 5484, 5487, 5492, 5498, 5507, 5512, 5515, 5524, 5524, 5529, 5533, 5537, 5546, 5552, 5553, 5555, 5556, 5563, 5568, 5571, 5572, 5577, 5577, 5583, 5592, 5598, 5603, 5603, 5611, 5619, 5627, 5628, 5628, 5637, 5641, 5645, 5646, 5649, 5654, 5654, 5658, 5658, 5659, 5666, 5667, 5671, 5672, 5681, 5689, 5696, 5703, 5708, 5708, 5708, 5714, 5715, 5722, 5725, 5727, 5734, 5741, 5746, 5755, 5757, 5757, 5762, 5763, 5766, 5773, 5775, 5783, 5788, 5792, 5793, 5802, 5808, 5813, 5813, 5814, 5815, 5817, 5822, 5828, 5837, 5842, 5846, 5855, 5862, 5869, 5871, 5874, 5878, 5880, 5883, 5888, 5894, 5903, 5908, 5917, 5923, 5925, 5932, 5936, 5938, 5944, 5944, 5945, 5949, 5957, 5962, 5962, 5967, 5974, 5976, 5985, 5992, 5999, 6000, 6000, 6006, 6013, 6017, 6025, 6033, 6040, 6043, 6046, 6047, 6050, 6058, 6059, 6063, 6070, 6070, 6078, 6080, 6082, 6086, 6090, 6094, 6096, 6096, 6102, 6102, 6105, 6105, 6111, 6119, 6120, 6128, 6134, 6136, 6139, 6143, 6144, 6148, 6151, 6153, 6159, 6167, 6170, 6174, 6178, 6178, 6178, 6185, 6186, 6192, 6193, 6198, 6199, 6203, 6204, 6213, 6219, 6223, 6224, 6233, 6238, 6238, 6242, 6243, 6244, 6249, 6255, 6263, 6268, 6275, 6276, 6281, 6289, 6294, 6298, 6302, 6311, 6314, 6322, 6331, 6340, 6347, 6351, 6354, 6357, 6358, 6367, 6368, 6373, 6380, 6381, 6390, 6391, 6398, 6398, 6406, 6409, 6412, 6412, 6417, 6420, 6429, 6432, 6437, 6440, 6447, 6456, 6456, 6463, 6464, 6468, 6477, 6483, 6492, 6492, 6498, 6502, 6505, 6514, 6519, 6522, 6522, 6522, 6531, 6536, 6543, 6546, 6549, 6557, 6565, 6574, 6574, 6583, 6583, 6592, 6599, 6603, 6611, 6613, 6618, 6625, 6630, 6639, 6645, 6653, 6661, 6669, 6675, 6679, 6685, 6692, 6694, 6700, 6702, 6704, 6709, 6718, 6726, 6729, 6737, 6739, 6745, 6749, 6749, 6753, 6755, 6755, 6762, 6763, 6763, 6766, 6775, 6782, 6786, 6794, 6802, 6804, 6810, 6815, 6817, 6819, 6822, 6828, 6832, 6835, 6842, 6844, 6844, 6850, 6854, 6855, 6857, 6864, 6871, 6876, 6876, 6876, 6880, 6881, 6889, 6891, 6897, 6904, 6911, 6912, 6915, 6922, 6929, 6936, 6938, 6941, 6944, 6945, 6954, 6962, 6966, 6975, 6975, 6977, 6986, 6993, 6994, 7001, 7003, 7012, 7020, 7021, 7024, 7025, 7033, 7033, 7039, 7042, 7046, 7051, 7058, 7062, 7063, 7065, 7066, 7069, 7073, 7077, 7086, 7089, 7097, 7103, 7105, 7111, 7117, 7121, 7127, 7130, 7136, 7140, 7143, 7143, 7146, 7147, 7154, 7159, 7161, 7162, 7166, 7169, 7171, 7172, 7175, 7177, 7186, 7189, 7190, 7194, 7197, 7201, 7201, 7207, 7215, 7219, 7222, 7226, 7227, 7236, 7237, 7242, 7248, 7250, 7255, 7261, 7263, 7272, 7275, 7276, 7284, 7285, 7286, 7288, 7294, 7300, 7307, 7308, 7315, 7320, 7323, 7331, 7333, 7342, 7342, 7347, 7353, 7354, 7359, 7365, 7371, 7378, 7384, 7385, 7390, 7398, 7398, 7403, 7410, 7410, 7411, 7414, 7422, 7429, 7432, 7438, 7445, 7449, 7452, 7460, 7467, 7471, 7475, 7476, 7484, 7492, 7493, 7502, 7504, 7505, 7506, 7512, 7516, 7516, 7516, 7522, 7528, 7528, 7537, 7543, 7552, 7557, 7563, 7571, 7578, 7583, 7585, 7588, 7596, 7601, 7601, 7605, 7612, 7614, 7622, 7629, 7632, 7634, 7642, 7645, 7650, 7658, 7661, 7661, 7667, 7671, 7672, 7681, 7681, 7687, 7696, 7702, 7711, 7718, 7719, 7721, 7723, 7724, 7731, 7738, 7745, 7752, 7758, 7762, 7764, 7766, 7768, 7769, 7775, 7779, 7781, 7785, 7793, 7801, 7805, 7807, 7814, 7818, 7824, 7827, 7836, 7839, 7847, 7849, 7854, 7858, 7858, 7862, 7868, 7872, 7872, 7875, 7881, 7881, 7889, 7893, 7899, 7902, 7907, 7914, 7923, 7930, 7938, 7940, 7947, 7949, 7952, 7955, 7964, 7971, 7975, 7976, 7978, 7981, 7981, 7981, 7983, 7992, 7994, 7998, 8003, 8010, 8013, 8016, 8017, 8021, 8022, 8023, 8026, 8034, 8038, 8047, 8050, 8055, 8063, 8072, 8072, 8075, 8082, 8082, 8088, 8094, 8098, 8105, 8112, 8115, 8117, 8122, 8125, 8133, 8136, 8144, 8148, 8153, 8158, 8160, 8165, 8171, 8171, 8171, 8177, 8183, 8188, 8194, 8197, 8202, 8203, 8204, 8208, 8211, 8218, 8220, 8229, 8234, 8239, 8240, 8240, 8247, 8254, 8254, 8262, 8266, 8271, 8273, 8277, 8285, 8292, 8292, 8301, 8306, 8306, 8306, 8314, 8319, 8327, 8329, 8334, 8334, 8343, 8345, 8348, 8349, 8357, 8364, 8369, 8372, 8379, 8387, 8391, 8399, 8405, 8412, 8418, 8418, 8424, 8428, 8428, 8435, 8441, 8449, 8454, 8457, 8461, 8462, 8471, 8472, 8476, 8476, 8480, 8486, 8494, 8494, 8498, 8503, 8505, 8511, 8512, 8515, 8520, 8527, 8529, 8531, 8535, 8541, 8543, 8546, 8550, 8554, 8558, 8560, 8562, 8570, 8576, 8585, 8586, 8587, 8589, 8592, 8595, 8599, 8602, 8605, 8610, 8613, 8619, 8628, 8631, 8634, 8636, 8636, 8639, 8647, 8650, 8656, 8663, 8663, 8665, 8667, 8671, 8674, 8676, 8681, 8681, 8683, 8687, 8688, 8697, 8699, 8704, 8710, 8710, 8716, 8721, 8726, 8733, 8741, 8746, 8749, 8754, 8757, 8766, 8772, 8780, 8785, 8788, 8791, 8796, 8801, 8809, 8817, 8826, 8828, 8832, 8837, 8837, 8837, 8840, 8840, 8848, 8855, 8857, 8857, 8858, 8867, 8873, 8873, 8874, 8875, 8877, 8881, 8884, 8886, 8892, 8893, 8900, 8901, 8909, 8916, 8916, 8922, 8930, 8939, 8947, 8947, 8949, 8954, 8959, 8965, 8973, 8978, 8979, 8979, 8986, 8995, 8997, 9002]
maxLongB: [
7, 8, 8, 17, 19, 24, 26, 35, 40, 49, 56, 60, 62, 66, 74, 74, 79, 86, 86, 87, 89, 93, 96, 102, 104, 105, 107, 109, 111, 115, 121, 130, 135, 143, 149, 157, 160, 166, 174, 183, 183, 183, 188, 196, 197, 199, 203, 211, 211, 216, 222, 231, 232, 240, 244, 252, 260, 266, 270, 279, 281, 282, 290, 298, 307, 308, 317, 322, 325, 327, 331, 337, 345, 351, 352, 353, 356, 362, 367, 373, 382, 390, 390, 397, 405, 408, 412, 418, 421, 425, 430, 438, 441, 448, 456, 458, 466, 470, 472, 475, 475, 476, 481, 482, 487, 491, 495, 496, 498, 506, 509, 516, 516, 524, 531, 533, 534, 540, 545, 551, 554, 554, 559, 560, 563, 569, 577, 584, 588, 591, 600, 601, 607, 615, 617, 623, 627, 630, 637, 638, 643, 649, 654, 658, 660, 662, 663, 670, 672, 676, 679, 688, 694, 702, 703, 707, 711, 717, 718, 720, 729, 729, 731, 740, 745, 745, 745, 747, 747, 754, 759, 767, 767, 772, 774, 775, 783, 784, 789, 789, 790, 794, 800, 801, 805, 807, 807, 816, 819, 827, 832, 840, 842, 844, 850, 858, 862, 862, 863, 865, 871, 879, 883, 889, 894, 894, 900, 905, 913, 918, 919, 927, 932, 939, 940, 948, 956, 961, 961, 961, 963, 970, 977, 977, 980, 983, 984, 987, 993, 1000, 1009, 1013, 1020, 1026, 1028, 1031, 1032, 1040, 1046, 1054, 1061, 1066, 1069, 1077, 1082, 1091, 1096, 1099, 1106, 1110, 1112, 1121, 1124, 1131, 1135, 1137, 1144, 1147, 1149, 1158, 1166, 1173, 1180, 1188, 1189, 1190, 1196, 1197, 1204, 1205, 1205, 1207, 1210, 1213, 1214, 1220, 1227, 1232, 1238, 1243, 1243, 1252, 1258, 1258, 1260, 1268, 1274, 1278, 1283, 1289, 1293, 1294, 1297, 1304, 1310, 1319, 1324, 1326, 1328, 1330, 1338, 1347, 1350, 1351, 1359, 1367, 1371, 1371, 1376, 1376, 1382, 1390, 1392, 1392, 1395, 1399, 1402, 1403, 1411, 1414, 1419, 1423, 1432, 1433, 1439, 1447, 1450, 1456, 1464, 1473, 1480, 1481, 1488, 1492, 1497, 1500, 1502, 1511, 1515, 1523, 1523, 1524, 1527, 1529, 1530, 1533, 1538, 1540, 1543, 1552, 1557, 1566, 1570, 1570, 1578, 1586, 1593, 1594, 1595, 1595, 1602, 1606, 1613, 1617, 1626, 1630, 1636, 1636, 1643, 1649, 1657, 1659, 1662, 1664, 1666, 1667, 1668, 1668, 1674, 1680, 1680, 1682, 1690, 1692, 1692, 1700, 1707, 1708, 1713, 1716, 1716, 1716, 1724, 1725, 1725, 1734, 1739, 1742, 1751, 1759, 1768, 1768, 1769, 1775, 1779, 1787, 1788, 1790, 1793, 1802, 1807, 1813, 1821, 1829, 1831, 1839, 1844, 1844, 1845, 1848, 1849, 1856, 1860, 1869, 1878, 1882, 1889, 1897, 1902, 1906, 1913, 1914, 1918, 1921, 1928, 1935, 1936, 1937, 1940, 1948, 1948, 1950, 1952, 1958, 1961, 1968, 1968, 1975, 1979, 1982, 1985, 1989, 1997, 2003, 2003, 2010, 2010, 2013, 2017, 2020, 2023, 2030, 2038, 2046, 2050, 2052, 2052, 2058, 2059, 2064, 2070, 2077, 2078, 2084, 2084, 2087, 2096, 2097, 2105, 2109, 2109, 2113, 2119, 2127, 2135, 2141, 2148, 2148, 2155, 2162, 2162, 2165, 2168, 2169, 2169, 2177, 2185, 2186, 2188, 2192, 2199, 2208, 2214, 2217, 2226, 2228, 2231, 2240, 2242, 2248, 2256, 2263, 2264, 2272, 2278, 2279, 2286, 2287, 2293, 2299, 2300, 2305, 2311, 2318, 2326, 2329, 2331, 2334, 2338, 2341, 2345, 2347, 2350, 2353, 2354, 2363, 2364, 2365, 2369, 2374, 2377, 2386, 2389, 2394, 2397, 2403, 2407, 2409, 2416, 2424, 2427, 2433, 2433, 2439, 2445, 2452, 2453, 2459, 2465, 2473, 2479, 2488, 2493, 2500, 2507, 2511, 2520, 2522, 2525, 2527, 2532, 2540, 2546, 2549, 2555, 2558, 2559, 2561, 2568, 2573, 2580, 2583, 2586, 2593, 2598, 2607, 2616, 2619, 2626, 2630, 2632, 2633, 2641, 2641, 2649, 2649, 2651, 2660, 2660, 2667, 2674, 2682, 2682, 2685, 2691, 2698, 2700, 2703, 2707, 2713, 2718, 2726, 2727, 2730, 2734, 2734, 2740, 2747, 2756, 2764, 2764, 2765, 2771, 2780, 2788, 2797, 2804, 2806, 2806, 2813, 2821, 2823, 2825, 2829, 2830, 2830, 2838, 2843, 2848, 2855, 2863, 2871, 2877, 2885, 2889, 2897, 2904, 2913, 2922, 2928, 2930, 2938, 2947, 2956, 2964, 2968, 2976, 2979, 2985, 2993, 2997, 3001, 3010, 3013, 3021, 3024, 3028, 3029, 3031, 3031, 3039, 3046, 3047, 3047, 3054, 3061, 3068, 3076, 3080, 3080, 3081, 3084, 3084, 3085, 3085, 3089, 3096, 3101, 3110, 3114, 3117, 3122, 3129, 3137, 3138, 3139, 3144, 3149, 3157, 3162, 3167, 3175, 3175, 3182, 3189, 3190, 3193, 3201, 3207, 3211, 3216, 3219, 3219, 3223, 3223, 3223, 3224, 3233, 3242, 3243, 3247, 3247, 3252, 3252, 3260, 3264, 3270, 3271, 3278, 3283, 3284, 3292, 3298, 3300, 3301, 3301, 3306, 3306, 3315, 3323, 3326, 3326, 3327, 3333, 3340, 3347, 3351, 3356, 3362, 3368, 3374, 3374, 3380, 3388, 3396, 3397, 3401, 3406, 3406, 3406, 3413, 3417, 3422, 3425, 3425, 3425, 3431, 3431, 3432, 3434, 3443, 3445, 3453, 3461, 3462, 3466, 3473, 3476, 3485, 3491, 3494, 3501, 3510, 3514, 3514, 3517, 3519, 3519, 3519, 3521, 3529, 3530, 3533, 3542, 3545, 3552, 3561, 3568, 3573, 3574, 3579, 3585, 3589, 3589, 3596, 3596, 3604, 3611, 3620, 3625, 3627, 3627, 3629, 3631, 3633, 3641, 3650, 3656, 3656, 3657, 3664, 3669, 3669, 3678, 3682, 3684, 3686, 3687, 3691, 3691, 3700, 3702, 3709, 3711, 3719, 3722, 3730, 3733, 3733, 3742, 3746, 3748, 3754, 3759, 3760, 3760, 3765, 3772, 3779, 3779, 3785, 3791, 3798, 3805, 3814, 3821, 3825, 3830, 3831, 3837, 3839, 3847, 3851, 3852, 3859, 3863, 3864, 3872, 3881, 3885, 3893, 3899, 3902, 3911, 3916, 3924, 3929, 3936, 3943, 3943, 3946, 3948, 3950, 3957, 3966, 3967, 3970, 3970, 3971, 3978, 3982, 3986, 3990, 3997, 4003, 4007, 4016, 4021, 4028, 4031, 4033, 4038, 4043, 4049, 4053, 4056, 4064, 4067, 4069, 4071, 4075, 4076, 4080, 4084, 4087, 4087, 4093, 4093, 4099, 4102, 4111, 4118, 4123, 4128, 4129, 4129, 4135, 4135, 4136, 4136, 4141, 4146, 4155, 4163, 4166, 4174, 4179, 4183, 4190, 4194, 4197, 4206, 4207, 4211, 4211, 4218, 4225, 4226, 4229, 4230, 4235, 4237, 4240, 4249, 4249, 4249, 4257, 4260, 4268, 4275, 4278, 4282, 4285, 4291, 4292, 4295, 4299, 4304, 4309, 4318, 4318, 4326, 4331, 4331, 4334, 4339, 4341, 4350, 4355, 4355, 4357, 4366, 4366, 4370, 4374, 4382, 4383, 4383, 4384, 4389, 4393, 4399, 4406, 4407, 4407, 4414, 4418, 4422, 4431, 4436, 4441, 4449, 4458, 4458, 4458, 4461, 4462, 4468, 4472, 4476, 4485, 4490, 4491, 4491, 4500, 4508, 4516, 4516, 4522, 4530, 4530, 4534, 4542, 4550, 4550, 4553, 4562, 4569, 4574, 4581, 4584, 4592, 4600, 4608, 4610, 4610, 4611, 4614, 4622, 4631, 4639, 4641, 4644, 4646, 4653, 4662, 4668, 4677, 4684, 4684, 4686, 4686, 4690, 4696, 4696, 4696, 4702, 4703, 4709, 4711, 4712, 4713, 4719, 4722, 4725, 4734, 4734, 4739, 4740, 4740, 4744, 4751, 4759, 4767, 4770, 4776, 4784, 4790, 4793, 4799, 4802, 4811, 4816, 4823, 4826, 4827, 4828, 4829, 4831, 4833, 4842, 4849, 4854, 4855, 4862, 4864, 4867, 4874, 4878, 4884, 4885, 4885, 4889, 4894, 4899, 4903, 4904, 4905, 4907, 4914, 4921, 4924, 4931, 4934, 4941, 4950, 4959, 4960, 4961, 4968, 4976, 4984, 4984, 4992, 4994, 4996, 4998, 4999, 5008, 5014, 5016, 5016, 5020, 5024, 5031, 5039, 5041, 5042, 5043, 5048, 5052, 5053, 5055, 5058, 5058, 5065, 5070, 5070, 5072, 5073, 5075, 5080, 5085, 5091, 5099, 5100, 5104, 5107, 5107, 5108, 5110, 5118, 5125, 5125, 5132, 5141, 5148, 5157, 5163, 5164, 5168, 5174, 5183, 5186, 5191, 5191, 5192, 5201, 5208, 5211, 5219, 5225, 5225, 5228, 5230, 5235, 5238, 5240, 5240, 5246, 5254, 5262, 5267, 5269, 5275, 5279, 5283, 5290, 5290, 5298, 5304, 5306, 5312, 5313, 5319, 5328, 5333, 5338, 5344, 5347, 5350, 5358, 5359, 5361, 5369, 5372, 5379, 5382, 5385, 5385, 5385, 5385, 5389, 5396, 5405, 5407, 5409, 5409, 5417, 5421, 5429, 5435, 5437, 5442, 5443, 5449, 5453, 5458, 5467, 5468, 5473, 5477, 5484, 5487, 5492, 5498, 5507, 5512, 5515, 5524, 5524, 5529, 5533, 5537, 5546, 5552, 5553, 5555, 5556, 5563, 5568, 5571, 5572, 5577, 5577, 5583, 5592, 5598, 5603, 5603, 5611, 5619, 5627, 5628, 5628, 5637, 5641, 5645, 5646, 5649, 5654, 5654, 5658, 5658, 5659, 5666, 5667, 5671, 5672, 5681, 5689, 5696, 5703, 5708, 5708, 5708, 5714, 5715, 5722, 5725, 5727, 5734, 5741, 5746, 5755, 5757, 5757, 5762, 5763, 5766, 5773, 5775, 5783, 5788, 5792, 5793, 5802, 5808, 5813, 5813, 5814, 5815, 5817, 5822, 5828, 5837, 5842, 5846, 5855, 5862, 5869, 5871, 5874, 5878, 5880, 5883, 5888, 5894, 5903, 5908, 5917, 5923, 5925, 5932, 5936, 5938, 5944, 5944, 5945, 5949, 5957, 5962, 5962, 5967, 5974, 5976, 5985, 5992, 5999, 6000, 6000, 6006, 6013, 6017, 6025, 6033, 6040, 6043, 6046, 6047, 6050, 6058, 6059, 6063, 6070, 6070, 6078, 6080, 6082, 6086, 6090, 6094, 6096, 6096, 6102, 6102, 6105, 6105, 6111, 6119, 6120, 6128, 6134, 6136, 6139, 6143, 6144, 6148, 6151, 6153, 6159, 6167, 6170, 6174, 6178, 6178, 6178, 6185, 6186, 6192, 6193, 6198, 6199, 6203, 6204, 6213, 6219, 6223, 6224, 6233, 6238, 6238, 6242, 6243, 6244, 6249, 6255, 6263, 6268, 6275, 6276, 6281, 6289, 6294, 6298, 6302, 6311, 6314, 6322, 6331, 6340, 6347, 6351, 6354, 6357, 6358, 6367, 6368, 6373, 6380, 6381, 6390, 6391, 6398, 6398, 6406, 6409, 6412, 6412, 6417, 6420, 6429, 6432, 6437, 6440, 6447, 6456, 6456, 6463, 6464, 6468, 6477, 6483, 6492, 6492, 6498, 6502, 6505, 6514, 6519, 6522, 6522, 6522, 6531, 6536, 6543, 6546, 6549, 6557, 6565, 6574, 6574, 6583, 6583, 6592, 6599, 6603, 6611, 6613, 6618, 6625, 6630, 6639, 6645, 6653, 6661, 6669, 6675, 6679, 6685, 6692, 6694, 6700, 6702, 6704, 6709, 6718, 6726, 6729, 6737, 6739, 6745, 6749, 6749, 6753, 6755, 6755, 6762, 6763, 6763, 6766, 6775, 6782, 6786, 6794, 6802, 6804, 6810, 6815, 6817, 6819, 6822, 6828, 6832, 6835, 6842, 6844, 6844, 6850, 6854, 6855, 6857, 6864, 6871, 6876, 6876, 6876, 6880, 6881, 6889, 6891, 6897, 6904, 6911, 6912, 6915, 6922, 6929, 6936, 6938, 6941, 6944, 6945, 6954, 6962, 6966, 6975, 6975, 6977, 6986, 6993, 6994, 7001, 7003, 7012, 7020, 7021, 7024, 7025, 7033, 7033, 7039, 7042, 7046, 7051, 7058, 7062, 7063, 7065, 7066, 7069, 7073, 7077, 7086, 7089, 7097, 7103, 7105, 7111, 7117, 7121, 7127, 7130, 7136, 7140, 7143, 7143, 7146, 7147, 7154, 7159, 7161, 7162, 7166, 7169, 7171, 7172, 7175, 7177, 7186, 7189, 7190, 7194, 7197, 7201, 7201, 7207, 7215, 7219, 7222, 7226, 7227, 7236, 7237, 7242, 7248, 7250, 7255, 7261, 7263, 7272, 7275, 7276, 7284, 7285, 7286, 7288, 7294, 7300, 7307, 7308, 7315, 7320, 7323, 7331, 7333, 7342, 7342, 7347, 7353, 7354, 7359, 7365, 7371, 7378, 7384, 7385, 7390, 7398, 7398, 7403, 7410, 7410, 7411, 7414, 7422, 7429, 7432, 7438, 7445, 7449, 7452, 7460, 7467, 7471, 7475, 7476, 7484, 7492, 7493, 7502, 7504, 7505, 7506, 7512, 7516, 7516, 7516, 7522, 7528, 7528, 7537, 7543, 7552, 7557, 7563, 7571, 7578, 7583, 7585, 7588, 7596, 7601, 7601, 7605, 7612, 7614, 7622, 7629, 7632, 7634, 7642, 7645, 7650, 7658, 7661, 7661, 7667, 7671, 7672, 7681, 7681, 7687, 7696, 7702, 7711, 7718, 7719, 7721, 7723, 7724, 7731, 7738, 7745, 7752, 7758, 7762, 7764, 7766, 7768, 7769, 7775, 7779, 7781, 7785, 7793, 7801, 7805, 7807, 7814, 7818, 7824, 7827, 7836, 7839, 7847, 7849, 7854, 7858, 7858, 7862, 7868, 7872, 7872, 7875, 7881, 7881, 7889, 7893, 7899, 7902, 7907, 7914, 7923, 7930, 7938, 7940, 7947, 7949, 7952, 7955, 7964, 7971, 7975, 7976, 7978, 7981, 7981, 7981, 7983, 7992, 7994, 7998, 8003, 8010, 8013, 8016, 8017, 8021, 8022, 8023, 8026, 8034, 8038, 8047, 8050, 8055, 8063, 8072, 8072, 8075, 8082, 8082, 8088, 8094, 8098, 8105, 8112, 8115, 8117, 8122, 8125, 8133, 8136, 8144, 8148, 8153, 8158, 8160, 8165, 8171, 8171, 8171, 8177, 8183, 8188, 8194, 8197, 8202, 8203, 8204, 8208, 8211, 8218, 8220, 8229, 8234, 8239, 8240, 8240, 8247, 8254, 8254, 8262, 8266, 8271, 8273, 8277, 8285, 8292, 8292, 8301, 8306, 8306, 8306, 8314, 8319, 8327, 8329, 8334, 8334, 8343, 8345, 8348, 8349, 8357, 8364, 8369, 8372, 8379, 8387, 8391, 8399, 8405, 8412, 8418, 8418, 8424, 8428, 8428, 8435, 8441, 8449, 8454, 8457, 8461, 8462, 8471, 8472, 8476, 8476, 8480, 8486, 8494, 8494, 8498, 8503, 8505, 8511, 8512, 8515, 8520, 8527, 8529, 8531, 8535, 8541, 8543, 8546, 8550, 8554, 8558, 8560, 8562, 8570, 8576, 8585, 8586, 8587, 8589, 8592, 8595, 8599, 8602, 8605, 8610, 8613, 8619, 8628, 8631, 8634, 8636, 8636, 8639, 8647, 8650, 8656, 8663, 8663, 8665, 8667, 8671, 8674, 8676, 8681, 8681, 8683, 8687, 8688, 8697, 8699, 8704, 8710, 8710, 8716, 8721, 8726, 8733, 8741, 8746, 8749, 8754, 8757, 8766, 8772, 8780, 8785, 8788, 8791, 8796, 8801, 8809, 8817, 8826, 8828, 8832, 8837, 8837, 8837, 8840, 8840, 8848, 8855, 8857, 8857, 8858, 8867, 8873, 8873, 8874, 8875, 8877, 8881, 8884, 8886, 8892, 8893, 8900, 8901, 8909, 8916, 8916, 8922, 8930, 8939, 8947, 8947, 8949, 8954, 8959, 8965, 8973, 8978, 8979, 8979, 8986, 8995, 8997]
2256.606 ops/ms
# Warmup Iteration   2: 2291.044 ops/ms
# Warmup Iteration   3: 2398.906 ops/ms
Iteration   1: 2373.602 ops/ms
Iteration   2: 2141.584 ops/ms
Iteration   3: 2361.451 ops/ms
Iteration   4: 2067.729 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:     1311635
  invocation_counter:               1311635
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(1670) displacement(56)
                                    not taken(1309589)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(1309589) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
#+end_src
*** branch always
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 20.00% complete, ETA 00:12:33
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2136.389 ops/ms
# Warmup Iteration   2: 2138.615 ops/ms
# Warmup Iteration   3: 2221.330 ops/ms
Iteration   1: 2169.961 ops/ms
Iteration   2: 2165.302 ops/ms
Iteration   3: 2050.118 ops/ms
Iteration   4: 2004.827 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax":
  2097.552 ±(99.9%) 536.527 ops/ms [Average]
  (min, avg, max) = (2004.827, 2097.552, 2169.961), stdev = 83.028
  CI (99.9%): [1561.025, 2634.079] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax:asm":
PrintAssembly processed: 323879 total address lines.
Perf output processed (skipped 19.838 seconds):
 Column 1: sampled_pc (20050 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub, version 5, compile id 1028

                     0x000000010cf46d70:   sub		w11, w17, w1
                     0x000000010cf46d74:   csel		w12, wzr, w11, lt
                     0x000000010cf46d78:   mov		w8, #0x1f40
                     0x000000010cf46d7c:   cmp		w12, w8
                     0x000000010cf46d80:   csel		w11, w14, w12, hi
                     0x000000010cf46d84:   add		w12, w11, w1
                     0x000000010cf46d88:   nop
                     0x000000010cf46d8c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@10 (line 272)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.04%          ↗  0x000000010cf46d90:   sbfiz		x11, x1, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46d94:   add		x22, x5, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46d98:   add		x23, x6, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46d9c:   ldr		x7, [x22, #0x10]
                  │  0x000000010cf46da0:   add		x24, x4, x11
  13.18%          │  0x000000010cf46da4:   ldr		x21, [x23, #0x10]
                  │  0x000000010cf46da8:   mov		x11, x7
                  │  0x000000010cf46dac:   cmp		x7, x21
          ╭       │  0x000000010cf46db0:   b.ge		#0x10cf46db8
          │       │  0x000000010cf46db4:   mov		x11, x21
          ↘       │  0x000000010cf46db8:   str		x11, [x24, #0x10]
   0.01%          │  0x000000010cf46dbc:   ldr		x11, [x22, #0x18]
  13.15%          │  0x000000010cf46dc0:   ldr		x7, [x23, #0x18]
                  │  0x000000010cf46dc4:   mov		x21, x11
                  │  0x000000010cf46dc8:   cmp		x11, x7
           ╭      │  0x000000010cf46dcc:   b.ge		#0x10cf46dd4
           │      │  0x000000010cf46dd0:   mov		x21, x7
           ↘      │  0x000000010cf46dd4:   str		x21, [x24, #0x18]
   0.03%          │  0x000000010cf46dd8:   ldr		x11, [x22, #0x20]
   4.28%          │  0x000000010cf46ddc:   ldr		x7, [x23, #0x20]
                  │  0x000000010cf46de0:   mov		x21, x11
                  │  0x000000010cf46de4:   cmp		x11, x7
            ╭     │  0x000000010cf46de8:   b.ge		#0x10cf46df0
            │     │  0x000000010cf46dec:   mov		x21, x7
            ↘     │  0x000000010cf46df0:   str		x21, [x24, #0x20]
   0.04%          │  0x000000010cf46df4:   ldr		x11, [x22, #0x28]
  12.83%          │  0x000000010cf46df8:   ldr		x7, [x23, #0x28]
                  │  0x000000010cf46dfc:   mov		x21, x11
   0.01%          │  0x000000010cf46e00:   cmp		x11, x7
             ╭    │  0x000000010cf46e04:   b.ge		#0x10cf46e0c
             │    │  0x000000010cf46e08:   mov		x21, x7
             ↘    │  0x000000010cf46e0c:   str		x21, [x24, #0x28]
   0.01%          │  0x000000010cf46e10:   ldr		x11, [x22, #0x30]
  10.08%          │  0x000000010cf46e14:   ldr		x7, [x23, #0x30]
                  │  0x000000010cf46e18:   mov		x21, x11
   2.81%          │  0x000000010cf46e1c:   cmp		x11, x7
              ╭   │  0x000000010cf46e20:   b.ge		#0x10cf46e28
              │   │  0x000000010cf46e24:   mov		x21, x7
              ↘   │  0x000000010cf46e28:   str		x21, [x24, #0x30]
   0.01%          │  0x000000010cf46e2c:   ldr		x11, [x22, #0x38]
   5.98%          │  0x000000010cf46e30:   ldr		x7, [x23, #0x38]
                  │  0x000000010cf46e34:   mov		x21, x11
                  │  0x000000010cf46e38:   cmp		x11, x7
               ╭  │  0x000000010cf46e3c:   b.ge		#0x10cf46e44
               │  │  0x000000010cf46e40:   mov		x21, x7
               ↘  │  0x000000010cf46e44:   str		x21, [x24, #0x38]
   0.01%          │  0x000000010cf46e48:   ldr		x11, [x22, #0x40]
  12.60%          │  0x000000010cf46e4c:   ldr		x7, [x23, #0x40]
                  │  0x000000010cf46e50:   mov		x21, x11
                  │  0x000000010cf46e54:   cmp		x11, x7
                ╭ │  0x000000010cf46e58:   b.ge		#0x10cf46e60
                │ │  0x000000010cf46e5c:   mov		x21, x7
                ↘ │  0x000000010cf46e60:   str		x21, [x24, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.04%          │  0x000000010cf46e64:   ldr		x11, [x22, #0x48]
  11.74%          │  0x000000010cf46e68:   ldr		x7, [x23, #0x48]
                  │  0x000000010cf46e6c:   mov		x21, x11
                  │  0x000000010cf46e70:   cmp		x11, x7
                 ╭│  0x000000010cf46e74:   b.ge		#0x10cf46e7c
                 ││  0x000000010cf46e78:   mov		x21, x7
                 ↘│  0x000000010cf46e7c:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@31 (line 271)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  11.09%          │  0x000000010cf46e80:   str		x21, [x24, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010cf46e84:   cmp		w1, w12
                  ╰  0x000000010cf46e88:   b.lt		#0x10cf46d90        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@7 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.70%             0x000000010cf46e8c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg0=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.11%             0x000000010cf46e90:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x000000010cf46e94:   cmp		w1, w17
                     0x000000010cf46e98:   b.lt		#0x10cf46d6c
                     0x000000010cf46e9c:   cmp		w1, w10
                     0x000000010cf46ea0:   b.lt		#0x10cf46c78
....................................................................................................
  98.77%  <total for region 1>
#+end_src
*** branch never
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:+UseNewCode -XX:+UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 20.00% complete, ETA 00:12:36
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2477.184 ops/ms
# Warmup Iteration   2: 2489.760 ops/ms
# Warmup Iteration   3: 2489.405 ops/ms
Iteration   1: 2492.004 ops/ms
Iteration   2: 2489.828 ops/ms
Iteration   3: 2489.923 ops/ms
Iteration   4: 2488.875 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax":
  2490.158 ±(99.9%) 8.522 ops/ms [Average]
  (min, avg, max) = (2488.875, 2490.158, 2492.004), stdev = 1.319
  CI (99.9%): [2481.635, 2498.680] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax:asm":
PrintAssembly processed: 326413 total address lines.
Perf output processed (skipped 19.778 seconds):
 Column 1: sampled_pc (20050 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub, version 5, compile id 1028

                     0x000000010ca0b170:   sub		w11, w17, w1
                     0x000000010ca0b174:   csel		w12, wzr, w11, lt
                     0x000000010ca0b178:   mov		w8, #0x1f40
                     0x000000010ca0b17c:   cmp		w12, w8
                     0x000000010ca0b180:   csel		w11, w14, w12, hi
                     0x000000010ca0b184:   add		w12, w11, w1
                     0x000000010ca0b188:   nop
                     0x000000010ca0b18c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@10 (line 272)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.01%          ↗  0x000000010ca0b190:   sbfiz		x11, x1, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b194:   add		x22, x5, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b198:   add		x23, x6, x11        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b19c:   ldr		x7, [x22, #0x10]
                  │  0x000000010ca0b1a0:   add		x24, x4, x11
  12.87%          │  0x000000010ca0b1a4:   ldr		x21, [x23, #0x10]
                  │  0x000000010ca0b1a8:   mov		x11, x21
                  │  0x000000010ca0b1ac:   cmp		x21, x7
   2.94%  ╭       │  0x000000010ca0b1b0:   b.gt		#0x10ca0b1b8
          │       │  0x000000010ca0b1b4:   mov		x11, x7
          ↘       │  0x000000010ca0b1b8:   str		x11, [x24, #0x10]
   0.02%          │  0x000000010ca0b1bc:   ldr		x11, [x22, #0x18]
   9.75%          │  0x000000010ca0b1c0:   ldr		x7, [x23, #0x18]
                  │  0x000000010ca0b1c4:   mov		x21, x7
                  │  0x000000010ca0b1c8:   cmp		x7, x11
           ╭      │  0x000000010ca0b1cc:   b.gt		#0x10ca0b1d4
           │      │  0x000000010ca0b1d0:   mov		x21, x11
           ↘      │  0x000000010ca0b1d4:   str		x21, [x24, #0x18]
   0.00%          │  0x000000010ca0b1d8:   ldr		x11, [x22, #0x20]
   6.25%          │  0x000000010ca0b1dc:   ldr		x7, [x23, #0x20]
   3.16%          │  0x000000010ca0b1e0:   mov		x21, x7
                  │  0x000000010ca0b1e4:   cmp		x7, x11
   3.06%    ╭     │  0x000000010ca0b1e8:   b.gt		#0x10ca0b1f0
            │     │  0x000000010ca0b1ec:   mov		x21, x11
            ↘     │  0x000000010ca0b1f0:   str		x21, [x24, #0x20]
   0.01%          │  0x000000010ca0b1f4:   ldr		x11, [x22, #0x28]
   9.35%          │  0x000000010ca0b1f8:   ldr		x7, [x23, #0x28]
                  │  0x000000010ca0b1fc:   mov		x21, x7
                  │  0x000000010ca0b200:   cmp		x7, x11
             ╭    │  0x000000010ca0b204:   b.gt		#0x10ca0b20c
             │    │  0x000000010ca0b208:   mov		x21, x11
             ↘    │  0x000000010ca0b20c:   str		x21, [x24, #0x28]
   0.01%          │  0x000000010ca0b210:   ldr		x11, [x22, #0x30]
   9.62%          │  0x000000010ca0b214:   ldr		x7, [x23, #0x30]
   3.20%          │  0x000000010ca0b218:   mov		x21, x7
                  │  0x000000010ca0b21c:   cmp		x7, x11
              ╭   │  0x000000010ca0b220:   b.gt		#0x10ca0b228
              │   │  0x000000010ca0b224:   mov		x21, x11
              ↘   │  0x000000010ca0b228:   str		x21, [x24, #0x30]
   0.02%          │  0x000000010ca0b22c:   ldr		x11, [x22, #0x38]
   9.46%          │  0x000000010ca0b230:   ldr		x7, [x23, #0x38]
                  │  0x000000010ca0b234:   mov		x21, x7
   0.00%          │  0x000000010ca0b238:   cmp		x7, x11
               ╭  │  0x000000010ca0b23c:   b.gt		#0x10ca0b244
               │  │  0x000000010ca0b240:   mov		x21, x11
               ↘  │  0x000000010ca0b244:   str		x21, [x24, #0x38]
   0.01%          │  0x000000010ca0b248:   ldr		x11, [x22, #0x40]
  12.61%          │  0x000000010ca0b24c:   ldr		x7, [x23, #0x40]
                  │  0x000000010ca0b250:   mov		x21, x7
                  │  0x000000010ca0b254:   cmp		x7, x11
                ╭ │  0x000000010ca0b258:   b.gt		#0x10ca0b260
                │ │  0x000000010ca0b25c:   mov		x21, x11
                ↘ │  0x000000010ca0b260:   str		x21, [x24, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.02%          │  0x000000010ca0b264:   ldr		x11, [x22, #0x48]
   9.47%          │  0x000000010ca0b268:   ldr		x7, [x23, #0x48]
                  │  0x000000010ca0b26c:   mov		x21, x7
                  │  0x000000010ca0b270:   cmp		x7, x11
                 ╭│  0x000000010ca0b274:   b.gt		#0x10ca0b27c
                 ││  0x000000010ca0b278:   mov		x21, x11
                 ↘│  0x000000010ca0b27c:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@31 (line 271)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   6.08%          │  0x000000010ca0b280:   str		x21, [x24, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                  │  0x000000010ca0b284:   cmp		w1, w12
                  ╰  0x000000010ca0b288:   b.lt		#0x10ca0b190        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@7 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.81%             0x000000010ca0b28c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg0=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.12%             0x000000010ca0b290:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x000000010ca0b294:   cmp		w1, w17
                     0x000000010ca0b298:   b.lt		#0x10ca0b16c
                     0x000000010ca0b29c:   cmp		w1, w10
                     0x000000010ca0b2a0:   b.lt		#0x10ca0b078
....................................................................................................
  98.86%  <total for region 1>
#+end_src
*** base
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longLoopMax
# Parameters: (includeEquals = true, probability = 100, size = 2048)

# Run progress: 20.00% complete, ETA 00:12:35
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2551.565 ops/ms
# Warmup Iteration   2: 2564.687 ops/ms
# Warmup Iteration   3: 2566.557 ops/ms
Iteration   1: 2565.658 ops/ms
Iteration   2: 2565.508 ops/ms
Iteration   3: 2566.056 ops/ms
Iteration   4: 2567.298 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax":
  2566.130 ±(99.9%) 5.249 ops/ms [Average]
  (min, avg, max) = (2565.508, 2566.130, 2567.298), stdev = 0.812
  CI (99.9%): [2560.881, 2571.379] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longLoopMax:asm":
PrintAssembly processed: 323919 total address lines.
Perf output processed (skipped 19.874 seconds):
 Column 1: sampled_pc (20056 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub, version 5, compile id 1033

                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365b0:   ldr		x7, [x22, #0x10]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365b4:   cmp		x7, x21
            0x000000010ee365b8:   csel		x7, x21, x7, lt
            0x000000010ee365bc:   add		x21, x4, x11
            0x000000010ee365c0:   str		x7, [x21, #0x10]    ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.04%    0x000000010ee365c4:   ldr		x7, [x23, #0x18]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.02%    0x000000010ee365c8:   ldr		x11, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365cc:   cmp		x11, x7
   0.00%    0x000000010ee365d0:   csel		x11, x7, x11, lt
   0.01%    0x000000010ee365d4:   str		x11, [x21, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   1.76%    0x000000010ee365d8:   ldr		x7, [x23, #0x20]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  14.39%    0x000000010ee365dc:   ldr		x11, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365e0:   cmp		x11, x7
            0x000000010ee365e4:   csel		x11, x7, x11, lt
            0x000000010ee365e8:   str		x11, [x21, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.02%    0x000000010ee365ec:   ldr		x7, [x23, #0x28]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   2.87%    0x000000010ee365f0:   ldr		x11, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee365f4:   cmp		x11, x7
            0x000000010ee365f8:   csel		x11, x7, x11, lt
   2.36%    0x000000010ee365fc:   str		x11, [x21, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.05%    0x000000010ee36600:   ldr		x7, [x23, #0x30]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.11%    0x000000010ee36604:   ldr		x11, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36608:   cmp		x11, x7
            0x000000010ee3660c:   csel		x11, x7, x11, lt
   0.01%    0x000000010ee36610:   str		x11, [x21, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   5.29%    0x000000010ee36614:   ldr		x7, [x22, #0x38]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   8.73%    0x000000010ee36618:   ldr		x11, [x23, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee3661c:   cmp		x11, x7
            0x000000010ee36620:   csel		x11, x7, x11, lt
   2.59%    0x000000010ee36624:   str		x11, [x21, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.05%    0x000000010ee36628:   ldr		x7, [x23, #0x40]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   6.23%    0x000000010ee3662c:   ldr		x11, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36630:   cmp		x11, x7
            0x000000010ee36634:   csel		x11, x7, x11, lt
   0.01%    0x000000010ee36638:   str		x11, [x21, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   3.36%    0x000000010ee3663c:   ldr		x7, [x23, #0x48]    ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@26 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  12.89%    0x000000010ee36640:   ldr		x11, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@20 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36644:   cmp		x11, x7
            0x000000010ee36648:   csel		x11, x7, x11, lt
            0x000000010ee3664c:   add		w1, w1, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@31 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
  36.97%    0x000000010ee36650:   str		x11, [x21, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@30 (line 272)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
            0x000000010ee36654:   cmp		w1, w12
            0x000000010ee36658:   b.lt		#0x10ee365a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@7 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   1.01%    0x000000010ee3665c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg0=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                      ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                      ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
   0.16%    0x000000010ee36660:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longLoopMax@34 (line 271)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longLoopMax_jmhTest::longLoopMax_thrpt_jmhStub@19 (line 105)
                                                                      ;   {poll}
            0x000000010ee36664:   cmp		w1, w17
            0x000000010ee36668:   b.lt		#0x10ee36580
            0x000000010ee3666c:   cmp		w1, w10
            0x000000010ee36670:   b.lt		#0x10ee364a0
....................................................................................................
  98.95%  <total for region 1>
#+end_src
** aarch64 MMV longClippingRange 100
*** after fix
**** range 100
#+begin_src bash
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 50.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1:
longs max: 9209124104291632696
longs min: -9215797548442562244
highestLong: 9209124015426240512
lowestLong: -9215797459577170060
2714.931 ops/ms
# Warmup Iteration   2: 2484.168 ops/ms
# Warmup Iteration   3: 2529.183 ops/ms
Iteration   1: 2614.874 ops/ms
Iteration   2: 3149.880 ops/ms
Iteration   3: 3094.836 ops/ms
Iteration   4: 2723.413 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:      911765
  invocation_counter:                911765
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(901) displacement(56)
                                    not taken(910415)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(910415) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:      911390
  invocation_counter:                911390
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(1038) displacement(56)
                                    not taken(910077)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(910077) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
#+end_src
**** range 90
#+begin_src bash
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 90, seed = 0, size = 1000)

# Run progress: 0.00% complete, ETA 00:01:10
# Fork: 1 of 1
# Warmup Iteration   1:
longs max: 9209124104291632696
longs min: -9215797548442562244
highestLong: 8288211558908035072
lowestLong: -8294885003058964620
1798.486 ops/ms
# Warmup Iteration   2: 1835.557 ops/ms
# Warmup Iteration   3: 1791.000 ops/ms
Iteration   1: 1845.763 ops/ms
Iteration   2: 1843.493 ops/ms
Iteration   3: 1838.100 ops/ms
Iteration   4: 1843.386 ops/ms
...
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:      930323
  invocation_counter:                930323
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(41821) displacement(56)
                                    not taken(888150)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(888150) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:      923079
  invocation_counter:                923079
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(54551) displacement(56)
                                    not taken(868258)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(868258) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------

#+end_src
*** print method data, branch always
Min favouring taken but Max 50%, odd?
~highestLong~ was not being calculated properly.
#+begin_src bash
[nix-shell:~/src/colata/avoid-cmov-long-min-max-8351409]$ TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping" MICRO="OPTIONS=-jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:+PrintMethodData -jvmArgs -XX:-UseSuperWord -p includeEquals=true -p range=100 -jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:-UseNewCode -jvmArgs -XX:-UseNewCode2;FORK=1" CONF=release LOG=warn make test
pushd /Users/galder/src/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make -s
popd
touch /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
~/src/jdk-avoid-cmov-long-min-max ~/src/colata/avoid-cmov-long-min-max-8351409
Building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
Finished building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
~/src/colata/avoid-cmov-long-min-max-8351409
cd /Users/galder/src/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make exploded-test
make[1]: Entering directory '/Users/galder/src/jdk-avoid-cmov-long-min-max'
Building target 'exploded-test' in configuration 'release-darwin-arm64'
Running tests using MICRO control variable 'OPTIONS=-jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:+PrintMethodData -jvmArgs -XX:-UseSuperWord -p includeEquals=true -p range=100 -jvmArgs -XX:+UnlockDiagnosticVMOptions -jvmArgs -XX:-UseNewCode -jvmArgs -XX:-UseNewCode2;FORK=1'
Test selection 'micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping', will run:
 micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping

Running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longClipping'
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:+UnlockDiagnosticVMOptions -XX:+PrintMethodData -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 0.00% complete, ETA 00:00:35
# Fork: 1 of 1
# Warmup Iteration   1: 2770.433 ops/ms
# Warmup Iteration   2: 2491.741 ops/ms
# Warmup Iteration   3: 2522.839 ops/ms
Iteration   1: 2437.901 ops/ms
Iteration   2: 2370.382 ops/ms
Iteration   3: 2422.815 ops/ms
Iteration   4: 2522.072 ops/ms
------------------------------------------------------------------------
static java.lang.Math::max(JJ)J
  interpreter_invocation_count:      990641
  invocation_counter:                990641
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 iflt 10
  0    bci: 3    BranchData         taken(519161) displacement(56)
                                    not taken(466718)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(466718) displacement(24)
  10 lload_2
  11 lreturn
------------------------------------------------------------------------
static java.lang.Math::min(JJ)J
  interpreter_invocation_count:      990239
  invocation_counter:                990239
  backedge_counter:                       0
  decompile_count:                        0
  mdo size: 344 bytes

   0 lload_0
   1 lload_2
   2 lcmp
   3 ifgt 10
  0    bci: 3    BranchData         taken(984476) displacement(56)
                                    not taken(871)
   6 lload_0
   7 goto 11
  32   bci: 7    JumpData           taken(871) displacement(24)
  10 lload_2
  11 lreturn
#+end_src
*** branch always
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:-UseNewCode -XX:-UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 5.00% complete, ETA 00:14:59
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 2712.330 ops/ms
# Warmup Iteration   2: 2758.255 ops/ms
# Warmup Iteration   3: 2675.996 ops/ms
Iteration   1: 2767.759 ops/ms
Iteration   2: 2767.288 ops/ms
Iteration   3: 2462.637 ops/ms
Iteration   4: 2772.031 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange":
  2692.428 ±(99.9%) 990.038 ops/ms [Average]
  (min, avg, max) = (2462.637, 2692.428, 2772.031), stdev = 153.209
  CI (99.9%): [1702.391, 3682.466] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange:asm":
PrintAssembly processed: 324995 total address lines.
Perf output processed (skipped 19.914 seconds):
 Column 1: sampled_pc (20050 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub, version 5, compile id 1023

                             0x000000010b3e4600:   cmp		w16, w0
                             0x000000010b3e4604:   sub		w12, w16, w0
                             0x000000010b3e4608:   csel		w11, wzr, w12, lt
                             0x000000010b3e460c:   mov		w8, #0x1f40
                             0x000000010b3e4610:   cmp		w11, w8
                             0x000000010b3e4614:   csel		w12, w10, w11, hi
                             0x000000010b3e4618:   add		w11, w12, w0
                             0x000000010b3e461c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@10 (line 256)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.07%                  ↗  0x000000010b3e4620:   sbfiz		x12, x0, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000010b3e4624:   add		x22, x5, x12
   6.93%                  │  0x000000010b3e4628:   ldr		x21, [x22, #0x10]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.17%                  │  0x000000010b3e462c:   add		x23, x4, x12
   0.00%                  │  0x000000010b3e4630:   mov		x12, x21
   0.13%                  │  0x000000010b3e4634:   cmp		x21, x6
   0.01%  ╭               │  0x000000010b3e4638:   b.ge		#0x10b3e4640
   3.30%  │               │  0x000000010b3e463c:   mov		x12, x6
   4.87%  ↘               │  0x000000010b3e4640:   mov		x21, x12
   0.05%                  │  0x000000010b3e4644:   cmp		x12, x7
   0.28%   ╭              │  0x000000010b3e4648:   b.le		#0x10b3e4650
           │              │  0x000000010b3e464c:   mov		x21, x7
           ↘              │  0x000000010b3e4650:   str		x21, [x23, #0x10]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   2.01%                  │  0x000000010b3e4654:   ldr		x12, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.01%                  │  0x000000010b3e4658:   mov		x21, x12
   0.06%                  │  0x000000010b3e465c:   cmp		x12, x6
   0.24%    ╭             │  0x000000010b3e4660:   b.ge		#0x10b3e4668
   3.19%    │             │  0x000000010b3e4664:   mov		x21, x6
   4.65%    ↘             │  0x000000010b3e4668:   mov		x12, x21
   0.01%                  │  0x000000010b3e466c:   cmp		x21, x7
   0.32%     ╭            │  0x000000010b3e4670:   b.le		#0x10b3e4678
             │            │  0x000000010b3e4674:   mov		x12, x7
             ↘            │  0x000000010b3e4678:   str		x12, [x23, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   1.94%                  │  0x000000010b3e467c:   ldr		x12, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.21%                  │  0x000000010b3e4680:   mov		x21, x12
   0.04%                  │  0x000000010b3e4684:   cmp		x12, x6
   0.04%      ╭           │  0x000000010b3e4688:   b.ge		#0x10b3e4690
   2.99%      │           │  0x000000010b3e468c:   mov		x21, x6
   4.34%      ↘           │  0x000000010b3e4690:   mov		x12, x21
   0.07%                  │  0x000000010b3e4694:   cmp		x21, x7
   0.13%       ╭          │  0x000000010b3e4698:   b.le		#0x10b3e46a0
               │          │  0x000000010b3e469c:   mov		x12, x7
               ↘          │  0x000000010b3e46a0:   str		x12, [x23, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.49%                  │  0x000000010b3e46a4:   ldr		x12, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.22%                  │  0x000000010b3e46a8:   mov		x21, x12
   0.05%                  │  0x000000010b3e46ac:   cmp		x12, x6
   0.01%        ╭         │  0x000000010b3e46b0:   b.ge		#0x10b3e46b8
   3.11%        │         │  0x000000010b3e46b4:   mov		x21, x6
   4.58%        ↘         │  0x000000010b3e46b8:   mov		x12, x21
   0.05%                  │  0x000000010b3e46bc:   cmp		x21, x7
   0.14%         ╭        │  0x000000010b3e46c0:   b.le		#0x10b3e46c8
                 │        │  0x000000010b3e46c4:   mov		x12, x7
                 ↘        │  0x000000010b3e46c8:   str		x12, [x23, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.17%                  │  0x000000010b3e46cc:   ldr		x12, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.45%                  │  0x000000010b3e46d0:   mov		x21, x12
   0.01%                  │  0x000000010b3e46d4:   cmp		x12, x6
                  ╭       │  0x000000010b3e46d8:   b.ge		#0x10b3e46e0
   3.03%          │       │  0x000000010b3e46dc:   mov		x21, x6
   4.98%          ↘       │  0x000000010b3e46e0:   mov		x12, x21
                          │  0x000000010b3e46e4:   cmp		x21, x7
   0.23%           ╭      │  0x000000010b3e46e8:   b.le		#0x10b3e46f0
                   │      │  0x000000010b3e46ec:   mov		x12, x7
                   ↘      │  0x000000010b3e46f0:   str		x12, [x23, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.55%                  │  0x000000010b3e46f4:   ldr		x12, [x22, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.33%                  │  0x000000010b3e46f8:   mov		x21, x12
                          │  0x000000010b3e46fc:   cmp		x12, x6
   0.01%            ╭     │  0x000000010b3e4700:   b.ge		#0x10b3e4708
   3.28%            │     │  0x000000010b3e4704:   mov		x21, x6
   5.07%            ↘     │  0x000000010b3e4708:   mov		x12, x21
   0.00%                  │  0x000000010b3e470c:   cmp		x21, x7
   0.23%             ╭    │  0x000000010b3e4710:   b.le		#0x10b3e4718
                     │    │  0x000000010b3e4714:   mov		x12, x7
                     ↘    │  0x000000010b3e4718:   str		x12, [x23, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   2.16%                  │  0x000000010b3e471c:   ldr		x12, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.39%                  │  0x000000010b3e4720:   mov		x21, x12
   0.07%                  │  0x000000010b3e4724:   cmp		x12, x6
   0.02%              ╭   │  0x000000010b3e4728:   b.ge		#0x10b3e4730
   3.18%              │   │  0x000000010b3e472c:   mov		x21, x6
   4.75%              ↘   │  0x000000010b3e4730:   mov		x12, x21
   0.00%                  │  0x000000010b3e4734:   cmp		x21, x7
   0.24%               ╭  │  0x000000010b3e4738:   b.le		#0x10b3e4740
                       │  │  0x000000010b3e473c:   mov		x12, x7
                       ↘  │  0x000000010b3e4740:   str		x12, [x23, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.17%                  │  0x000000010b3e4744:   ldr		x12, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.24%                  │  0x000000010b3e4748:   mov		x21, x12
                          │  0x000000010b3e474c:   cmp		x12, x6
   0.12%                ╭ │  0x000000010b3e4750:   b.ge		#0x10b3e4758
   3.52%                │ │  0x000000010b3e4754:   mov		x21, x6
   4.72%                ↘ │  0x000000010b3e4758:   mov		x12, x21
   0.01%                  │  0x000000010b3e475c:   cmp		x21, x7
   0.20%                 ╭│  0x000000010b3e4760:   b.le		#0x10b3e4768
                         ││  0x000000010b3e4764:   mov		x12, x7
                         ↘│  0x000000010b3e4768:   add		w0, w0, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@36 (line 255)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.10%                  │  0x000000010b3e476c:   str		x12, [x23, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.38%                  │  0x000000010b3e4770:   cmp		w0, w11
                          ╰  0x000000010b3e4774:   b.lt		#0x10b3e4620        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000010b3e4778:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {r13=Oop r15=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop r19=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.05%                     0x000000010b3e477c:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000010b3e4780:   cmp		w0, w16
                             0x000000010b3e4784:   b.lt		#0x10b3e4600
   0.00%                     0x000000010b3e4788:   cmp		w0, w14
                             0x000000010b3e478c:   b.lt		#0x10b3e450c
                             0x000000010b3e4790:   b		#0x10b3e454c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000010b3e4794:   mov		w1, #-0x92
                             0x000000010b3e4798:   mov		x29, x3
                             0x000000010b3e479c:   stp		x13, x20, [sp, #0x10]
                             0x000000010b3e47a0:   stp		x2, x15, [sp, #0x20]
                             0x000000010b3e47a4:   str		w14, [sp, #0x30]
                             0x000000010b3e47a8:   str		x19, [sp, #0x60]
....................................................................................................
  98.46%  <total for region 1>
#+end_src
*** branch never
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord -XX:+UnlockDiagnosticVMOptions -XX:+UseNewCode -XX:+UseNewCode2
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 5.00% complete, ETA 00:15:01
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 1853.599 ops/ms
# Warmup Iteration   2: 2117.903 ops/ms
# Warmup Iteration   3: 2068.980 ops/ms
Iteration   1: 1984.366 ops/ms
Iteration   2: 1751.037 ops/ms
Iteration   3: 2021.892 ops/ms
Iteration   4: 2011.108 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange":
  1942.101 ±(99.9%) 829.389 ops/ms [Average]
  (min, avg, max) = (1751.037, 1942.101, 2021.892), stdev = 128.349
  CI (99.9%): [1112.711, 2771.490] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange:asm":
PrintAssembly processed: 320833 total address lines.
Perf output processed (skipped 19.734 seconds):
 Column 1: sampled_pc (20039 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub, version 5, compile id 1009

                             0x000000012fafc340:   cmp		w16, w0
                             0x000000012fafc344:   sub		w12, w16, w0
                             0x000000012fafc348:   csel		w11, wzr, w12, lt
                             0x000000012fafc34c:   mov		w8, #0x1f40
                             0x000000012fafc350:   cmp		w11, w8
                             0x000000012fafc354:   csel		w12, w10, w11, hi
                             0x000000012fafc358:   add		w11, w12, w0
                             0x000000012fafc35c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@10 (line 256)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.09%                  ↗  0x000000012fafc360:   sbfiz		x12, x0, #3, #0x20  ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc364:   add		x22, x5, x12
   5.67%                  │  0x000000012fafc368:   ldr		x21, [x22, #0x10]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc36c:   add		x23, x4, x12
                          │  0x000000012fafc370:   mov		x12, x6
                          │  0x000000012fafc374:   cmp		x6, x21
          ╭               │  0x000000012fafc378:   b.gt		#0x12fafc380
   1.75%  │               │  0x000000012fafc37c:   mov		x12, x21
   4.02%  ↘               │  0x000000012fafc380:   mov		x21, x7
                          │  0x000000012fafc384:   cmp		x7, x12
   0.10%   ╭              │  0x000000012fafc388:   b.lt		#0x12fafc390
           │              │  0x000000012fafc38c:   mov		x21, x12
   0.50%   ↘              │  0x000000012fafc390:   str		x21, [x23, #0x10]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.45%                  │  0x000000012fafc394:   ldr		x12, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc398:   mov		x21, x6
   0.01%                  │  0x000000012fafc39c:   cmp		x6, x12
   0.34%    ╭             │  0x000000012fafc3a0:   b.gt		#0x12fafc3a8
   0.56%    │             │  0x000000012fafc3a4:   mov		x21, x12
   4.27%    ↘             │  0x000000012fafc3a8:   mov		x12, x7
   0.25%                  │  0x000000012fafc3ac:   cmp		x7, x21
   0.00%     ╭            │  0x000000012fafc3b0:   b.lt		#0x12fafc3b8
             │            │  0x000000012fafc3b4:   mov		x12, x21
   1.40%     ↘            │  0x000000012fafc3b8:   str		x12, [x23, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.29%                  │  0x000000012fafc3bc:   ldr		x12, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc3c0:   mov		x21, x6
                          │  0x000000012fafc3c4:   cmp		x6, x12
              ╭           │  0x000000012fafc3c8:   b.gt		#0x12fafc3d0
   0.82%      │           │  0x000000012fafc3cc:   mov		x21, x12
   5.04%      ↘           │  0x000000012fafc3d0:   mov		x12, x7
   0.01%                  │  0x000000012fafc3d4:   cmp		x7, x21
   0.02%       ╭          │  0x000000012fafc3d8:   b.lt		#0x12fafc3e0
               │          │  0x000000012fafc3dc:   mov		x12, x21
   0.91%       ↘          │  0x000000012fafc3e0:   str		x12, [x23, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   4.74%                  │  0x000000012fafc3e4:   ldr		x12, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc3e8:   mov		x21, x6
                          │  0x000000012fafc3ec:   cmp		x6, x12
                ╭         │  0x000000012fafc3f0:   b.gt		#0x12fafc3f8
   1.08%        │         │  0x000000012fafc3f4:   mov		x21, x12
   4.45%        ↘         │  0x000000012fafc3f8:   mov		x12, x7
   0.05%                  │  0x000000012fafc3fc:   cmp		x7, x21
   0.05%         ╭        │  0x000000012fafc400:   b.lt		#0x12fafc408
                 │        │  0x000000012fafc404:   mov		x12, x21
   0.89%         ↘        │  0x000000012fafc408:   str		x12, [x23, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   4.12%                  │  0x000000012fafc40c:   ldr		x12, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc410:   mov		x21, x6
                          │  0x000000012fafc414:   cmp		x6, x12
                  ╭       │  0x000000012fafc418:   b.gt		#0x12fafc420
   1.27%          │       │  0x000000012fafc41c:   mov		x21, x12
   4.44%          ↘       │  0x000000012fafc420:   mov		x12, x7
   0.04%                  │  0x000000012fafc424:   cmp		x7, x21
   0.06%           ╭      │  0x000000012fafc428:   b.lt		#0x12fafc430
                   │      │  0x000000012fafc42c:   mov		x12, x21
   0.50%           ↘      │  0x000000012fafc430:   str		x12, [x23, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.26%                  │  0x000000012fafc434:   ldr		x12, [x22, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc438:   mov		x21, x6
                          │  0x000000012fafc43c:   cmp		x6, x12
   0.01%            ╭     │  0x000000012fafc440:   b.gt		#0x12fafc448
   0.69%            │     │  0x000000012fafc444:   mov		x21, x12
   4.31%            ↘     │  0x000000012fafc448:   mov		x12, x7
   0.06%                  │  0x000000012fafc44c:   cmp		x7, x21
   0.00%             ╭    │  0x000000012fafc450:   b.lt		#0x12fafc458
                     │    │  0x000000012fafc454:   mov		x12, x21
   0.75%             ↘    │  0x000000012fafc458:   str		x12, [x23, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   6.34%                  │  0x000000012fafc45c:   ldr		x12, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc460:   mov		x21, x6
                          │  0x000000012fafc464:   cmp		x6, x12
                      ╭   │  0x000000012fafc468:   b.gt		#0x12fafc470
   0.25%              │   │  0x000000012fafc46c:   mov		x21, x12
   4.18%              ↘   │  0x000000012fafc470:   mov		x12, x7
   0.00%                  │  0x000000012fafc474:   cmp		x7, x21
                       ╭  │  0x000000012fafc478:   b.lt		#0x12fafc480
                       │  │  0x000000012fafc47c:   mov		x12, x21
   1.67%               ↘  │  0x000000012fafc480:   str		x12, [x23, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   5.51%                  │  0x000000012fafc484:   ldr		x12, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                          │  0x000000012fafc488:   mov		x21, x6
                          │  0x000000012fafc48c:   cmp		x6, x12
                        ╭ │  0x000000012fafc490:   b.gt		#0x12fafc498
   1.37%                │ │  0x000000012fafc494:   mov		x21, x12
   4.17%                ↘ │  0x000000012fafc498:   mov		x12, x7
   0.04%                  │  0x000000012fafc49c:   cmp		x7, x21
                         ╭│  0x000000012fafc4a0:   b.lt		#0x12fafc4a8
                         ││  0x000000012fafc4a4:   mov		x12, x21
   0.66%                 ↘│  0x000000012fafc4a8:   add		w0, w0, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@36 (line 255)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   4.75%                  │  0x000000012fafc4ac:   str		x12, [x23, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.02%                  │  0x000000012fafc4b0:   cmp		w0, w11
                          ╰  0x000000012fafc4b4:   b.lt		#0x12fafc360        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000012fafc4b8:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {r13=Oop r15=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg4=Oop c_rarg5=Oop r19=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000012fafc4bc:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000012fafc4c0:   cmp		w0, w16
                             0x000000012fafc4c4:   b.lt		#0x12fafc340
   0.03%                     0x000000012fafc4c8:   cmp		w0, w14
                             0x000000012fafc4cc:   b.lt		#0x12fafc24c
                             0x000000012fafc4d0:   b		#0x12fafc28c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                             0x000000012fafc4d4:   mov		w1, #-0x92
                             0x000000012fafc4d8:   mov		x29, x3
                             0x000000012fafc4dc:   stp		x13, x20, [sp, #0x10]
                             0x000000012fafc4e0:   stp		x2, x15, [sp, #0x20]
                             0x000000012fafc4e4:   str		w14, [sp, #0x30]
                             0x000000012fafc4e8:   str		x19, [sp, #0x60]
....................................................................................................
  98.35%  <total for region 1>
#+end_src
*** base
#+begin_src asm
# JMH version: 1.38-SNAPSHOT
# VM version: JDK 25-internal, OpenJDK 64-Bit Server VM, 25-internal-adhoc.galder.jdk-avoid-cmov-long-min-max
# VM invoker: /Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
# VM options: -Djava.library.path=/Users/galder/src/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/images/test/micro/native -XX:-UseSuperWord
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 5 s each
# Measurement: 4 iterations, 5 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Throughput, ops/time
# Benchmark: org.openjdk.bench.java.lang.MinMaxVector.longClippingRange
# Parameters: (range = 100, seed = 0, size = 1000)

# Run progress: 5.00% complete, ETA 00:14:56
# Fork: 1 of 1
# Preparing profilers: XCTraceAsmProfiler
# Profilers consume stdout and stderr from target VM, use -v EXTRA to copy to console
# Warmup Iteration   1: 3396.942 ops/ms
# Warmup Iteration   2: 3398.561 ops/ms
# Warmup Iteration   3: 3265.272 ops/ms
Iteration   1: 3406.769 ops/ms
Iteration   2: 3404.903 ops/ms
Iteration   3: 3403.476 ops/ms
Iteration   4: 3407.549 ops/ms
# Processing profiler results: XCTraceAsmProfiler


Result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange":
  3405.674 ±(99.9%) 11.881 ops/ms [Average]
  (min, avg, max) = (3403.476, 3405.674, 3407.549), stdev = 1.839
  CI (99.9%): [3393.793, 3417.555] (assumes normal distribution)

Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longClippingRange:asm":
PrintAssembly processed: 320923 total address lines.
Perf output processed (skipped 19.788 seconds):
 Column 1: sampled_pc (20055 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub, version 5, compile id 1015

            0x000000010eed62ac:   cmp		x4, x21
            0x000000010eed62b0:   csel		x21, x21, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62b4:   cmp		x7, x21
            0x000000010eed62b8:   csel		x21, x7, x21, lt
            0x000000010eed62bc:   add		x23, x5, x12
            0x000000010eed62c0:   str		x21, [x23, #0x10]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.03%    0x000000010eed62c4:   ldr		x12, [x22, #0x18]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62c8:   cmp		x4, x12
            0x000000010eed62cc:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62d0:   cmp		x7, x12
            0x000000010eed62d4:   csel		x12, x7, x12, lt
            0x000000010eed62d8:   str		x12, [x23, #0x18]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.05%    0x000000010eed62dc:   ldr		x12, [x22, #0x20]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62e0:   cmp		x4, x12
            0x000000010eed62e4:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62e8:   cmp		x7, x12
            0x000000010eed62ec:   csel		x12, x7, x12, lt
   0.00%    0x000000010eed62f0:   str		x12, [x23, #0x20]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   6.59%    0x000000010eed62f4:   ldr		x12, [x22, #0x28]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed62f8:   cmp		x4, x12
            0x000000010eed62fc:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6300:   cmp		x7, x12
            0x000000010eed6304:   csel		x12, x7, x12, lt
   4.09%    0x000000010eed6308:   str		x12, [x23, #0x28]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   3.57%    0x000000010eed630c:   ldr		x12, [x22, #0x30]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6310:   cmp		x4, x12
            0x000000010eed6314:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6318:   cmp		x7, x12
            0x000000010eed631c:   csel		x12, x7, x12, lt
   1.45%    0x000000010eed6320:   str		x12, [x23, #0x30]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   8.85%    0x000000010eed6324:   ldr		x12, [x22, #0x38]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6328:   cmp		x4, x12
            0x000000010eed632c:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6330:   cmp		x7, x12
            0x000000010eed6334:   csel		x12, x7, x12, lt
   1.91%    0x000000010eed6338:   str		x12, [x23, #0x38]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   9.41%    0x000000010eed633c:   ldr		x12, [x22, #0x40]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.01%    0x000000010eed6340:   cmp		x4, x12
            0x000000010eed6344:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6348:   cmp		x7, x12
   0.10%    0x000000010eed634c:   csel		x12, x7, x12, lt
   2.09%    0x000000010eed6350:   str		x12, [x23, #0x40]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
  11.78%    0x000000010eed6354:   ldr		x12, [x22, #0x48]   ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@20 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6358:   cmp		x4, x12
            0x000000010eed635c:   csel		x12, x12, x4, lt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@25 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6360:   cmp		x7, x12
            0x000000010eed6364:   csel		x12, x7, x12, lt
   0.01%    0x000000010eed6368:   add		w0, w0, #8          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@36 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
  46.10%    0x000000010eed636c:   str		x12, [x23, #0x48]   ;*lastore {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@35 (line 256)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
            0x000000010eed6370:   cmp		w0, w11
            0x000000010eed6374:   b.lt		#0x10eed62a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@7 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   2.36%    0x000000010eed6378:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {r14=Oop r16=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg5=Oop c_rarg6=Oop r19=Oop }
                                                                      ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                      ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
   0.16%    0x000000010eed637c:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                      ; - org.openjdk.bench.java.lang.MinMaxVector::longClippingRange@39 (line 255)
                                                                      ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longClippingRange_jmhTest::longClippingRange_thrpt_jmhStub@19 (line 105)
                                                                      ;   {poll}
            0x000000010eed6380:   cmp		w0, w17
            0x000000010eed6384:   b.lt		#0x10eed6278
            0x000000010eed6388:   cmp		w0, w10
            0x000000010eed638c:   b.lt		#0x10eed61ac
....................................................................................................
  98.58%  <total for region 1>
#+end_src
* 31.5.25
** x64
*** Branch Always
#+begin_src bash
Benchmark                                           (SIZE)  (seed)  Mode  Cnt     Score     Error  Units
VectorReduction2.NoSuperword.longMaxBig               2048       0  avgt    3  1890.767 ±   4.540  ns/op
VectorReduction2.NoSuperword.longMaxDotProduct        2048       0  avgt    3  1046.512 ±   1.133  ns/op
VectorReduction2.NoSuperword.longMaxSimple            2048       0  avgt    3  2031.456 ± 138.297  ns/op
VectorReduction2.NoSuperword.longMinBig               2048       0  avgt    3  1816.064 ±   5.052  ns/op
VectorReduction2.NoSuperword.longMinDotProduct        2048       0  avgt    3  1046.672 ±   9.161  ns/op
VectorReduction2.NoSuperword.longMinSimple            2048       0  avgt    3  2114.277 ±  22.698  ns/op

Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  813.993 ± 1.021  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  813.945 ± 2.029  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  481.846 ± 1.261  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  479.440 ± 1.206  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  475.989 ± 0.780  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  492.811 ± 3.597  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  495.543 ± 0.892  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  498.346 ± 2.156  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  542.344 ± 5.254  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  465.214 ± 8.848  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  454.522 ± 1.704  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  541.074 ± 9.068  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  471.498 ± 0.446  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  454.386 ± 3.790  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  677.083 ± 2.696  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  527.350 ± 6.642  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  443.924 ± 2.065  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  674.479 ± 5.151  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  530.964 ± 0.369  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  442.352 ± 0.705  ops/ms
#+end_src
*** Branch Never
#+begin_src bash
Benchmark                                           (SIZE)  (seed)  Mode  Cnt     Score   Error  Units
VectorReduction2.NoSuperword.longMaxBig               2048       0  avgt    3  1820.021 ± 3.422  ns/op
VectorReduction2.NoSuperword.longMaxDotProduct        2048       0  avgt    3  1049.035 ± 1.802  ns/op
VectorReduction2.NoSuperword.longMaxSimple            2048       0  avgt    3  1318.178 ± 6.469  ns/op
VectorReduction2.NoSuperword.longMinBig               2048       0  avgt    3  1851.642 ± 3.587  ns/op
VectorReduction2.NoSuperword.longMinDotProduct        2048       0  avgt    3  1048.639 ± 3.909  ns/op
VectorReduction2.NoSuperword.longMinSimple            2048       0  avgt    3  1301.550 ± 1.316  ns/op

Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  609.251 ±  6.097  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  607.633 ±  6.307  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  477.443 ±  5.811  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  471.952 ±  1.358  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  453.011 ±  0.288  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  489.187 ±  3.778  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  471.255 ±  0.400  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  452.829 ±  0.174  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  555.183 ±  4.501  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  804.219 ± 26.194  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  806.359 ±  0.248  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  543.978 ±  3.841  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  796.142 ± 11.700  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  806.155 ±  0.509  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  667.616 ± 16.511  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  845.777 ± 18.214  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  803.849 ±  1.924  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  669.383 ± 13.667  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  847.445 ±  6.842  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  804.134 ±  0.097  ops/ms
#+end_src
*** Base
#+begin_src bash
Benchmark                                           (SIZE)  (seed)  Mode  Cnt     Score     Error  Units
VectorReduction2.NoSuperword.longMaxBig               2048       0  avgt    3  3218.615 ±  32.983  ns/op
VectorReduction2.NoSuperword.longMaxDotProduct        2048       0  avgt    3  2453.535 ±  34.069  ns/op
VectorReduction2.NoSuperword.longMaxSimple            2048       0  avgt    3  2162.658 ±   0.792  ns/op
VectorReduction2.NoSuperword.longMinBig               2048       0  avgt    3  3400.878 ± 100.669  ns/op
VectorReduction2.NoSuperword.longMinDotProduct        2048       0  avgt    3  2423.487 ±   2.783  ns/op
VectorReduction2.NoSuperword.longMinSimple            2048       0  avgt    3  2170.823 ±   7.199  ns/op

Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  1015.845 ± 1.364  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  1016.091 ± 0.479  ops/ms
MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4   475.024 ± 0.904  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4   480.322 ± 1.493  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4   475.868 ± 1.941  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4   498.872 ± 0.522  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4   499.268 ± 0.516  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4   499.222 ± 0.466  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4   407.063 ± 0.106  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4   407.018 ± 0.314  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4   407.024 ± 0.201  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4   416.266 ± 0.099  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4   416.315 ± 0.200  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4   416.214 ± 0.678  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4   462.110 ± 0.683  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4   462.084 ± 0.128  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4   462.095 ± 0.144  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4   461.138 ± 0.583  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4   460.996 ± 0.618  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4   461.160 ± 0.113  ops/ms
#+end_src
* 28.5.25
** x64
*** Branch Always
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  810.317 ± 19.651  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  812.737 ± 10.827  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  478.382 ±  1.741  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  478.321 ±  3.565  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  479.080 ±  0.669  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  489.841 ±  8.777  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  489.451 ±  0.250  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  497.766 ±  1.781  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  547.915 ± 10.069  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  465.298 ±  7.290  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  454.280 ±  1.682  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  545.224 ±  2.922  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  469.390 ±  8.481  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  454.493 ±  2.126  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  672.689 ±  4.652  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  526.829 ±  0.175  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  440.721 ±  4.548  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  670.943 ±  5.984  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  531.528 ±  7.258  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  444.621 ±  9.428  ops/ms
#+end_src
*** Branch Never
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  611.909 ±  4.630  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  606.295 ±  5.306  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4  477.903 ±  6.093  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4  470.040 ±  0.250  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4  452.954 ±  0.647  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4  491.931 ±  1.390  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4  468.428 ± 10.378  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4  452.678 ±  0.682  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4  547.431 ±  7.687  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4  815.973 ±  1.070  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4  806.168 ±  1.344  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4  545.896 ± 12.850  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4  806.190 ±  2.317  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4  806.394 ±  0.793  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4  657.436 ± 11.986  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4  851.211 ±  3.109  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4  804.118 ±  0.368  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4  663.646 ±  9.127  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4  856.981 ± 28.753  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4  803.959 ±  0.313  ops/ms
#+end_src
*** Base
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (range)  (seed)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longClippingRange                         N/A            N/A       90       0    1000  thrpt    4  1015.866 ± 0.176  ops/ms
MinMaxVector.longClippingRange                         N/A            N/A      100       0    1000  thrpt    4  1015.821 ± 0.101  ops/ms

MinMaxVector.longLoopMax                              true             50      N/A     N/A    2048  thrpt    4   472.297 ± 0.506  ops/ms
MinMaxVector.longLoopMax                              true             80      N/A     N/A    2048  thrpt    4   483.762 ± 1.793  ops/ms
MinMaxVector.longLoopMax                              true            100      N/A     N/A    2048  thrpt    4   475.726 ± 1.771  ops/ms
MinMaxVector.longLoopMin                              true             50      N/A     N/A    2048  thrpt    4   492.836 ± 0.608  ops/ms
MinMaxVector.longLoopMin                              true             80      N/A     N/A    2048  thrpt    4   498.717 ± 0.350  ops/ms
MinMaxVector.longLoopMin                              true            100      N/A     N/A    2048  thrpt    4   498.592 ± 0.723  ops/ms

MinMaxVector.longReductionMultiplyMax                 true             50      N/A     N/A    2048  thrpt    4   407.045 ± 0.033  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80      N/A     N/A    2048  thrpt    4   406.975 ± 0.653  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100      N/A     N/A    2048  thrpt    4   406.956 ± 0.119  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             50      N/A     N/A    2048  thrpt    4   416.190 ± 0.521  ops/ms
MinMaxVector.longReductionMultiplyMin                 true             80      N/A     N/A    2048  thrpt    4   416.239 ± 0.180  ops/ms
MinMaxVector.longReductionMultiplyMin                 true            100      N/A     N/A    2048  thrpt    4   416.207 ± 0.157  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50      N/A     N/A    2048  thrpt    4   462.053 ± 0.448  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80      N/A     N/A    2048  thrpt    4   462.013 ± 0.999  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100      N/A     N/A    2048  thrpt    4   462.043 ± 0.182  ops/ms
MinMaxVector.longReductionSimpleMin                   true             50      N/A     N/A    2048  thrpt    4   461.122 ± 0.083  ops/ms
MinMaxVector.longReductionSimpleMin                   true             80      N/A     N/A    2048  thrpt    4   461.028 ± 0.862  ops/ms
MinMaxVector.longReductionSimpleMin                   true            100      N/A     N/A    2048  thrpt    4   461.071 ± 0.234  ops/ms
#+end_src
** CANCELLED aarch64
Not recorded due to WIP.
* 27.5.25
** max x64
Virtually all long reduction benchmarks in MinMaxVector improve performance with any % branch data distribution compared to conditional moves.
At 80% and 100% not jumping in the branch has a positive effect performance wise.
*** branch always
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  544.485 ±  3.167  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  453.718 ±  8.108  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  455.514 ±  0.568  ops/ms
MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  674.529 ± 10.887  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  524.918 ±  3.587  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  443.354 ±  0.682  ops/ms
#+end_src
*** branch never
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  550.314 ±  7.797  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  798.261 ± 21.014  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  806.434 ±  0.369  ops/ms
MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  664.959 ±  0.414  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  856.510 ±  1.719  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  803.530 ±  0.669  ops/ms
#+end_src
*** base cmov
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  406.990 ± 0.041  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  407.015 ± 0.517  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  406.988 ± 0.159  ops/ms
MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  459.669 ± 0.229  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  461.972 ± 1.972  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  462.036 ± 0.307  ops/ms
#+end_src
** max aarch64
All long reduction benchmarks in MinMaxVector improve performance with any % branch data distribution compared to conditional moves.
At 80% and 100% not jumping in the branch has a positive effect performance wise.
*** branch always
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  1352.907 ± 471.995  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  1371.852 ±  25.425  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  2207.767 ± 535.992  ops/ms

MinMaxVector.longReductionMultiplyMax                false             50    2048  thrpt    4  1433.367 ± 280.042  ops/ms
MinMaxVector.longReductionMultiplyMax                false             80    2048  thrpt    4  1299.261 ±  70.791  ops/ms
MinMaxVector.longReductionMultiplyMax                false            100    2048  thrpt    4  2224.932 ± 370.813  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  1854.791 ± 537.771  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  1589.238 ±  68.795  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  2606.079 ± 380.352  ops/ms

MinMaxVector.longReductionSimpleMax                  false             50    2048  thrpt    4  1776.709 ± 418.660  ops/ms
MinMaxVector.longReductionSimpleMax                  false             80    2048  thrpt    4  1619.377 ± 117.706  ops/ms
MinMaxVector.longReductionSimpleMax                  false            100    2048  thrpt    4  2771.337 ± 832.902  ops/ms
#+end_src
*** branch never
#+begin_src bash
Benchmark                                  (includeEquals)  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                 true             50    2048  thrpt    4  1252.789 ± 683.299  ops/ms
MinMaxVector.longReductionMultiplyMax                 true             80    2048  thrpt    4  2218.447 ± 621.461  ops/ms
MinMaxVector.longReductionMultiplyMax                 true            100    2048  thrpt    4  2852.912 ±  14.451  ops/ms

MinMaxVector.longReductionMultiplyMax                false             50    2048  thrpt    4  1320.753 ± 265.500  ops/ms
MinMaxVector.longReductionMultiplyMax                false             80    2048  thrpt    4  2116.813 ± 434.699  ops/ms
MinMaxVector.longReductionMultiplyMax                false            100    2048  thrpt    4  2843.011 ±  52.647  ops/ms

MinMaxVector.longReductionSimpleMax                   true             50    2048  thrpt    4  1755.199 ± 644.619  ops/ms
MinMaxVector.longReductionSimpleMax                   true             80    2048  thrpt    4  2786.104 ± 295.432  ops/ms
MinMaxVector.longReductionSimpleMax                   true            100    2048  thrpt    4  3665.906 ±  39.052  ops/ms

MinMaxVector.longReductionSimpleMax                  false             50    2048  thrpt    4  1723.100 ± 234.202  ops/ms
MinMaxVector.longReductionSimpleMax                  false             80    2048  thrpt    4  2730.444 ± 499.676  ops/ms
MinMaxVector.longReductionSimpleMax                  false            100    2048  thrpt    4  3672.656 ±  16.798  ops/ms
#+end_src
*** base cmov
Default implementation is assuming ~includeEquals=true~
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4   979.671 ±  9.396  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  1010.492 ± 73.768  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1032.041 ± 50.020  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  1080.417 ± 24.963  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  1074.590 ± 43.227  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1083.453 ± 44.043  ops/ms
#+end_src
* 26.5.25
** x64
*** branch always
#+begin_src asm
r10            0x2c                44
r11            0x2c                44

=> 0x00007fffe8ad22db:   cmpq            %r11, %r10
   0x00007fffe8ad22de:   jge             0x7fffe8ad22e3
   0x00007fffe8ad22e0:   movq            %r11, %r10
   0x00007fffe8ad22e3:   cmpq            %r10, %rdx

=> 0x00007fffe8ad22de:   jge             0x7fffe8ad22e3                                                                                               |  }
   0x00007fffe8ad22e0:   movq            %r11, %r10
   0x00007fffe8ad22e3:   cmpq            %r10, %rdx

rdx            0x6e                110
r10            0x2c                44

=> 0x00007fffe8ad22e3:   cmpq            %r10,%rdx
   0x00007fffe8ad22e6:   jge             0x7fffe8ad22eb
   0x00007fffe8ad22e8:   movq            %r10, %rdx
   0x00007fffe8ad22eb:   cmpq            %rdx, %r14

=> 0x00007fffe8ad22e6:   jge             0x7fffe8ad22eb
   0x00007fffe8ad22e8:   movq            %r10, %rdx
   0x00007fffe8ad22eb:   cmpq            %rdx, %r14

rdx            0x6e                110
r14            0x8f                143

=> 0x00007fffe8ad22eb:   cmpq            %rdx, %r14
#+end_src
** aarch64
*** branch never
#+begin_src java
@Benchmark
public long longReductionMultiplyMax(LoopState state) {
    long result = 0;
    for (int i = 0; i < state.size; i++) {
        final long v = 11 * state.maxLongA[i];
        result = Math.max(v, result);
    }
    return result;
}
#+end_src

#+begin_src asm
// Branch never with GT
instruct maxL_reg_reg_gt(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(UseNewCode);
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg)); // src1 (b) > src2 (a) ?
    __ br(Assembler::GT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
        x1 = 22276352384
        x5 = 99
       x12 = 99

->  0x10d81af2c: mov    x1, x5
    0x10d81af30: cmp    x5, x12
    0x10d81af34: b.gt   0x10d81af3c
    0x10d81af38: mov    x1, x12

        x1 = 99
        x5 = 99
       x12 = 99

->  0x10d81af30: cmp    x5, x12
    0x10d81af34: b.gt   0x10d81af3c
    0x10d81af38: mov    x1, x12
    0x10d81af3c: mul    x11, x11, x4

->  0x10d81af34: b.gt   0x10d81af3c
    0x10d81af38: mov    x1, x12
    0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x1

->  0x10d81af38: mov    x1, x12
    0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x1
    0x10d81af44: cmp    x1, x13

        x1 = 99
       x12 = 99
       x13 = 198

->  0x10d81af40: mov    x12, x1
    0x10d81af44: cmp    x1, x13
    0x10d81af48: b.gt   0x10d81af50
    0x10d81af4c: mov    x12, x13

        x1 = 99
       x12 = 99
       x13 = 198

->  0x10d81af44: cmp    x1, x13
    0x10d81af48: b.gt   0x10d81af50
    0x10d81af4c: mov    x12, x13
    0x10d81af50: mov    x13, x12

->  0x10d81af48: b.gt   0x10d81af50
    0x10d81af4c: mov    x12, x13
    0x10d81af50: mov    x13, x12
    0x10d81af54: cmp    x12, x14

->  0x10d81af50: mov    x13, x12
    0x10d81af54: cmp    x12, x14
    0x10d81af58: b.gt   0x10d81af60
    0x10d81af5c: mov    x13, x14

       x12 = 198
       x13 = 198
#+end_src
* 22.5.25
** aarch64
*** branch always
#+begin_src java
@Benchmark
public long longReductionMultiplyMax(LoopState state) {
    long result = 0;
    for (int i = 0; i < state.size; i++) {
        final long v = 11 * state.maxLongA[i];
        result = Math.max(v, result);
    }
    return result;
}
#+end_src

#+begin_src asm
// Branch always with GE
instruct maxL_reg_reg_ge(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  predicate(!UseNewCode);
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg)); // src1 (a) >= src2 (b) ?
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
        x1 = 22276352408
        x5 = 44
       x12 = 44

->  0x10d81af2c: mov    x1, x12
    0x10d81af30: cmp    x12, x5
    0x10d81af34: b.ge   0x10d81af3c
    0x10d81af38: mov    x1, x5

        x1 = 44
        x5 = 44
       x12 = 44

->  0x10d81af30: cmp    x12, x5       ;; x12 (44) >= x5 (44) ? true
    0x10d81af34: b.ge   0x10d81af3c
    0x10d81af38: mov    x1, x5
    0x10d81af3c: mul    x11, x11, x4

->  0x10d81af34: b.ge   0x10d81af3c
    0x10d81af38: mov    x1, x5
    0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x13

->  0x10d81af3c: mul    x11, x11, x4
    0x10d81af40: mov    x12, x13
    0x10d81af44: cmp    x13, x1
    0x10d81af48: b.ge   0x10d81af50

...

        x1 = 44
       x12 = 44
       x13 = 66

->  0x10d81af40: mov    x12, x13
    0x10d81af44: cmp    x13, x1
    0x10d81af48: b.ge   0x10d81af50
    0x10d81af4c: mov    x12, x1

        x1 = 44
       x12 = 66
       x13 = 66

->  0x10d81af44: cmp    x13, x1      ;; x13 (66) >= x1 (44) ? true
    0x10d81af48: b.ge   0x10d81af50
    0x10d81af4c: mov    x12, x1
    0x10d81af50: mov    x13, x14

->  0x10d81af48: b.ge   0x10d81af50
    0x10d81af4c: mov    x12, x1
    0x10d81af50: mov    x13, x14
    0x10d81af54: cmp    x14, x12

->  0x10d81af50: mov    x13, x14
    0x10d81af54: cmp    x14, x12
    0x10d81af58: b.ge   0x10d81af60
    0x10d81af5c: mov    x13, x12
#+end_src
*** branch always (dubious)
#+begin_src java
@Benchmark
public long longReductionMultiplyMax(LoopState state) {
    long result = 0;
    for (int i = 0; i < state.size; i++) {
        final long v = 11 * state.maxLongA[i];
        result = Math.max(v, result);
    }
    return result;
}
#+end_src
#+begin_src asm
// Branch always
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg)); // src1 (a) >= src2 (b) ?
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
#+begin_src asm
;; Data: [9, 14, ...]
;; src1 = v = 14
;; src2 = result = 9

        x1 = 0x000000052fa0e950
        x5 = 0x0000000000000063 (99)
       x12 = 0x000000000000009a

->  0x10d81b2ac: mov    x1, x5
    0x10d81b2b0: cmp    x5, x12
    0x10d81b2b4: b.ge   0x10d81b2bc
    0x10d81b2b8: mov    x1, x12

(lldb) re r/d

        x1 = 0x0000000000000063 (99)
        x5 = 0x0000000000000063 (99)
       x12 = 0x000000000000009a (154)

        x1 = 99 (9 * 11)
        x5 = 99
       x12 = 154 (14 * 11)

->  0x10d81b2b0: cmp    x5, x12         ;; x5 (99) >= x12 (154) ? false
    0x10d81b2b4: b.ge   0x10d81b2bc
    0x10d81b2b8: mov    x1, x12
    0x10d81b2bc: mul    x11, x11, x4

->  0x10d81b2b4: b.ge   0x10d81b2bc
    0x10d81b2b8: mov    x1, x12
    0x10d81b2bc: mul    x11, x11, x4
    0x10d81b2c0: mov    x12, x1

->  0x10d81b2b8: mov    x1, x12
    0x10d81b2bc: mul    x11, x11, x4
    0x10d81b2c0: mov    x12, x1
    0x10d81b2c4: cmp    x1, x13

        x1 = 154
        x5 = 99
       x12 = 154
#+end_src
* 21.5.25
** aarch64 ge oddity
#+begin_src java
public static int max(int a, int b) {
    return (a >= b) ? a : b;
}
#+end_src

#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  effect(TEMP_DEF dst);
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg)); // dst = src1 (a)
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg)); // src1 (a) >= src2 (b) ?
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg)); // dst = src2 (b)
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
p
#+begin_src bash
a = 11
b = 22
11 >= 22 ? 11 (a) : 22 (b);
# false, return 22 (b)
#+end_src

#+begin_src bash
a = 33
b = 33
33 >= 33 ? 33 (a) : 33 (b);
# true, return 33 (a)
#+end_src

#+begin_src bash
# Warmup Iteration   1: [6, 6, 6, 14, 21, 28, 28, 32, 34, 40, 45, 45, 52, 56, 57, 64, 70, 76, 78, 83, 86, 91, 96, 97, 97, 102, 106, 108, 108, 109, 111, 116, 124, 125, 133, 138, 139, 144, 145, 151, 151, 156, 160, 168, 168, 174, 183, 189, 196, 201, 208, 214, 218, 218, 219, 222, 230, 230, 234, 243, 243, 245, 245, 247, 248, 249, 253, 262, 266, 267, 274, 281, 282, 288, 297, 300, 300, 308, 310, 312, 313, 322, 328, 329, 337, 345, 351, 353, 360, 366, 370, 370, 374, 383, 385, 393, 393, 398, 399, 402, 409, 412, 416, 422, 424, 428, 433, 436, 443, 451, 460, 461, 470, 478, 480, 489, 498, 506, 512, 515, 515, 517, 520, 521, 530, 539, 548, 548, 549, 555, 557, 562, 564, 567, 570, 574, 583, 585, 589, 592, 598, 603, 604, 607, 615, 624, 626, 626, 628, 630, 636, 636, 643, 648, 654, 659, 660, 660, 667, 667, 675, 677, 677, 677, 681, 687, 688, 690, 690, 695, 697, 705, 713, 722, 723, 729, 736, 737, 743, 745, 747, 754, 762, 767, 776, 779, 780, 787, 795, 801, 803, 810, 818, 822, 830, 835, 843, 852, 860, 860, 869, 875, 876, 882, 887, 893, 899, 900, 908, 912, 915, 922, 925, 927, 927, 933, 941, 943, 944, 952, 959, 962, 964, 965, 969, 972, 978, 981, 983, 989, 997, 1003, 1009, 1011, 1020, 1024, 1028, 1031, 1033, 1041, 1047, 1050, 1057, 1063, 1066, 1072, 1075, 1081, 1086, 1091, 1095, 1099, 1108, 1115, 1117, 1118, 1125, 1127, 1134, 1138, 1145, 1153, 1159, 1159, 1160, 1163, 1166, 1166, 1167, 1175, 1175, 1180, 1187, 1193, 1198, 1202, 1211, 1216, 1223, 1230, 1236, 1243, 1249, 1253, 1253, 1258, 1266, 1273, 1275, 1280, 1285, 1286, 1295, 1301, 1307, 1307, 1309, 1310, 1315, 1322, 1324, 1326, 1327, 1334, 1338, 1340, 1349, 1349, 1351, 1358, 1363, 1363, 1366, 1373, 1380, 1385, 1394, 1396, 1400, 1408, 1412, 1412, 1412, 1419, 1419, 1420, 1423, 1432, 1440, 1442, 1449, 1454, 1454, 1457, 1461, 1463, 1464, 1468, 1468, 1471, 1478, 1480, 1480, 1487, 1493, 1498, 1501, 1506, 1507, 1511, 1517, 1522, 1529, 1534, 1541, 1544, 1546, 1546, 1552, 1555, 1562, 1566, 1569, 1573, 1573, 1575, 1579, 1588, 1593, 1599, 1604, 1607, 1614, 1619, 1622, 1625, 1626, 1626, 1634, 1642, 1651, 1655, 1656, 1665, 1668, 1672, 1675, 1680, 1682, 1684, 1684, 1687, 1692, 1697, 1699, 1701, 1704, 1708, 1708, 1710, 1716, 1719, 1722, 1731, 1739, 1742, 1750, 1758, 1765, 1766, 1774, 1775, 1780, 1782, 1791, 1796, 1805, 1814, 1817, 1820, 1825, 1834, 1840, 1842, 1849, 1857, 1858, 1858, 1867, 1876, 1882, 1887, 1894, 1896, 1902, 1903, 1910, 1918, 1922, 1923, 1923, 1925, 1926, 1930, 1931, 1931, 1932, 1939, 1943, 1951, 1952, 1954, 1962, 1969, 1972, 1975, 1980, 1989, 1992, 1993, 1996, 2002, 2003, 2003, 2004, 2008, 2015, 2023, 2026, 2034, 2042, 2042, 2050, 2059, 2067, 2073, 2080, 2086, 2092, 2092, 2096, 2103, 2109, 2118, 2120, 2128, 2129, 2135, 2140, 2140, 2143, 2146, 2149, 2156, 2156, 2162, 2171, 2173, 2181, 2190, 2195, 2200, 2205, 2212, 2220, 2225, 2232, 2241, 2249, 2253, 2262, 2262, 2265, 2271, 2274, 2282, 2282, 2282, 2289, 2293, 2298, 2299, 2301, 2305, 2311, 2318, 2325, 2328, 2331, 2339, 2342, 2345, 2349, 2349, 2350, 2352, 2360, 2367, 2372, 2372, 2375, 2383, 2392, 2399, 2402, 2410, 2419, 2419, 2423, 2430, 2434, 2435, 2438, 2447, 2456, 2460, 2466, 2470, 2475, 2475, 2479, 2486, 2487, 2489, 2498, 2501, 2507, 2513, 2513, 2518, 2526, 2530, 2535, 2540, 2548, 2550, 2551, 2555, 2564, 2571, 2574, 2575, 2577, 2584, 2590, 2592, 2597, 2606, 2614, 2614, 2621, 2622, 2623, 2628, 2635, 2640, 2648, 2649, 2649, 2656, 2662, 2667, 2667, 2671, 2671, 2679, 2685, 2693, 2700, 2701, 2702, 2710, 2711, 2717, 2722, 2725, 2733, 2734, 2743, 2746, 2749, 2749, 2757, 2758, 2758, 2766, 2771, 2773, 2773, 2782, 2791, 2796, 2798, 2801, 2803, 2803, 2804, 2808, 2808, 2817, 2823, 2824, 2831, 2838, 2838, 2839, 2843, 2847, 2851, 2856, 2857, 2860, 2860, 2865, 2869, 2872, 2877, 2878, 2878, 2884, 2888, 2893, 2899, 2903, 2908, 2916, 2916, 2916, 2922, 2929, 2934, 2937, 2946, 2953, 2961, 2967, 2968, 2977, 2980, 2989, 2989, 2994, 3001, 3010, 3017, 3023, 3031, 3040, 3040, 3046, 3054, 3059, 3060, 3067, 3072, 3076, 3076, 3078, 3083, 3083, 3092, 3093, 3095, 3102, 3108, 3114, 3122, 3124, 3125, 3125, 3134, 3141, 3143, 3151, 3160, 3166, 3175, 3178, 3187, 3188, 3189, 3198, 3203, 3210, 3217, 3218, 3225, 3225, 3233, 3238, 3246, 3247, 3248, 3249, 3258, 3263, 3268, 3274, 3274, 3276, 3280, 3284, 3292, 3296, 3298, 3300, 3306, 3311, 3312, 3318, 3325, 3332, 3335, 3343, 3351, 3352, 3360, 3367, 3370, 3378, 3384, 3385, 3391, 3392, 3393, 3398, 3407, 3409, 3415, 3417, 3424, 3431, 3435, 3440, 3448, 3454, 3463, 3468, 3468, 3477, 3485, 3490, 3495, 3502, 3503, 3511, 3518, 3518, 3519, 3520, 3522, 3522, 3531, 3534, 3537, 3537, 3545, 3547, 3556, 3562, 3566, 3575, 3578, 3585, 3591, 3591, 3593, 3597, 3604, 3613, 3618, 3627, 3629, 3630, 3637, 3637, 3638, 3645, 3648, 3656, 3664, 3666, 3671, 3676, 3684, 3686, 3687, 3694, 3701, 3702, 3702, 3703, 3710, 3712, 3712, 3718, 3723, 3729, 3737, 3746, 3746, 3754, 3761, 3761, 3769, 3775, 3776, 3779, 3787, 3792, 3792, 3800, 3802, 3809, 3818, 3820, 3821, 3828, 3832, 3834, 3840, 3847, 3851, 3854, 3858, 3864, 3867, 3867, 3873, 3876, 3879, 3879, 3886, 3889, 3892, 3899, 3900, 3909, 3913, 3920, 3923, 3928, 3933, 3935, 3938, 3947, 3956, 3956, 3963, 3970, 3973, 3982, 3985, 3993, 4000, 4004, 4006, 4009, 4009, 4017, 4020, 4026, 4032, 4034, 4037, 4037, 4040, 4049, 4056, 4060, 4061, 4065, 4074, 4079, 4084, 4086, 4092, 4096, 4102, 4111, 4120, 4124, 4124, 4131, 4135, 4140, 4140, 4143, 4146, 4155, 4164, 4167, 4172, 4173, 4180, 4185, 4190, 4199, 4201, 4208, 4210, 4211, 4216, 4217, 4217, 4226, 4232, 4237, 4243, 4244, 4253, 4259, 4268, 4277, 4280, 4289, 4296, 4297, 4301, 4305, 4308, 4312, 4315, 4324, 4324, 4327, 4332, 4337, 4346, 4353, 4356, 4361, 4368, 4369, 4375, 4381, 4389, 4398, 4407, 4408, 4412, 4414, 4415, 4416, 4423, 4425, 4431, 4433, 4435, 4443, 4443, 4447, 4452, 4455, 4464, 4466, 4467, 4475, 4478, 4487, 4496, 4503, 4504, 4512, 4514, 4517, 4522, 4527, 4528, 4534, 4543, 4550, 4550, 4553, 4556, 4560, 4566, 4574, 4581, 4589, 4597, 4605, 4610, 4619, 4620, 4621, 4624, 4624, 4626, 4626, 4634, 4636, 4638, 4645, 4653, 4658, 4666, 4674, 4674, 4680, 4687, 4692, 4699, 4703, 4711, 4720, 4722, 4724, 4726, 4734, 4741, 4743, 4748, 4757, 4764, 4766, 4774, 4783, 4792, 4792, 4794, 4799, 4807, 4811, 4815, 4821, 4828, 4837, 4838, 4847, 4854, 4858, 4865, 4865, 4869, 4878, 4886, 4895, 4898, 4903, 4910, 4915, 4918, 4920, 4920, 4920, 4922, 4929, 4936, 4944, 4949, 4951, 4960, 4963, 4968, 4976, 4980, 4989, 4995, 5004, 5013, 5018, 5022, 5029, 5034, 5039, 5048, 5050, 5056, 5062, 5062, 5069, 5074, 5076, 5077, 5084, 5086, 5088, 5093, 5097, 5099, 5100, 5109, 5109, 5112, 5118, 5126, 5130, 5139, 5145, 5150, 5153, 5160, 5166, 5172, 5179, 5186, 5194, 5197, 5203, 5204, 5210, 5211, 5214, 5216, 5225, 5229, 5230, 5237, 5246, 5253, 5257, 5263, 5263, 5268, 5272, 5278, 5286, 5288, 5295, 5304, 5311, 5314, 5315, 5320, 5321, 5322, 5331, 5334, 5338, 5345, 5354, 5358, 5364, 5366, 5372, 5380, 5382, 5383, 5383, 5387, 5395, 5395, 5400, 5404, 5405, 5413, 5422, 5430, 5438, 5444, 5453, 5456, 5465, 5474, 5479, 5488, 5497, 5501, 5501, 5502, 5503, 5505, 5506, 5508, 5512, 5520, 5524, 5525, 5525, 5525, 5534, 5541, 5549, 5549, 5558, 5560, 5567, 5570, 5577, 5585, 5589, 5593, 5602, 5605, 5605, 5611, 5611, 5616, 5625, 5629, 5632, 5640, 5646, 5653, 5659, 5668, 5674, 5682, 5690, 5692, 5692, 5695, 5702, 5711, 5716, 5723, 5728, 5731, 5731, 5733, 5741, 5741, 5749, 5758, 5764, 5769, 5769, 5775, 5779, 5787, 5793, 5799, 5800, 5803, 5810, 5810, 5819, 5827, 5832, 5833, 5836, 5844, 5848, 5853, 5856, 5861, 5861, 5865, 5867, 5870, 5873, 5874, 5880, 5883, 5890, 5895, 5897, 5906, 5912, 5917, 5923, 5926, 5930, 5937, 5944, 5953, 5955, 5964, 5971, 5973, 5980, 5989, 5991, 5998, 6000, 6003, 6007, 6014, 6019, 6027, 6029, 6035, 6042, 6043, 6047, 6048, 6054, 6055, 6055, 6060, 6060, 6065, 6071, 6074, 6074, 6083, 6088, 6093, 6099, 6102, 6105, 6113, 6120, 6123, 6127, 6128, 6130, 6130, 6138, 6146, 6154, 6161, 6170, 6176, 6176, 6184, 6191, 6196, 6197, 6203, 6210, 6212, 6219, 6223, 6230, 6236, 6245, 6247, 6250, 6252, 6261, 6265, 6267, 6271, 6273, 6278, 6278, 6282, 6284, 6288, 6294, 6301, 6305, 6306, 6309, 6315, 6318, 6323, 6327, 6333, 6333, 6341, 6346, 6354, 6363, 6372, 6375, 6383, 6391, 6400, 6407, 6410, 6418, 6419, 6420, 6423, 6432, 6441, 6449, 6453, 6457, 6461, 6469, 6471, 6473, 6482, 6489, 6489, 6497, 6499, 6504, 6504, 6508, 6517, 6523, 6523, 6527, 6535, 6541, 6545, 6553, 6562, 6566, 6566, 6570, 6570, 6573, 6575, 6583, 6592, 6597, 6601, 6602, 6606, 6614, 6615, 6615, 6624, 6633, 6639, 6646, 6655, 6655, 6664, 6666, 6672, 6676, 6678, 6683, 6690, 6698, 6701, 6703, 6703, 6711, 6719, 6728, 6731, 6736, 6741, 6741, 6742, 6748, 6750, 6759, 6760, 6762, 6765, 6768, 6774, 6782, 6783, 6784, 6793, 6793, 6800, 6809, 6812, 6814, 6819, 6826, 6830, 6833, 6837, 6844, 6851, 6860, 6869, 6872, 6876, 6880, 6880, 6884, 6886, 6891, 6891, 6896, 6898, 6904, 6913, 6916, 6918, 6921, 6926, 6932, 6938, 6942, 6951, 6960, 6968, 6972, 6973, 6973, 6980, 6983, 6990, 6995, 7003, 7004, 7011, 7015, 7016, 7019, 7020, 7021, 7024, 7026, 7032, 7036, 7043, 7045, 7051, 7051, 7057, 7065, 7068, 7072, 7078, 7080, 7083, 7090, 7093, 7098, 7102, 7104, 7110, 7112, 7121, 7130, 7135, 7137, 7143, 7152, 7157, 7166, 7170, 7179, 7187, 7188, 7190, 7194, 7194, 7194, 7194, 7198, 7204, 7207, 7208, 7209, 7215, 7218, 7218, 7223, 7227, 7230, 7230, 7234, 7234, 7243, 7247, 7250, 7256, 7257, 7259, 7265, 7270, 7275, 7283, 7285, 7294, 7300, 7309, 7316, 7321, 7323, 7330, 7337, 7337, 7339, 7346, 7347, 7348, 7356, 7363, 7366, 7371, 7379, 7379, 7386, 7395, 7398, 7400, 7405, 7413, 7420, 7426, 7433, 7436, 7444, 7452, 7461, 7469, 7470, 7479, 7487, 7494, 7502, 7504, 7511, 7519, 7524, 7528, 7529, 7537, 7546, 7553, 7558, 7564, 7566, 7572, 7573, 7582, 7589, 7593, 7598, 7607, 7612, 7613, 7621, 7630, 7638, 7639, 7643, 7646, 7652, 7658, 7658, 7667, 7668, 7673, 7681, 7690, 7694, 7699, 7706, 7715, 7724, 7731, 7731, 7733, 7735, 7738, 7743, 7747, 7755, 7759, 7764, 7769, 7769, 7776, 7782, 7787, 7790, 7792, 7792, 7796, 7803, 7811, 7819, 7826, 7835, 7841, 7843, 7848, 7852, 7855, 7855, 7860, 7861, 7861, 7866, 7867, 7869, 7878, 7884, 7892, 7900, 7908, 7917, 7925, 7932, 7934, 7941, 7943, 7949, 7958, 7963, 7967, 7974, 7979, 7985, 7993, 8002, 8011, 8017, 8022, 8027, 8034, 8036, 8037, 8041, 8044, 8051, 8053, 8053, 8053, 8056, 8056, 8059, 8060, 8064, 8068, 8076, 8078, 8078, 8084, 8090, 8099, 8104, 8110, 8113, 8120, 8123, 8132, 8140, 8141, 8145, 8151, 8156, 8160, 8160, 8166, 8168, 8177, 8179, 8185, 8191, 8199, 8206, 8211, 8216, 8225, 8232, 8237, 8246, 8252, 8260, 8263, 8269, 8273, 8277, 8282, 8283, 8287, 8291, 8298, 8304, 8308, 8311, 8320, 8322, 8330, 8332, 8335, 8340, 8343, 8348, 8356, 8360, 8367, 8373, 8375, 8383, 8388, 8389, 8398, 8405, 8410, 8413, 8418, 8418, 8424, 8433, 8438, 8445, 8447, 8452, 8461, 8461, 8469, 8471, 8471, 8477, 8486, 8495, 8498, 8500, 8507, 8509, 8516, 8521, 8530, 8532, 8541, 8550, 8557, 8561, 8561, 8566, 8574, 8578, 8580, 8583, 8587, 8590, 8592, 8592, 8601, 8604, 8610, 8613, 8619, 8620, 8627, 8632, 8639, 8643, 8643, 8644, 8650, 8657, 8663, 8663, 8663, 8670, 8677, 8685, 8686, 8695, 8701, 8704, 8710, 8715, 8715, 8717, 8720, 8728, 8734, 8735, 8740, 8745, 8749, 8754, 8754, 8756, 8763, 8772, 8777, 8786, 8786, 8795, 8800, 8802, 8811, 8818, 8822, 8826, 8835, 8839, 8846, 8847, 8848, 8856, 8862, 8864, 8870, 8870, 8878, 8882, 8886, 8895, 8896, 8898, 8905, 8910, 8917, 8926, 8935, 8937, 8937, 8942, 8944, 8948, 8955, 8959, 8967, 8967, 8969, 8973, 8979, 8984, 8991, 9000, 9000, 9009, 9017, 9019, 9019, 9027, 9035, 9035, 9044, 9053, 9061, 9067, 9072, 9079, 9080, 9085, 9092, 9095, 9096, 9104, 9105, 9106, 9109, 9110, 9117, 9118, 9123, 9129, 9133, 9142, 9148, 9156, 9157, 9161, 9161, 9164, 9167, 9172, 9177, 9186, 9195, 9202, 9203, 9205, 9207, 9211, 9212, 9219, 9225, 9225, 9227, 9231, 9236, 9237, 9244, 9244, 9246, 9246, 9253, 9261, 9264, 9271, 9271, 9273, 9280, 9286, 9290, 9296, 9302, 9304, 9309, 9317, 9325, 9327, 9328, 9331, 9338, 9338, 9344, 9349, 9351, 9360, 9364, 9372, 9375, 9378, 9383, 9389, 9390, 9394, 9398, 9403, 9409, 9417, 9423, 9431, 9432, 9436, 9439, 9447, 9450, 9453, 9462, 9465, 9469, 9475, 9478, 9480, 9487, 9494, 9499, 9508, 9515, 9519]

        x5 = 0x0000000000000042 (66 = 6 * 11)
       x12 = 0x0000000000000042 (66 = 6 * 11)

    0x10d70666c: mov	x1, x12
->  0x10d706670: cmp    x12, x5
    0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5

->  0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5
    0x10d70667c: mul    x11, x11, x4

->  0x10d70667c: mul    x11, x11, x4

...
       x12 = 0x0000000000000042 (66 = 6 * 11)
       x14 = 0x000000000000009a (154 = 14 * 11)

->  0x10d706694: cmp    x14, x12
    0x10d706698: b.ge   0x10d7066a0
    0x10d70669c: mov    x13, x12

->  0x10d706698: b.ge   0x10d7066a0
    0x10d70669c: mov    x13, x12
    0x10d7066a0: add    w16, w16, #0x4

->  0x10d7066a0: add    w16, w16, #0x4
#+end_src

#+begin_src asm
# Warmup Iteration   1: [6, 6, 6, 14, 21, 28, ...]

        x1 = 0x0000000000000042 (66)
        x5 = 0x00000000000000e7 (231 = 21)
       x12 = 0x0000000000000134 (308 = 28 * 11)

->  0x10d70666c: mov    x1, x12
    0x10d706670: cmp    x12, x5
    0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5

        x1 = 0x0000000000000134 (308 = 28 * 11) updated by `mov    x1, x12`
        x5 = 0x00000000000000e7 (231 = 21)
       x12 = 0x0000000000000134 (308 = 28 * 11)

->  0x10d706670: cmp    x12, x5
    0x10d706674: b.ge   0x10d70667c
    0x10d706678: mov    x1, x5
    0x10d70667c: mul    x11, x11, x4

->  0x10d706674: b.ge   0x10d70667c   ;; x12 >= x5 ? true so jump
    0x10d706678: mov    x1, x5
    0x10d70667c: mul    x11, x11, x4
    0x10d706680: mov    x12, x13

->  0x10d70667c: mul    x11, x11, x4

#+end_src
* 20.5.25
** cmov vs ge maxL x64
*** cmov asm
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4  407.010 ± 0.234  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  407.059 ± 0.265  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  407.024 ± 0.206  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  462.064 ± 0.195  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  462.055 ± 0.090  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  459.613 ± 0.047  ops/ms
#+end_src
*** ge asm
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4  526.915 ±  2.700  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  441.186 ±  3.792  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  406.867 ±  0.416  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  654.393 ± 10.653  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  768.750 ± 24.447  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  756.554 ± 30.098  ops/ms
#+end_src
* 19.5.25
** cmov vs ge maxL aarch64
*** cmov asm
#+begin_src
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4   993.081 ± 69.733  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  1062.870 ± 41.268  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1087.507 ± 23.149  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  1096.705 ± 73.282  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  1090.925 ± 46.719  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1095.871 ± 28.535  ops/ms
#+end_src
*** ge asm
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score      Error   Units
MinMaxVector.longReductionMultiplyMax                 50    2048  thrpt    4  1108.687 ±  656.966  ops/ms
MinMaxVector.longReductionMultiplyMax                 80    2048  thrpt    4  1356.974 ±   59.563  ops/ms
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2273.733 ± 1105.439  ops/ms
MinMaxVector.longReductionSimpleMax                   50    2048  thrpt    4  1850.653 ±  597.958  ops/ms
MinMaxVector.longReductionSimpleMax                   80    2048  thrpt    4  2236.841 ±  248.953  ops/ms
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3665.151 ±  136.075  ops/ms
#+end_src
** lt CondBranch
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score    Error     Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    4   1446.449 ± 47.243    ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC               100    2048  thrpt           0.033               #/op
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt           0.034               #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt          ≈ 10⁻⁵           miss/brs
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt       11983.805               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt        2560.708               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt           0.214             #/insn
#+end_src
** ge CondBranch
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score    Error     Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    4   2354.700 ± 69.609    ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC               100    2048  thrpt           1.001               #/op
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt           1.002               #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt          ≈ 10⁻³           miss/brs
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt       11822.844               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt        2568.671               #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt           0.217             #/insn
#+end_src
* 14.5.25
** linux/aarch64
*** ge probabilities
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax             50    2048  thrpt    8  1147.000 ±  98.397  ops/ms
MinMaxVector.longReductionMultiplyMax             80    2048  thrpt    8  1267.215 ±  74.334  ops/ms
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2327.224 ± 191.344  ops/ms
#+end_src
**** asm
*** ge perfnorm branch-misses/br_mis_pred,inst_retired
#+begin_src bash
Benchmark                                            (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                          100    2048  thrpt    4    268.964 ± 44.313     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                      100    2048  thrpt           0.533           clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                      100    2048  thrpt           1.875           insns/clk
MinMaxVector.longReductionMultiplyMax:br_mis_pred              100    2048  thrpt           1.182                #/op
MinMaxVector.longReductionMultiplyMax:branch-misses            100    2048  thrpt           1.182                #/op
MinMaxVector.longReductionMultiplyMax:cycles                   100    2048  thrpt        6334.979                #/op
MinMaxVector.longReductionMultiplyMax:inst_retired             100    2048  thrpt       11875.027                #/op
MinMaxVector.longReductionMultiplyMax:instructions             100    2048  thrpt       11875.025                #/op
#+end_src
*** lt perfnorm branch-misses/br_mis_pred,inst_retired
#+begin_src bash
Benchmark                                            (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                          100    2048  thrpt    4    141.539 ± 24.556     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                      100    2048  thrpt           0.991           clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                      100    2048  thrpt           1.009           insns/clk
MinMaxVector.longReductionMultiplyMax:br_mis_pred              100    2048  thrpt         222.361                #/op
MinMaxVector.longReductionMultiplyMax:branch-misses            100    2048  thrpt         222.361                #/op
MinMaxVector.longReductionMultiplyMax:cycles                   100    2048  thrpt       12038.018                #/op
MinMaxVector.longReductionMultiplyMax:inst_retired             100    2048  thrpt       12144.339                #/op
MinMaxVector.longReductionMultiplyMax:instructions             100    2048  thrpt       12144.342                #/op
#+end_src
*** ge llvm-mca bottleneck
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca --bottleneck-analysis ge-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


No resource or data dependency bottlenecks discovered.


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x6, x5
 1      1     1.00                        b.ge	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x21, x23
 1      1     1.00                        b.ge	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x22, x5
 1      1     1.00                        b.ge	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x4, x6
 1      1     1.00                        b.ge	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x5
1.00    -      -      -      -      -      -      -     b.ge	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x21, x23
1.00    -      -      -      -      -      -      -     b.ge	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x22, x5
1.00    -      -      -      -      -      -      -     b.ge	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x4, x6
1.00    -      -      -      -      -      -      -     b.ge	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** lt llvm-mca bottleneck
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca --bottleneck-analysis lt-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


No resource or data dependency bottlenecks discovered.


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x5, x6
 1      1     1.00                        b.lt	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x23, x21
 1      1     1.00                        b.lt	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x5, x22
 1      1     1.00                        b.lt	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x6, x4
 1      1     1.00                        b.lt	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x6
1.00    -      -      -      -      -      -      -     b.lt	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x23, x21
1.00    -      -      -      -      -      -      -     b.lt	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x22
1.00    -      -      -      -      -      -      -     b.lt	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x4
1.00    -      -      -      -      -      -      -     b.lt	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** ge llvm-mca
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca ge-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x6, x5
 1      1     1.00                        b.ge	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x21, x23
 1      1     1.00                        b.ge	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x22, x5
 1      1     1.00                        b.ge	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x4, x6
 1      1     1.00                        b.ge	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x5
1.00    -      -      -      -      -      -      -     b.ge	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x21, x23
1.00    -      -      -      -      -      -      -     b.ge	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x22, x5
1.00    -      -      -      -      -      -      -     b.ge	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x4, x6
1.00    -      -      -      -      -      -      -     b.ge	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** lt llvm-mca
#+begin_src bash
[nix-shell:~/tmp/avoid-cmov-long-min-max/1405]$ llvm-mca lt-linux-aarch64.s
Iterations:        100
Instructions:      2600
Total Cycles:      913
Total uOps:        2700

Dispatch Width:    3
uOps Per Cycle:    2.96
IPC:               2.85
Block RThroughput: 9.0


Instruction Info:
[1]: #uOps
[2]: Latency
[3]: RThroughput
[4]: MayLoad
[5]: MayStore
[6]: HasSideEffects (U)

[1]    [2]    [3]    [4]    [5]    [6]    Instructions:
 1      2     1.00                        add	x4, x7, w11, sxtw #3
 2      4     1.00    *                   ldp	x6, x21, [x4, #16]
 1      4     1.00    *                   ldr	x22, [x4, #32]
 1      5     1.00                        mul	x6, x6, x0
 1      4     1.00    *                   ldr	x4, [x4, #40]
 1      5     1.00                        mul	x21, x21, x0
 1      5     1.00                        mul	x22, x22, x0
 1      1     0.50                        mov	x23, x6
 1      1     0.50                        cmp	x5, x6
 1      1     1.00                        b.lt	br1
 1      1     0.50                        mov	x23, x5
 1      5     1.00                        mul	x4, x4, x0
 1      1     0.50                        mov	x5, x21
 1      1     0.50                        cmp	x23, x21
 1      1     1.00                        b.lt	br2
 1      1     0.50                        mov	x5, x23
 1      1     0.50                        mov	x6, x22
 1      1     0.50                        cmp	x5, x22
 1      1     1.00                        b.lt	br3
 1      1     0.50                        mov	x6, x5
 1      1     0.50                        add	w11, w11, #4
 1      1     0.50                        mov	x5, x4
 1      1     0.50                        cmp	x6, x4
 1      1     1.00                        b.lt	br4
 1      1     0.50                        mov	x5, x6
 1      1     0.50                        cmp	w11, w13


Resources:
[0]   - A57UnitB
[1.0] - A57UnitI
[1.1] - A57UnitI
[2]   - A57UnitL
[3]   - A57UnitM
[4]   - A57UnitS
[5]   - A57UnitW
[6]   - A57UnitX


Resource pressure per iteration:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]
4.00   7.00   7.00   3.00   5.00    -      -      -

Resource pressure by instruction:
[0]    [1.0]  [1.1]  [2]    [3]    [4]    [5]    [6]    Instructions:
 -      -      -      -     1.00    -      -      -     add	x4, x7, w11, sxtw #3
 -      -      -     1.00    -      -      -      -     ldp	x6, x21, [x4, #16]
 -      -      -     1.00    -      -      -      -     ldr	x22, [x4, #32]
 -      -      -      -     1.00    -      -      -     mul	x6, x6, x0
 -      -      -     1.00    -      -      -      -     ldr	x4, [x4, #40]
 -      -      -      -     1.00    -      -      -     mul	x21, x21, x0
 -      -      -      -     1.00    -      -      -     mul	x22, x22, x0
 -     0.33   0.67    -      -      -      -      -     mov	x23, x6
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x6
1.00    -      -      -      -      -      -      -     b.lt	br1
 -      -     1.00    -      -      -      -      -     mov	x23, x5
 -      -      -      -     1.00    -      -      -     mul	x4, x4, x0
 -     0.33   0.67    -      -      -      -      -     mov	x5, x21
 -     0.67   0.33    -      -      -      -      -     cmp	x23, x21
1.00    -      -      -      -      -      -      -     b.lt	br2
 -     0.83   0.17    -      -      -      -      -     mov	x5, x23
 -     0.33   0.67    -      -      -      -      -     mov	x6, x22
 -     0.67   0.33    -      -      -      -      -     cmp	x5, x22
1.00    -      -      -      -      -      -      -     b.lt	br3
 -     0.18   0.82    -      -      -      -      -     mov	x6, x5
 -     0.82   0.18    -      -      -      -      -     add	w11, w11, #4
 -     0.33   0.67    -      -      -      -      -     mov	x5, x4
 -     0.67   0.33    -      -      -      -      -     cmp	x6, x4
1.00    -      -      -      -      -      -      -     b.lt	br4
 -     0.35   0.65    -      -      -      -      -     mov	x5, x6
 -     0.82   0.18    -      -      -      -      -     cmp	w11, w13
#+end_src
*** ge assembly
#+begin_src asm
   add	x4, x7, w11, sxtw #3
   ldp		x6, x21, [x4, #0x10]
   ldr		x22, [x4, #0x20]
   mul		x6, x6, x0
   ldr		x4, [x4, #0x28]
   mul		x21, x21, x0
   mul		x22, x22, x0
   mov		x23, x6
   cmp		x6, x5
   b.ge	b1
   mov		x23, x5
b1:
   mul	x4, x4, x0
   mov		x5, x21
   cmp		x21, x23
   b.ge	b2
   mov		x5, x23
b2:
   mov	x6, x22
   cmp		x22, x5
   b.ge	b3
   mov		x6, x5
b3:
   add	w11, w11, #4
   mov		x5, x4
   cmp		x4, x6
   b.ge	b4
   mov		x5, x6
b4:
   cmp	w11, w13
   b.lt	#0xffff9caf6ab0
#+end_src
*** lt assembly
#+begin_src asm
   add		x4, x7, w11, sxtw #3
   ldp		x6, x21, [x4, #0x10]
   ldr		x22, [x4, #0x20]
   mul		x6, x6, x0
   ldr		x4, [x4, #0x28]
   mul		x21, x21, x0
   mul		x22, x22, x0
   mov		x23, x6
   cmp		x5, x6
   b.lt		b1
   mov		x23, x5
b1:
   mul		x4, x4, x0
   mov		x5, x21
   cmp		x23, x21
   b.lt		b2
   mov		x5, x23
b2:
   mov		x6, x22
   cmp		x5, x22
   b.lt		b3
   mov		x6, x5
b3:
   add		w11, w11, #4
   mov		x5, x4
   cmp		x6, x4
   b.lt		b4
   mov		x5, x6
b4:
   cmp		w11, w13
   b.lt		#0xffff88af49b0
#+end_src
*** ge perfnorm cycles/instructions
#+begin_src bash
Benchmark                                             (probability)  (size)   Mode  Cnt      Score   Error      Units
MinMaxVector.longReductionMultiplyMax                           100    2048  thrpt    4    271.768 ± 0.251     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                       100    2048  thrpt           0.527          clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                       100    2048  thrpt           1.899          insns/clk
MinMaxVector.longReductionMultiplyMax:cycles:u                  100    2048  thrpt        6232.475               #/op
MinMaxVector.longReductionMultiplyMax:instructions:u            100    2048  thrpt       11836.351               #/op
#+end_src
*** lt perfnorm
#+begin_src bash
Benchmark                                             (probability)  (size)   Mode  Cnt      Score   Error      Units
MinMaxVector.longReductionMultiplyMax                           100    2048  thrpt    4    150.169 ± 4.693     ops/ms
MinMaxVector.longReductionMultiplyMax:CPI                       100    2048  thrpt           0.935          clks/insn
MinMaxVector.longReductionMultiplyMax:IPC                       100    2048  thrpt           1.069          insns/clk
MinMaxVector.longReductionMultiplyMax:cycles:u                  100    2048  thrpt       11254.151               #/op
MinMaxVector.longReductionMultiplyMax:instructions:u            100    2048  thrpt       12033.363               #/op
#+end_src
*** ge
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  272.786 ± 3.109  ops/ms
#+end_src
**** asm
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1058

                      0x0000ffff9caf69c4:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 128)
                      0x0000ffff9caf69c8:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 127)
                      0x0000ffff9caf69cc:   ldp		x29, x30, [sp, #0x40]
                      0x0000ffff9caf69d0:   add		sp, sp, #0x50
                      0x0000ffff9caf69d4:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                      0x0000ffff9caf69d8:   cmp		sp, x8
                      0x0000ffff9caf69dc:   b.hi		#0xffff9caf6c14
                      0x0000ffff9caf69e0:   ret
   0.04%   ↗          0x0000ffff9caf69e4:   mov		x5, x13             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                                    ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.01%   │          0x0000ffff9caf69e8:   add		x12, x7, w11, sxtw #3
           │          0x0000ffff9caf69ec:   ldr		x12, [x12, #0x10]
           │          0x0000ffff9caf69f0:   mul		x12, x12, x0
           │          0x0000ffff9caf69f4:   add		w11, w11, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           │                                                                    ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           │                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
           │          0x0000ffff9caf69f8:   mov		x13, x5
   0.03%   │          0x0000ffff9caf69fc:   cmp		x5, x12
          ╭│          0x0000ffff9caf6a00:   b.ge		#0xffff9caf6a08
          ││          0x0000ffff9caf6a04:   mov		x13, x12            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                                    ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ↘│          0x0000ffff9caf6a08:   cmp		w11, w14
           ╰          0x0000ffff9caf6a0c:   b.lt		#0xffff9caf69e4     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.15%              0x0000ffff9caf6a10:   ldarb		w12, [x2]           ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@32 (line 126)
   0.09%              0x0000ffff9caf6a14:   ldr		x14, [x28, #0x30]
                      0x0000ffff9caf6a18:   add		x20, x20, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 r19=Oop }
                                                                                ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                                                                                ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@35 (line 126)
   0.07%              0x0000ffff9caf6a1c:   ldr		wzr, [x14]          ;   {poll}
                      0x0000ffff9caf6a20:   cbnz		w12, #0xffff9caf6998;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@38 (line 127)
   0.00%              0x0000ffff9caf6a24:   ldr		w14, [x16, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@8 (line 284)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a28:   cmp		w14, #0
                      0x0000ffff9caf6a2c:   b.le		#0xffff9caf6b3c     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.01%              0x0000ffff9caf6a30:   ldr		w13, [x16, #0x2c]   ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@18 (line 285)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a34:   ldr		w5, [x13, #0xc]     ; implicit exception: dispatches to 0x0000ffff9caf6b44
                                                                                ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a38:   sxtw		x11, w14
                      0x0000ffff9caf6a3c:   sub		x12, x11, #3
                      0x0000ffff9caf6a40:   mov		x6, x12
   0.02%              0x0000ffff9caf6a44:   cmp		x12, x1
            ╭         0x0000ffff9caf6a48:   b.ge		#0xffff9caf6a50
            │         0x0000ffff9caf6a4c:   mov		x6, x1
            ↘         0x0000ffff9caf6a50:   mov		x7, x13             ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@18 (line 285)
                                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                      0x0000ffff9caf6a54:   sxtw		x4, w5
                      0x0000ffff9caf6a58:   sub		x11, x11, #1
                      0x0000ffff9caf6a5c:   mov		w12, w6
   0.01%              0x0000ffff9caf6a60:   cbz		w5, #0xffff9caf6b44
   0.01%              0x0000ffff9caf6a64:   cmp		x11, x4
                      0x0000ffff9caf6a68:   b.hs	#0xffff9caf6b44
   0.03%              0x0000ffff9caf6a6c:   ldr		x11, [x13, #0x10]
                      0x0000ffff9caf6a70:   mul		x11, x11, x0
                      0x0000ffff9caf6a74:   mov		x5, x11
                      0x0000ffff9caf6a78:   cmp		x11, x18
             ╭        0x0000ffff9caf6a7c:   b.ge	#0xffff9caf6a84
             │        0x0000ffff9caf6a80:   mov		x5, x18             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             │                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             │                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.05%     ↘        0x0000ffff9caf6a84:   cmp	w12, #1
                      0x0000ffff9caf6a88:   b.le	#0xffff9caf6b6c
                      0x0000ffff9caf6a8c:   mov		w11, #1
                   ↗  0x0000ffff9caf6a90:   cmp	w12, w11
                   │  0x0000ffff9caf6a94:   sub		w4, w12, w11
                   │  0x0000ffff9caf6a98:   csel	w13, wzr, w4, lt
   0.01%           │  0x0000ffff9caf6a9c:   cmp		w13, #0xfa0
                   │  0x0000ffff9caf6aa0:   csel	w4, w10, w13, hi
                   │  0x0000ffff9caf6aa4:   add		w13, w4, w11
                   │  0x0000ffff9caf6aa8:   nop
   0.04%           │  0x0000ffff9caf6aac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                   │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                  ↗│  0x0000ffff9caf6ab0:   add	x4, x7, w11, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                  ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
                  ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   8.46%          ││  0x0000ffff9caf6ab4:   ldp		x6, x21, [x4, #0x10]
   0.18%          ││  0x0000ffff9caf6ab8:   ldr		x22, [x4, #0x20]
                  ││  0x0000ffff9caf6abc:   mul		x6, x6, x0
   7.66%          ││  0x0000ffff9caf6ac0:   ldr		x4, [x4, #0x28]
                  ││  0x0000ffff9caf6ac4:   mul		x21, x21, x0
                  ││  0x0000ffff9caf6ac8:   mul		x22, x22, x0
                  ││  0x0000ffff9caf6acc:   mov		x23, x6
                  ││  0x0000ffff9caf6ad0:   cmp		x6, x5
              ╭   ││  0x0000ffff9caf6ad4:   b.ge	#0xffff9caf6adc
              │   ││  0x0000ffff9caf6ad8:   mov		x23, x5
   7.94%      ↘   ││  0x0000ffff9caf6adc:   mul	x4, x4, x0
                  ││  0x0000ffff9caf6ae0:   mov		x5, x21
                  ││  0x0000ffff9caf6ae4:   cmp		x21, x23
               ╭  ││  0x0000ffff9caf6ae8:   b.ge	#0xffff9caf6af0
               │  ││  0x0000ffff9caf6aec:   mov		x5, x23
  22.19%       ↘  ││  0x0000ffff9caf6af0:   mov	x6, x22
                  ││  0x0000ffff9caf6af4:   cmp		x22, x5
                ╭ ││  0x0000ffff9caf6af8:   b.ge	#0xffff9caf6b00
                │ ││  0x0000ffff9caf6afc:   mov		x6, x5
  24.20%        ↘ ││  0x0000ffff9caf6b00:   add	w11, w11, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
                  ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                  ││  0x0000ffff9caf6b04:   mov		x5, x4
                  ││  0x0000ffff9caf6b08:   cmp		x4, x6
                 ╭││  0x0000ffff9caf6b0c:   b.ge	#0xffff9caf6b14
                 │││  0x0000ffff9caf6b10:   mov		x5, x6              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                 │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
                 │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  26.47%         ↘││  0x0000ffff9caf6b14:   cmp	w11, w13
                  ╰│  0x0000ffff9caf6b18:   b.lt	#0xffff9caf6ab0     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                   │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.25%           │  0x0000ffff9caf6b1c:   ldr		x4, [x28, #0x30]    ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg7=Oop r19=Oop }
                   │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                   │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.27%           │  0x0000ffff9caf6b20:   ldr		wzr, [x4]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                   │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                   │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │                                                            ;   {poll}
                   │  0x0000ffff9caf6b24:   cmp		w11, w12
                   ╰  0x0000ffff9caf6b28:   b.lt	#0xffff9caf6a90
                      0x0000ffff9caf6b2c:   cmp		w11, w14
                      0x0000ffff9caf6b30:   b.lt	#0xffff9caf69e8
....................................................................................................
  98.20%  <total for region 1>
#+end_src
*** lt
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  150.761 ± 6.003  ops/ms
#+end_src
**** asm
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1053

   0.06%          0x0000ffff88af4984:   cmp		w12, #1
                  0x0000ffff88af4988:   b.le		#0xffff88af4a6c
                  0x0000ffff88af498c:   mov		w11, #1
               ↗  0x0000ffff88af4990:   cmp		w12, w11
               │  0x0000ffff88af4994:   sub		w4, w12, w11
               │  0x0000ffff88af4998:   csel		w13, wzr, w4, lt
               │  0x0000ffff88af499c:   cmp		w13, #0xfa0
               │  0x0000ffff88af49a0:   csel		w4, w10, w13, hi
               │  0x0000ffff88af49a4:   add		w13, w4, w11
               │  0x0000ffff88af49a8:   nop
   0.01%       │  0x0000ffff88af49ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   3.22%      ↗│  0x0000ffff88af49b0:   add		x4, x7, w11, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  12.69%      ││  0x0000ffff88af49b4:   ldp		x6, x21, [x4, #0x10]
   1.66%      ││  0x0000ffff88af49b8:   ldr		x22, [x4, #0x20]
              ││  0x0000ffff88af49bc:   mul		x6, x6, x0
   4.46%      ││  0x0000ffff88af49c0:   ldr		x4, [x4, #0x28]
              ││  0x0000ffff88af49c4:   mul		x21, x21, x0
              ││  0x0000ffff88af49c8:   mul		x22, x22, x0
              ││  0x0000ffff88af49cc:   mov		x23, x6
   0.01%      ││  0x0000ffff88af49d0:   cmp		x5, x6
          ╭   ││  0x0000ffff88af49d4:   b.lt		#0xffff88af49dc
   5.11%  │   ││  0x0000ffff88af49d8:   mov		x23, x5
  10.12%  ↘   ││  0x0000ffff88af49dc:   mul		x4, x4, x0
              ││  0x0000ffff88af49e0:   mov		x5, x21
              ││  0x0000ffff88af49e4:   cmp		x23, x21
           ╭  ││  0x0000ffff88af49e8:   b.lt		#0xffff88af49f0
   5.70%   │  ││  0x0000ffff88af49ec:   mov		x5, x23
  13.10%   ↘  ││  0x0000ffff88af49f0:   mov		x6, x22
              ││  0x0000ffff88af49f4:   cmp		x5, x22
            ╭ ││  0x0000ffff88af49f8:   b.lt		#0xffff88af4a00
   9.09%    │ ││  0x0000ffff88af49fc:   mov		x6, x5
  12.90%    ↘ ││  0x0000ffff88af4a00:   add		w11, w11, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
              ││  0x0000ffff88af4a04:   mov		x5, x4
              ││  0x0000ffff88af4a08:   cmp		x6, x4
             ╭││  0x0000ffff88af4a0c:   b.lt		#0xffff88af4a14
   5.00%     │││  0x0000ffff88af4a10:   mov		x5, x6              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  13.41%     ↘││  0x0000ffff88af4a14:   cmp		w11, w13
              ╰│  0x0000ffff88af4a18:   b.lt		#0xffff88af49b0     ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.05%       │  0x0000ffff88af4a1c:   ldr		x4, [x28, #0x30]    ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg7=Oop r19=Oop }
               │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
               │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.03%       │  0x0000ffff88af4a20:   ldr		wzr, [x4]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               │                                                            ;   {poll}
               │  0x0000ffff88af4a24:   cmp		w11, w12
               ╰  0x0000ffff88af4a28:   b.lt		#0xffff88af4990
                  0x0000ffff88af4a2c:   cmp		w11, w14
                  0x0000ffff88af4a30:   b.lt		#0xffff88af48e8
....................................................................................................
  96.58%  <total for region 1>
#+end_src
* 7.5.25
** pipeline stalls
*** ge
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score     Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   2002.891 ± 622.302     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.977                 #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        1935.728                 #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.168            clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11507.732                 #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           5.945            insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt           0.717                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_IC                 100    2048  thrpt           0.151                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_ITLB               100    2048  thrpt           0.020                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL_DISPATCH                     100    2048  thrpt           0.160                 #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10244.432                 #/op
#+end_src
*** lt
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   1358.165 ± 71.286     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.060                #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        2903.718                #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.245           clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11831.397                #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           4.075           insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt         483.435                #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_IC                 100    2048  thrpt           0.803                #/op
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE_ITLB               100    2048  thrpt           0.134                #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL_DISPATCH                     100    2048  thrpt           0.790                #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10023.440                #/op
#+end_src
** pipeline cond branch
*** ge
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score     Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   2370.269 ± 894.659     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.989                 #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        1657.699                 #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.143            clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11600.537                 #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           6.998            insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt           0.562                 #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL                              100    2048  thrpt           0.316                 #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10740.165                 #/op
#+end_src
*** lt
#+begin_src bash
Benchmark                                                          (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                                        100    2048  thrpt    4   1367.168 ± 22.211     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_COND_MISPRED_NONSPEC            100    2048  thrpt           0.025                #/op
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                      100    2048  thrpt        2886.518                #/op
MinMaxVector.longReductionMultiplyMax:CPI                                    100    2048  thrpt           0.244           clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                               100    2048  thrpt       11839.732                #/op
MinMaxVector.longReductionMultiplyMax:IPC                                    100    2048  thrpt           4.102           insns/clk
MinMaxVector.longReductionMultiplyMax:MAP_DISPATCH_BUBBLE                    100    2048  thrpt         472.260                #/op
MinMaxVector.longReductionMultiplyMax:MAP_STALL                              100    2048  thrpt           0.415                #/op
MinMaxVector.longReductionMultiplyMax:RETIRE_UOP                             100    2048  thrpt       10028.665                #/op
#+end_src
** Exploring performance monitoring counters in macos
Memory Order Violation Density:
<Ev ST_MEMORY_ORDER_VIOLATION_NONSPEC> / <Ev ST_UNIT_UOP>
Proportion retired stores that caused a pipeline flush
and replay of loads and subsequent instructions of all
stores.

ST_UNIT_UOP Uops that flowed through the Store Unit
ST_MEMORY_ORDER_VIOLATION_NONSPEC Retired stores that triggered memory order violations

MAP_DISPATCH_BUBBLE Cycles while the Map Unit was not stalled and Decode Unit did not send any uops
MAP_STALL Cycles while the Map Unit was stalled for any reason
SCHEDULE_UOP Uops issued by the scheduler to any execution unit
RETIRE_UOP All retired uops
CORE_ACTIVE_CYCLE Cycles while the core was active
IPC
BRANCH_COND_MISPRED_NONSPEC Retired conditional branch instructions that mispredicted
INST_ALL All retired instructions
* 6.5.25
** comparison
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2175.597 ± 128.123  ops/ms # ge, loop unroll
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1281.837 ±  82.221  ops/ms # le, loop unroll
#+end_src

asm, ge, loop unroll
#+begin_src bash
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820

                 0x000000010e96b290:   cmp		w17, w12
                 0x000000010e96b294:   sub		w11, w17, w12
                 0x000000010e96b298:   csel		w10, wzr, w11, lt
                 0x000000010e96b29c:   cmp		w10, #0xfa0
                 0x000000010e96b2a0:   csel		w11, w14, w10, hi
                 0x000000010e96b2a4:   add		w10, w11, w12
                 0x000000010e96b2a8:   nop
                 0x000000010e96b2ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      ↗  0x000000010e96b2b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      │  0x000000010e96b2b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010e96b2b8:   ldr		x23, [x11, #0x20]
              │  0x000000010e96b2bc:   mul		x21, x21, x16
  35.87%      │  0x000000010e96b2c0:   ldr		x11, [x11, #0x28]
              │  0x000000010e96b2c4:   mul		x22, x22, x16
              │  0x000000010e96b2c8:   mul		x23, x23, x16
              │  0x000000010e96b2cc:   mov		x24, x21
   1.32%      │  0x000000010e96b2d0:   cmp		x21, x7
          ╭   │  0x000000010e96b2d4:   b.ge		#0x10e96b2dc
          │   │  0x000000010e96b2d8:   mov		x24, x7
   7.22%  ↘   │  0x000000010e96b2dc:   mul		x11, x11, x16
              │  0x000000010e96b2e0:   mov		x7, x22
              │  0x000000010e96b2e4:   cmp		x22, x24
           ╭  │  0x000000010e96b2e8:   b.ge		#0x10e96b2f0
           │  │  0x000000010e96b2ec:   mov		x7, x24
  19.64%   ↘  │  0x000000010e96b2f0:   mov		x21, x23
   2.35%      │  0x000000010e96b2f4:   cmp		x23, x7
   1.13%    ╭ │  0x000000010e96b2f8:   b.ge		#0x10e96b300
            │ │  0x000000010e96b2fc:   mov		x21, x7
   6.24%    ↘ │  0x000000010e96b300:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010e96b304:   mov		x7, x11
              │  0x000000010e96b308:   cmp		x11, x21
             ╭│  0x000000010e96b30c:   b.ge		#0x10e96b314
             ││  0x000000010e96b310:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  24.82%     ↘│  0x000000010e96b314:   cmp		w12, w10
              ╰  0x000000010e96b318:   b.lt		#0x10e96b2b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.74%         0x000000010e96b31c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x000000010e96b320:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010e96b324:   cmp		w12, w17
                 0x000000010e96b328:   b.lt		#0x10e96b290
                 0x000000010e96b32c:   cmp		w12, w13
                 0x000000010e96b330:   b.lt		#0x10e96b1e8
#+end_src

asm, lt, loop unroll
#+begin_src bash
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842

                 0x000000010cde2690:   cmp		w17, w12
                 0x000000010cde2694:   sub		w11, w17, w12
                 0x000000010cde2698:   csel		w10, wzr, w11, lt
                 0x000000010cde269c:   cmp		w10, #0xfa0
                 0x000000010cde26a0:   csel		w11, w14, w10, hi
                 0x000000010cde26a4:   add		w10, w11, w12
                 0x000000010cde26a8:   nop
                 0x000000010cde26ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.90%      ↗  0x000000010cde26b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010cde26b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010cde26b8:   ldr		x23, [x11, #0x20]
              │  0x000000010cde26bc:   mul		x21, x21, x16
  20.85%      │  0x000000010cde26c0:   ldr		x11, [x11, #0x28]
              │  0x000000010cde26c4:   mul		x22, x22, x16
              │  0x000000010cde26c8:   mul		x23, x23, x16
              │  0x000000010cde26cc:   mov		x24, x21
   0.01%      │  0x000000010cde26d0:   cmp		x7, x21
   0.00%  ╭   │  0x000000010cde26d4:   b.lt		#0x10cde26dc
   0.88%  │   │  0x000000010cde26d8:   mov		x24, x7
  15.39%  ↘   │  0x000000010cde26dc:   mul		x11, x11, x16
              │  0x000000010cde26e0:   mov		x7, x22
              │  0x000000010cde26e4:   cmp		x24, x22
           ╭  │  0x000000010cde26e8:   b.lt		#0x10cde26f0
   1.63%   │  │  0x000000010cde26ec:   mov		x7, x24
  18.11%   ↘  │  0x000000010cde26f0:   mov		x21, x23
              │  0x000000010cde26f4:   cmp		x7, x23
            ╭ │  0x000000010cde26f8:   b.lt		#0x10cde2700
   2.03%    │ │  0x000000010cde26fc:   mov		x21, x7
  17.38%    ↘ │  0x000000010cde2700:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%      │  0x000000010cde2704:   mov		x7, x11
              │  0x000000010cde2708:   cmp		x21, x11
             ╭│  0x000000010cde270c:   b.lt		#0x10cde2714
   0.97%     ││  0x000000010cde2710:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  19.15%     ↘│  0x000000010cde2714:   cmp		w12, w10
   0.07%      ╰  0x000000010cde2718:   b.lt		#0x10cde26b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%         0x000000010cde271c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010cde2720:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010cde2724:   cmp		w12, w17
                 0x000000010cde2728:   b.lt		#0x10cde2690
                 0x000000010cde272c:   cmp		w12, w13
                 0x000000010cde2730:   b.lt		#0x10cde25e8
#+end_src
** ge
*** loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2175.597 ± 128.123  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 218848 total address lines.
Perf output processed (skipped 20.133 seconds):
 Column 1: sampled_pc (20047 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820

                 0x000000010e96b290:   cmp		w17, w12
                 0x000000010e96b294:   sub		w11, w17, w12
                 0x000000010e96b298:   csel		w10, wzr, w11, lt
                 0x000000010e96b29c:   cmp		w10, #0xfa0
                 0x000000010e96b2a0:   csel		w11, w14, w10, hi
                 0x000000010e96b2a4:   add		w10, w11, w12
                 0x000000010e96b2a8:   nop
                 0x000000010e96b2ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      ↗  0x000000010e96b2b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%      │  0x000000010e96b2b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010e96b2b8:   ldr		x23, [x11, #0x20]
              │  0x000000010e96b2bc:   mul		x21, x21, x16
  35.87%      │  0x000000010e96b2c0:   ldr		x11, [x11, #0x28]
              │  0x000000010e96b2c4:   mul		x22, x22, x16
              │  0x000000010e96b2c8:   mul		x23, x23, x16
              │  0x000000010e96b2cc:   mov		x24, x21
   1.32%      │  0x000000010e96b2d0:   cmp		x21, x7
          ╭   │  0x000000010e96b2d4:   b.ge		#0x10e96b2dc
          │   │  0x000000010e96b2d8:   mov		x24, x7
   7.22%  ↘   │  0x000000010e96b2dc:   mul		x11, x11, x16
              │  0x000000010e96b2e0:   mov		x7, x22
              │  0x000000010e96b2e4:   cmp		x22, x24
           ╭  │  0x000000010e96b2e8:   b.ge		#0x10e96b2f0
           │  │  0x000000010e96b2ec:   mov		x7, x24
  19.64%   ↘  │  0x000000010e96b2f0:   mov		x21, x23
   2.35%      │  0x000000010e96b2f4:   cmp		x23, x7
   1.13%    ╭ │  0x000000010e96b2f8:   b.ge		#0x10e96b300
            │ │  0x000000010e96b2fc:   mov		x21, x7
   6.24%    ↘ │  0x000000010e96b300:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010e96b304:   mov		x7, x11
              │  0x000000010e96b308:   cmp		x11, x21
             ╭│  0x000000010e96b30c:   b.ge		#0x10e96b314
             ││  0x000000010e96b310:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  24.82%     ↘│  0x000000010e96b314:   cmp		w12, w10
              ╰  0x000000010e96b318:   b.lt		#0x10e96b2b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.74%         0x000000010e96b31c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x000000010e96b320:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010e96b324:   cmp		w12, w17
                 0x000000010e96b328:   b.lt		#0x10e96b290
                 0x000000010e96b32c:   cmp		w12, w13
                 0x000000010e96b330:   b.lt		#0x10e96b1e8
....................................................................................................
  99.42%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.42%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820
   0.35%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820
   0.04%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.03%    libsystem_kernel.dylib  thread_self_trap
   0.02%    libsystem_kernel.dylib  __psynch_cvwait
   0.01%                      dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%              libjvm.dylib  IntervalWalker::allocator() const
   0.00%              libjvm.dylib  CompileQueue::get(CompilerThread*)
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%               interpreter  invokevirtual  182 invokevirtual
   0.00%         libsystem_c.dylib  __sflush
   0.00%    libsystem_kernel.dylib  __psynch_mutexdrop
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
   0.00%                            <unknown>
....................................................................................................
 100.00%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.77%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 820
   0.04%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.03%    libsystem_kernel.dylib  thread_self_trap
   0.02%    libsystem_kernel.dylib  __psynch_cvwait
   0.01%                      dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%               interpreter  invokevirtual  182 invokevirtual
   0.00%              libjvm.dylib  IntervalWalker::allocator() const
   0.00%    libsystem_kernel.dylib  __psynch_mutexdrop
   0.00%         libsystem_c.dylib  __sflush
   0.00%                            <unknown>
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%              libjvm.dylib  CompileQueue::get(CompilerThread*)
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
....................................................................................................
 100.00%  <totals>

....[Distribution by Source]........................................................................
  99.77%               C2, level 4
   0.17%    libsystem_kernel.dylib
   0.02%              libjvm.dylib
   0.01%                      dyld
   0.00%
   0.00%         libsystem_c.dylib
   0.00%               interpreter
   0.00%  libsystem_platform.dylib
....................................................................................................
 100.00%  <totals>



# Run complete. Total time: 00:00:53

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2042.190 ± 840.609  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN               ---
#+end_src
*** no loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1397.960 ± 19.726  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 209288 total address lines.
Perf output processed (skipped 18.708 seconds):
 Column 1: sampled_pc (20052 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810

                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
              0x000000010e8d8560:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
              0x000000010e8d8564:   ldp		x29, x30, [sp, #0x50]
              0x000000010e8d8568:   add		sp, sp, #0x60
              0x000000010e8d856c:   ldr		x8, [x28, #0x28]    ;   {poll_return}
              0x000000010e8d8570:   cmp		sp, x8
              0x000000010e8d8574:   b.hi		#0x10e8d86ec
              0x000000010e8d8578:   ret
              0x000000010e8d857c:   nop
   0.18%   ↗  0x000000010e8d8580:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%   │  0x000000010e8d8584:   add		x4, x5, w11, sxtw #3
  57.74%   │  0x000000010e8d8588:   ldr		x4, [x4, #0x10]
           │  0x000000010e8d858c:   mul		x4, x4, x17
   0.01%   │  0x000000010e8d8590:   add		w11, w11, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
           │  0x000000010e8d8594:   mov		x6, x13
           │  0x000000010e8d8598:   cmp		x13, x4
          ╭│  0x000000010e8d859c:   b.ge		#0x10e8d85a4
  16.34%  ││  0x000000010e8d85a0:   mov		x6, x4              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  25.00%  ↘│  0x000000010e8d85a4:   cmp		w11, w1
           ╰  0x000000010e8d85a8:   b.lt		#0x10e8d8580        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      0x000000010e8d85ac:   ldr		x1, [x28, #0x30]    ; ImmutableOopMap {r14=Oop r15=Oop r16=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg5=Oop r19=Oop }
                                                                        ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                        ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.16%      0x000000010e8d85b0:   ldr		wzr, [x1]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                        ;   {poll}
              0x000000010e8d85b4:   cmp		w11, w10
              0x000000010e8d85b8:   b.ge		#0x10e8d85e0
              0x000000010e8d85bc:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
....................................................................................................
  99.55%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.55%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810
   0.20%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810
   0.06%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  thread_self_trap
   0.01%         libsystem_c.dylib  __sfvwrite
   0.00%   libcapstone.5.0.5.dylib  DYLD-STUB$$strcmp
   0.00%              libjvm.dylib  NullCheck::visit(InstructionVisitor*)
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%                            <unknown>
   0.00%              libjvm.dylib  BacktraceBuilder::push(Method*, int, JavaThread*)
   0.00%              libjvm.dylib  DYLD-STUB$$write
   0.00%               interpreter  method entry point (kind = zerolocals)
   0.00%                            <unknown>
   0.00%               interpreter  fast_aputfield  211 fast_aputfield
   0.00%         libsystem_c.dylib  fwrite
   0.00%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libsystem_pthread.dylib  pthread_mutex_unlock
   0.00%   libsystem_pthread.dylib  _pthread_mutex_firstfit_unlock_slow
   0.01%  <...other 2 warm regions...>
....................................................................................................
 100.00%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.75%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 810
   0.06%    libsystem_kernel.dylib  write
   0.04%    libsystem_kernel.dylib  __write_nocancel
   0.03%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  thread_self_trap
   0.01%                            <unknown>
   0.01%         libsystem_c.dylib  __sfvwrite
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%   libsystem_pthread.dylib  pthread_mutex_unlock
   0.00%              libjvm.dylib  NullCheck::visit(InstructionVisitor*)
   0.00%              libjvm.dylib  DYLD-STUB$$write
   0.00%               interpreter  fast_aputfield  211 fast_aputfield
   0.00%         libsystem_c.dylib  fwrite
   0.00%              libjvm.dylib  BacktraceBuilder::push(Method*, int, JavaThread*)
   0.00%  libsystem_platform.dylib  _platform_memmove
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
   0.00%               interpreter  method entry point (kind = zerolocals)
   0.00%   libcapstone.5.0.5.dylib  DYLD-STUB$$strcmp
   0.00%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libsystem_pthread.dylib  _pthread_mutex_firstfit_unlock_slow
....................................................................................................
 100.00%  <totals>

....[Distribution by Source]........................................................................
  99.75%               C2, level 4
   0.16%    libsystem_kernel.dylib
   0.02%              libjvm.dylib
   0.01%         libsystem_c.dylib
   0.01%
   0.01%               interpreter
   0.01%  libsystem_platform.dylib
   0.01%   libsystem_pthread.dylib
   0.00%   libcapstone.5.0.5.dylib
....................................................................................................
 100.00%  <totals>



# Run complete. Total time: 00:00:47

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1393.026 ± 21.161  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
** lt
*** loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1281.837 ± 82.221  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 225882 total address lines.
Perf output processed (skipped 20.030 seconds):
 Column 1: sampled_pc (20053 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842

                 0x000000010cde2690:   cmp		w17, w12
                 0x000000010cde2694:   sub		w11, w17, w12
                 0x000000010cde2698:   csel		w10, wzr, w11, lt
                 0x000000010cde269c:   cmp		w10, #0xfa0
                 0x000000010cde26a0:   csel		w11, w14, w10, hi
                 0x000000010cde26a4:   add		w10, w11, w12
                 0x000000010cde26a8:   nop
                 0x000000010cde26ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.90%      ↗  0x000000010cde26b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010cde26b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010cde26b8:   ldr		x23, [x11, #0x20]
              │  0x000000010cde26bc:   mul		x21, x21, x16
  20.85%      │  0x000000010cde26c0:   ldr		x11, [x11, #0x28]
              │  0x000000010cde26c4:   mul		x22, x22, x16
              │  0x000000010cde26c8:   mul		x23, x23, x16
              │  0x000000010cde26cc:   mov		x24, x21
   0.01%      │  0x000000010cde26d0:   cmp		x7, x21
   0.00%  ╭   │  0x000000010cde26d4:   b.lt		#0x10cde26dc
   0.88%  │   │  0x000000010cde26d8:   mov		x24, x7
  15.39%  ↘   │  0x000000010cde26dc:   mul		x11, x11, x16
              │  0x000000010cde26e0:   mov		x7, x22
              │  0x000000010cde26e4:   cmp		x24, x22
           ╭  │  0x000000010cde26e8:   b.lt		#0x10cde26f0
   1.63%   │  │  0x000000010cde26ec:   mov		x7, x24
  18.11%   ↘  │  0x000000010cde26f0:   mov		x21, x23
              │  0x000000010cde26f4:   cmp		x7, x23
            ╭ │  0x000000010cde26f8:   b.lt		#0x10cde2700
   2.03%    │ │  0x000000010cde26fc:   mov		x21, x7
  17.38%    ↘ │  0x000000010cde2700:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%      │  0x000000010cde2704:   mov		x7, x11
              │  0x000000010cde2708:   cmp		x21, x11
             ╭│  0x000000010cde270c:   b.lt		#0x10cde2714
   0.97%     ││  0x000000010cde2710:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  19.15%     ↘│  0x000000010cde2714:   cmp		w12, w10
   0.07%      ╰  0x000000010cde2718:   b.lt		#0x10cde26b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%         0x000000010cde271c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010cde2720:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010cde2724:   cmp		w12, w17
                 0x000000010cde2728:   b.lt		#0x10cde2690
                 0x000000010cde272c:   cmp		w12, w13
                 0x000000010cde2730:   b.lt		#0x10cde25e8
....................................................................................................
  99.51%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.51%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842
   0.27%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842
   0.05%    libsystem_kernel.dylib  __write_nocancel
   0.02%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  write
   0.01%    libsystem_kernel.dylib  thread_self_trap
   0.01%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libcapstone.5.0.5.dylib  decodeInstruction_4
   0.00%   libcapstone.5.0.5.dylib  printInstruction
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::next()
   0.00%              libjvm.dylib  Klass::is_subtype_of(Klass*) const
   0.00%              libjvm.dylib  WatcherThread::sleep() const
   0.00%              libjvm.dylib  PlatformMonitor::wait(unsigned long long)
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%              libjvm.dylib  StubCodeDesc::contains(unsigned char*) const
   0.00%              libjvm.dylib  xmlStream::write_text(char const*, unsigned long)
   0.00%               C1, level 3  java.net.URL::&lt;init&gt;, version 1, compile id 820
   0.00%                            <unknown>
   0.00%                      dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.03%  <...other 7 warm regions...>
....................................................................................................
 100.00%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.78%               C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 842
   0.05%    libsystem_kernel.dylib  __write_nocancel
   0.02%    libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%    libsystem_kernel.dylib  write
   0.01%    libsystem_kernel.dylib  thread_self_trap
   0.01%    libsystem_kernel.dylib  __gettimeofday
   0.00%   libsystem_pthread.dylib  _pthread_mutex_lock_init_slow
   0.00%    libsystem_kernel.dylib  mach_absolute_time
   0.00%    libsystem_kernel.dylib  madvise
   0.00%   libcapstone.5.0.5.dylib  printInstruction
   0.00%                            <unknown>
   0.00%  libsystem_platform.dylib  _platform_strcmp$VARIANT$Base
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%   libcapstone.5.0.5.dylib  decodeInstruction_4
   0.00%              libjvm.dylib  WatcherThread::sleep() const
   0.00%              libjvm.dylib  StubCodeDesc::contains(unsigned char*) const
   0.00%              libjvm.dylib  Klass::is_subtype_of(Klass*) const
   0.00%              libjvm.dylib  TypedMethodOptionMatcher::next()
   0.00%              libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%    libsystem_kernel.dylib  __psynch_cvwait
   0.03%  <...other 6 warm methods...>
....................................................................................................
 100.00%  <totals>

....[Distribution by Source]........................................................................
  99.78%               C2, level 4
   0.13%    libsystem_kernel.dylib
   0.04%              libjvm.dylib
   0.01%   libcapstone.5.0.5.dylib
   0.01%   libsystem_pthread.dylib
   0.00%
   0.00%                      dyld
   0.00%         libsystem_c.dylib
   0.00%  libsystem_platform.dylib
   0.00%               C1, level 3
....................................................................................................
 100.00%  <totals>



# Run complete. Total time: 00:00:50

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1337.965 ± 35.920  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
*** no loop unroll
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1457.104 ± 17.062  ops/ms
#+end_src
**** asm
#+begin_src bash
Secondary result "org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax:asm":
PrintAssembly processed: 220234 total address lines.
Perf output processed (skipped 19.166 seconds):
 Column 1: sampled_pc (20048 events)

Hottest code regions (>10.00% "sampled_pc" events):
 Event counts are percents of total event count.

....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825

                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
              0x000000010a929f60:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
              0x000000010a929f64:   ldp		x29, x30, [sp, #0x50]
              0x000000010a929f68:   add		sp, sp, #0x60
              0x000000010a929f6c:   ldr		x8, [x28, #0x28]    ;   {poll_return}
              0x000000010a929f70:   cmp		sp, x8
              0x000000010a929f74:   b.hi		#0x10a92a0ec
              0x000000010a929f78:   ret
              0x000000010a929f7c:   nop
   1.08%   ↗  0x000000010a929f80:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%   │  0x000000010a929f84:   add		x4, x5, w11, sxtw #3
  70.47%   │  0x000000010a929f88:   ldr		x4, [x4, #0x10]
   0.01%   │  0x000000010a929f8c:   mul		x4, x4, x17
           │  0x000000010a929f90:   add		w11, w11, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
           │  0x000000010a929f94:   mov		x6, x13
           │  0x000000010a929f98:   cmp		x4, x13
          ╭│  0x000000010a929f9c:   b.lt		#0x10a929fa4
  23.43%  ││  0x000000010a929fa0:   mov		x6, x4              ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%  ↘│  0x000000010a929fa4:   cmp		w11, w1
           ╰  0x000000010a929fa8:   b.lt		#0x10a929f80        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   4.17%      0x000000010a929fac:   ldr		x1, [x28, #0x30]    ; ImmutableOopMap {r14=Oop r15=Oop r16=Oop c_rarg3=Oop c_rarg2=Derived_oop_c_rarg3 c_rarg5=Oop r19=Oop }
                                                                        ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                        ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.25%      0x000000010a929fb0:   ldr		wzr, [x1]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                        ;   {poll}
              0x000000010a929fb4:   cmp		w11, w10
              0x000000010a929fb8:   b.ge		#0x10a929fe0
              0x000000010a929fbc:   mov		x13, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
....................................................................................................
  99.57%  <total for region 1>

....[Hottest Regions]...............................................................................
  99.57%              C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825
   0.23%              C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825
   0.05%   libsystem_kernel.dylib  write
   0.02%   libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%   libsystem_kernel.dylib  thread_self_trap
   0.00%  libcapstone.5.0.5.dylib  AArch64_printInst
   0.00%             libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%                           <unknown>
   0.00%             libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%             libjvm.dylib  PeriodicTask::execute_if_pending(int)
   0.00%             libjvm.dylib  xmlStream::write_text(char const*, unsigned long)
   0.00%              interpreter  fast_aload_0  220 fast_aload_0
   0.00%                     dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%        libsystem_c.dylib  __vfprintf
   0.00%        libsystem_c.dylib  DYLD-STUB$$__error
....................................................................................................
  99.96%  <totals>

....[Hottest Methods (after inlining)]..............................................................
  99.81%              C2, level 4  org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 825
   0.05%   libsystem_kernel.dylib  write
   0.02%   libsystem_kernel.dylib  _kernelrpc_mach_port_deallocate_trap
   0.02%   libsystem_kernel.dylib  thread_self_trap
   0.00%             libjvm.dylib  TypedMethodOptionMatcher::match(methodHandle const&, CompileCommandEnum)
   0.00%        libsystem_c.dylib  DYLD-STUB$$__error
   0.00%             libjvm.dylib  PeriodicTask::execute_if_pending(int)
   0.00%              interpreter  fast_aload_0  220 fast_aload_0
   0.00%  libcapstone.5.0.5.dylib  AArch64_printInst
   0.00%                           <unknown>
   0.00%             libjvm.dylib  outputStream::update_position(char const*, unsigned long)
   0.00%        libsystem_c.dylib  __vfprintf
   0.00%                     dyld  dyld3::MachOLoaded::findClosestSymbol(unsigned long long, char const**, unsigned long long*) const
   0.00%             libjvm.dylib  xmlStream::write_text(char const*, unsigned long)
....................................................................................................
  99.96%  <totals>

....[Distribution by Source]........................................................................
  99.81%              C2, level 4
   0.10%   libsystem_kernel.dylib
   0.02%             libjvm.dylib
   0.01%        libsystem_c.dylib
   0.00%
   0.00%                     dyld
   0.00%  libcapstone.5.0.5.dylib
   0.00%              interpreter
....................................................................................................
  99.96%  <totals>



# Run complete. Total time: 00:00:52

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1530.472 ± 94.707  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
* 10.4.25
** xtracenorm
BRANCH_MISPRED_NONSPEC (203, 0xcb): Retired branch instructions including calls and returns that mispredicted
INST_ALL (140, 0x8c): All retired instructions
INST_BRANCH (141, 0x8d): Retired branch instructions including calls and returns
*** lt
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score    Error      Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    8   1441.373 ± 80.991     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt    2      0.035                #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt    2     ≈ 10⁻⁵            miss/brs
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                         100    2048  thrpt    2   2967.064                #/op
MinMaxVector.longReductionMultiplyMax:CPI                                       100    2048  thrpt    2      0.248           clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt    2  11955.330                #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt    2   2554.370                #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt    2      0.214              #/insn
MinMaxVector.longReductionMultiplyMax:IPC                                       100    2048  thrpt    2      4.030           insns/clk
#+end_src
*** ge
#+begin_src bash
Benchmark                                                             (probability)  (size)   Mode  Cnt      Score     Error      Units
MinMaxVector.longReductionMultiplyMax                                           100    2048  thrpt    8   2445.192 ± 156.219     ops/ms
MinMaxVector.longReductionMultiplyMax:BRANCH_MISPRED_NONSPEC                    100    2048  thrpt           0.900                 #/op
MinMaxVector.longReductionMultiplyMax:Branch miss ratio                         100    2048  thrpt          ≈ 10⁻³             miss/brs
MinMaxVector.longReductionMultiplyMax:CORE_ACTIVE_CYCLE                         100    2048  thrpt        1540.935                 #/op
MinMaxVector.longReductionMultiplyMax:CPI                                       100    2048  thrpt           0.148            clks/insn
MinMaxVector.longReductionMultiplyMax:INST_ALL                                  100    2048  thrpt       10444.169                 #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH                               100    2048  thrpt        2269.059                 #/op
MinMaxVector.longReductionMultiplyMax:INST_BRANCH density (of insns)            100    2048  thrpt           0.217               #/insn
MinMaxVector.longReductionMultiplyMax:IPC                                       100    2048  thrpt           6.778            insns/clk
#+end_src
* 9.4.25
** aarch64 0408.branch-never-ge vs 0408.branch-never-lt
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2168.467 ± 213.914  ops/ms # ge
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1398.860 ±  95.932  ops/ms # le
#+end_src

ge assembly:
#+begin_src asm
  0x000000010d70c604:   mov		x0, x14
  0x000000010d70c608:   cmp		x14, x16
  0x000000010d70c60c:   b.ge		#0x10d70c614
  0x000000010d70c610:   mov		x0, x16             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 25)
#+end_src

lt assembly:
#+begin_src asm
  0x000000010d70c604:   mov		x0, x14
  0x000000010d70c608:   cmp		x16, x14
  0x000000010d70c60c:   b.lt		#0x10d70c614
  0x000000010d70c610:   mov		x0, x16             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 25)#+end_src
#+end_src
*** xtraceperfasm ge
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 794

                 0x000000010c3c5b1c:   cmp		w10, #0xfa0
                 0x000000010c3c5b20:   csel		w11, w14, w10, hi
                 0x000000010c3c5b24:   add		w10, w11, w12
                 0x000000010c3c5b28:   nop
                 0x000000010c3c5b2c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ↗  0x000000010c3c5b30:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.14%      │  0x000000010c3c5b34:   ldp		x21, x22, [x11, #0x10]
   0.03%      │  0x000000010c3c5b38:   ldr		x23, [x11, #0x20]
              │  0x000000010c3c5b3c:   mul		x21, x21, x16
  25.97%      │  0x000000010c3c5b40:   ldr		x11, [x11, #0x28]
              │  0x000000010c3c5b44:   mul		x22, x22, x16
              │  0x000000010c3c5b48:   mul		x23, x23, x16
              │  0x000000010c3c5b4c:   mov		x24, x21
   5.25%      │  0x000000010c3c5b50:   cmp		x21, x7
          ╭   │  0x000000010c3c5b54:   b.ge		#0x10c3c5b5c
          │   │  0x000000010c3c5b58:   mov		x24, x7
   3.99%  ↘   │  0x000000010c3c5b5c:   mul		x11, x11, x16
              │  0x000000010c3c5b60:   mov		x7, x22
              │  0x000000010c3c5b64:   cmp		x22, x24
           ╭  │  0x000000010c3c5b68:   b.ge		#0x10c3c5b70
           │  │  0x000000010c3c5b6c:   mov		x7, x24
  24.96%   ↘  │  0x000000010c3c5b70:   mov		x21, x23
   0.22%      │  0x000000010c3c5b74:   cmp		x23, x7
   5.12%    ╭ │  0x000000010c3c5b78:   b.ge		#0x10c3c5b80
            │ │  0x000000010c3c5b7c:   mov		x21, x7
   2.72%    ↘ │  0x000000010c3c5b80:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010c3c5b84:   mov		x7, x11
              │  0x000000010c3c5b88:   cmp		x11, x21
             ╭│  0x000000010c3c5b8c:   b.ge		#0x10c3c5b94
             ││  0x000000010c3c5b90:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  29.91%     ↘│  0x000000010c3c5b94:   cmp		w12, w10
              ╰  0x000000010c3c5b98:   b.lt		#0x10c3c5b30        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.84%         0x000000010c3c5b9c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%         0x000000010c3c5ba0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010c3c5ba4:   cmp		w12, w17
                 0x000000010c3c5ba8:   b.lt		#0x10c3c5b10
                 0x000000010c3c5bac:   cmp		w12, w13
                 0x000000010c3c5bb0:   b.lt		#0x10c3c5a68
....................................................................................................
  99.24%  <total for region 1>

Benchmark                                  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2454.071 ± 774.462  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN               ---
#+end_src
*** xtraceperfasm lt
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 811

                 0x000000010e938590:   cmp		w17, w12
                 0x000000010e938594:   sub		w11, w17, w12
                 0x000000010e938598:   csel		w10, wzr, w11, lt
                 0x000000010e93859c:   cmp		w10, #0xfa0
                 0x000000010e9385a0:   csel		w11, w14, w10, hi
                 0x000000010e9385a4:   add		w10, w11, w12
                 0x000000010e9385a8:   nop
                 0x000000010e9385ac:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   1.69%      ↗  0x000000010e9385b0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.21%      │  0x000000010e9385b4:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010e9385b8:   ldr		x23, [x11, #0x20]
              │  0x000000010e9385bc:   mul		x21, x21, x16
  19.36%      │  0x000000010e9385c0:   ldr		x11, [x11, #0x28]
              │  0x000000010e9385c4:   mul		x22, x22, x16
              │  0x000000010e9385c8:   mul		x23, x23, x16
              │  0x000000010e9385cc:   mov		x24, x21
              │  0x000000010e9385d0:   cmp		x7, x21
          ╭   │  0x000000010e9385d4:   b.lt		#0x10e9385dc
   3.29%  │   │  0x000000010e9385d8:   mov		x24, x7
  15.79%  ↘   │  0x000000010e9385dc:   mul		x11, x11, x16
              │  0x000000010e9385e0:   mov		x7, x22
              │  0x000000010e9385e4:   cmp		x24, x22
           ╭  │  0x000000010e9385e8:   b.lt		#0x10e9385f0
   3.08%   │  │  0x000000010e9385ec:   mov		x7, x24
  16.17%   ↘  │  0x000000010e9385f0:   mov		x21, x23
              │  0x000000010e9385f4:   cmp		x7, x23
            ╭ │  0x000000010e9385f8:   b.lt		#0x10e938600
   2.15%    │ │  0x000000010e9385fc:   mov		x21, x7
  17.68%    ↘ │  0x000000010e938600:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010e938604:   mov		x7, x11
              │  0x000000010e938608:   cmp		x21, x11
             ╭│  0x000000010e93860c:   b.lt		#0x10e938614
   1.82%     ││  0x000000010e938610:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.20%     ↘│  0x000000010e938614:   cmp		w12, w10
              ╰  0x000000010e938618:   b.lt		#0x10e9385b0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010e93861c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010e938620:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010e938624:   cmp		w12, w17
                 0x000000010e938628:   b.lt		#0x10e938590
   0.00%         0x000000010e93862c:   cmp		w12, w13
                 0x000000010e938630:   b.lt		#0x10e9384e8
                 0x000000010e938634:   mov		x17, x7
                 0x000000010e938638:   b		#0x10e938510
                 0x000000010e93863c:   mov		x17, xzr
                 0x000000010e938640:   b		#0x10e938510        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                 0x000000010e938644:   mov		w1, #-0x92
                 0x000000010e938648:   mov		x29, x5
                 0x000000010e93864c:   stp		x2, x20, [sp, #0x10]
....................................................................................................
  99.53%  <total for region 1>

Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1443.658 ± 41.721  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
#+end_src
** aarch64 0317.branch-never vs 0408.branch-never
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2160.492 ± 414.693  ops/ms # 0317.branch-never
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2265.233 ± 410.039  ops/ms # 0408.branch-never
#+end_src
** aarch64 1.4 vs 9.4 topic.avoid-cmov-long-min-max.0327.branch-never
*** comparison
**** 1.4 profile longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 561

                 0x0000000117b6fddc:   cmp		w10, #0xfa0
                 0x0000000117b6fde0:   csel		w11, w14, w10, hi
                 0x0000000117b6fde4:   add		w10, w11, w12
                 0x0000000117b6fde8:   nop
                 0x0000000117b6fdec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fdf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%      ?  0x0000000117b6fdf4:   ldp		x21, x22, [x11, #0x10]
   0.01%      ?  0x0000000117b6fdf8:   ldr		x23, [x11, #0x20]
              ?  0x0000000117b6fdfc:   mul		x21, x21, x16
  27.63%      ?  0x0000000117b6fe00:   ldr		x11, [x11, #0x28]
              ?  0x0000000117b6fe04:   mul		x22, x22, x16
              ?  0x0000000117b6fe08:   mul		x23, x23, x16
              ?  0x0000000117b6fe0c:   mov		x24, x21
   2.30%      ?  0x0000000117b6fe10:   cmp		x21, x7
          ?   ?  0x0000000117b6fe14:   b.ge		#0x117b6fe1c
          ?   ?  0x0000000117b6fe18:   mov		x24, x7
  17.59%  ?   ?  0x0000000117b6fe1c:   mul		x11, x11, x16
              ?  0x0000000117b6fe20:   mov		x7, x22
              ?  0x0000000117b6fe24:   cmp		x22, x24
           ?  ?  0x0000000117b6fe28:   b.ge		#0x117b6fe30
           ?  ?  0x0000000117b6fe2c:   mov		x7, x24
  14.37%   ?  ?  0x0000000117b6fe30:   mov		x21, x23
   0.11%      ?  0x0000000117b6fe34:   cmp		x23, x7
   2.30%    ? ?  0x0000000117b6fe38:   b.ge		#0x117b6fe40
            ? ?  0x0000000117b6fe3c:   mov		x21, x7
  15.95%    ? ?  0x0000000117b6fe40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fe44:   mov		x7, x11
              ?  0x0000000117b6fe48:   cmp		x11, x21
             ??  0x0000000117b6fe4c:   b.ge		#0x117b6fe54
             ??  0x0000000117b6fe50:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.36%     ??  0x0000000117b6fe54:   cmp		w12, w10
              ?  0x0000000117b6fe58:   b.lt		#0x117b6fdf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.73%         0x0000000117b6fe5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x0000000117b6fe60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000117b6fe64:   cmp		w12, w17
                 0x0000000117b6fe68:   b.lt		#0x117b6fdd0
                 0x0000000117b6fe6c:   cmp		w12, w13
                 0x0000000117b6fe70:   b.lt		#0x117b6fd28
....................................................................................................
  99.47%  <total for region 1>
#+end_src
**** 9.4 profile longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010a849a50:   cmp		w17, w12
                 0x000000010a849a54:   sub		w11, w17, w12
                 0x000000010a849a58:   csel		w10, wzr, w11, lt
                 0x000000010a849a5c:   cmp		w10, #0xfa0
                 0x000000010a849a60:   csel		w11, w14, w10, hi
                 0x000000010a849a64:   add		w10, w11, w12
                 0x000000010a849a68:   nop
                 0x000000010a849a6c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.09%      ↗  0x000000010a849a70:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010a849a74:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010a849a78:   ldr		x23, [x11, #0x20]
              │  0x000000010a849a7c:   mul		x21, x21, x16
  19.90%      │  0x000000010a849a80:   ldr		x11, [x11, #0x28]
              │  0x000000010a849a84:   mul		x22, x22, x16
              │  0x000000010a849a88:   mul		x23, x23, x16
              │  0x000000010a849a8c:   mov		x24, x21
              │  0x000000010a849a90:   cmp		x7, x21
          ╭   │  0x000000010a849a94:   b.lt		#0x10a849a9c
   0.03%  │   │  0x000000010a849a98:   mov		x24, x7
  15.98%  ↘   │  0x000000010a849a9c:   mul		x11, x11, x16
              │  0x000000010a849aa0:   mov		x7, x22
              │  0x000000010a849aa4:   cmp		x24, x22
           ╭  │  0x000000010a849aa8:   b.lt		#0x10a849ab0
   3.84%   │  │  0x000000010a849aac:   mov		x7, x24
  18.23%   ↘  │  0x000000010a849ab0:   mov		x21, x23
              │  0x000000010a849ab4:   cmp		x7, x23
            ╭ │  0x000000010a849ab8:   b.lt		#0x10a849ac0
   1.47%    │ │  0x000000010a849abc:   mov		x21, x7
  17.49%    ↘ │  0x000000010a849ac0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010a849ac4:   mov		x7, x11
   0.01%      │  0x000000010a849ac8:   cmp		x21, x11
             ╭│  0x000000010a849acc:   b.lt		#0x10a849ad4
   1.40%     ││  0x000000010a849ad0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.91%     ↘│  0x000000010a849ad4:   cmp		w12, w10
              ╰  0x000000010a849ad8:   b.lt		#0x10a849a70        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010a849adc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010a849ae0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010a849ae4:   cmp		w12, w17
                 0x000000010a849ae8:   b.lt		#0x10a849a50
                 0x000000010a849aec:   cmp		w12, w13
                 0x000000010a849af0:   b.lt		#0x10a8499a8
....................................................................................................
  99.52%  <total for region 1>
#+end_src
*** 1.4
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2321.742 ? 289.782  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3637.567 ?  84.313  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score      Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2303.509 ? 1103.018  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN                ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3634.028 ? 112.144  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN               ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 561

                 0x0000000117b6fddc:   cmp		w10, #0xfa0
                 0x0000000117b6fde0:   csel		w11, w14, w10, hi
                 0x0000000117b6fde4:   add		w10, w11, w12
                 0x0000000117b6fde8:   nop
                 0x0000000117b6fdec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fdf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%      ?  0x0000000117b6fdf4:   ldp		x21, x22, [x11, #0x10]
   0.01%      ?  0x0000000117b6fdf8:   ldr		x23, [x11, #0x20]
              ?  0x0000000117b6fdfc:   mul		x21, x21, x16
  27.63%      ?  0x0000000117b6fe00:   ldr		x11, [x11, #0x28]
              ?  0x0000000117b6fe04:   mul		x22, x22, x16
              ?  0x0000000117b6fe08:   mul		x23, x23, x16
              ?  0x0000000117b6fe0c:   mov		x24, x21
   2.30%      ?  0x0000000117b6fe10:   cmp		x21, x7
          ?   ?  0x0000000117b6fe14:   b.ge		#0x117b6fe1c
          ?   ?  0x0000000117b6fe18:   mov		x24, x7
  17.59%  ?   ?  0x0000000117b6fe1c:   mul		x11, x11, x16
              ?  0x0000000117b6fe20:   mov		x7, x22
              ?  0x0000000117b6fe24:   cmp		x22, x24
           ?  ?  0x0000000117b6fe28:   b.ge		#0x117b6fe30
           ?  ?  0x0000000117b6fe2c:   mov		x7, x24
  14.37%   ?  ?  0x0000000117b6fe30:   mov		x21, x23
   0.11%      ?  0x0000000117b6fe34:   cmp		x23, x7
   2.30%    ? ?  0x0000000117b6fe38:   b.ge		#0x117b6fe40
            ? ?  0x0000000117b6fe3c:   mov		x21, x7
  15.95%    ? ?  0x0000000117b6fe40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fe44:   mov		x7, x11
              ?  0x0000000117b6fe48:   cmp		x11, x21
             ??  0x0000000117b6fe4c:   b.ge		#0x117b6fe54
             ??  0x0000000117b6fe50:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.36%     ??  0x0000000117b6fe54:   cmp		w12, w10
              ?  0x0000000117b6fe58:   b.lt		#0x117b6fdf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.73%         0x0000000117b6fe5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x0000000117b6fe60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000117b6fe64:   cmp		w12, w17
                 0x0000000117b6fe68:   b.lt		#0x117b6fdd0
                 0x0000000117b6fe6c:   cmp		w12, w13
                 0x0000000117b6fe70:   b.lt		#0x117b6fd28
....................................................................................................
  99.47%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 542

                                 0x0000000113951b4c:   stp		x17, x15, [sp, #0x10]
                                 0x0000000113951b50:   str		x20, [sp, #0x60]
                                 0x0000000113951b54:   nop
                                 0x0000000113951b58:   nop
                                 0x0000000113951b5c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                          ?      0x0000000113951b60:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.80%                  ?      0x0000000113951b64:   ldr		x15, [x27, #0x10]
   0.05%                  ?      0x0000000113951b68:   mov		x29, x25
   0.04%                  ?      0x0000000113951b6c:   cmp		x25, x15
   0.13%  ?               ?      0x0000000113951b70:   b.ge		#0x113951b78
          ?               ?      0x0000000113951b74:   mov		x29, x15
   5.50%  ?               ?      0x0000000113951b78:   ldr		x16, [x27, #0x18]
   0.14%                  ?      0x0000000113951b7c:   mov		x15, x29
   0.19%                  ?      0x0000000113951b80:   cmp		x29, x16
   0.15%   ?              ?      0x0000000113951b84:   b.ge		#0x113951b8c
           ?              ?      0x0000000113951b88:   mov		x15, x16
   5.22%   ?              ?      0x0000000113951b8c:   ldr		x17, [x27, #0x20]
   0.07%                  ?      0x0000000113951b90:   mov		x16, x15
   0.03%                  ?      0x0000000113951b94:   cmp		x15, x17
   0.07%    ?             ?      0x0000000113951b98:   b.ge		#0x113951ba0
            ?             ?      0x0000000113951b9c:   mov		x16, x17
   5.39%    ?             ?      0x0000000113951ba0:   ldr		x0, [x27, #0x28]
   0.07%                  ?      0x0000000113951ba4:   mov		x15, x16
   0.16%                  ?      0x0000000113951ba8:   cmp		x16, x0
   0.11%     ?            ?      0x0000000113951bac:   b.ge		#0x113951bb4
             ?            ?      0x0000000113951bb0:   mov		x15, x0
   5.31%     ?            ?      0x0000000113951bb4:   ldr		x1, [x27, #0x30]
   0.04%                  ?      0x0000000113951bb8:   mov		x16, x15
   0.11%                  ?      0x0000000113951bbc:   cmp		x15, x1
   0.03%      ?           ?      0x0000000113951bc0:   b.ge		#0x113951bc8
              ?           ?      0x0000000113951bc4:   mov		x16, x1
   5.33%      ?           ?      0x0000000113951bc8:   ldr		x2, [x27, #0x38]
   0.08%                  ?      0x0000000113951bcc:   mov		x15, x16
   0.17%                  ?      0x0000000113951bd0:   cmp		x16, x2
   0.11%       ?          ?      0x0000000113951bd4:   b.ge		#0x113951bdc
               ?          ?      0x0000000113951bd8:   mov		x15, x2
   5.79%       ?          ?      0x0000000113951bdc:   ldr		x3, [x27, #0x40]
   0.07%                  ?      0x0000000113951be0:   mov		x16, x15
   0.04%                  ?      0x0000000113951be4:   cmp		x15, x3
   0.02%        ?         ?      0x0000000113951be8:   b.ge		#0x113951bf0
                ?         ?      0x0000000113951bec:   mov		x16, x3
   5.32%        ?         ?      0x0000000113951bf0:   ldr		x4, [x27, #0x48]
   0.08%                  ?      0x0000000113951bf4:   mov		x15, x16
   0.07%                  ?      0x0000000113951bf8:   cmp		x16, x4
   0.07%         ?        ?      0x0000000113951bfc:   b.ge		#0x113951c04
   0.00%         ?        ?      0x0000000113951c00:   mov		x15, x4
   5.77%         ?        ?      0x0000000113951c04:   ldr		x5, [x27, #0x50]
   0.08%                  ?      0x0000000113951c08:   mov		x16, x15
   0.04%                  ?      0x0000000113951c0c:   cmp		x15, x5
   0.04%          ?       ?      0x0000000113951c10:   b.ge		#0x113951c18
                  ?       ?      0x0000000113951c14:   mov		x16, x5
   5.42%          ?       ?      0x0000000113951c18:   ldr		x6, [x27, #0x58]
   0.09%                  ?      0x0000000113951c1c:   mov		x15, x16
   0.15%                  ?      0x0000000113951c20:   cmp		x16, x6
   0.08%           ?      ?      0x0000000113951c24:   b.ge		#0x113951c2c
                   ?      ?      0x0000000113951c28:   mov		x15, x6
   5.49%           ?      ?      0x0000000113951c2c:   ldr		x7, [x27, #0x60]
   0.11%                  ?      0x0000000113951c30:   mov		x16, x15
   0.06%                  ?      0x0000000113951c34:   cmp		x15, x7
   0.06%            ?     ?      0x0000000113951c38:   b.ge		#0x113951c40
                    ?     ?      0x0000000113951c3c:   mov		x16, x7
   5.89%            ?     ?      0x0000000113951c40:   ldr		x20, [x27, #0x68]
   0.07%                  ?      0x0000000113951c44:   mov		x15, x16
   0.17%                  ?      0x0000000113951c48:   cmp		x16, x20
   0.02%             ?    ?      0x0000000113951c4c:   b.ge		#0x113951c54
                     ?    ?      0x0000000113951c50:   mov		x15, x20
   5.52%             ?    ?      0x0000000113951c54:   ldr		x22, [x27, #0x70]
   0.07%                  ?      0x0000000113951c58:   mov		x16, x15
   0.10%                  ?      0x0000000113951c5c:   cmp		x15, x22
   0.01%              ?   ?      0x0000000113951c60:   b.ge		#0x113951c68
                      ?   ?      0x0000000113951c64:   mov		x16, x22
   5.53%              ?   ?      0x0000000113951c68:   ldr		x23, [x27, #0x78]
   0.06%                  ?      0x0000000113951c6c:   mov		x15, x16
   0.14%                  ?      0x0000000113951c70:   cmp		x16, x23
   0.12%               ?  ?      0x0000000113951c74:   b.ge		#0x113951c7c
                       ?  ?      0x0000000113951c78:   mov		x15, x23
   5.58%               ?  ?      0x0000000113951c7c:   ldr		x26, [x27, #0x80]
   0.13%                  ?      0x0000000113951c80:   mov		x16, x15
   0.07%                  ?      0x0000000113951c84:   cmp		x15, x26
   0.14%                ? ?      0x0000000113951c88:   b.ge		#0x113951c90
                        ? ?      0x0000000113951c8c:   mov		x16, x26
   5.28%                ? ?      0x0000000113951c90:   ldr		x27, [x27, #0x88]
   0.04%                  ?      0x0000000113951c94:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                  ?      0x0000000113951c98:   mov		x25, x16
   0.03%                  ?      0x0000000113951c9c:   cmp		x16, x27
   0.12%                 ??      0x0000000113951ca0:   b.ge		#0x113951ca8
   4.94%                 ??      0x0000000113951ca4:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ??                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ??                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.79%                 ??      0x0000000113951ca8:   cmp		w12, w11
   0.00%                  ?      0x0000000113951cac:   b.lt		#0x113951b60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951cb0:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.02%                         0x0000000113951cb4:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                           ;   {poll}
                                 0x0000000113951cb8:   cmp		w12, w10
                                 0x0000000113951cbc:   b.lt		#0x113951b20
                                 0x0000000113951cc0:   ldp		x16, x0, [sp]
                                 0x0000000113951cc4:   ldp		x17, x15, [sp, #0x10]
   0.02%                         0x0000000113951cc8:   ldr		x20, [sp, #0x60]
                                 0x0000000113951ccc:   cmp		w12, w14
                                 0x0000000113951cd0:   b.lt		#0x113951af8
                                 0x0000000113951cd4:   mov		x11, x25            ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%                      ?  0x0000000113951cd8:   ldarb		w14, [x21]          ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 107)
                              ?  0x0000000113951cdc:   ldr		x1, [x28, #0x30]
                              ?  0x0000000113951ce0:   add		x19, x19, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg0=Oop rdispatch=Derived_oop_c_rarg0 resp=Oop }
                              ?                                                            ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                              ?                                                            ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 107)
   0.03%                      ?  0x0000000113951ce4:   ldr		wzr, [x1]           ;   {poll}
                              ?  0x0000000113951ce8:   cbnz		w14, #0x113951aa8   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 108)
   0.00%                      ?  0x0000000113951cec:   ldr		w14, [x15, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              ?  0x0000000113951cf0:   cmp		w14, #0
                           ?  ?  0x0000000113951cf4:   b.le		#0x113951d60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951cf8:   ldr		w10, [x15, #0x2c]
                           ?  ?  0x0000000113951cfc:   lsl		x24, x10, #3        ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ?  ?  0x0000000113951d00:   ldr		w10, [x24, #0xc]    ; implicit exception: dispatches to 0x0000000113951d68
                           ?  ?                                                            ;*laload {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951d04:   sxtw		x11, w14
                           ?  ?  0x0000000113951d08:   sub		x1, x11, #0xf
                           ?  ?  0x0000000113951d0c:   sxtw		x12, w10
                           ?  ?  0x0000000113951d10:   sub		x11, x11, #1
                           ?  ?  0x0000000113951d14:   cbz		w10, #0x113951d68
   0.01%                   ?  ?  0x0000000113951d18:   cmp		x11, x12
                           ?  ?  0x0000000113951d1c:   b.hs		#0x113951d68
   0.05%                   ?  ?  0x0000000113951d20:   ldr		x11, [x24, #0x10]
   0.00%                   ?  ?  0x0000000113951d24:   mov		x12, #-0x80000000
                           ?  ?  0x0000000113951d28:   mov		x10, x1
                           ?  ?  0x0000000113951d2c:   cmp		x1, x12
                           ?? ?  0x0000000113951d30:   b.ge		#0x113951d38
                           ?? ?  0x0000000113951d34:   mov		x10, x12
   0.01%                   ?? ?  0x0000000113951d38:   mov		x12, xzr
                           ?  ?  0x0000000113951d3c:   mov		w10, w10
                           ?  ?  0x0000000113951d40:   mov		x25, x11
                           ?  ?  0x0000000113951d44:   cmp		x11, x12
                           ? ??  0x0000000113951d48:   b.ge		#0x113951d50
                           ? ??  0x0000000113951d4c:   mov		x25, x12            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                           ? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                           ? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ? ??  0x0000000113951d50:   cmp		w10, #1
                           ?  ?  0x0000000113951d54:   b.le		#0x113951d90
                           ?  ?  0x0000000113951d58:   mov		w12, #1
                           ?  ?  0x0000000113951d5c:   b		#0x113951b2c
                           ?  ?  0x0000000113951d60:   mov		x11, xzr
                              ?  0x0000000113951d64:   b		#0x113951cd8        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951d68:   mov		w1, #-0x92
....................................................................................................
  98.45%  <total for region 1>
#+end_src
*** 9.4
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1399.006 ± 33.211  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3719.712 ± 87.950  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1390.658 ± 99.802  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3673.639 ± 65.184  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010a849a50:   cmp		w17, w12
                 0x000000010a849a54:   sub		w11, w17, w12
                 0x000000010a849a58:   csel		w10, wzr, w11, lt
                 0x000000010a849a5c:   cmp		w10, #0xfa0
                 0x000000010a849a60:   csel		w11, w14, w10, hi
                 0x000000010a849a64:   add		w10, w11, w12
                 0x000000010a849a68:   nop
                 0x000000010a849a6c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.09%      ↗  0x000000010a849a70:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010a849a74:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010a849a78:   ldr		x23, [x11, #0x20]
              │  0x000000010a849a7c:   mul		x21, x21, x16
  19.90%      │  0x000000010a849a80:   ldr		x11, [x11, #0x28]
              │  0x000000010a849a84:   mul		x22, x22, x16
              │  0x000000010a849a88:   mul		x23, x23, x16
              │  0x000000010a849a8c:   mov		x24, x21
              │  0x000000010a849a90:   cmp		x7, x21
          ╭   │  0x000000010a849a94:   b.lt		#0x10a849a9c
   0.03%  │   │  0x000000010a849a98:   mov		x24, x7
  15.98%  ↘   │  0x000000010a849a9c:   mul		x11, x11, x16
              │  0x000000010a849aa0:   mov		x7, x22
              │  0x000000010a849aa4:   cmp		x24, x22
           ╭  │  0x000000010a849aa8:   b.lt		#0x10a849ab0
   3.84%   │  │  0x000000010a849aac:   mov		x7, x24
  18.23%   ↘  │  0x000000010a849ab0:   mov		x21, x23
              │  0x000000010a849ab4:   cmp		x7, x23
            ╭ │  0x000000010a849ab8:   b.lt		#0x10a849ac0
   1.47%    │ │  0x000000010a849abc:   mov		x21, x7
  17.49%    ↘ │  0x000000010a849ac0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010a849ac4:   mov		x7, x11
   0.01%      │  0x000000010a849ac8:   cmp		x21, x11
             ╭│  0x000000010a849acc:   b.lt		#0x10a849ad4
   1.40%     ││  0x000000010a849ad0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.91%     ↘│  0x000000010a849ad4:   cmp		w12, w10
              ╰  0x000000010a849ad8:   b.lt		#0x10a849a70        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010a849adc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010a849ae0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010a849ae4:   cmp		w12, w17
                 0x000000010a849ae8:   b.lt		#0x10a849a50
                 0x000000010a849aec:   cmp		w12, w13
                 0x000000010a849af0:   b.lt		#0x10a8499a8
....................................................................................................
  99.52%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 810

                             0x000000010e5e90c0:   csel		w1, w13, w1, hi
                             0x000000010e5e90c4:   add		w11, w1, w12
                             0x000000010e5e90c8:   stp		x16, x0, [sp]
                             0x000000010e5e90cc:   stp		x17, x15, [sp, #0x10]
                             0x000000010e5e90d0:   str		x20, [sp, #0x60]
                             0x000000010e5e90d4:   nop
                             0x000000010e5e90d8:   nop
                             0x000000010e5e90dc:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.00%                  ↗  0x000000010e5e90e0:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.02%                  │  0x000000010e5e90e4:   ldr		x15, [x27, #0x10]
   0.14%                  │  0x000000010e5e90e8:   mov		x29, x25
   0.17%                  │  0x000000010e5e90ec:   cmp		x15, x25
   0.20%  ╭               │  0x000000010e5e90f0:   b.lt		#0x10e5e90f8
          │               │  0x000000010e5e90f4:   mov		x29, x15
   4.56%  ↘               │  0x000000010e5e90f8:   ldr		x16, [x27, #0x18]
   0.16%                  │  0x000000010e5e90fc:   mov		x15, x29
   0.25%                  │  0x000000010e5e9100:   cmp		x16, x29
   0.20%   ╭              │  0x000000010e5e9104:   b.lt		#0x10e5e910c
           │              │  0x000000010e5e9108:   mov		x15, x16
   5.34%   ↘              │  0x000000010e5e910c:   ldr		x17, [x27, #0x20]
   0.23%                  │  0x000000010e5e9110:   mov		x16, x15
   0.20%                  │  0x000000010e5e9114:   cmp		x17, x15
   0.16%    ╭             │  0x000000010e5e9118:   b.lt		#0x10e5e9120
   0.00%    │             │  0x000000010e5e911c:   mov		x16, x17
   5.03%    ↘             │  0x000000010e5e9120:   ldr		x0, [x27, #0x28]
   0.12%                  │  0x000000010e5e9124:   mov		x15, x16
   0.13%                  │  0x000000010e5e9128:   cmp		x0, x16
   0.16%     ╭            │  0x000000010e5e912c:   b.lt		#0x10e5e9134
   0.02%     │            │  0x000000010e5e9130:   mov		x15, x0
   5.64%     ↘            │  0x000000010e5e9134:   ldr		x1, [x27, #0x30]
   0.20%                  │  0x000000010e5e9138:   mov		x16, x15
   0.16%                  │  0x000000010e5e913c:   cmp		x1, x15
   0.25%      ╭           │  0x000000010e5e9140:   b.lt		#0x10e5e9148
              │           │  0x000000010e5e9144:   mov		x16, x1
   5.09%      ↘           │  0x000000010e5e9148:   ldr		x2, [x27, #0x38]
   0.20%                  │  0x000000010e5e914c:   mov		x15, x16
   0.23%                  │  0x000000010e5e9150:   cmp		x2, x16
   0.23%       ╭          │  0x000000010e5e9154:   b.lt		#0x10e5e915c
               │          │  0x000000010e5e9158:   mov		x15, x2
   5.32%       ↘          │  0x000000010e5e915c:   ldr		x3, [x27, #0x40]
   0.13%                  │  0x000000010e5e9160:   mov		x16, x15
   0.15%                  │  0x000000010e5e9164:   cmp		x3, x15
   0.23%        ╭         │  0x000000010e5e9168:   b.lt		#0x10e5e9170
                │         │  0x000000010e5e916c:   mov		x16, x3
   5.18%        ↘         │  0x000000010e5e9170:   ldr		x4, [x27, #0x48]
   0.14%                  │  0x000000010e5e9174:   mov		x15, x16
   0.27%                  │  0x000000010e5e9178:   cmp		x4, x16
   0.14%         ╭        │  0x000000010e5e917c:   b.lt		#0x10e5e9184
                 │        │  0x000000010e5e9180:   mov		x15, x4
   5.22%         ↘        │  0x000000010e5e9184:   ldr		x5, [x27, #0x50]
   0.20%                  │  0x000000010e5e9188:   mov		x16, x15
   0.20%                  │  0x000000010e5e918c:   cmp		x5, x15
   0.16%          ╭       │  0x000000010e5e9190:   b.lt		#0x10e5e9198
                  │       │  0x000000010e5e9194:   mov		x16, x5
   4.99%          ↘       │  0x000000010e5e9198:   ldr		x6, [x27, #0x58]
   0.28%                  │  0x000000010e5e919c:   mov		x15, x16
   0.17%                  │  0x000000010e5e91a0:   cmp		x6, x16
   0.22%           ╭      │  0x000000010e5e91a4:   b.lt		#0x10e5e91ac
   0.01%           │      │  0x000000010e5e91a8:   mov		x15, x6
   5.25%           ↘      │  0x000000010e5e91ac:   ldr		x7, [x27, #0x60]
   0.24%                  │  0x000000010e5e91b0:   mov		x16, x15
   0.19%                  │  0x000000010e5e91b4:   cmp		x7, x15
   0.18%            ╭     │  0x000000010e5e91b8:   b.lt		#0x10e5e91c0
                    │     │  0x000000010e5e91bc:   mov		x16, x7
   5.21%            ↘     │  0x000000010e5e91c0:   ldr		x20, [x27, #0x68]
   0.14%                  │  0x000000010e5e91c4:   mov		x15, x16
   0.22%                  │  0x000000010e5e91c8:   cmp		x20, x16
   0.20%             ╭    │  0x000000010e5e91cc:   b.lt		#0x10e5e91d4
                     │    │  0x000000010e5e91d0:   mov		x15, x20
   5.50%             ↘    │  0x000000010e5e91d4:   ldr		x22, [x27, #0x70]
   0.15%                  │  0x000000010e5e91d8:   mov		x16, x15
   0.15%                  │  0x000000010e5e91dc:   cmp		x22, x15
   0.21%              ╭   │  0x000000010e5e91e0:   b.lt		#0x10e5e91e8
                      │   │  0x000000010e5e91e4:   mov		x16, x22
   5.31%              ↘   │  0x000000010e5e91e8:   ldr		x23, [x27, #0x78]
   0.19%                  │  0x000000010e5e91ec:   mov		x15, x16
   0.14%                  │  0x000000010e5e91f0:   cmp		x23, x16
   0.12%               ╭  │  0x000000010e5e91f4:   b.lt		#0x10e5e91fc
                       │  │  0x000000010e5e91f8:   mov		x15, x23
   4.86%               ↘  │  0x000000010e5e91fc:   ldr		x26, [x27, #0x80]
   0.20%                  │  0x000000010e5e9200:   mov		x16, x15
   0.19%                  │  0x000000010e5e9204:   cmp		x26, x15
   0.15%                ╭ │  0x000000010e5e9208:   b.lt		#0x10e5e9210
                        │ │  0x000000010e5e920c:   mov		x16, x26
   5.80%                ↘ │  0x000000010e5e9210:   ldr		x27, [x27, #0x88]
   0.15%                  │  0x000000010e5e9214:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.15%                  │  0x000000010e5e9218:   mov		x25, x16
   0.19%                  │  0x000000010e5e921c:   cmp		x27, x16
   0.16%                 ╭│  0x000000010e5e9220:   b.lt		#0x10e5e9228
   3.29%                 ││  0x000000010e5e9224:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.21%                 ↘│  0x000000010e5e9228:   cmp		w12, w11
                          ╰  0x000000010e5e922c:   b.lt		#0x10e5e90e0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   1.74%                     0x000000010e5e9230:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                     0x000000010e5e9234:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000010e5e9238:   cmp		w12, w10
                             0x000000010e5e923c:   b.lt		#0x10e5e90a0
                             0x000000010e5e9240:   ldp		x16, x0, [sp]
                             0x000000010e5e9244:   ldp		x17, x15, [sp, #0x10]
....................................................................................................
  97.85%  <total for region 1>
#+end_src
* 8-9.4.25
** aarch64 comparison
*** cmov
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1007.343 ± 44.448  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1094.017 ± 18.633  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1033.564 ± 88.820  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1099.968 ± 27.424  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 811

             0x000000010e631784:   add		w11, w12, w13
             0x000000010e631788:   nop
             0x000000010e63178c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ↗  0x000000010e631790:   add		x12, x6, w13, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010e631794:   ldp		x21, x22, [x12, #0x10]
          │  0x000000010e631798:   mul		x21, x21, x17
   0.01%  │  0x000000010e63179c:   ldr		x23, [x12, #0x20]
          │  0x000000010e6317a0:   mul		x22, x22, x17
          │  0x000000010e6317a4:   cmp		x21, x7
   0.05%  │  0x000000010e6317a8:   ldr		x12, [x12, #0x28]
   0.00%  │  0x000000010e6317ac:   csel		x7, x21, x7, gt
          │  0x000000010e6317b0:   mul		x21, x23, x17
   0.01%  │  0x000000010e6317b4:   cmp		x22, x7
          │  0x000000010e6317b8:   csel		x7, x22, x7, gt
   0.02%  │  0x000000010e6317bc:   mul		x12, x12, x17
   2.28%  │  0x000000010e6317c0:   cmp		x21, x7
  74.76%  │  0x000000010e6317c4:   csel		x7, x21, x7, gt
   4.87%  │  0x000000010e6317c8:   cmp		x12, x7
   4.87%  │  0x000000010e6317cc:   add		w13, w13, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   4.86%  │  0x000000010e6317d0:   csel		x7, x12, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   7.44%  │  0x000000010e6317d4:   cmp		w13, w11
          ╰  0x000000010e6317d8:   b.lt		#0x10e631790        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.34%     0x000000010e6317dc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%     0x000000010e6317e0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x000000010e6317e4:   cmp		w13, w15
             0x000000010e6317e8:   b.lt		#0x10e631770
             0x000000010e6317ec:   cmp		w13, w10
             0x000000010e6317f0:   b.lt		#0x10e6316e0
....................................................................................................
  99.57%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 819

             0x000000010ae411c4:   nop
             0x000000010ae411c8:   nop
             0x000000010ae411cc:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ↗  0x000000010ae411d0:   add		x21, x5, w2, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010ae411d4:   ldr		x11, [x21, #0x10]
          │  0x000000010ae411d8:   cmp		x6, x11
   0.01%  │  0x000000010ae411dc:   ldr		x7, [x21, #0x18]
          │  0x000000010ae411e0:   csel		x11, x6, x11, gt
          │  0x000000010ae411e4:   cmp		x11, x7
          │  0x000000010ae411e8:   ldr		x6, [x21, #0x20]
          │  0x000000010ae411ec:   csel		x11, x11, x7, gt
          │  0x000000010ae411f0:   cmp		x11, x6
   0.02%  │  0x000000010ae411f4:   ldr		x7, [x21, #0x28]
          │  0x000000010ae411f8:   csel		x11, x11, x6, gt
          │  0x000000010ae411fc:   cmp		x11, x7
   0.00%  │  0x000000010ae41200:   ldr		x6, [x21, #0x30]
          │  0x000000010ae41204:   csel		x11, x11, x7, gt
          │  0x000000010ae41208:   cmp		x11, x6
   0.00%  │  0x000000010ae4120c:   ldr		x7, [x21, #0x38]
          │  0x000000010ae41210:   csel		x11, x11, x6, gt
          │  0x000000010ae41214:   cmp		x11, x7
   1.01%  │  0x000000010ae41218:   ldr		x6, [x21, #0x40]
   0.27%  │  0x000000010ae4121c:   csel		x11, x11, x7, gt
          │  0x000000010ae41220:   cmp		x11, x6
   2.86%  │  0x000000010ae41224:   ldr		x7, [x21, #0x48]
          │  0x000000010ae41228:   csel		x11, x11, x6, gt
          │  0x000000010ae4122c:   cmp		x11, x7
   2.53%  │  0x000000010ae41230:   ldr		x6, [x21, #0x50]
          │  0x000000010ae41234:   csel		x11, x11, x7, gt
          │  0x000000010ae41238:   cmp		x11, x6
   4.48%  │  0x000000010ae4123c:   ldr		x7, [x21, #0x58]
          │  0x000000010ae41240:   csel		x11, x11, x6, gt
          │  0x000000010ae41244:   cmp		x11, x7
   5.82%  │  0x000000010ae41248:   ldr		x6, [x21, #0x60]
          │  0x000000010ae4124c:   csel		x11, x11, x7, gt
          │  0x000000010ae41250:   cmp		x11, x6
   5.05%  │  0x000000010ae41254:   ldr		x7, [x21, #0x68]
          │  0x000000010ae41258:   csel		x11, x11, x6, gt
          │  0x000000010ae4125c:   cmp		x11, x7
   5.37%  │  0x000000010ae41260:   ldr		x6, [x21, #0x70]
          │  0x000000010ae41264:   csel		x11, x11, x7, gt
          │  0x000000010ae41268:   cmp		x11, x6
   5.20%  │  0x000000010ae4126c:   ldr		x7, [x21, #0x78]
          │  0x000000010ae41270:   csel		x11, x11, x6, gt
          │  0x000000010ae41274:   cmp		x11, x7
   5.79%  │  0x000000010ae41278:   ldr		x6, [x21, #0x80]
   0.05%  │  0x000000010ae4127c:   csel		x11, x11, x7, gt
          │  0x000000010ae41280:   cmp		x11, x6
  60.12%  │  0x000000010ae41284:   ldr		x7, [x21, #0x88]
          │  0x000000010ae41288:   csel		x11, x11, x6, gt
          │  0x000000010ae4128c:   cmp		x11, x7
          │  0x000000010ae41290:   add		w2, w2, #0x10       ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010ae41294:   csel		x6, x11, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  0x000000010ae41298:   cmp		w2, w12
          ╰  0x000000010ae4129c:   b.lt		#0x10ae411d0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.39%     0x000000010ae412a0:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop c_rarg0=Oop c_rarg3=Oop c_rarg4=Oop c_rarg1=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%     0x000000010ae412a4:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x000000010ae412a8:   cmp		w2, w17
             0x000000010ae412ac:   b.lt		#0x10ae411a8
             0x000000010ae412b0:   cmp		w2, w10
             0x000000010ae412b4:   b.lt		#0x10ae41120
....................................................................................................
  99.03%  <total for region 1>
#+end_src
*** branch always
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2861.913 ± 17.558  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1695.945 ± 28.365  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2854.146 ± 13.253  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1722.534 ± 62.408  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010cf19cdc:   cmp		w10, #0xfa0
                 0x000000010cf19ce0:   csel		w11, w14, w10, hi
                 0x000000010cf19ce4:   add		w10, w11, w12
                 0x000000010cf19ce8:   nop
                 0x000000010cf19cec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ↗  0x000000010cf19cf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010cf19cf4:   ldp		x21, x22, [x11, #0x10]
   0.00%      │  0x000000010cf19cf8:   ldr		x23, [x11, #0x20]
              │  0x000000010cf19cfc:   mul		x21, x21, x16
  29.27%      │  0x000000010cf19d00:   ldr		x11, [x11, #0x28]
   1.09%      │  0x000000010cf19d04:   mul		x22, x22, x16
   0.86%      │  0x000000010cf19d08:   mul		x23, x23, x16
   1.15%      │  0x000000010cf19d0c:   mov		x24, x7
   0.02%      │  0x000000010cf19d10:   cmp		x21, x7
   2.02%  ╭   │  0x000000010cf19d14:   b.lt		#0x10cf19d1c
  14.03%  │   │  0x000000010cf19d18:   mov		x24, x21
   1.09%  ↘   │  0x000000010cf19d1c:   mul		x11, x11, x16
   0.03%      │  0x000000010cf19d20:   mov		x7, x24
   1.18%      │  0x000000010cf19d24:   cmp		x22, x24
   1.10%   ╭  │  0x000000010cf19d28:   b.lt		#0x10cf19d30
  14.20%   │  │  0x000000010cf19d2c:   mov		x7, x22
   0.03%   ↘  │  0x000000010cf19d30:   mov		x21, x7
   1.11%      │  0x000000010cf19d34:   cmp		x23, x7
   1.29%    ╭ │  0x000000010cf19d38:   b.lt		#0x10cf19d40
  17.14%    │ │  0x000000010cf19d3c:   mov		x21, x23
   0.01%    ↘ │  0x000000010cf19d40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   1.13%      │  0x000000010cf19d44:   mov		x7, x21
   1.23%      │  0x000000010cf19d48:   cmp		x11, x21
   0.02%     ╭│  0x000000010cf19d4c:   b.lt		#0x10cf19d54
   9.03%     ││  0x000000010cf19d50:   mov		x7, x11             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.86%     ↘│  0x000000010cf19d54:   cmp		w12, w10
              ╰  0x000000010cf19d58:   b.lt		#0x10cf19cf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   1.07%         0x000000010cf19d5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.11%         0x000000010cf19d60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010cf19d64:   cmp		w12, w17
                 0x000000010cf19d68:   b.lt		#0x10cf19cd0
                 0x000000010cf19d6c:   cmp		w12, w13
                 0x000000010cf19d70:   b.lt		#0x10cf19c28
....................................................................................................
  99.15%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 807

                              0x0000000128af4680:   csel		w1, w13, w1, hi
                              0x0000000128af4684:   add		w11, w1, w12
                              0x0000000128af4688:   stp		x16, x0, [sp]
                              0x0000000128af468c:   stp		x17, x15, [sp, #0x10]
                              0x0000000128af4690:   str		x20, [sp, #0x60]
                              0x0000000128af4694:   nop
                              0x0000000128af4698:   nop
                              0x0000000128af469c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.39%                  ↗   0x0000000128af46a0:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.41%                  │   0x0000000128af46a4:   ldr		x15, [x27, #0x10]
                          │   0x0000000128af46a8:   mov		x29, x15
   0.00%                  │   0x0000000128af46ac:   cmp		x25, x15
          ╭               │   0x0000000128af46b0:   b.lt		#0x128af46b8
   0.08%  │               │   0x0000000128af46b4:   mov		x29, x25
   4.81%  ↘               │   0x0000000128af46b8:   ldr		x16, [x27, #0x18]
                          │   0x0000000128af46bc:   mov		x15, x16
                          │   0x0000000128af46c0:   cmp		x29, x16
           ╭              │   0x0000000128af46c4:   b.lt		#0x128af46cc
   0.52%   │              │   0x0000000128af46c8:   mov		x15, x29
   5.96%   ↘              │   0x0000000128af46cc:   ldr		x17, [x27, #0x20]
                          │   0x0000000128af46d0:   mov		x16, x17
                          │   0x0000000128af46d4:   cmp		x15, x17
            ╭             │   0x0000000128af46d8:   b.lt		#0x128af46e0
   0.48%    │             │   0x0000000128af46dc:   mov		x16, x15
   5.34%    ↘             │   0x0000000128af46e0:   ldr		x0, [x27, #0x28]
                          │   0x0000000128af46e4:   mov		x15, x0
                          │   0x0000000128af46e8:   cmp		x16, x0
             ╭            │   0x0000000128af46ec:   b.lt		#0x128af46f4
   0.39%     │            │   0x0000000128af46f0:   mov		x15, x16
   5.55%     ↘            │   0x0000000128af46f4:   ldr		x1, [x27, #0x30]
                          │   0x0000000128af46f8:   mov		x16, x1
                          │   0x0000000128af46fc:   cmp		x15, x1
              ╭           │   0x0000000128af4700:   b.lt		#0x128af4708
   0.22%      │           │   0x0000000128af4704:   mov		x16, x15
   5.18%      ↘           │   0x0000000128af4708:   ldr		x2, [x27, #0x38]
                          │   0x0000000128af470c:   mov		x15, x2
                          │   0x0000000128af4710:   cmp		x16, x2
               ╭          │   0x0000000128af4714:   b.lt		#0x128af471c
   0.15%       │          │   0x0000000128af4718:   mov		x15, x16
   5.81%       ↘          │   0x0000000128af471c:   ldr		x3, [x27, #0x40]
                          │   0x0000000128af4720:   mov		x16, x3
                          │   0x0000000128af4724:   cmp		x15, x3
                ╭         │   0x0000000128af4728:   b.lt		#0x128af4730
   0.16%        │         │   0x0000000128af472c:   mov		x16, x15
   5.16%        ↘         │   0x0000000128af4730:   ldr		x4, [x27, #0x48]
                          │   0x0000000128af4734:   mov		x15, x4
                          │   0x0000000128af4738:   cmp		x16, x4
                 ╭        │   0x0000000128af473c:   b.lt		#0x128af4744
   0.29%         │        │   0x0000000128af4740:   mov		x15, x16
   5.95%         ↘        │   0x0000000128af4744:   ldr		x5, [x27, #0x50]
                          │   0x0000000128af4748:   mov		x16, x5
                          │   0x0000000128af474c:   cmp		x15, x5
                  ╭       │   0x0000000128af4750:   b.lt		#0x128af4758
   0.07%          │       │   0x0000000128af4754:   mov		x16, x15
   5.09%          ↘       │   0x0000000128af4758:   ldr		x6, [x27, #0x58]
                          │   0x0000000128af475c:   mov		x15, x6
                          │   0x0000000128af4760:   cmp		x16, x6
                   ╭      │   0x0000000128af4764:   b.lt		#0x128af476c
   0.14%           │      │   0x0000000128af4768:   mov		x15, x16
   5.77%           ↘      │   0x0000000128af476c:   ldr		x7, [x27, #0x60]
                          │   0x0000000128af4770:   mov		x16, x7
                          │   0x0000000128af4774:   cmp		x15, x7
                    ╭     │   0x0000000128af4778:   b.lt		#0x128af4780
   0.45%            │     │   0x0000000128af477c:   mov		x16, x15
   5.52%            ↘     │   0x0000000128af4780:   ldr		x20, [x27, #0x68]
                          │   0x0000000128af4784:   mov		x15, x20
                          │   0x0000000128af4788:   cmp		x16, x20
                     ╭    │   0x0000000128af478c:   b.lt		#0x128af4794
   0.18%             │    │   0x0000000128af4790:   mov		x15, x16
   5.34%             ↘    │   0x0000000128af4794:   ldr		x22, [x27, #0x70]
                          │   0x0000000128af4798:   mov		x16, x22
                          │   0x0000000128af479c:   cmp		x15, x22
                      ╭   │   0x0000000128af47a0:   b.lt		#0x128af47a8
   0.52%              │   │   0x0000000128af47a4:   mov		x16, x15
   6.09%              ↘   │   0x0000000128af47a8:   ldr		x23, [x27, #0x78]
                          │   0x0000000128af47ac:   mov		x15, x23
                          │   0x0000000128af47b0:   cmp		x16, x23
                       ╭  │   0x0000000128af47b4:   b.lt		#0x128af47bc
   0.22%               │  │   0x0000000128af47b8:   mov		x15, x16
   4.82%               ↘  │   0x0000000128af47bc:   ldr		x26, [x27, #0x80]
                          │   0x0000000128af47c0:   mov		x16, x26
                          │   0x0000000128af47c4:   cmp		x15, x26
                        ╭ │   0x0000000128af47c8:   b.lt		#0x128af47d0
   0.42%                │ │   0x0000000128af47cc:   mov		x16, x15
   6.18%                ↘ │   0x0000000128af47d0:   ldr		x27, [x27, #0x88]
                          │   0x0000000128af47d4:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                          │   0x0000000128af47d8:   mov		x25, x27
                          │   0x0000000128af47dc:   cmp		x16, x27
                         ╭│   0x0000000128af47e0:   b.lt		#0x128af47e8
   0.82%                 ││   0x0000000128af47e4:   mov		x25, x16            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   4.75%                 ↘│   0x0000000128af47e8:   cmp		w12, w11
                          ╰   0x0000000128af47ec:   b.lt		#0x128af46a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                      0x0000000128af47f0:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                        ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                        ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%                      0x0000000128af47f4:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                        ;   {poll}
                              0x0000000128af47f8:   cmp		w12, w10
                              0x0000000128af47fc:   b.lt		#0x128af4660
                              0x0000000128af4800:   ldp		x16, x0, [sp]
                              0x0000000128af4804:   ldp		x17, x15, [sp, #0x10]
   0.01%                      0x0000000128af4808:   ldr		x20, [sp, #0x60]
                              0x0000000128af480c:   cmp		w12, w14
                              0x0000000128af4810:   b.lt		#0x128af4638
                              0x0000000128af4814:   mov		x11, x25            ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%                      0x0000000128af4818:   ldarb		w14, [x21]          ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 107)
                              0x0000000128af481c:   ldr		x1, [x28, #0x30]
                              0x0000000128af4820:   add		x19, x19, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg0=Oop rdispatch=Derived_oop_c_rarg0 resp=Oop }
                                                                                        ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                                                                                        ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 107)
   0.09%                      0x0000000128af4824:   ldr		wzr, [x1]           ;   {poll}
                              0x0000000128af4828:   cbnz		w14, #0x128af45e8   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 108)
                              0x0000000128af482c:   ldr		w14, [x15, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              0x0000000128af4830:   cmp		w14, #0
                              0x0000000128af4834:   b.le		#0x128af48a0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              0x0000000128af4838:   ldr		w10, [x15, #0x2c]
                              0x0000000128af483c:   lsl		x24, x10, #3        ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.03%                      0x0000000128af4840:   ldr		w10, [x24, #0xc]    ; implicit exception: dispatches to 0x0000000128af48a8
                                                                                        ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              0x0000000128af4844:   sxtw		x11, w14
                              0x0000000128af4848:   sub		x1, x11, #0xf
                              0x0000000128af484c:   sxtw		x12, w10
                              0x0000000128af4850:   sub		x11, x11, #1
                              0x0000000128af4854:   cbz		w10, #0x128af48a8
                              0x0000000128af4858:   cmp		x11, x12
                              0x0000000128af485c:   b.hs		#0x128af48a8
   0.02%                      0x0000000128af4860:   ldr		x11, [x24, #0x10]
                              0x0000000128af4864:   mov		x12, #-0x80000000
                              0x0000000128af4868:   mov		x10, x12
                              0x0000000128af486c:   cmp		x1, x12
                           ╭  0x0000000128af4870:   b.lt		#0x128af4878
                           │  0x0000000128af4874:   mov		x10, x1
                           ↘  0x0000000128af4878:   mov		x12, xzr
                              0x0000000128af487c:   mov		w10, w10
                              0x0000000128af4880:   mov		x25, x12
                              0x0000000128af4884:   cmp		x11, x12
                              0x0000000128af4888:   b.lt		#0x128af4890
....................................................................................................
  98.55%  <total for region 1>
#+end_src
*** branch never
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1399.006 ± 33.211  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3719.712 ± 87.950  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1390.658 ± 99.802  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3673.639 ± 65.184  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 806

                 0x000000010a849a50:   cmp		w17, w12
                 0x000000010a849a54:   sub		w11, w17, w12
                 0x000000010a849a58:   csel		w10, wzr, w11, lt
                 0x000000010a849a5c:   cmp		w10, #0xfa0
                 0x000000010a849a60:   csel		w11, w14, w10, hi
                 0x000000010a849a64:   add		w10, w11, w12
                 0x000000010a849a68:   nop
                 0x000000010a849a6c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   2.09%      ↗  0x000000010a849a70:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%      │  0x000000010a849a74:   ldp		x21, x22, [x11, #0x10]
              │  0x000000010a849a78:   ldr		x23, [x11, #0x20]
              │  0x000000010a849a7c:   mul		x21, x21, x16
  19.90%      │  0x000000010a849a80:   ldr		x11, [x11, #0x28]
              │  0x000000010a849a84:   mul		x22, x22, x16
              │  0x000000010a849a88:   mul		x23, x23, x16
              │  0x000000010a849a8c:   mov		x24, x21
              │  0x000000010a849a90:   cmp		x7, x21
          ╭   │  0x000000010a849a94:   b.lt		#0x10a849a9c
   0.03%  │   │  0x000000010a849a98:   mov		x24, x7
  15.98%  ↘   │  0x000000010a849a9c:   mul		x11, x11, x16
              │  0x000000010a849aa0:   mov		x7, x22
              │  0x000000010a849aa4:   cmp		x24, x22
           ╭  │  0x000000010a849aa8:   b.lt		#0x10a849ab0
   3.84%   │  │  0x000000010a849aac:   mov		x7, x24
  18.23%   ↘  │  0x000000010a849ab0:   mov		x21, x23
              │  0x000000010a849ab4:   cmp		x7, x23
            ╭ │  0x000000010a849ab8:   b.lt		#0x10a849ac0
   1.47%    │ │  0x000000010a849abc:   mov		x21, x7
  17.49%    ↘ │  0x000000010a849ac0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              │  0x000000010a849ac4:   mov		x7, x11
   0.01%      │  0x000000010a849ac8:   cmp		x21, x11
             ╭│  0x000000010a849acc:   b.lt		#0x10a849ad4
   1.40%     ││  0x000000010a849ad0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.91%     ↘│  0x000000010a849ad4:   cmp		w12, w10
              ╰  0x000000010a849ad8:   b.lt		#0x10a849a70        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%         0x000000010a849adc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.06%         0x000000010a849ae0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x000000010a849ae4:   cmp		w12, w17
                 0x000000010a849ae8:   b.lt		#0x10a849a50
                 0x000000010a849aec:   cmp		w12, w13
                 0x000000010a849af0:   b.lt		#0x10a8499a8
....................................................................................................
  99.52%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 810

                             0x000000010e5e90c0:   csel		w1, w13, w1, hi
                             0x000000010e5e90c4:   add		w11, w1, w12
                             0x000000010e5e90c8:   stp		x16, x0, [sp]
                             0x000000010e5e90cc:   stp		x17, x15, [sp, #0x10]
                             0x000000010e5e90d0:   str		x20, [sp, #0x60]
                             0x000000010e5e90d4:   nop
                             0x000000010e5e90d8:   nop
                             0x000000010e5e90dc:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.00%                  ↗  0x000000010e5e90e0:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.02%                  │  0x000000010e5e90e4:   ldr		x15, [x27, #0x10]
   0.14%                  │  0x000000010e5e90e8:   mov		x29, x25
   0.17%                  │  0x000000010e5e90ec:   cmp		x15, x25
   0.20%  ╭               │  0x000000010e5e90f0:   b.lt		#0x10e5e90f8
          │               │  0x000000010e5e90f4:   mov		x29, x15
   4.56%  ↘               │  0x000000010e5e90f8:   ldr		x16, [x27, #0x18]
   0.16%                  │  0x000000010e5e90fc:   mov		x15, x29
   0.25%                  │  0x000000010e5e9100:   cmp		x16, x29
   0.20%   ╭              │  0x000000010e5e9104:   b.lt		#0x10e5e910c
           │              │  0x000000010e5e9108:   mov		x15, x16
   5.34%   ↘              │  0x000000010e5e910c:   ldr		x17, [x27, #0x20]
   0.23%                  │  0x000000010e5e9110:   mov		x16, x15
   0.20%                  │  0x000000010e5e9114:   cmp		x17, x15
   0.16%    ╭             │  0x000000010e5e9118:   b.lt		#0x10e5e9120
   0.00%    │             │  0x000000010e5e911c:   mov		x16, x17
   5.03%    ↘             │  0x000000010e5e9120:   ldr		x0, [x27, #0x28]
   0.12%                  │  0x000000010e5e9124:   mov		x15, x16
   0.13%                  │  0x000000010e5e9128:   cmp		x0, x16
   0.16%     ╭            │  0x000000010e5e912c:   b.lt		#0x10e5e9134
   0.02%     │            │  0x000000010e5e9130:   mov		x15, x0
   5.64%     ↘            │  0x000000010e5e9134:   ldr		x1, [x27, #0x30]
   0.20%                  │  0x000000010e5e9138:   mov		x16, x15
   0.16%                  │  0x000000010e5e913c:   cmp		x1, x15
   0.25%      ╭           │  0x000000010e5e9140:   b.lt		#0x10e5e9148
              │           │  0x000000010e5e9144:   mov		x16, x1
   5.09%      ↘           │  0x000000010e5e9148:   ldr		x2, [x27, #0x38]
   0.20%                  │  0x000000010e5e914c:   mov		x15, x16
   0.23%                  │  0x000000010e5e9150:   cmp		x2, x16
   0.23%       ╭          │  0x000000010e5e9154:   b.lt		#0x10e5e915c
               │          │  0x000000010e5e9158:   mov		x15, x2
   5.32%       ↘          │  0x000000010e5e915c:   ldr		x3, [x27, #0x40]
   0.13%                  │  0x000000010e5e9160:   mov		x16, x15
   0.15%                  │  0x000000010e5e9164:   cmp		x3, x15
   0.23%        ╭         │  0x000000010e5e9168:   b.lt		#0x10e5e9170
                │         │  0x000000010e5e916c:   mov		x16, x3
   5.18%        ↘         │  0x000000010e5e9170:   ldr		x4, [x27, #0x48]
   0.14%                  │  0x000000010e5e9174:   mov		x15, x16
   0.27%                  │  0x000000010e5e9178:   cmp		x4, x16
   0.14%         ╭        │  0x000000010e5e917c:   b.lt		#0x10e5e9184
                 │        │  0x000000010e5e9180:   mov		x15, x4
   5.22%         ↘        │  0x000000010e5e9184:   ldr		x5, [x27, #0x50]
   0.20%                  │  0x000000010e5e9188:   mov		x16, x15
   0.20%                  │  0x000000010e5e918c:   cmp		x5, x15
   0.16%          ╭       │  0x000000010e5e9190:   b.lt		#0x10e5e9198
                  │       │  0x000000010e5e9194:   mov		x16, x5
   4.99%          ↘       │  0x000000010e5e9198:   ldr		x6, [x27, #0x58]
   0.28%                  │  0x000000010e5e919c:   mov		x15, x16
   0.17%                  │  0x000000010e5e91a0:   cmp		x6, x16
   0.22%           ╭      │  0x000000010e5e91a4:   b.lt		#0x10e5e91ac
   0.01%           │      │  0x000000010e5e91a8:   mov		x15, x6
   5.25%           ↘      │  0x000000010e5e91ac:   ldr		x7, [x27, #0x60]
   0.24%                  │  0x000000010e5e91b0:   mov		x16, x15
   0.19%                  │  0x000000010e5e91b4:   cmp		x7, x15
   0.18%            ╭     │  0x000000010e5e91b8:   b.lt		#0x10e5e91c0
                    │     │  0x000000010e5e91bc:   mov		x16, x7
   5.21%            ↘     │  0x000000010e5e91c0:   ldr		x20, [x27, #0x68]
   0.14%                  │  0x000000010e5e91c4:   mov		x15, x16
   0.22%                  │  0x000000010e5e91c8:   cmp		x20, x16
   0.20%             ╭    │  0x000000010e5e91cc:   b.lt		#0x10e5e91d4
                     │    │  0x000000010e5e91d0:   mov		x15, x20
   5.50%             ↘    │  0x000000010e5e91d4:   ldr		x22, [x27, #0x70]
   0.15%                  │  0x000000010e5e91d8:   mov		x16, x15
   0.15%                  │  0x000000010e5e91dc:   cmp		x22, x15
   0.21%              ╭   │  0x000000010e5e91e0:   b.lt		#0x10e5e91e8
                      │   │  0x000000010e5e91e4:   mov		x16, x22
   5.31%              ↘   │  0x000000010e5e91e8:   ldr		x23, [x27, #0x78]
   0.19%                  │  0x000000010e5e91ec:   mov		x15, x16
   0.14%                  │  0x000000010e5e91f0:   cmp		x23, x16
   0.12%               ╭  │  0x000000010e5e91f4:   b.lt		#0x10e5e91fc
                       │  │  0x000000010e5e91f8:   mov		x15, x23
   4.86%               ↘  │  0x000000010e5e91fc:   ldr		x26, [x27, #0x80]
   0.20%                  │  0x000000010e5e9200:   mov		x16, x15
   0.19%                  │  0x000000010e5e9204:   cmp		x26, x15
   0.15%                ╭ │  0x000000010e5e9208:   b.lt		#0x10e5e9210
                        │ │  0x000000010e5e920c:   mov		x16, x26
   5.80%                ↘ │  0x000000010e5e9210:   ldr		x27, [x27, #0x88]
   0.15%                  │  0x000000010e5e9214:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.15%                  │  0x000000010e5e9218:   mov		x25, x16
   0.19%                  │  0x000000010e5e921c:   cmp		x27, x16
   0.16%                 ╭│  0x000000010e5e9220:   b.lt		#0x10e5e9228
   3.29%                 ││  0x000000010e5e9224:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.21%                 ↘│  0x000000010e5e9228:   cmp		w12, w11
                          ╰  0x000000010e5e922c:   b.lt		#0x10e5e90e0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   1.74%                     0x000000010e5e9230:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                     0x000000010e5e9234:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000010e5e9238:   cmp		w12, w10
                             0x000000010e5e923c:   b.lt		#0x10e5e90a0
                             0x000000010e5e9240:   ldp		x16, x0, [sp]
                             0x000000010e5e9244:   ldp		x17, x15, [sp, #0x10]
....................................................................................................
  97.85%  <total for region 1>
#+end_src
*** disabled intrinsic
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2492.205 ± 62.451  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3495.841 ± 71.436  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  2601.966 ± 263.504  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN               ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  3498.322 ±  82.773  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN               ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 823

                     0x000000010ccaa344:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
                     0x000000010ccaa348:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
                     0x000000010ccaa34c:   ldp		x29, x30, [sp, #0x50]
                     0x000000010ccaa350:   add		sp, sp, #0x60
                     0x000000010ccaa354:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                     0x000000010ccaa358:   cmp		sp, x8
                     0x000000010ccaa35c:   b.hi		#0x10ccaa5ac
                     0x000000010ccaa360:   ret
   2.77%       ↗     0x000000010ccaa364:   mov		x12, x7
   0.00%       │     0x000000010ccaa368:   nop
   0.01%       │     0x000000010ccaa36c:   nop
  18.34%      ↗│     0x000000010ccaa370:   cmp		x12, x21
   0.00%  ╭   ││     0x000000010ccaa374:   b.ge		#0x10ccaa3d4
  16.43%  │   ││  ↗  0x000000010ccaa378:   cmp		x21, x6
   0.00%  │╭  ││  │  0x000000010ccaa37c:   b.ge		#0x10ccaa3c4        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││  ││  │                                                            ; - java.lang.Math::max@11 (line 2038)
          ││  ││  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││  ││  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  21.64%  ││  ││↗ │  0x000000010ccaa380:   add		w1, w1, #4          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││  │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ││  │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.28%  ││  │││ │  0x000000010ccaa384:   cmp		w1, w11
   0.00%  ││╭ │││ │  0x000000010ccaa388:   b.ge		#0x10ccaa3dc        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          │││ │││ │  0x000000010ccaa38c:   mov		x22, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          │││ │││ │  0x000000010ccaa390:   add		x12, x5, w1, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%  │││ │││ │  0x000000010ccaa394:   ldr		x7, [x12, #0x10]
   0.00%  │││ │││ │  0x000000010ccaa398:   ldp		x21, x6, [x12, #0x20]
  20.48%  │││ │││ │  0x000000010ccaa39c:   ldr		x12, [x12, #0x18]
   0.03%  │││ │││ │  0x000000010ccaa3a0:   mul		x7, x7, x15
   0.17%  │││ │││ │  0x000000010ccaa3a4:   mul		x6, x6, x15
          │││ │││ │  0x000000010ccaa3a8:   mul		x12, x12, x15
          │││ │││ │  0x000000010ccaa3ac:   mul		x21, x21, x15       ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │││ │││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.14%  │││ │││ │  0x000000010ccaa3b0:   cmp		x22, x7
          │││╭│││ │  0x000000010ccaa3b4:   b.ge		#0x10ccaa3cc        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││││││ │                                                            ; - java.lang.Math::max@11 (line 2038)
          │││││││ │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          │││││││ │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  17.70%  │││││││↗│  0x000000010ccaa3b8:   cmp		x7, x12
   0.00%  ││││╰││││  0x000000010ccaa3bc:   b.lt		#0x10ccaa370        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ││││ ││││                                                            ; - java.lang.Math::max@3 (line 2038)
          ││││ ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││││ ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.01%  ││││ ╰│││  0x000000010ccaa3c0:   b		#0x10ccaa364
   0.41%  │↘││  │││  0x000000010ccaa3c4:   mov		x6, x21
          │ ││  ╰││  0x000000010ccaa3c8:   b		#0x10ccaa380
   0.28%  │ │↘   ││  0x000000010ccaa3cc:   mov		x7, x22
          │ │    ╰│  0x000000010ccaa3d0:   b		#0x10ccaa3b8
   0.42%  ↘ │     │  0x000000010ccaa3d4:   mov		x21, x12
            │     ╰  0x000000010ccaa3d8:   b		#0x10ccaa378
            ↘        0x000000010ccaa3dc:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop c_rarg0=Oop c_rarg2=Oop c_rarg4=Oop c_rarg3=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.01%             0x000000010ccaa3e0:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x000000010ccaa3e4:   cmp		w1, w17
                     0x000000010ccaa3e8:   b.ge		#0x10ccaa43c
                     0x000000010ccaa3ec:   mov		x22, x6
                     0x000000010ccaa3f0:   cmp		w17, w1
....................................................................................................
  99.19%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 820

                   0x000000010a89bbbc:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@48 (line 109)
                   0x000000010a89bbc0:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@42 (line 108)
                   0x000000010a89bbc4:   ldp		x29, x30, [sp, #0x50]
                   0x000000010a89bbc8:   add		sp, sp, #0x60
                   0x000000010a89bbcc:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                   0x000000010a89bbd0:   cmp		sp, x8
                   0x000000010a89bbd4:   b.hi		#0x10a89be50
                   0x000000010a89bbd8:   ret
   1.04%      ↗    0x000000010a89bbdc:   mov		x7, x13
   9.48%     ↗│    0x000000010a89bbe0:   cmp		x7, x23
   0.35%  ╭  ││    0x000000010a89bbe4:   b.ge		#0x10a89bc4c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │  ││                                                              ; - java.lang.Math::max@11 (line 2038)
          │  ││                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │  ││                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  10.94%  │  ││↗   0x000000010a89bbe8:   add		w11, w11, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.13%  │  │││   0x000000010a89bbec:   cmp		w11, w14
   0.01%  │  │││   0x000000010a89bbf0:   b.ge		#0x10a89bc84        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  │││   0x000000010a89bbf4:   mov		x25, x23            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  │││   0x000000010a89bbf8:   add		x13, x4, w11, sxtw #3
   0.00%  │  │││   0x000000010a89bbfc:   ldr		x23, [x13, #0x48]
   0.01%  │  │││   0x000000010a89bc00:   ldp		x5, x6, [x13, #0x10]
   0.04%  │  │││   0x000000010a89bc04:   ldr		x7, [x13, #0x40]
   0.05%  │  │││   0x000000010a89bc08:   ldp		x21, x22, [x13, #0x20]
  10.98%  │  │││   0x000000010a89bc0c:   ldp		x24, x13, [x13, #0x30];*laload {reexecute=0 rethrow=0 return_oop=0}
          │  │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          │  │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │  │││   0x000000010a89bc10:   cmp		x25, x5
          │  │││   0x000000010a89bc14:   b.ge		#0x10a89bc7c
  11.51%  │  │││   0x000000010a89bc18:   cmp		x5, x6
   0.01%  │╭ │││   0x000000010a89bc1c:   b.ge		#0x10a89bc54
  10.65%  ││ │││↗  0x000000010a89bc20:   cmp		x6, x21
   0.13%  ││ ││││  0x000000010a89bc24:   b.ge		#0x10a89bc74
  10.88%  ││ ││││  0x000000010a89bc28:   cmp		x21, x22
   0.17%  ││╭││││  0x000000010a89bc2c:   b.ge		#0x10a89bc5c
  10.85%  │││││││  0x000000010a89bc30:   cmp		x22, x24
   0.21%  │││││││  0x000000010a89bc34:   b.ge		#0x10a89bc64
  10.76%  │││││││  0x000000010a89bc38:   cmp		x24, x13
   0.05%  │││││││  0x000000010a89bc3c:   b.ge		#0x10a89bc6c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││││││                                                            ; - java.lang.Math::max@11 (line 2038)
          │││││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │││││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  10.80%  │││││││  0x000000010a89bc40:   cmp		x13, x7
   0.00%  │││╰│││  0x000000010a89bc44:   b.lt		#0x10a89bbe0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          │││ │││                                                            ; - java.lang.Math::max@3 (line 2038)
          │││ │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │││ │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          │││ ╰││  0x000000010a89bc48:   b		#0x10a89bbdc
          ↘││  ││  0x000000010a89bc4c:   mov		x23, x7
           ││  ╰│  0x000000010a89bc50:   b		#0x10a89bbe8
           ↘│   │  0x000000010a89bc54:   mov		x6, x5
            │   ╰  0x000000010a89bc58:   b		#0x10a89bc20
            ↘      0x000000010a89bc5c:   mov		x22, x21
                   0x000000010a89bc60:   b		#0x10a89bc30
....................................................................................................
  99.06%  <total for region 1>
#+end_src
** x64 comparison
*** cmov
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  546.459 ± 0.359  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  602.729 ± 0.192  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt    Score   Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  545.467 ± 0.444  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt           NaN             ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  601.635 ± 0.165  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt           NaN             ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1244

              0x00007f329cc3728f:   cmpq		%r8, %r14
              0x00007f329cc37292:   cmovlq		%r8, %r14
   0.02%      0x00007f329cc37296:   movl		%r14d, %ebp
              0x00007f329cc37299:   cmpl		$1, %ebp
              0x00007f329cc3729c:   jle		0x7f329cc373a8
              0x00007f329cc372a2:   movl		$1, %r8d
              0x00007f329cc372a8:   vmovq		%rdx, %xmm0
              0x00007f329cc372ad:   vmovq		%r11, %xmm1
           ↗  0x00007f329cc372b2:   movl		%ebp, %r11d
           │  0x00007f329cc372b5:   subl		%r8d, %r11d
   0.02%   │  0x00007f329cc372b8:   cmpl		%r8d, %ebp
           │  0x00007f329cc372bb:   cmovll		%r10d, %r11d
           │  0x00007f329cc372bf:   cmpl		$0xfa0, %r11d
           │  0x00007f329cc372c6:   cmoval		%esi, %r11d
           │  0x00007f329cc372ca:   addl		%r8d, %r11d
           │  0x00007f329cc372cd:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.03%  ↗│  0x00007f329cc372d0:   imulq		$0xb, 0x10(%rax, %r8, 8), %rdx
   0.03%  ││  0x00007f329cc372d6:   cmpq		%rdi, %rdx
   9.19%  ││  0x00007f329cc372d9:   cmovlq		%rdi, %rdx
  19.76%  ││  0x00007f329cc372dd:   imulq		$0xb, 0x18(%rax, %r8, 8), %r14
          ││  0x00007f329cc372e3:   cmpq		%rdx, %r14
   6.14%  ││  0x00007f329cc372e6:   cmovlq		%rdx, %r14
  17.63%  ││  0x00007f329cc372ea:   imulq		$0xb, 0x28(%rax, %r8, 8), %rdi
          ││  0x00007f329cc372f0:   imulq		$0xb, 0x20(%rax, %r8, 8), %rdx
          ││  0x00007f329cc372f6:   cmpq		%r14, %rdx
   7.52%  ││  0x00007f329cc372f9:   cmovlq		%r14, %rdx
  20.45%  ││  0x00007f329cc372fd:   cmpq		%rdx, %rdi
   6.76%  ││  0x00007f329cc37300:   cmovlq		%rdx, %rdi          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  10.99%  ││  0x00007f329cc37304:   addl		$4, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││  0x00007f329cc37308:   cmpl		%r11d, %r8d
          ╰│  0x00007f329cc3730b:   jl		0x7f329cc372d0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
           │  0x00007f329cc3730d:   movq		0x30(%r15), %r11    ; ImmutableOopMap {r9=Oop rcx=Oop rbx=Oop rax=Oop xmm0=Oop xmm1=Oop }
           │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
           │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.02%   │  0x00007f329cc37311:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
           │                                                            ;   {poll}
           │  0x00007f329cc37314:   cmpl		%ebp, %r8d
           ╰  0x00007f329cc37317:   jl		0x7f329cc372b2
              0x00007f329cc37319:   vmovq		%xmm0, %rdx
              0x00007f329cc3731e:   vmovq		%xmm1, %r11
....................................................................................................
  98.54%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1260

              0x00007f3068c397c4:   movl		%ebp, %ebp
   0.02%      0x00007f3068c397c6:   cmpl		$1, %ebp
              0x00007f3068c397c9:   jle		0x7f3068c39990
              0x00007f3068c397cf:   movl		$1, %r11d
              0x00007f3068c397d5:   movq		%r9, %r14
              0x00007f3068c397d8:   vmovq		%rcx, %xmm0
              0x00007f3068c397dd:   vmovq		%rdi, %xmm1
              0x00007f3068c397e2:   vmovq		%r8, %xmm2
           ↗  0x00007f3068c397e7:   movl		%ebp, %r9d
           │  0x00007f3068c397ea:   subl		%r11d, %r9d
   0.01%   │  0x00007f3068c397ed:   cmpl		%r11d, %ebp
           │  0x00007f3068c397f0:   cmovll		%r10d, %r9d
           │  0x00007f3068c397f4:   cmpl		$0x3e80, %r9d
           │  0x00007f3068c397fb:   cmoval		%esi, %r9d
           │  0x00007f3068c397ff:   addl		%r11d, %r9d
           │  0x00007f3068c39802:   nopl		(%rax)
   0.02%   │  0x00007f3068c39809:   nopl		(%rax)              ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ↗│  0x00007f3068c39810:   movq		0x88(%r13, %r11, 8), %rcx
          ││  0x00007f3068c39818:   movq		0x80(%r13, %r11, 8), %rdi
          ││  0x00007f3068c39820:   movq		0x10(%r13, %r11, 8), %r8
          ││  0x00007f3068c39825:   cmpq		%r8, %rdx
   2.24%  ││  0x00007f3068c39828:   cmovlq		%r8, %rdx
   5.44%  ││  0x00007f3068c3982c:   movq		0x18(%r13, %r11, 8), %r8
          ││  0x00007f3068c39831:   cmpq		%r8, %rdx
   1.33%  ││  0x00007f3068c39834:   cmovlq		%r8, %rdx
   3.34%  ││  0x00007f3068c39838:   movq		0x20(%r13, %r11, 8), %r8
          ││  0x00007f3068c3983d:   cmpq		%r8, %rdx
   3.36%  ││  0x00007f3068c39840:   cmovlq		%r8, %rdx
   2.49%  ││  0x00007f3068c39844:   movq		0x28(%r13, %r11, 8), %r8
   0.01%  ││  0x00007f3068c39849:   cmpq		%r8, %rdx
   3.86%  ││  0x00007f3068c3984c:   cmovlq		%r8, %rdx
   2.79%  ││  0x00007f3068c39850:   movq		0x30(%r13, %r11, 8), %r8
          ││  0x00007f3068c39855:   cmpq		%r8, %rdx
   3.42%  ││  0x00007f3068c39858:   cmovlq		%r8, %rdx
   2.42%  ││  0x00007f3068c3985c:   movq		0x38(%r13, %r11, 8), %r8;   {other}
   0.01%  ││  0x00007f3068c39861:   cmpq		%r8, %rdx
   3.74%  ││  0x00007f3068c39864:   cmovlq		%r8, %rdx
   2.46%  ││  0x00007f3068c39868:   movq		0x40(%r13, %r11, 8), %r8
          ││  0x00007f3068c3986d:   cmpq		%r8, %rdx
   3.68%  ││  0x00007f3068c39870:   cmovlq		%r8, %rdx
   3.74%  ││  0x00007f3068c39874:   movq		0x48(%r13, %r11, 8), %r8
   0.02%  ││  0x00007f3068c39879:   cmpq		%r8, %rdx
   2.64%  ││  0x00007f3068c3987c:   cmovlq		%r8, %rdx
   2.44%  ││  0x00007f3068c39880:   movq		0x50(%r13, %r11, 8), %r8
          ││  0x00007f3068c39885:   cmpq		%r8, %rdx
   3.52%  ││  0x00007f3068c39888:   cmovlq		%r8, %rdx
   2.12%  ││  0x00007f3068c3988c:   movq		0x58(%r13, %r11, 8), %r8
   0.02%  ││  0x00007f3068c39891:   cmpq		%r8, %rdx
   3.90%  ││  0x00007f3068c39894:   cmovlq		%r8, %rdx
   2.62%  ││  0x00007f3068c39898:   movq		0x60(%r13, %r11, 8), %r8
          ││  0x00007f3068c3989d:   cmpq		%r8, %rdx
   3.67%  ││  0x00007f3068c398a0:   cmovlq		%r8, %rdx
   2.32%  ││  0x00007f3068c398a4:   movq		0x68(%r13, %r11, 8), %r8
   0.01%  ││  0x00007f3068c398a9:   cmpq		%r8, %rdx
   4.00%  ││  0x00007f3068c398ac:   cmovlq		%r8, %rdx
   3.52%  ││  0x00007f3068c398b0:   movq		0x70(%r13, %r11, 8), %r8
          ││  0x00007f3068c398b5:   cmpq		%r8, %rdx
   2.70%  ││  0x00007f3068c398b8:   cmovlq		%r8, %rdx
   2.75%  ││  0x00007f3068c398bc:   movq		0x78(%r13, %r11, 8), %r8
          ││  0x00007f3068c398c1:   cmpq		%r8, %rdx
   3.33%  ││  0x00007f3068c398c4:   cmovlq		%r8, %rdx
   2.77%  ││  0x00007f3068c398c8:   cmpq		%rdi, %rdx
   3.52%  ││  0x00007f3068c398cb:   cmovlq		%rdi, %rdx
   2.46%  ││  0x00007f3068c398cf:   cmpq		%rcx, %rdx
   3.59%  ││  0x00007f3068c398d2:   cmovlq		%rcx, %rdx          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   2.46%  ││  0x00007f3068c398d6:   addl		$0x10, %r11d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││  0x00007f3068c398da:   cmpl		%r9d, %r11d
          ╰│  0x00007f3068c398dd:   jl		0x7f3068c39810      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           │  0x00007f3068c398e3:   movq		0x30(%r15), %r8     ; ImmutableOopMap {rbx=Oop r13=Oop r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
           │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
           │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.03%   │  0x00007f3068c398e7:   testl		%eax, (%r8)         ;*goto {reexecute=0 rethrow=0 return_oop=0}
           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           │                                                            ;   {poll}
           │  0x00007f3068c398ea:   cmpl		%ebp, %r11d
           ╰  0x00007f3068c398ed:   jl		0x7f3068c397e7
              0x00007f3068c398f3:   movq		%r14, %r9
              0x00007f3068c398f6:   vmovq		%xmm0, %rcx
....................................................................................................

#+end_src
*** branch always
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1771.766 ± 2.370  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1039.047 ± 5.616  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score   Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1765.454 ± 4.656  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN             ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1047.897 ± 9.120  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN             ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1258

                  0x00007f6260c39984:   movl		%r10d, %esi
                  0x00007f6260c39987:   cmpl		$1, %esi
   0.04%          0x00007f6260c3998a:   jle		0x7f6260c39a9c
                  0x00007f6260c39990:   movl		$1, %r9d
                  0x00007f6260c39996:   vmovq		%rbp, %xmm0
               ↗  0x00007f6260c3999b:   movl		%esi, %r8d
               │  0x00007f6260c3999e:   subl		%r9d, %r8d
               │  0x00007f6260c399a1:   xorl		%r10d, %r10d
               │  0x00007f6260c399a4:   cmpl		%r9d, %esi
               │  0x00007f6260c399a7:   cmovll		%r10d, %r8d
   0.06%       │  0x00007f6260c399ab:   cmpl		$0xfa0, %r8d
               │  0x00007f6260c399b2:   movl		$0xfa0, %r10d
               │  0x00007f6260c399b8:   cmoval		%r10d, %r8d
               │  0x00007f6260c399bc:   addl		%r9d, %r8d
   0.05%       │  0x00007f6260c399bf:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
              ↗│  0x00007f6260c399c0:   imulq		$0xb, 0x10(%r13, %r9, 8), %r10
   0.05%      ││  0x00007f6260c399c6:   cmpq		%r10, %rax
  24.44%  ╭   ││  0x00007f6260c399c9:   jg		0x7f6260c399ce
          │   ││  0x00007f6260c399cb:   movq		%r10, %rax
          ↘   ││  0x00007f6260c399ce:   imulq		$0xb, 0x18(%r13, %r9, 8), %r10
              ││  0x00007f6260c399d4:   cmpq		%r10, %rax
  24.85%   ╭  ││  0x00007f6260c399d7:   jg		0x7f6260c399dc
           │  ││  0x00007f6260c399d9:   movq		%r10, %rax
           ↘  ││  0x00007f6260c399dc:   imulq		$0xb, 0x28(%r13, %r9, 8), %r10
   0.07%      ││  0x00007f6260c399e2:   imulq		$0xb, 0x20(%r13, %r9, 8), %rbp
   0.11%      ││  0x00007f6260c399e8:   cmpq		%rbp, %rax
  47.64%    ╭ ││  0x00007f6260c399eb:   jg		0x7f6260c399f0
            │ ││  0x00007f6260c399ed:   movq		%rbp, %rax
            ↘ ││  0x00007f6260c399f0:   cmpq		%r10, %rax
             ╭││  0x00007f6260c399f3:   jg		0x7f6260c399f8
             │││  0x00007f6260c399f5:   movq		%r10, %rax          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
             ↘││  0x00007f6260c399f8:   addl		$4, %r9d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.06%      ││  0x00007f6260c399fc:   cmpl		%r8d, %r9d
              ╰│  0x00007f6260c399ff:   jl		0x7f6260c399c0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               │  0x00007f6260c39a01:   movq		0x30(%r15), %r10    ; ImmutableOopMap {r11=Oop rcx=Oop rbx=Oop rdi=Oop rdx=Oop r13=Oop }
               │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
               │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.82%       │  0x00007f6260c39a05:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
               │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
               │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               │                                                            ;   {poll}
   0.25%       │  0x00007f6260c39a08:   cmpl		%esi, %r9d
               ╰  0x00007f6260c39a0b:   jl		0x7f6260c3999b
                  0x00007f6260c39a0d:   vmovq		%xmm0, %rbp
                  0x00007f6260c39a12:   cmpl		%r14d, %r9d
                  0x00007f6260c39a15:   jl		0x7f6260c398fa
                  0x00007f6260c39a1b:   movq		%rax, %r10
                  0x00007f6260c39a1e:   jmp		0x7f6260c39910
                  0x00007f6260c39a23:   xorl		%r10d, %r10d
....................................................................................................
  98.38%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1253

                                     0x00007fc8c0c37a9b:   movq		%r13, %rax
                                     0x00007fc8c0c37a9e:   movzbl		0x94(%rax), %r10d   ; implicit exception: dispatches to 0x00007fc8c0c37dac
                                                                                               ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 126)
                                     0x00007fc8c0c37aa6:   testl		%r10d, %r10d
                                     0x00007fc8c0c37aa9:   jne		0x7fc8c0c37ca5      ;*ifeq {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 126)
                                     0x00007fc8c0c37aaf:   movl		$1, %ebp
          ╭                          0x00007fc8c0c37ab4:   jmp		0x7fc8c0c37c26
          │                          0x00007fc8c0c37ab9:   nopl		(%rax)
   1.11%  │                ↗         0x00007fc8c0c37ac0:   movq		%r11, %r8           ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │                │                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          │                │                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.01%  │                │ ↗       0x00007fc8c0c37ac3:   movq		0x88(%rsi, %r10, 8), %r11
  10.14%  │                │ │       0x00007fc8c0c37acb:   movq		0x80(%rsi, %r10, 8), %rbp
   1.21%  │                │ │       0x00007fc8c0c37ad3:   movq		0x10(%rsi, %r10, 8), %r14
   2.12%  │                │ │       0x00007fc8c0c37ad8:   cmpq		%r8, %r14
          │╭               │ │       0x00007fc8c0c37adb:   jg		0x7fc8c0c37ae0
          ││               │ │       0x00007fc8c0c37add:   movq		%r8, %r14
          │↘               │ │       0x00007fc8c0c37ae0:   movq		0x18(%rsi, %r10, 8), %r8
   1.76%  │                │ │       0x00007fc8c0c37ae5:   cmpq		%r14, %r8
   2.15%  │ ╭              │ │       0x00007fc8c0c37ae8:   jg		0x7fc8c0c37aed
          │ │              │ │       0x00007fc8c0c37aea:   movq		%r14, %r8
          │ ↘              │ │       0x00007fc8c0c37aed:   movq		0x20(%rsi, %r10, 8), %r14
   2.98%  │                │ │       0x00007fc8c0c37af2:   cmpq		%r8, %r14
   1.93%  │  ╭             │ │       0x00007fc8c0c37af5:   jg		0x7fc8c0c37afa
          │  │             │ │       0x00007fc8c0c37af7:   movq		%r8, %r14
          │  ↘             │ │       0x00007fc8c0c37afa:   movq		0x28(%rsi, %r10, 8), %r8
   1.67%  │                │ │       0x00007fc8c0c37aff:   cmpq		%r14, %r8
   1.78%  │   ╭            │ │       0x00007fc8c0c37b02:   jg		0x7fc8c0c37b07
          │   │            │ │       0x00007fc8c0c37b04:   movq		%r14, %r8
   0.21%  │   ↘            │ │       0x00007fc8c0c37b07:   movq		0x30(%rsi, %r10, 8), %r14
   6.81%  │                │ │       0x00007fc8c0c37b0c:   cmpq		%r8, %r14
   0.03%  │    ╭           │ │       0x00007fc8c0c37b0f:   jg		0x7fc8c0c37b14
   0.13%  │    │           │ │       0x00007fc8c0c37b11:   movq		%r8, %r14
   1.17%  │    ↘           │ │       0x00007fc8c0c37b14:   movq		0x38(%rsi, %r10, 8), %r8
   4.17%  │                │ │       0x00007fc8c0c37b19:   cmpq		%r14, %r8
   0.01%  │     ╭          │ │       0x00007fc8c0c37b1c:   jg		0x7fc8c0c37b21
          │     │          │ │       0x00007fc8c0c37b1e:   movq		%r14, %r8
   0.21%  │     ↘          │ │       0x00007fc8c0c37b21:   movq		0x40(%rsi, %r10, 8), %r14
   4.71%  │                │ │       0x00007fc8c0c37b26:   cmpq		%r8, %r14
   0.01%  │      ╭         │ │       0x00007fc8c0c37b29:   jg		0x7fc8c0c37b2e      ;   {other}
          │      │         │ │       0x00007fc8c0c37b2b:   movq		%r8, %r14
          │      ↘         │ │       0x00007fc8c0c37b2e:   movq		0x48(%rsi, %r10, 8), %r8
   6.36%  │                │ │       0x00007fc8c0c37b33:   cmpq		%r14, %r8
   0.01%  │       ╭        │ │       0x00007fc8c0c37b36:   jg		0x7fc8c0c37b3b
          │       │        │ │       0x00007fc8c0c37b38:   movq		%r14, %r8
   0.03%  │       ↘        │ │       0x00007fc8c0c37b3b:   movq		0x50(%rsi, %r10, 8), %r14
   5.05%  │                │ │       0x00007fc8c0c37b40:   cmpq		%r8, %r14
   0.03%  │        ╭       │ │       0x00007fc8c0c37b43:   jg		0x7fc8c0c37b48
          │        │       │ │       0x00007fc8c0c37b45:   movq		%r8, %r14
   0.23%  │        ↘       │ │       0x00007fc8c0c37b48:   movq		0x58(%rsi, %r10, 8), %r8
   8.20%  │                │ │       0x00007fc8c0c37b4d:   cmpq		%r14, %r8
          │         ╭      │ │       0x00007fc8c0c37b50:   jg		0x7fc8c0c37b55
   0.17%  │         │      │ │       0x00007fc8c0c37b52:   movq		%r14, %r8
   1.36%  │         ↘      │ │       0x00007fc8c0c37b55:   movq		0x60(%rsi, %r10, 8), %r14
   4.71%  │                │ │       0x00007fc8c0c37b5a:   cmpq		%r8, %r14
          │          ╭     │ │       0x00007fc8c0c37b5d:   jg		0x7fc8c0c37b62
   0.04%  │          │     │ │       0x00007fc8c0c37b5f:   movq		%r8, %r14
   0.27%  │          ↘     │ │       0x00007fc8c0c37b62:   movq		0x68(%rsi, %r10, 8), %r8
   4.63%  │                │ │       0x00007fc8c0c37b67:   cmpq		%r14, %r8
          │           ╭    │ │       0x00007fc8c0c37b6a:   jg		0x7fc8c0c37b6f
          │           │    │ │       0x00007fc8c0c37b6c:   movq		%r14, %r8
   0.03%  │           ↘    │ │       0x00007fc8c0c37b6f:   movq		0x70(%rsi, %r10, 8), %r14
   5.59%  │                │ │       0x00007fc8c0c37b74:   cmpq		%r8, %r14
          │            ╭   │ │       0x00007fc8c0c37b77:   jg		0x7fc8c0c37b7c
          │            │   │ │       0x00007fc8c0c37b79:   movq		%r8, %r14
   0.06%  │            ↘   │ │       0x00007fc8c0c37b7c:   movq		0x78(%rsi, %r10, 8), %r8
   9.85%  │                │ │       0x00007fc8c0c37b81:   cmpq		%r14, %r8
          │             ╭  │ │       0x00007fc8c0c37b84:   jg		0x7fc8c0c37b89
          │             │  │ │       0x00007fc8c0c37b86:   movq		%r14, %r8
          │             ↘  │ │       0x00007fc8c0c37b89:   cmpq		%r8, %rbp
   3.12%  │              ╭ │ │       0x00007fc8c0c37b8c:   jg		0x7fc8c0c37b91
          │              │ │ │       0x00007fc8c0c37b8e:   movq		%r8, %rbp
          │              ↘ │ │       0x00007fc8c0c37b91:   cmpq		%rbp, %r11
   0.49%  │               ╭│ │       0x00007fc8c0c37b94:   jg		0x7fc8c0c37b99
          │               ││ │       0x00007fc8c0c37b96:   movq		%rbp, %r11          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │               ││ │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │               ││ │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.02%  │               ↘│ │       0x00007fc8c0c37b99:   addl		$0x10, %r10d        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                │ │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │                │ │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.02%  │                │ │       0x00007fc8c0c37b9d:   cmpl		%r9d, %r10d
   1.78%  │                ╰ │       0x00007fc8c0c37ba0:   jl		0x7fc8c0c37ac0      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │                  │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          │                  │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                  │       0x00007fc8c0c37ba6:   movq		0x30(%r15), %r8     ; ImmutableOopMap {rcx=Oop rbx=Oop rdi=Oop rdx=Oop rsi=Oop rax=Oop }
          │                  │                                                                 ;*goto {reexecute=1 rethrow=0 return_oop=0}
          │                  │                                                                 ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
          │                  │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.04%  │                  │       0x00007fc8c0c37baa:   testl		%eax, (%r8)         ;*goto {reexecute=0 rethrow=0 return_oop=0}
          │                  │                                                                 ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
          │                  │                                                                 ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                  │                                                                 ;   {poll}
   0.12%  │                  │       0x00007fc8c0c37bad:   cmpl		%r13d, %r10d
          │                 ╭│       0x00007fc8c0c37bb0:   jge		0x7fc8c0c37bf8
          │                 ││       0x00007fc8c0c37bb2:   movq		%r11, %r8
          │                 ││       0x00007fc8c0c37bb5:   movl		%r13d, %r9d
   0.02%  │                 ││       0x00007fc8c0c37bb8:   subl		%r10d, %r9d
          │                 ││       0x00007fc8c0c37bbb:   xorl		%r11d, %r11d
          │                 ││       0x00007fc8c0c37bbe:   cmpl		%r10d, %r13d
          │                 ││       0x00007fc8c0c37bc1:   cmovll		%r11d, %r9d
   0.09%  │                 ││       0x00007fc8c0c37bc5:   cmpl		$0x3e80, %r9d
          │                 ││       0x00007fc8c0c37bcc:   movl		$0x3e80, %r11d
          │                 ││       0x00007fc8c0c37bd2:   cmoval		%r11d, %r9d
   0.07%  │                 ││       0x00007fc8c0c37bd6:   addl		%r10d, %r9d
   0.03%  │                 │╰       0x00007fc8c0c37bd9:   jmp		0x7fc8c0c37ac3
          │                 │  ↗     0x00007fc8c0c37bde:   movq		%r8, %r11           ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │                 │  │                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          │                 │  │                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │  │ ↗   0x00007fc8c0c37be1:   movq		0x10(%rsi, %r10, 8), %r8
   1.02%  │                 │  │ │   0x00007fc8c0c37be6:   cmpq		%r11, %r8
          │                 │ ╭│ │   0x00007fc8c0c37be9:   jg		0x7fc8c0c37bee
          │                 │ ││ │   0x00007fc8c0c37beb:   movq		%r11, %r8           ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          │                 │ ││ │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │                 │ ││ │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │ ↘│ │   0x00007fc8c0c37bee:   incl		%r10d               ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          │                 │  │ │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          │                 │  │ │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │  │ │   0x00007fc8c0c37bf1:   cmpl		%r9d, %r10d
   0.05%  │                 │  ╰ │   0x00007fc8c0c37bf4:   jl		0x7fc8c0c37bde      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          │                 │    │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          │                 │    │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │                 │   ╭│   0x00007fc8c0c37bf6:   jmp		0x7fc8c0c37c0a
          │                 ↘   ││   0x00007fc8c0c37bf8:   vmovq		%xmm0, %rbp
          │                     ││   0x00007fc8c0c37bfd:   vmovd		%xmm1, %r9d
          │                     ││   0x00007fc8c0c37c02:   cmpl		%r9d, %r10d
          │                     │╰   0x00007fc8c0c37c05:   jl		0x7fc8c0c37be1
          │                     │    0x00007fc8c0c37c07:   movq		%r11, %r8           ;*invokestatic consumeCompiler {reexecute=0 rethrow=0 return_oop=0}
          │                     │                                                              ; - org.openjdk.jmh.infra.Blackhole::consume@7 (line 401)
          │                     │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@22 (line 124)
          │                     ↘    0x00007fc8c0c37c0a:   movzbl		0x94(%rax), %r10d   ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
          │                                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 126)
   0.12%  │                          0x00007fc8c0c37c12:   movq		0x30(%r15), %r11
   0.01%  │                          0x00007fc8c0c37c16:   addq		$1, %rbp            ; ImmutableOopMap {rcx=Oop rbx=Oop rdi=Oop rdx=Oop rax=Oop }
          │                                                                                    ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
          │                                                                                    ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 126)
          │                          0x00007fc8c0c37c1a:   testl		%eax, (%r11)        ;   {poll}
   0.12%  │                          0x00007fc8c0c37c1d:   testl		%r10d, %r10d
          │                          0x00007fc8c0c37c20:   jne		0x7fc8c0c37caa      ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          │                                                                                    ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 127)
          ↘                          0x00007fc8c0c37c26:   movl		0xc(%rdi), %r9d     ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                     0x00007fc8c0c37c2a:   testl		%r9d, %r9d
                                     0x00007fc8c0c37c2d:   jle		0x7fc8c0c37c9d      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                     0x00007fc8c0c37c2f:   movl		0x2c(%rdi), %r10d   ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                     0x00007fc8c0c37c33:   movl		0xc(%r12, %r10, 8), %r8d; implicit exception: dispatches to 0x00007fc8c0c37ce5
                                                                                               ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.10%                             0x00007fc8c0c37c38:   testl		%r8d, %r8d
                                     0x00007fc8c0c37c3b:   jbe		0x7fc8c0c37ce5
                                     0x00007fc8c0c37c41:   movslq		%r9d, %rsi
                                     0x00007fc8c0c37c44:   movslq		%r8d, %r11
                                     0x00007fc8c0c37c47:   leaq		-1(%rsi), %r8
                                     0x00007fc8c0c37c4b:   cmpq		%r11, %r8
   0.02%                             0x00007fc8c0c37c4e:   jae		0x7fc8c0c37ce5
                                     0x00007fc8c0c37c54:   movq		0x10(%r12, %r10, 8), %r11
                                     0x00007fc8c0c37c59:   xorl		%r8d, %r8d
                                     0x00007fc8c0c37c5c:   cmpq		%r11, %r8
                                  ╭  0x00007fc8c0c37c5f:   jg		0x7fc8c0c37c64
                                  │  0x00007fc8c0c37c61:   movq		%r11, %r8           ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                  │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                                  │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                                  ↘  0x00007fc8c0c37c64:   addq		$-0xf, %rsi
                                     0x00007fc8c0c37c68:   movq		$18446744071562067968, %r11
                                     0x00007fc8c0c37c6f:   cmpq		%rsi, %r11
....................................................................................................
  98.14%  <total for region 1>
#+end_src
*** branch never
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8   976.735 ± 98.646  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  2794.892 ±  1.316  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4   980.974 ±  2.487  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  2781.297 ± 10.702  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1256

   0.02%           0x00007f8870c38828:   leaq		(%r12, %rsi, 8), %r14
                   0x00007f8870c3882c:   addq		$-3, %r11
                   0x00007f8870c38830:   movq		$18446744071562067968, %rsi
                   0x00007f8870c38837:   cmpl		%r11d, %esi
          ╭        0x00007f8870c3883a:   jl		0x7f8870c3883f
          │        0x00007f8870c3883c:   movq		%rsi, %r11
          ↘        0x00007f8870c3883f:   movl		%r11d, %esi
                   0x00007f8870c38842:   cmpl		$1, %esi
                   0x00007f8870c38845:   jle		0x7f8870c38920
                   0x00007f8870c3884b:   movl		$1, %r11d
   0.03%           0x00007f8870c38851:   vmovq		%rdx, %xmm0
                   0x00007f8870c38856:   vmovq		%rax, %xmm1
                   0x00007f8870c3885b:   vmovq		%r10, %xmm2
                ↗  0x00007f8870c38860:   movl		%esi, %r10d
                │  0x00007f8870c38863:   subl		%r11d, %r10d
                │  0x00007f8870c38866:   cmpl		%r11d, %esi
                │  0x00007f8870c38869:   cmovll		%edi, %r10d
   0.04%        │  0x00007f8870c3886d:   cmpl		$0xfa0, %r10d
                │  0x00007f8870c38874:   cmoval		%r9d, %r10d
   0.03%        │  0x00007f8870c38878:   addl		%r11d, %r10d
   0.05%        │  0x00007f8870c3887b:   nopl		(%rax, %rax)        ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
               ↗│  0x00007f8870c38880:   imulq		$0xb, 0x10(%r14, %r11, 8), %rdx
   8.59%       ││  0x00007f8870c38886:   cmpl		%edx, %r13d
  20.04%   ╭   ││  0x00007f8870c38889:   jl		0x7f8870c3888e
           │   ││  0x00007f8870c3888b:   movq		%r13, %rdx
           ↘   ││  0x00007f8870c3888e:   imulq		$0xb, 0x18(%r14, %r11, 8), %rax
   1.59%       ││  0x00007f8870c38894:   cmpl		%eax, %edx
  18.40%    ╭  ││  0x00007f8870c38896:   jl		0x7f8870c3889b
            │  ││  0x00007f8870c38898:   movq		%rdx, %rax
            ↘  ││  0x00007f8870c3889b:   imulq		$0xb, 0x28(%r14, %r11, 8), %r13
   4.22%       ││  0x00007f8870c388a1:   imulq		$0xb, 0x20(%r14, %r11, 8), %rdx
   4.99%       ││  0x00007f8870c388a7:   cmpl		%edx, %eax
  26.99%     ╭ ││  0x00007f8870c388a9:   jl		0x7f8870c388ae
             │ ││  0x00007f8870c388ab:   movq		%rax, %rdx
             ↘ ││  0x00007f8870c388ae:   cmpl		%r13d, %edx
  12.24%      ╭││  0x00007f8870c388b1:   jl		0x7f8870c388b6
              │││  0x00007f8870c388b3:   movq		%rdx, %r13          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
              │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
              │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.18%      ↘││  0x00007f8870c388b6:   addl		$4, %r11d           ;*iinc {reexecute=0 rethrow=0 return_oop=0}
               ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
               ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.09%       ││  0x00007f8870c388ba:   cmpl		%r10d, %r11d
   1.19%       ╰│  0x00007f8870c388bd:   jl		0x7f8870c38880      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                │  0x00007f8870c388bf:   movq		0x30(%r15), %r10    ; ImmutableOopMap {r8=Oop rbx=Oop r14=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
                │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.22%        │  0x00007f8870c388c3:   testl		%eax, (%r10)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                │                                                            ;   {poll}
   0.12%        │  0x00007f8870c388c6:   cmpl		%esi, %r11d
                ╰  0x00007f8870c388c9:   jl		0x7f8870c38860
                   0x00007f8870c388cb:   vmovq		%xmm0, %rdx
                   0x00007f8870c388d0:   vmovq		%xmm1, %rax
                   0x00007f8870c388d5:   vmovq		%xmm2, %r10
                   0x00007f8870c388da:   cmpl		%ecx, %r11d
                   0x00007f8870c388dd:   jl		0x7f8870c387bc
                   0x00007f8870c388e3:   jmp		0x7f8870c387d2
....................................................................................................
  98.99%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1249

                              0x00007fcc14c37ed2:   movl		%ebp, %ebp
   0.07%                      0x00007fcc14c37ed4:   cmpl		$1, %ebp
                              0x00007fcc14c37ed7:   jle		0x7fcc14c3808c
                              0x00007fcc14c37edd:   movl		$1, %r8d
                              0x00007fcc14c37ee3:   vmovq		%rcx, %xmm0
                              0x00007fcc14c37ee8:   vmovq		%rdx, %xmm1
                              0x00007fcc14c37eed:   vmovq		%r11, %xmm2
                           ↗  0x00007fcc14c37ef2:   movl		%ebp, %r11d
                           │  0x00007fcc14c37ef5:   subl		%r8d, %r11d
                           │  0x00007fcc14c37ef8:   cmpl		%r8d, %ebp
   0.04%                   │  0x00007fcc14c37efb:   cmovll		%r10d, %r11d
                           │  0x00007fcc14c37eff:   cmpl		$0x3e80, %r11d
   0.13%                   │  0x00007fcc14c37f06:   cmoval		%esi, %r11d
   0.14%                   │  0x00007fcc14c37f0a:   addl		%r8d, %r11d
   0.04%                   │  0x00007fcc14c37f0d:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                          ↗│  0x00007fcc14c37f10:   movq		0x88(%rax, %r8, 8), %rdx
   0.01%                  ││  0x00007fcc14c37f18:   movq		0x80(%rax, %r8, 8), %r14
                          ││  0x00007fcc14c37f20:   movq		0x10(%rax, %r8, 8), %rcx
   1.09%                  ││  0x00007fcc14c37f25:   cmpl		%edi, %ecx
   8.31%  ╭               ││  0x00007fcc14c37f27:   jl		0x7fcc14c37f2c
          │               ││  0x00007fcc14c37f29:   movq		%rcx, %rdi
          ↘               ││  0x00007fcc14c37f2c:   movq		0x18(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37f31:   cmpl		%edi, %ecx
   0.15%   ╭              ││  0x00007fcc14c37f33:   jl		0x7fcc14c37f38
           │              ││  0x00007fcc14c37f35:   movq		%rcx, %rdi
           ↘              ││  0x00007fcc14c37f38:   movq		0x20(%rax, %r8, 8), %rcx
   1.11%                  ││  0x00007fcc14c37f3d:   cmpl		%edi, %ecx
   8.41%    ╭             ││  0x00007fcc14c37f3f:   jl		0x7fcc14c37f44
            │             ││  0x00007fcc14c37f41:   movq		%rcx, %rdi
   0.01%    ↘             ││  0x00007fcc14c37f44:   movq		0x28(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37f49:   cmpl		%edi, %ecx
   0.10%     ╭            ││  0x00007fcc14c37f4b:   jl		0x7fcc14c37f50
             │            ││  0x00007fcc14c37f4d:   movq		%rcx, %rdi
             ↘            ││  0x00007fcc14c37f50:   movq		0x30(%rax, %r8, 8), %rcx
   1.19%                  ││  0x00007fcc14c37f55:   cmpl		%edi, %ecx
   8.26%      ╭           ││  0x00007fcc14c37f57:   jl		0x7fcc14c37f5c
              │           ││  0x00007fcc14c37f59:   movq		%rcx, %rdi
              ↘           ││  0x00007fcc14c37f5c:   movq		0x38(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37f61:   cmpl		%edi, %ecx
   9.25%       ╭          ││  0x00007fcc14c37f63:   jl		0x7fcc14c37f68
               │          ││  0x00007fcc14c37f65:   movq		%rcx, %rdi
               ↘          ││  0x00007fcc14c37f68:   movq		0x40(%rax, %r8, 8), %rcx;   {other}
   0.01%                  ││  0x00007fcc14c37f6d:   cmpl		%edi, %ecx
   0.10%        ╭         ││  0x00007fcc14c37f6f:   jl		0x7fcc14c37f74
                │         ││  0x00007fcc14c37f71:   movq		%rcx, %rdi
   0.04%        ↘         ││  0x00007fcc14c37f74:   movq		0x48(%rax, %r8, 8), %rcx
   0.02%                  ││  0x00007fcc14c37f79:   cmpl		%edi, %ecx
   9.17%         ╭        ││  0x00007fcc14c37f7b:   jl		0x7fcc14c37f80
                 │        ││  0x00007fcc14c37f7d:   movq		%rcx, %rdi
                 ↘        ││  0x00007fcc14c37f80:   movq		0x50(%rax, %r8, 8), %rcx
   0.01%                  ││  0x00007fcc14c37f85:   cmpl		%edi, %ecx
   0.10%          ╭       ││  0x00007fcc14c37f87:   jl		0x7fcc14c37f8c
                  │       ││  0x00007fcc14c37f89:   movq		%rcx, %rdi
                  ↘       ││  0x00007fcc14c37f8c:   movq		0x58(%rax, %r8, 8), %rcx
   0.01%                  ││  0x00007fcc14c37f91:   cmpl		%edi, %ecx
   9.41%           ╭      ││  0x00007fcc14c37f93:   jl		0x7fcc14c37f98
                   │      ││  0x00007fcc14c37f95:   movq		%rcx, %rdi
                   ↘      ││  0x00007fcc14c37f98:   movq		0x60(%rax, %r8, 8), %rcx
   0.02%                  ││  0x00007fcc14c37f9d:   cmpl		%edi, %ecx
   9.82%            ╭     ││  0x00007fcc14c37f9f:   jl		0x7fcc14c37fa4
                    │     ││  0x00007fcc14c37fa1:   movq		%rcx, %rdi
                    ↘     ││  0x00007fcc14c37fa4:   movq		0x68(%rax, %r8, 8), %rcx
   0.02%                  ││  0x00007fcc14c37fa9:   cmpl		%edi, %ecx
   0.05%             ╭    ││  0x00007fcc14c37fab:   jl		0x7fcc14c37fb0
                     │    ││  0x00007fcc14c37fad:   movq		%rcx, %rdi
                     ↘    ││  0x00007fcc14c37fb0:   movq		0x70(%rax, %r8, 8), %rcx
   0.06%                  ││  0x00007fcc14c37fb5:   cmpl		%edi, %ecx
   9.66%              ╭   ││  0x00007fcc14c37fb7:   jl		0x7fcc14c37fbc
                      │   ││  0x00007fcc14c37fb9:   movq		%rcx, %rdi
                      ↘   ││  0x00007fcc14c37fbc:   movq		0x78(%rax, %r8, 8), %rcx
                          ││  0x00007fcc14c37fc1:   cmpl		%edi, %ecx
   0.10%               ╭  ││  0x00007fcc14c37fc3:   jl		0x7fcc14c37fc8
                       │  ││  0x00007fcc14c37fc5:   movq		%rcx, %rdi
                       ↘  ││  0x00007fcc14c37fc8:   cmpl		%edi, %r14d
   9.56%                ╭ ││  0x00007fcc14c37fcb:   jl		0x7fcc14c37fd0
                        │ ││  0x00007fcc14c37fcd:   movq		%r14, %rdi
                        ↘ ││  0x00007fcc14c37fd0:   cmpl		%edi, %edx
   0.07%                 ╭││  0x00007fcc14c37fd2:   jl		0x7fcc14c37fd7
                         │││  0x00007fcc14c37fd4:   movq		%rdx, %rdi          ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         │││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         │││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.10%                 ↘││  0x00007fcc14c37fd7:   addl		$0x10, %r8d         ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                          ││  0x00007fcc14c37fdb:   cmpl		%r11d, %r8d
   9.37%                  ╰│  0x00007fcc14c37fde:   jl		0x7fcc14c37f10      ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                           │  0x00007fcc14c37fe4:   movq		0x30(%r15), %r11    ; ImmutableOopMap {r9=Oop rbx=Oop rax=Oop xmm0=Oop xmm1=Oop xmm2=Oop }
                           │                                                            ;*goto {reexecute=1 rethrow=0 return_oop=0}
                           │                                                            ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   1.15%                   │  0x00007fcc14c37fe8:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                           │                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                           │                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
                           │                                                            ;   {poll}
   0.37%                   │  0x00007fcc14c37feb:   cmpl		%ebp, %r8d
                           ╰  0x00007fcc14c37fee:   jl		0x7fcc14c37ef2
                              0x00007fcc14c37ff4:   vmovq		%xmm0, %rcx
                              0x00007fcc14c37ff9:   vmovq		%xmm1, %rdx
                              0x00007fcc14c37ffe:   vmovq		%xmm2, %r11
                              0x00007fcc14c38003:   cmpl		%r13d, %r8d
                              0x00007fcc14c38006:   jl		0x7fcc14c37e44
                              0x00007fcc14c3800c:   jmp		0x7fcc14c37e58
....................................................................................................
  97.43%  <total for region 1>
#+end_src
*** disabled intrinsic
**** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1142.080 ± 38.450  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1168.054 ± 62.525  ops/ms
#+end_src
**** profile
#+begin_src bash
Benchmark                                  (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax                100    2048  thrpt    4  1128.495 ± 19.797  ops/ms
MinMaxVector.longReductionMultiplyMax:asm            100    2048  thrpt            NaN              ---
MinMaxVector.longReductionSimpleMax                  100    2048  thrpt    4  1216.007 ± 23.134  ops/ms
MinMaxVector.longReductionSimpleMax:asm              100    2048  thrpt            NaN              ---
#+end_src
***** longReductionMultiplyMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 1255

                         0x00007fa2b4c37d8a:   movl		$1, %ebp
                         0x00007fa2b4c37d8f:   jmp		0x7fa2b4c37e72
               ↗         0x00007fa2b4c37d94:   movq		%rdi, %rbp
               │         0x00007fa2b4c37d97:   nopw		(%rax, %rax)        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
               │                                                                   ; - java.lang.Math::max@11 (line 2038)
               │                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
               │                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
              ↗│         0x00007fa2b4c37da0:   addl		$4, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ││                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ││                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.01%      ││         0x00007fa2b4c37da4:   cmpl		%r11d, %r8d
   0.12%  ╭   ││         0x00007fa2b4c37da7:   jge		0x7fa2b4c37de6      ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
          │   ││                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
          │   ││                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          │   ││    ↗    0x00007fa2b4c37da9:   imulq		$0xb, 0x10(%r14, %r8, 8), %rdi
          │   ││    │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │   ││    │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │   ││    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   2.14%  │   ││    │    0x00007fa2b4c37daf:   cmpq		%rdi, %rbp
  20.00%  │╭  ││    │    0x00007fa2b4c37db2:   jge		0x7fa2b4c37dd7      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││  ││    │                                                              ; - java.lang.Math::max@11 (line 2038)
          ││  ││    │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││  ││    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││  ││↗   │    0x00007fa2b4c37db4:   imulq		$0xb, 0x18(%r14, %r8, 8), %rdx
          ││  │││   │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          ││  │││   │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          ││  │││   │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   4.03%  ││  │││   │    0x00007fa2b4c37dba:   cmpq		%rdx, %rdi
  17.47%  ││╭ │││   │    0x00007fa2b4c37dbd:   jge		0x7fa2b4c37ddc      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││ │││   │                                                              ; - java.lang.Math::max@11 (line 2038)
          │││ │││   │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          │││ │││   │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          │││ │││↗  │    0x00007fa2b4c37dbf:   imulq		$0xb, 0x20(%r14, %r8, 8), %rdi
          │││ ││││  │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │││ ││││  │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │││ ││││  │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
  11.18%  │││ ││││  │    0x00007fa2b4c37dc5:   cmpq		%rdi, %rdx
  18.89%  │││╭││││  │    0x00007fa2b4c37dc8:   jge		0x7fa2b4c37de1      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││││││  │                                                              ; - java.lang.Math::max@11 (line 2038)
          ││││││││  │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││││││││  │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││││││││↗ │    0x00007fa2b4c37dca:   imulq		$0xb, 0x28(%r14, %r8, 8), %rbp
          │││││││││ │                                                              ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          │││││││││ │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          │││││││││ │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   7.13%  │││││││││ │    0x00007fa2b4c37dd0:   cmpq		%rbp, %rdi
  17.30%  ││││╰││││ │    0x00007fa2b4c37dd3:   jl		0x7fa2b4c37da0      ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ││││ ││││ │                                                              ; - java.lang.Math::max@3 (line 2038)
          ││││ ││││ │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ││││ ││││ │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
          ││││ ╰│││ │    0x00007fa2b4c37dd5:   jmp		0x7fa2b4c37d94
          │↘││  │││ │    0x00007fa2b4c37dd7:   movq		%rbp, %rdi
          │ ││  ╰││ │    0x00007fa2b4c37dda:   jmp		0x7fa2b4c37db4
          │ ↘│   ││ │    0x00007fa2b4c37ddc:   movq		%rdi, %rdx
          │  │   ╰│ │    0x00007fa2b4c37ddf:   jmp		0x7fa2b4c37dbf
          │  ↘    │ │    0x00007fa2b4c37de1:   movq		%rdx, %rdi
          │       ╰ │    0x00007fa2b4c37de4:   jmp		0x7fa2b4c37dca
          ↘         │    0x00007fa2b4c37de6:   movq		0x30(%r15), %r11    ; ImmutableOopMap {r9=Oop rcx=Oop rbx=Oop r14=Oop xmm0=Oop xmm1=Oop }
                    │                                                              ;*goto {reexecute=1 rethrow=0 return_oop=0}
                    │                                                              ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.04%            │    0x00007fa2b4c37dea:   testl		%eax, (%r11)        ;*goto {reexecute=0 rethrow=0 return_oop=0}
                    │                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                    │                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                    │                                                              ;   {poll}
   0.11%            │    0x00007fa2b4c37ded:   cmpl		%r10d, %r8d
                   ╭│    0x00007fa2b4c37df0:   jge		0x7fa2b4c37e3f
                   ││    0x00007fa2b4c37df2:   vmovq		%xmm0, %rdx
                   ││    0x00007fa2b4c37df7:   vmovq		%xmm1, %rdi
                   ││    0x00007fa2b4c37dfc:   movl		%r10d, %r11d
                   ││    0x00007fa2b4c37dff:   subl		%r8d, %r11d
                   ││    0x00007fa2b4c37e02:   cmpl		%r8d, %r10d
   0.02%           ││    0x00007fa2b4c37e05:   cmovll		%esi, %r11d
   0.25%           ││    0x00007fa2b4c37e09:   cmpl		$0xfa0, %r11d
   0.14%           ││    0x00007fa2b4c37e10:   cmoval		%eax, %r11d
   0.11%           ││    0x00007fa2b4c37e14:   addl		%r8d, %r11d
   0.02%           ││    0x00007fa2b4c37e17:   vmovq		%rdx, %xmm0
                   ││    0x00007fa2b4c37e1c:   vmovq		%rdi, %xmm1
                   │╰    0x00007fa2b4c37e21:   jmp		0x7fa2b4c37da9
                   │ ↗   0x00007fa2b4c37e23:   movq		%r10, %rbp          ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                   │ │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                   │ │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │ │↗  0x00007fa2b4c37e26:   imulq		$0xb, 0x10(%r14, %r8, 8), %r10
                   │ ││                                                            ;*lmul {reexecute=0 rethrow=0 return_oop=0}
                   │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
   0.10%           │ ││  0x00007fa2b4c37e2c:   cmpq		%r10, %rbp
   0.14%           │ ││  0x00007fa2b4c37e2f:   jge		0x7fa2b4c37ee6      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
                   │ ││                                                            ; - java.lang.Math::max@11 (line 2038)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │ ││  0x00007fa2b4c37e35:   incl		%r8d                ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                   │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
                   │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                   │ ││  0x00007fa2b4c37e38:   cmpl		%r13d, %r8d
   0.01%           │ ╰│  0x00007fa2b4c37e3b:   jl		0x7fa2b4c37e23
                   │  │  0x00007fa2b4c37e3d:   jmp		0x7fa2b4c37e51
                   ↘  │  0x00007fa2b4c37e3f:   vmovq		%xmm0, %rdx
                      │  0x00007fa2b4c37e44:   vmovq		%xmm1, %rdi
                      │  0x00007fa2b4c37e49:   cmpl		%r13d, %r8d
                      ╰  0x00007fa2b4c37e4c:   jl		0x7fa2b4c37e26
                         0x00007fa2b4c37e4e:   movq		%rbp, %r10          ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 124)
                         0x00007fa2b4c37e51:   vmovq		%xmm2, %rbp         ;*invokestatic consumeCompiler {reexecute=0 rethrow=0 return_oop=0}
                                                                                   ; - org.openjdk.jmh.infra.Blackhole::consume@7 (line 401)
....................................................................................................
  99.19%  <total for region 1>
#+end_src
***** longReductionSimpleMax
#+begin_src asm
....[Hottest Region 1]..............................................................................
c2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 1252

                0x00007f52ccc38ec9:   jmp		0x7f52ccc38fec
            ↗   0x00007f52ccc38ece:   movq		%rdi, %rbp
            │   0x00007f52ccc38ed1:   nopl		(%rax, %rax)
            │   0x00007f52ccc38ed9:   nopl		(%rax)              ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
            │                                                             ; - java.lang.Math::max@11 (line 2038)
            │                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
            │                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           ↗│   0x00007f52ccc38ee0:   addl		$8, %r8d            ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
           ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   0.58%   ││   0x00007f52ccc38ee4:   cmpl		%r11d, %r8d
   0.54%   ││   0x00007f52ccc38ee7:   jge		0x7f52ccc38f5e      ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
           ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
           ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
           ││   0x00007f52ccc38ee9:   movq		0x10(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
           ││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
           ││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  19.72%   ││   0x00007f52ccc38eee:   cmpq		%rdi, %rbp
          ╭││   0x00007f52ccc38ef1:   jge		0x7f52ccc38f3b      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          │││                                                             ; - java.lang.Math::max@11 (line 2038)
          │││                                                             ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │││                                                             ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │││↗  0x00007f52ccc38ef3:   movq		0x18(%r14, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   9.82%  ││││  0x00007f52ccc38ef8:   cmpq		%rdx, %rdi
   0.19%  ││││  0x00007f52ccc38efb:   jge		0x7f52ccc38f40      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38efd:   movq		0x20(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  14.10%  ││││  0x00007f52ccc38f02:   cmpq		%rdi, %rdx
   0.02%  ││││  0x00007f52ccc38f05:   jge		0x7f52ccc38f45      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f07:   movq		0x28(%r14, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   4.00%  ││││  0x00007f52ccc38f0c:   cmpq		%rdx, %rdi
   0.09%  ││││  0x00007f52ccc38f0f:   jge		0x7f52ccc38f4a      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f11:   movq		0x30(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  18.70%  ││││  0x00007f52ccc38f16:   cmpq		%rdi, %rdx
          ││││  0x00007f52ccc38f19:   jge		0x7f52ccc38f4f      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f1b:   movq		0x38(%r14, %r8, 8), %rdx;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   5.47%  ││││  0x00007f52ccc38f20:   cmpq		%rdx, %rdi
   0.01%  ││││  0x00007f52ccc38f23:   jge		0x7f52ccc38f54      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f25:   movq		0x40(%r14, %r8, 8), %rdi;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
  18.22%  ││││  0x00007f52ccc38f2a:   cmpq		%rdi, %rdx
          ││││  0x00007f52ccc38f2d:   jge		0x7f52ccc38f59      ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - java.lang.Math::max@11 (line 2038)
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          ││││  0x00007f52ccc38f2f:   movq		0x48(%r14, %r8, 8), %rbp;*laload {reexecute=0 rethrow=0 return_oop=0}
          ││││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ││││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
   6.75%  ││││  0x00007f52ccc38f34:   cmpq		%rbp, %rdi
          │╰││  0x00007f52ccc38f37:   jl		0x7f52ccc38ee0      ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          │ ││                                                            ; - java.lang.Math::max@3 (line 2038)
          │ ││                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          │ ││                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 124)
          │ ╰│  0x00007f52ccc38f39:   jmp		0x7f52ccc38ece
          ↘  │  0x00007f52ccc38f3b:   movq		%rbp, %rdi
             ╰  0x00007f52ccc38f3e:   jmp		0x7f52ccc38ef3
                0x00007f52ccc38f40:   movq		%rdi, %rdx
....................................................................................................
  98.21%  <total for region 1>
#+end_src
* 1.4.25
** LoopMaxUnroll=8
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2150.509 ? 372.854  ops/ms # branch never
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2620.289 ?  64.740  ops/ms # disable _maxL
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3423.275 ?  90.313  ops/ms # branch never
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3559.058 ?  53.108  ops/ms # disable _maxL
#+end_src
Branch never:
#+begin_src asm
  10.44%          ?  0x0000000116f242b0:   ldp		x26, x27, [x12, #0x40]
   0.12%          ?  0x0000000116f242b4:   mov		x12, x6
   0.18%          ?  0x0000000116f242b8:   cmp		x6, x7
   0.34%  ?       ?  0x0000000116f242bc:   b.ge		#0x116f242c4
   9.08%  ?       ?  0x0000000116f242c0:   mov		x12, x7
   1.04%  ?       ?  0x0000000116f242c4:   mov		x6, x12
   0.45%          ?  0x0000000116f242c8:   cmp		x12, x21
   0.18%   ?      ?  0x0000000116f242cc:   b.ge		#0x116f242d4
   8.86%   ?      ?  0x0000000116f242d0:   mov		x6, x21
   1.42%   ?      ?  0x0000000116f242d4:   mov		x12, x6
   0.33%          ?  0x0000000116f242d8:   cmp		x6, x22
   0.26%    ?     ?  0x0000000116f242dc:   b.ge		#0x116f242e4
   9.42%    ?     ?  0x0000000116f242e0:   mov		x12, x22
   1.32%    ?     ?  0x0000000116f242e4:   mov		x6, x12
   0.28%          ?  0x0000000116f242e8:   cmp		x12, x23
   0.15%     ?    ?  0x0000000116f242ec:   b.ge		#0x116f242f4
  10.26%     ?    ?  0x0000000116f242f0:   mov		x6, x23
   1.09%     ?    ?  0x0000000116f242f4:   mov		x12, x6
   0.08%          ?  0x0000000116f242f8:   cmp		x6, x24
   0.04%      ?   ?  0x0000000116f242fc:   b.ge		#0x116f24304
   9.19%      ?   ?  0x0000000116f24300:   mov		x12, x24
   1.64%      ?   ?  0x0000000116f24304:   mov		x6, x12
   0.03%          ?  0x0000000116f24308:   cmp		x12, x25
               ?  ?  0x0000000116f2430c:   b.ge		#0x116f24314
   9.45%       ?  ?  0x0000000116f24310:   mov		x6, x25
   1.51%       ?  ?  0x0000000116f24314:   mov		x12, x6
   0.10%          ?  0x0000000116f24318:   cmp		x6, x26
   0.18%        ? ?  0x0000000116f2431c:   b.ge		#0x116f24324
   8.92%        ? ?  0x0000000116f24320:   mov		x12, x26
   0.97%        ? ?  0x0000000116f24324:   add		w15, w15, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.35%          ?  0x0000000116f24328:   mov		x6, x12
   0.26%          ?  0x0000000116f2432c:   cmp		x12, x27
   0.24%         ??  0x0000000116f24330:   b.ge		#0x116f24338
   9.34%         ??  0x0000000116f24334:   mov		x6, x27             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                 ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                 ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
#+end_src
Disable intrinsic:
#+begin_src bash
              ?  0x0000000112e37770:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000112e37774:   ldp		x21, x22, [x11, #0x10]
              ?  0x0000000112e37778:   ldr		x23, [x11, #0x20]
              ?  0x0000000112e3777c:   mul		x21, x21, x16
  29.38%      ?  0x0000000112e37780:   ldr		x11, [x11, #0x28]
              ?  0x0000000112e37784:   mul		x22, x22, x16
              ?  0x0000000112e37788:   mul		x23, x23, x16
              ?  0x0000000112e3778c:   mov		x24, x21
   2.49%      ?  0x0000000112e37790:   cmp		x21, x7
          ?   ?  0x0000000112e37794:   b.ge		#0x112e3779c
          ?   ?  0x0000000112e37798:   mov		x24, x7
  11.37%  ?   ?  0x0000000112e3779c:   mul		x11, x11, x16
              ?  0x0000000112e377a0:   mov		x7, x22
              ?  0x0000000112e377a4:   cmp		x22, x24
           ?  ?  0x0000000112e377a8:   b.ge		#0x112e377b0
           ?  ?  0x0000000112e377ac:   mov		x7, x24
  19.38%   ?  ?  0x0000000112e377b0:   mov		x21, x23
   3.11%      ?  0x0000000112e377b4:   cmp		x23, x7
   0.44%    ? ?  0x0000000112e377b8:   b.ge		#0x112e377c0
            ? ?  0x0000000112e377bc:   mov		x21, x7
  10.61%    ? ?  0x0000000112e377c0:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000112e377c4:   mov		x7, x11
              ?  0x0000000112e377c8:   cmp		x11, x21
             ??  0x0000000112e377cc:   b.ge		#0x112e377d4
             ??  0x0000000112e377d0:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  21.80%     ??  0x0000000112e377d4:   cmp		w12, w10
              ?  0x0000000112e377d8:   b.lt		#0x112e37770        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.67%         0x0000000112e377dc:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.11%         0x0000000112e377e0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000112e377e4:   cmp		w12, w17
                 0x0000000112e377e8:   b.lt		#0x112e37750
                 0x0000000112e377ec:   cmp		w12, w13
                 0x0000000112e377f0:   b.lt		#0x112e376a8
#+end_src
** Observations and TraceLoopOpts
Performance looks to be on par between disabling intrinsic and branch never.
However, the assembly looks different in simple.
Branch never:
#+begin_src bash
   5.80%                  ?      0x0000000113951b64:   ldr		x15, [x27, #0x10]
   0.05%                  ?      0x0000000113951b68:   mov		x29, x25
   0.04%                  ?      0x0000000113951b6c:   cmp		x25, x15
   0.13%  ?               ?      0x0000000113951b70:   b.ge		#0x113951b78
          ?               ?      0x0000000113951b74:   mov		x29, x15
   5.50%  ?               ?      0x0000000113951b78:   ldr		x16, [x27, #0x18]
   0.14%                  ?      0x0000000113951b7c:   mov		x15, x29
   0.19%                  ?      0x0000000113951b80:   cmp		x29, x16
   0.15%   ?              ?      0x0000000113951b84:   b.ge		#0x113951b8c
           ?              ?      0x0000000113951b88:   mov		x15, x16
   5.22%   ?              ?      0x0000000113951b8c:   ldr		x17, [x27, #0x20]
   0.07%                  ?      0x0000000113951b90:   mov		x16, x15
   0.03%                  ?      0x0000000113951b94:   cmp		x15, x17
   0.07%    ?             ?      0x0000000113951b98:   b.ge		#0x113951ba0
            ?             ?      0x0000000113951b9c:   mov		x16, x17
   5.39%    ?             ?      0x0000000113951ba0:   ldr		x0, [x27, #0x28]
   0.07%                  ?      0x0000000113951ba4:   mov		x15, x16
   0.16%                  ?      0x0000000113951ba8:   cmp		x16, x0
   0.11%     ?            ?      0x0000000113951bac:   b.ge		#0x113951bb4
             ?            ?      0x0000000113951bb0:   mov		x15, x0
   5.31%     ?            ?      0x0000000113951bb4:   ldr		x1, [x27, #0x30]
   0.04%                  ?      0x0000000113951bb8:   mov		x16, x15
   0.11%                  ?      0x0000000113951bbc:   cmp		x15, x1
   0.03%      ?           ?      0x0000000113951bc0:   b.ge		#0x113951bc8
              ?           ?      0x0000000113951bc4:   mov		x16, x1
   5.33%      ?           ?      0x0000000113951bc8:   ldr		x2, [x27, #0x38]
   0.08%                  ?      0x0000000113951bcc:   mov		x15, x16
   0.17%                  ?      0x0000000113951bd0:   cmp		x16, x2
   0.11%       ?          ?      0x0000000113951bd4:   b.ge		#0x113951bdc
               ?          ?      0x0000000113951bd8:   mov		x15, x2
   5.79%       ?          ?      0x0000000113951bdc:   ldr		x3, [x27, #0x40]
   0.07%                  ?      0x0000000113951be0:   mov		x16, x15
   0.04%                  ?      0x0000000113951be4:   cmp		x15, x3
   0.02%        ?         ?      0x0000000113951be8:   b.ge		#0x113951bf0
                ?         ?      0x0000000113951bec:   mov		x16, x3
   5.32%        ?         ?      0x0000000113951bf0:   ldr		x4, [x27, #0x48]
   0.08%                  ?      0x0000000113951bf4:   mov		x15, x16
   0.07%                  ?      0x0000000113951bf8:   cmp		x16, x4
   0.07%         ?        ?      0x0000000113951bfc:   b.ge		#0x113951c04
   0.00%         ?        ?      0x0000000113951c00:   mov		x15, x4
   5.77%         ?        ?      0x0000000113951c04:   ldr		x5, [x27, #0x50]
   0.08%                  ?      0x0000000113951c08:   mov		x16, x15
   0.04%                  ?      0x0000000113951c0c:   cmp		x15, x5
   0.04%          ?       ?      0x0000000113951c10:   b.ge		#0x113951c18
                  ?       ?      0x0000000113951c14:   mov		x16, x5
   5.42%          ?       ?      0x0000000113951c18:   ldr		x6, [x27, #0x58]
   0.09%                  ?      0x0000000113951c1c:   mov		x15, x16
   0.15%                  ?      0x0000000113951c20:   cmp		x16, x6
   0.08%           ?      ?      0x0000000113951c24:   b.ge		#0x113951c2c
                   ?      ?      0x0000000113951c28:   mov		x15, x6
   5.49%           ?      ?      0x0000000113951c2c:   ldr		x7, [x27, #0x60]
   0.11%                  ?      0x0000000113951c30:   mov		x16, x15
   0.06%                  ?      0x0000000113951c34:   cmp		x15, x7
   0.06%            ?     ?      0x0000000113951c38:   b.ge		#0x113951c40
                    ?     ?      0x0000000113951c3c:   mov		x16, x7
   5.89%            ?     ?      0x0000000113951c40:   ldr		x20, [x27, #0x68]
   0.07%                  ?      0x0000000113951c44:   mov		x15, x16
   0.17%                  ?      0x0000000113951c48:   cmp		x16, x20
   0.02%             ?    ?      0x0000000113951c4c:   b.ge		#0x113951c54
                     ?    ?      0x0000000113951c50:   mov		x15, x20
   5.52%             ?    ?      0x0000000113951c54:   ldr		x22, [x27, #0x70]
   0.07%                  ?      0x0000000113951c58:   mov		x16, x15
   0.10%                  ?      0x0000000113951c5c:   cmp		x15, x22
   0.01%              ?   ?      0x0000000113951c60:   b.ge		#0x113951c68
                      ?   ?      0x0000000113951c64:   mov		x16, x22
   5.53%              ?   ?      0x0000000113951c68:   ldr		x23, [x27, #0x78]
   0.06%                  ?      0x0000000113951c6c:   mov		x15, x16
   0.14%                  ?      0x0000000113951c70:   cmp		x16, x23
   0.12%               ?  ?      0x0000000113951c74:   b.ge		#0x113951c7c
                       ?  ?      0x0000000113951c78:   mov		x15, x23
   5.58%               ?  ?      0x0000000113951c7c:   ldr		x26, [x27, #0x80]
   0.13%                  ?      0x0000000113951c80:   mov		x16, x15
   0.07%                  ?      0x0000000113951c84:   cmp		x15, x26
   0.14%                ? ?      0x0000000113951c88:   b.ge		#0x113951c90
                        ? ?      0x0000000113951c8c:   mov		x16, x26
   5.28%                ? ?      0x0000000113951c90:   ldr		x27, [x27, #0x88]
   0.04%                  ?      0x0000000113951c94:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                  ?      0x0000000113951c98:   mov		x25, x16
   0.03%                  ?      0x0000000113951c9c:   cmp		x16, x27
   0.12%                 ??      0x0000000113951ca0:   b.ge		#0x113951ca8
   4.94%                 ??      0x0000000113951ca4:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ??                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ??                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
#+end_src
Disable intrinsic:
#+begin_src bash
   1.07%           ?         0x000000012fae5dcc:   mov		x7, x13
   9.59%          ??         0x000000012fae5dd0:   cmp		x7, x23
   0.16%  ?       ??         0x000000012fae5dd4:   b.ge		#0x12fae5e3c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?       ??                                                                   ; - java.lang.Math::max@11 (line 2038)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.06%  ?       ???        0x000000012fae5dd8:   add		w11, w11, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%  ?       ???        0x000000012fae5ddc:   cmp		w11, w14
   0.00%  ??      ???        0x000000012fae5de0:   b.ge		#0x12fae5e74        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de4:   mov		x25, x23            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de8:   add		x13, x4, w11, sxtw #3
          ??      ???        0x000000012fae5dec:   ldr		x23, [x13, #0x48]
   0.00%  ??      ???        0x000000012fae5df0:   ldp		x5, x6, [x13, #0x10]
   0.03%  ??      ???        0x000000012fae5df4:   ldr		x7, [x13, #0x40]
   0.01%  ??      ???        0x000000012fae5df8:   ldp		x21, x22, [x13, #0x20]
  11.10%  ??      ???        0x000000012fae5dfc:   ldp		x24, x13, [x13, #0x30];*laload {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5e00:   cmp		x25, x5
   0.01%  ???     ???        0x000000012fae5e04:   b.ge		#0x12fae5e6c
  10.83%  ???     ???     ?  0x000000012fae5e08:   cmp		x5, x6
   0.14%  ????    ???     ?  0x000000012fae5e0c:   b.ge		#0x12fae5e44
  10.79%  ????    ????    ?  0x000000012fae5e10:   cmp		x6, x21
   0.27%  ?????   ????    ?  0x000000012fae5e14:   b.ge		#0x12fae5e64
  10.53%  ?????   ????   ??  0x000000012fae5e18:   cmp		x21, x22
   0.33%  ??????  ????   ??  0x000000012fae5e1c:   b.ge		#0x12fae5e4c
  10.63%  ??????  ?????  ??  0x000000012fae5e20:   cmp		x22, x24
   0.23%  ??????? ?????  ??  0x000000012fae5e24:   b.ge		#0x12fae5e54
  10.74%  ??????? ?????? ??  0x000000012fae5e28:   cmp		x24, x13
   0.08%  ?????????????? ??  0x000000012fae5e2c:   b.ge		#0x12fae5e5c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?????????????? ??                                                            ; - java.lang.Math::max@11 (line 2038)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.29%  ?????????????????  0x000000012fae5e30:   cmp		x13, x7
          ?????????????????  0x000000012fae5e34:   b.lt		#0x12fae5dd0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ???????? ????????                                                            ; - java.lang.Math::max@3 (line 2038)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
#+end_src
Run with TraceLoopOpts to see if the difference is confirmed.
Branch never:
#+begin_src bash
Unroll 16         Loop: N536/N165  limit_check counted [int,int),+8 (2072 iters)  main has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N297/N302  limit_check profile_predicated predicated counted [0,int),+1 (4 iters)  pre
  Loop: N181/N180  limit_check sfpts={ 183 }
    Loop: N641/N165  limit_check counted [int,int),+16 (2072 iters)  main has_sfpt strip_mined
  Loop: N251/N256  limit_check counted [int,int),+1 (4 iters)  post
#+end_src
Disable intrinsic:
#+begin_src bash
Unroll 8         Loop: N1177/N246  limit_check counted [int,int),+4 (3475 iters)  main rc  has_sfpt strip_mined
Unroll 8           Loop: N1232/N538  limit_check counted [int,int),+4 (3475 iters)  main rc  has_sfpt strip_mined
Loop: N0/N0  has_sfpt
  Loop: N818/N827  limit_check profile_predicated predicated counted [0,int),+1 (4 iters)  pre rc
  Loop: N624/N623  limit_check sfpts={ 626 }
    Loop: N1349/N246  limit_check counted [int,int),+8 (3475 iters)  main rc  has_sfpt strip_mined
  Loop: N766/N775  limit_check counted [int,int),+1 (4 iters)  post rc
  Loop: N615/N589  limit_check profile_predicated predicated sfpts={ 580 }
    Loop: N996/N1005  limit_check profile_predicated predicated counted [0,int),+1 (4 iters)  pre rc
    Loop: N635/N634  limit_check sfpts={ 637 }
      Loop: N1428/N538  limit_check counted [int,int),+8 (3475 iters)  main rc  has_sfpt strip_mined
    Loop: N944/N953  limit_check counted [int,int),+1 (4 iters)  post rc
#+end_src
Chat with Roland.
  He suggested limiting unrolling to 8 to make the comparison fair.
** Comparison
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2520.310 ? 183.514  ops/ms # disable intrinsic maxL
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2321.742 ? 289.782  ops/ms # branch never
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8   914.140 ?  30.055  ops/ms # branch always
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1023.075 ?  73.846  ops/ms # cmov
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3525.033 ? 101.415  ops/ms # disable intrinsic maxL
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3637.567 ?  84.313  ops/ms # branch never
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8   928.003 ?  23.162  ops/ms # branch always
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1105.859 ?   5.286  ops/ms # cmov
#+end_src
** Disable Intrinsic
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2520.310 ? 183.514  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3525.033 ? 101.415  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 542

                     0x00000001138e05c4:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
                     0x00000001138e05c8:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
                     0x00000001138e05cc:   ldp		x29, x30, [sp, #0x50]
                     0x00000001138e05d0:   add		sp, sp, #0x60
                     0x00000001138e05d4:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                     0x00000001138e05d8:   cmp		sp, x8
                     0x00000001138e05dc:   b.hi		#0x1138e0828
                     0x00000001138e05e0:   ret
   3.15%       ?     0x00000001138e05e4:   mov		x12, x7
               ?     0x00000001138e05e8:   nop
   0.02%       ?     0x00000001138e05ec:   nop
  18.92%      ??     0x00000001138e05f0:   cmp		x12, x21
   0.09%  ?   ??     0x00000001138e05f4:   b.ge		#0x1138e0654
  16.45%  ?   ??  ?  0x00000001138e05f8:   cmp		x21, x6
   0.02%  ??  ??  ?  0x00000001138e05fc:   b.ge		#0x1138e0644        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ??  ??  ?                                                            ; - java.lang.Math::max@11 (line 2038)
          ??  ??  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ??  ??  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  22.22%  ??  ??? ?  0x00000001138e0600:   add		w1, w1, #4          ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ??  ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ??  ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.25%  ??  ??? ?  0x00000001138e0604:   cmp		w1, w11
   0.07%  ??? ??? ?  0x00000001138e0608:   b.ge		#0x1138e065c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ??? ??? ?  0x00000001138e060c:   mov		x22, x6             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ??? ??? ?  0x00000001138e0610:   add		x12, x5, w1, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.00%  ??? ??? ?  0x00000001138e0614:   ldr		x7, [x12, #0x10]
          ??? ??? ?  0x00000001138e0618:   ldp		x21, x6, [x12, #0x20]
  20.24%  ??? ??? ?  0x00000001138e061c:   ldr		x12, [x12, #0x18]
   0.06%  ??? ??? ?  0x00000001138e0620:   mul		x7, x7, x15
   0.22%  ??? ??? ?  0x00000001138e0624:   mul		x6, x6, x15
          ??? ??? ?  0x00000001138e0628:   mul		x12, x12, x15
          ??? ??? ?  0x00000001138e062c:   mul		x21, x21, x15       ;*lmul {reexecute=0 rethrow=0 return_oop=0}
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@24 (line 285)
          ??? ??? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%  ??? ??? ?  0x00000001138e0630:   cmp		x22, x7
          ??????? ?  0x00000001138e0634:   b.ge		#0x1138e064c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ??????? ?                                                            ; - java.lang.Math::max@11 (line 2038)
          ??????? ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ??????? ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  16.85%  ?????????  0x00000001138e0638:   cmp		x7, x12
          ?????????  0x00000001138e063c:   b.lt		#0x1138e05f0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ???? ????                                                            ; - java.lang.Math::max@3 (line 2038)
          ???? ????                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ???? ????                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.01%  ???? ????  0x00000001138e0640:   b		#0x1138e05e4
   0.10%  ????  ???  0x00000001138e0644:   mov		x6, x21
          ? ??  ???  0x00000001138e0648:   b		#0x1138e0600
   0.11%  ? ??   ??  0x00000001138e064c:   mov		x7, x22
          ? ?    ??  0x00000001138e0650:   b		#0x1138e0638
   0.30%  ? ?     ?  0x00000001138e0654:   mov		x21, x12
            ?     ?  0x00000001138e0658:   b		#0x1138e05f8
            ?        0x00000001138e065c:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop c_rarg0=Oop c_rarg2=Oop c_rarg4=Oop c_rarg3=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                               ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                               ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.04%             0x00000001138e0660:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                               ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                               ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                               ;   {poll}
                     0x00000001138e0664:   cmp		w1, w17
                     0x00000001138e0668:   b.ge		#0x1138e06bc
                     0x00000001138e066c:   mov		x22, x6
                     0x00000001138e0670:   cmp		w17, w1
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 545

                             0x000000012fae5dac:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@48 (line 109)
                             0x000000012fae5db0:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@42 (line 108)
                             0x000000012fae5db4:   ldp		x29, x30, [sp, #0x50]
                             0x000000012fae5db8:   add		sp, sp, #0x60
                             0x000000012fae5dbc:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                             0x000000012fae5dc0:   cmp		sp, x8
                             0x000000012fae5dc4:   b.hi		#0x12fae603c
                             0x000000012fae5dc8:   ret
   1.07%           ?         0x000000012fae5dcc:   mov		x7, x13
   9.59%          ??         0x000000012fae5dd0:   cmp		x7, x23
   0.16%  ?       ??         0x000000012fae5dd4:   b.ge		#0x12fae5e3c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?       ??                                                                   ; - java.lang.Math::max@11 (line 2038)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?       ??                                                                   ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.06%  ?       ???        0x000000012fae5dd8:   add		w11, w11, #8        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ?       ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.05%  ?       ???        0x000000012fae5ddc:   cmp		w11, w14
   0.00%  ??      ???        0x000000012fae5de0:   b.ge		#0x12fae5e74        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de4:   mov		x25, x23            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5de8:   add		x13, x4, w11, sxtw #3
          ??      ???        0x000000012fae5dec:   ldr		x23, [x13, #0x48]
   0.00%  ??      ???        0x000000012fae5df0:   ldp		x5, x6, [x13, #0x10]
   0.03%  ??      ???        0x000000012fae5df4:   ldr		x7, [x13, #0x40]
   0.01%  ??      ???        0x000000012fae5df8:   ldp		x21, x22, [x13, #0x20]
  11.10%  ??      ???        0x000000012fae5dfc:   ldp		x24, x13, [x13, #0x30];*laload {reexecute=0 rethrow=0 return_oop=0}
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ??      ???                                                                  ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ??      ???        0x000000012fae5e00:   cmp		x25, x5
   0.01%  ???     ???        0x000000012fae5e04:   b.ge		#0x12fae5e6c
  10.83%  ???     ???     ?  0x000000012fae5e08:   cmp		x5, x6
   0.14%  ????    ???     ?  0x000000012fae5e0c:   b.ge		#0x12fae5e44
  10.79%  ????    ????    ?  0x000000012fae5e10:   cmp		x6, x21
   0.27%  ?????   ????    ?  0x000000012fae5e14:   b.ge		#0x12fae5e64
  10.53%  ?????   ????   ??  0x000000012fae5e18:   cmp		x21, x22
   0.33%  ??????  ????   ??  0x000000012fae5e1c:   b.ge		#0x12fae5e4c
  10.63%  ??????  ?????  ??  0x000000012fae5e20:   cmp		x22, x24
   0.23%  ??????? ?????  ??  0x000000012fae5e24:   b.ge		#0x12fae5e54
  10.74%  ??????? ?????? ??  0x000000012fae5e28:   cmp		x24, x13
   0.08%  ?????????????? ??  0x000000012fae5e2c:   b.ge		#0x12fae5e5c        ;*lreturn {reexecute=0 rethrow=0 return_oop=0}
          ?????????????? ??                                                            ; - java.lang.Math::max@11 (line 2038)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?????????????? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  11.29%  ?????????????????  0x000000012fae5e30:   cmp		x13, x7
          ?????????????????  0x000000012fae5e34:   b.lt		#0x12fae5dd0        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
          ???????? ????????                                                            ; - java.lang.Math::max@3 (line 2038)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ???????? ????????                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%  ???????? ????????  0x000000012fae5e38:   b		#0x12fae5dcc
   0.03%  ????????  ???????  0x000000012fae5e3c:   mov		x23, x7
           ???????  ???????  0x000000012fae5e40:   b		#0x12fae5dd8
           ???????   ??????  0x000000012fae5e44:   mov		x6, x5
           ?? ????   ??????  0x000000012fae5e48:   b		#0x12fae5e10
           ?? ????    ?????  0x000000012fae5e4c:   mov		x22, x21
           ?? ? ??    ?????  0x000000012fae5e50:   b		#0x12fae5e20
   0.01%   ?? ? ??     ????  0x000000012fae5e54:   mov		x24, x22
           ?? ?  ?     ????  0x000000012fae5e58:   b		#0x12fae5e28
           ?? ?  ?      ???  0x000000012fae5e5c:   mov		x13, x24
           ?? ?         ???  0x000000012fae5e60:   b		#0x12fae5e30
   0.00%   ?? ?          ??  0x000000012fae5e64:   mov		x21, x6
           ??            ??  0x000000012fae5e68:   b		#0x12fae5e18
   0.00%   ??             ?  0x000000012fae5e6c:   mov		x5, x25
           ?              ?  0x000000012fae5e70:   b		#0x12fae5e08
           ?                 0x000000012fae5e74:   ldr		x5, [x28, #0x30]    ; ImmutableOopMap {r16=Oop c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg1=Derived_oop_c_rarg3 c_rarg4=Oop r19=Oop }
                                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                             0x000000012fae5e78:   ldr		wzr, [x5]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                       ;   {poll}
                             0x000000012fae5e7c:   cmp		w11, w12
....................................................................................................
#+end_src
** Branch Never
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score     Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  2321.742 ? 289.782  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  3637.567 ?  84.313  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 561

                 0x0000000117b6fddc:   cmp		w10, #0xfa0
                 0x0000000117b6fde0:   csel		w11, w14, w10, hi
                 0x0000000117b6fde4:   add		w10, w11, w12
                 0x0000000117b6fde8:   nop
                 0x0000000117b6fdec:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fdf0:   add		x11, x6, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%      ?  0x0000000117b6fdf4:   ldp		x21, x22, [x11, #0x10]
   0.01%      ?  0x0000000117b6fdf8:   ldr		x23, [x11, #0x20]
              ?  0x0000000117b6fdfc:   mul		x21, x21, x16
  27.63%      ?  0x0000000117b6fe00:   ldr		x11, [x11, #0x28]
              ?  0x0000000117b6fe04:   mul		x22, x22, x16
              ?  0x0000000117b6fe08:   mul		x23, x23, x16
              ?  0x0000000117b6fe0c:   mov		x24, x21
   2.30%      ?  0x0000000117b6fe10:   cmp		x21, x7
          ?   ?  0x0000000117b6fe14:   b.ge		#0x117b6fe1c
          ?   ?  0x0000000117b6fe18:   mov		x24, x7
  17.59%  ?   ?  0x0000000117b6fe1c:   mul		x11, x11, x16
              ?  0x0000000117b6fe20:   mov		x7, x22
              ?  0x0000000117b6fe24:   cmp		x22, x24
           ?  ?  0x0000000117b6fe28:   b.ge		#0x117b6fe30
           ?  ?  0x0000000117b6fe2c:   mov		x7, x24
  14.37%   ?  ?  0x0000000117b6fe30:   mov		x21, x23
   0.11%      ?  0x0000000117b6fe34:   cmp		x23, x7
   2.30%    ? ?  0x0000000117b6fe38:   b.ge		#0x117b6fe40
            ? ?  0x0000000117b6fe3c:   mov		x21, x7
  15.95%    ? ?  0x0000000117b6fe40:   add		w12, w12, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
              ?  0x0000000117b6fe44:   mov		x7, x11
              ?  0x0000000117b6fe48:   cmp		x11, x21
             ??  0x0000000117b6fe4c:   b.ge		#0x117b6fe54
             ??  0x0000000117b6fe50:   mov		x7, x21             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  18.36%     ??  0x0000000117b6fe54:   cmp		w12, w10
              ?  0x0000000117b6fe58:   b.lt		#0x117b6fdf0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.73%         0x0000000117b6fe5c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.09%         0x0000000117b6fe60:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                           ;   {poll}
                 0x0000000117b6fe64:   cmp		w12, w17
                 0x0000000117b6fe68:   b.lt		#0x117b6fdd0
                 0x0000000117b6fe6c:   cmp		w12, w13
                 0x0000000117b6fe70:   b.lt		#0x117b6fd28
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 542

                                 0x0000000113951b4c:   stp		x17, x15, [sp, #0x10]
                                 0x0000000113951b50:   str		x20, [sp, #0x60]
                                 0x0000000113951b54:   nop
                                 0x0000000113951b58:   nop
                                 0x0000000113951b5c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                          ?      0x0000000113951b60:   add		x27, x24, w12, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   5.80%                  ?      0x0000000113951b64:   ldr		x15, [x27, #0x10]
   0.05%                  ?      0x0000000113951b68:   mov		x29, x25
   0.04%                  ?      0x0000000113951b6c:   cmp		x25, x15
   0.13%  ?               ?      0x0000000113951b70:   b.ge		#0x113951b78
          ?               ?      0x0000000113951b74:   mov		x29, x15
   5.50%  ?               ?      0x0000000113951b78:   ldr		x16, [x27, #0x18]
   0.14%                  ?      0x0000000113951b7c:   mov		x15, x29
   0.19%                  ?      0x0000000113951b80:   cmp		x29, x16
   0.15%   ?              ?      0x0000000113951b84:   b.ge		#0x113951b8c
           ?              ?      0x0000000113951b88:   mov		x15, x16
   5.22%   ?              ?      0x0000000113951b8c:   ldr		x17, [x27, #0x20]
   0.07%                  ?      0x0000000113951b90:   mov		x16, x15
   0.03%                  ?      0x0000000113951b94:   cmp		x15, x17
   0.07%    ?             ?      0x0000000113951b98:   b.ge		#0x113951ba0
            ?             ?      0x0000000113951b9c:   mov		x16, x17
   5.39%    ?             ?      0x0000000113951ba0:   ldr		x0, [x27, #0x28]
   0.07%                  ?      0x0000000113951ba4:   mov		x15, x16
   0.16%                  ?      0x0000000113951ba8:   cmp		x16, x0
   0.11%     ?            ?      0x0000000113951bac:   b.ge		#0x113951bb4
             ?            ?      0x0000000113951bb0:   mov		x15, x0
   5.31%     ?            ?      0x0000000113951bb4:   ldr		x1, [x27, #0x30]
   0.04%                  ?      0x0000000113951bb8:   mov		x16, x15
   0.11%                  ?      0x0000000113951bbc:   cmp		x15, x1
   0.03%      ?           ?      0x0000000113951bc0:   b.ge		#0x113951bc8
              ?           ?      0x0000000113951bc4:   mov		x16, x1
   5.33%      ?           ?      0x0000000113951bc8:   ldr		x2, [x27, #0x38]
   0.08%                  ?      0x0000000113951bcc:   mov		x15, x16
   0.17%                  ?      0x0000000113951bd0:   cmp		x16, x2
   0.11%       ?          ?      0x0000000113951bd4:   b.ge		#0x113951bdc
               ?          ?      0x0000000113951bd8:   mov		x15, x2
   5.79%       ?          ?      0x0000000113951bdc:   ldr		x3, [x27, #0x40]
   0.07%                  ?      0x0000000113951be0:   mov		x16, x15
   0.04%                  ?      0x0000000113951be4:   cmp		x15, x3
   0.02%        ?         ?      0x0000000113951be8:   b.ge		#0x113951bf0
                ?         ?      0x0000000113951bec:   mov		x16, x3
   5.32%        ?         ?      0x0000000113951bf0:   ldr		x4, [x27, #0x48]
   0.08%                  ?      0x0000000113951bf4:   mov		x15, x16
   0.07%                  ?      0x0000000113951bf8:   cmp		x16, x4
   0.07%         ?        ?      0x0000000113951bfc:   b.ge		#0x113951c04
   0.00%         ?        ?      0x0000000113951c00:   mov		x15, x4
   5.77%         ?        ?      0x0000000113951c04:   ldr		x5, [x27, #0x50]
   0.08%                  ?      0x0000000113951c08:   mov		x16, x15
   0.04%                  ?      0x0000000113951c0c:   cmp		x15, x5
   0.04%          ?       ?      0x0000000113951c10:   b.ge		#0x113951c18
                  ?       ?      0x0000000113951c14:   mov		x16, x5
   5.42%          ?       ?      0x0000000113951c18:   ldr		x6, [x27, #0x58]
   0.09%                  ?      0x0000000113951c1c:   mov		x15, x16
   0.15%                  ?      0x0000000113951c20:   cmp		x16, x6
   0.08%           ?      ?      0x0000000113951c24:   b.ge		#0x113951c2c
                   ?      ?      0x0000000113951c28:   mov		x15, x6
   5.49%           ?      ?      0x0000000113951c2c:   ldr		x7, [x27, #0x60]
   0.11%                  ?      0x0000000113951c30:   mov		x16, x15
   0.06%                  ?      0x0000000113951c34:   cmp		x15, x7
   0.06%            ?     ?      0x0000000113951c38:   b.ge		#0x113951c40
                    ?     ?      0x0000000113951c3c:   mov		x16, x7
   5.89%            ?     ?      0x0000000113951c40:   ldr		x20, [x27, #0x68]
   0.07%                  ?      0x0000000113951c44:   mov		x15, x16
   0.17%                  ?      0x0000000113951c48:   cmp		x16, x20
   0.02%             ?    ?      0x0000000113951c4c:   b.ge		#0x113951c54
                     ?    ?      0x0000000113951c50:   mov		x15, x20
   5.52%             ?    ?      0x0000000113951c54:   ldr		x22, [x27, #0x70]
   0.07%                  ?      0x0000000113951c58:   mov		x16, x15
   0.10%                  ?      0x0000000113951c5c:   cmp		x15, x22
   0.01%              ?   ?      0x0000000113951c60:   b.ge		#0x113951c68
                      ?   ?      0x0000000113951c64:   mov		x16, x22
   5.53%              ?   ?      0x0000000113951c68:   ldr		x23, [x27, #0x78]
   0.06%                  ?      0x0000000113951c6c:   mov		x15, x16
   0.14%                  ?      0x0000000113951c70:   cmp		x16, x23
   0.12%               ?  ?      0x0000000113951c74:   b.ge		#0x113951c7c
                       ?  ?      0x0000000113951c78:   mov		x15, x23
   5.58%               ?  ?      0x0000000113951c7c:   ldr		x26, [x27, #0x80]
   0.13%                  ?      0x0000000113951c80:   mov		x16, x15
   0.07%                  ?      0x0000000113951c84:   cmp		x15, x26
   0.14%                ? ?      0x0000000113951c88:   b.ge		#0x113951c90
                        ? ?      0x0000000113951c8c:   mov		x16, x26
   5.28%                ? ?      0x0000000113951c90:   ldr		x27, [x27, #0x88]
   0.04%                  ?      0x0000000113951c94:   add		w12, w12, #0x10     ;*iinc {reexecute=0 rethrow=0 return_oop=0}
                          ?                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
                          ?                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.14%                  ?      0x0000000113951c98:   mov		x25, x16
   0.03%                  ?      0x0000000113951c9c:   cmp		x16, x27
   0.12%                 ??      0x0000000113951ca0:   b.ge		#0x113951ca8
   4.94%                 ??      0x0000000113951ca4:   mov		x25, x27            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                         ??                                                                ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                         ??                                                                ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.79%                 ??      0x0000000113951ca8:   cmp		w12, w11
   0.00%                  ?      0x0000000113951cac:   b.lt		#0x113951b60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951cb0:   ldr		x11, [x28, #0x30]   ; ImmutableOopMap {rlocals=Oop [0]=Oop [8]=Oop rdispatch=Derived_oop_[8] [16]=Oop [24]=Oop [96]=Oop }
                                                                                           ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                                           ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.02%                         0x0000000113951cb4:   ldr		wzr, [x11]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                                           ;   {poll}
                                 0x0000000113951cb8:   cmp		w12, w10
                                 0x0000000113951cbc:   b.lt		#0x113951b20
                                 0x0000000113951cc0:   ldp		x16, x0, [sp]
                                 0x0000000113951cc4:   ldp		x17, x15, [sp, #0x10]
   0.02%                         0x0000000113951cc8:   ldr		x20, [sp, #0x60]
                                 0x0000000113951ccc:   cmp		w12, w14
                                 0x0000000113951cd0:   b.lt		#0x113951af8
                                 0x0000000113951cd4:   mov		x11, x25            ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%                      ?  0x0000000113951cd8:   ldarb		w14, [x21]          ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@32 (line 107)
                              ?  0x0000000113951cdc:   ldr		x1, [x28, #0x30]
                              ?  0x0000000113951ce0:   add		x19, x19, #1        ; ImmutableOopMap {r15=Oop r16=Oop r17=Oop c_rarg0=Oop rdispatch=Derived_oop_c_rarg0 resp=Oop }
                              ?                                                            ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                              ?                                                            ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@35 (line 107)
   0.03%                      ?  0x0000000113951ce4:   ldr		wzr, [x1]           ;   {poll}
                              ?  0x0000000113951ce8:   cbnz		w14, #0x113951aa8   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@38 (line 108)
   0.00%                      ?  0x0000000113951cec:   ldr		w14, [x15, #0xc]    ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                              ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@8 (line 294)
                              ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                              ?  0x0000000113951cf0:   cmp		w14, #0
                           ?  ?  0x0000000113951cf4:   b.le		#0x113951d60        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951cf8:   ldr		w10, [x15, #0x2c]
                           ?  ?  0x0000000113951cfc:   lsl		x24, x10, #3        ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@15 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ?  ?  0x0000000113951d00:   ldr		w10, [x24, #0xc]    ; implicit exception: dispatches to 0x0000000113951d68
                           ?  ?                                                            ;*laload {reexecute=0 rethrow=0 return_oop=0}
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
                           ?  ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                           ?  ?  0x0000000113951d04:   sxtw		x11, w14
                           ?  ?  0x0000000113951d08:   sub		x1, x11, #0xf
                           ?  ?  0x0000000113951d0c:   sxtw		x12, w10
                           ?  ?  0x0000000113951d10:   sub		x11, x11, #1
                           ?  ?  0x0000000113951d14:   cbz		w10, #0x113951d68
   0.01%                   ?  ?  0x0000000113951d18:   cmp		x11, x12
                           ?  ?  0x0000000113951d1c:   b.hs		#0x113951d68
   0.05%                   ?  ?  0x0000000113951d20:   ldr		x11, [x24, #0x10]
   0.00%                   ?  ?  0x0000000113951d24:   mov		x12, #-0x80000000
                           ?  ?  0x0000000113951d28:   mov		x10, x1
                           ?  ?  0x0000000113951d2c:   cmp		x1, x12
                           ?? ?  0x0000000113951d30:   b.ge		#0x113951d38
                           ?? ?  0x0000000113951d34:   mov		x10, x12
   0.01%                   ?? ?  0x0000000113951d38:   mov		x12, xzr
                           ?  ?  0x0000000113951d3c:   mov		w10, w10
                           ?  ?  0x0000000113951d40:   mov		x25, x11
                           ?  ?  0x0000000113951d44:   cmp		x11, x12
                           ? ??  0x0000000113951d48:   b.ge		#0x113951d50
                           ? ??  0x0000000113951d4c:   mov		x25, x12            ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                           ? ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
                           ? ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%                   ? ??  0x0000000113951d50:   cmp		w10, #1
                           ?  ?  0x0000000113951d54:   b.le		#0x113951d90
                           ?  ?  0x0000000113951d58:   mov		w12, #1
                           ?  ?  0x0000000113951d5c:   b		#0x113951b2c
                           ?  ?  0x0000000113951d60:   mov		x11, xzr
                              ?  0x0000000113951d64:   b		#0x113951cd8        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                                           ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                                           ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                 0x0000000113951d68:   mov		w1, #-0x92
....................................................................................................
#+end_src
** Branch Always
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt    Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  914.140 ? 30.055  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  928.003 ? 23.162  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 560

                0x0000000116f545b0:   str		xzr, [x19, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@48 (line 109)
                0x0000000116f545b4:   str		x0, [x19, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@42 (line 108)
                0x0000000116f545b8:   ldp		x29, x30, [sp, #0x50]
                0x0000000116f545bc:   add		sp, sp, #0x60
                0x0000000116f545c0:   ldr		x8, [x28, #0x28]    ;   {poll_return}
                0x0000000116f545c4:   cmp		sp, x8
                0x0000000116f545c8:   b.hi		#0x116f547e8
                0x0000000116f545cc:   ret
   9.68%   ?    0x0000000116f545d0:   mov		x7, x17             ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
           ?                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
           ?                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)















           ?    0x0000000116f545d4:   add		x10, x6, w12, sxtw #3
  49.69%   ?    0x0000000116f545d8:   ldr		x10, [x10, #0x10]
           ?    0x0000000116f545dc:   mul		x10, x10, x16
           ?    0x0000000116f545e0:   add		w12, w12, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ?                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
           ?                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
           ?    0x0000000116f545e4:   mov		x17, x10
           ?    0x0000000116f545e8:   cmp		x7, x10
          ??    0x0000000116f545ec:   b.lt		#0x116f545f0        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ??                                                              ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ??                                                              ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
  40.26%  ??    0x0000000116f545f0:   cmp		w12, w13
           ?    0x0000000116f545f4:   b.lt		#0x116f545d0        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.07%        0x0000000116f545f8:   ldarb		w11, [x4]           ;*getfield isDone {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@32 (line 107)
                0x0000000116f545fc:   ldr		x12, [x28, #0x30]
                0x0000000116f54600:   add		x20, x20, #1        ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 r19=Oop }
                                                                          ;*ifeq {reexecute=1 rethrow=0 return_oop=0}
                                                                          ; - (reexecute) org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@35 (line 107)
   0.02%        0x0000000116f54604:   ldr		wzr, [x12]          ;   {poll}
                0x0000000116f54608:   cbnz		w11, #0x116f54584   ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@38 (line 108)
                0x0000000116f5460c:   ldr		w13, [x0, #0xc]     ;*getfield size {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@8 (line 284)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                0x0000000116f54610:   cmp		w13, #0
                0x0000000116f54614:   b.le		#0x116f5470c        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                0x0000000116f54618:   ldr		w10, [x0, #0x2c]
                0x0000000116f5461c:   lsl		x6, x10, #3         ;*getfield maxLongA {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@18 (line 285)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.02%        0x0000000116f54620:   ldr		w12, [x6, #0xc]     ; implicit exception: dispatches to 0x0000000116f54714
                                                                          ;*laload {reexecute=0 rethrow=0 return_oop=0}
                                                                          ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
                                                                          ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                0x0000000116f54624:   sxtw		x10, w13
                0x0000000116f54628:   sub		x11, x10, #3
                0x0000000116f5462c:   mov		x17, x1
                0x0000000116f54630:   cmp		x11, x1
            ?   0x0000000116f54634:   b.lt		#0x116f54638
   0.00%    ?   0x0000000116f54638:   sxtw		x7, w12
                0x0000000116f5463c:   sub		x10, x10, #1
                0x0000000116f54640:   mov		w17, w17
                0x0000000116f54644:   cbz		w12, #0x116f54714
   0.00%        0x0000000116f54648:   cmp		x10, x7
                0x0000000116f5464c:   b.hs		#0x116f54714
   0.00%        0x0000000116f54650:   ldr		x10, [x6, #0x10]
                0x0000000116f54654:   mul		x10, x10, x16
                0x0000000116f54658:   mov		x7, x15
                0x0000000116f5465c:   cmp		x10, x15
             ?  0x0000000116f54660:   b.lt		#0x116f54664        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
             ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
             ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
             ?  0x0000000116f54664:   cmp		w17, #1
                0x0000000116f54668:   b.le		#0x116f5473c
                0x0000000116f5466c:   mov		w12, #1
                0x0000000116f54670:   cmp		w17, w12
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 537

              0x0000000115b4df04:   str		xzr, [x20, #0x20]   ;*putfield realTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@48 (line 109)
              0x0000000115b4df08:   str		x0, [x20, #0x30]    ;*putfield stopTime {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@42 (line 108)
              0x0000000115b4df0c:   ldp		x29, x30, [sp, #0x50]
              0x0000000115b4df10:   add		sp, sp, #0x60
              0x0000000115b4df14:   ldr		x8, [x28, #0x28]    ;   {poll_return}
              0x0000000115b4df18:   cmp		sp, x8
              0x0000000115b4df1c:   b.hi		#0x115b4e214
              0x0000000115b4df20:   ret
   8.63%   ?  0x0000000115b4df24:   mov		x25, x11            ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
           ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
           ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
           ?  0x0000000115b4df28:   add		x10, x24, w12, sxtw #3
  49.92%   ?  0x0000000115b4df2c:   ldr		x10, [x10, #0x10]
           ?  0x0000000115b4df30:   add		w12, w12, #1        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
           ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
           ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
           ?  0x0000000115b4df34:   mov		x11, x10
           ?  0x0000000115b4df38:   cmp		x25, x10
          ??  0x0000000115b4df3c:   b.lt		#0x115b4df40        ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ??                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ??                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
  41.12%  ??  0x0000000115b4df40:   cmp		w12, w14
           ?  0x0000000115b4df44:   b.lt		#0x115b4df24        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                        ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                        ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.04%      0x0000000115b4df48:   b		#0x115b4e0b8
              0x0000000115b4df4c:   ldp		x16, x0, [sp]
              0x0000000115b4df50:   ldp		x17, x15, [sp, #0x10]
              0x0000000115b4df54:   ldr		x20, [sp, #0x60]
              0x0000000115b4df58:   cmp		w10, w12
              0x0000000115b4df5c:   sub		w1, w10, w12
              0x0000000115b4df60:   csel		w1, wzr, w1, lt
              0x0000000115b4df64:   mov		w8, #0x3e80
              0x0000000115b4df68:   cmp		w1, w8
....................................................................................................
#+end_src
** CMov
*** release
#+begin_src bash
Benchmark                              (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionMultiplyMax            100    2048  thrpt    8  1023.075 ? 73.846  ops/ms
MinMaxVector.longReductionSimpleMax              100    2048  thrpt    8  1105.859 ?  5.286  ops/ms
#+end_src
*** profiler
**** longReductionMultiplyMax
#+begin_src bash
....[Hottest Region 1]..............................................................................
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub, version 5, compile id 559

             0x000000012fae6944:   add		w11, w12, w13
             0x000000012fae6948:   nop
             0x000000012fae694c:   nop		                    ;*ldc2_w {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@14 (line 285)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ?  0x000000012fae6950:   add		x12, x6, w13, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@23 (line 285)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
          ?  0x000000012fae6954:   ldp		x21, x22, [x12, #0x10]
          ?  0x000000012fae6958:   mul		x21, x21, x17
   0.01%  ?  0x000000012fae695c:   ldr		x23, [x12, #0x20]
          ?  0x000000012fae6960:   mul		x22, x22, x17
          ?  0x000000012fae6964:   cmp		x21, x7
   0.08%  ?  0x000000012fae6968:   ldr		x12, [x12, #0x28]
   0.00%  ?  0x000000012fae696c:   csel		x7, x21, x7, gt
          ?  0x000000012fae6970:   mul		x21, x23, x17
          ?  0x000000012fae6974:   cmp		x22, x7
          ?  0x000000012fae6978:   csel		x7, x22, x7, gt
   0.02%  ?  0x000000012fae697c:   mul		x12, x12, x17
   2.37%  ?  0x000000012fae6980:   cmp		x21, x7
  74.76%  ?  0x000000012fae6984:   csel		x7, x21, x7, gt
   4.96%  ?  0x000000012fae6988:   cmp		x12, x7
   4.78%  ?  0x000000012fae698c:   add		w13, w13, #4        ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@34 (line 284)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   5.15%  ?  0x000000012fae6990:   csel		x7, x12, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@30 (line 286)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   7.16%  ?  0x000000012fae6994:   cmp		w13, w11
          ?  0x000000012fae6998:   b.lt		#0x12fae6950        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@11 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.34%     0x000000012fae699c:   ldr		x21, [x28, #0x30]   ; ImmutableOopMap {c_rarg0=Oop c_rarg2=Oop c_rarg3=Oop c_rarg5=Oop c_rarg4=Derived_oop_c_rarg5 c_rarg6=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
   0.03%     0x000000012fae69a0:   ldr		wzr, [x21]          ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionMultiplyMax@37 (line 284)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionMultiplyMax_jmhTest::longReductionMultiplyMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x000000012fae69a4:   cmp		w13, w15
             0x000000012fae69a8:   b.lt		#0x12fae6930
             0x000000012fae69ac:   cmp		w13, w10
             0x000000012fae69b0:   b.lt		#0x12fae68a0
....................................................................................................
#+end_src
**** longReductionSimpleMax
#+begin_src bash
C2, level 4, org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub, version 5, compile id 558

             0x0000000114f3c8f0:   csel		w11, wzr, w12, lt
             0x0000000114f3c8f4:   mov		w8, #0x3e80
             0x0000000114f3c8f8:   cmp		w11, w8
             0x0000000114f3c8fc:   csel		w11, w14, w11, hi
             0x0000000114f3c900:   add		w12, w11, w3
             0x0000000114f3c904:   nop
             0x0000000114f3c908:   nop
             0x0000000114f3c90c:   nop		                    ;*aload_1 {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@14 (line 295)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.00%  ?  0x0000000114f3c910:   add		x21, x5, w3, sxtw #3;*laload {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@20 (line 295)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.01%  ?  0x0000000114f3c914:   ldr		x11, [x21, #0x10]
          ?  0x0000000114f3c918:   cmp		x6, x11
   0.01%  ?  0x0000000114f3c91c:   ldr		x7, [x21, #0x18]
          ?  0x0000000114f3c920:   csel		x11, x6, x11, gt
          ?  0x0000000114f3c924:   cmp		x11, x7
   0.01%  ?  0x0000000114f3c928:   ldr		x6, [x21, #0x20]
          ?  0x0000000114f3c92c:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c930:   cmp		x11, x6
   0.02%  ?  0x0000000114f3c934:   ldr		x7, [x21, #0x28]
          ?  0x0000000114f3c938:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c93c:   cmp		x11, x7
   0.00%  ?  0x0000000114f3c940:   ldr		x6, [x21, #0x30]
          ?  0x0000000114f3c944:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c948:   cmp		x11, x6
   0.01%  ?  0x0000000114f3c94c:   ldr		x7, [x21, #0x38]
          ?  0x0000000114f3c950:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c954:   cmp		x11, x7
   1.03%  ?  0x0000000114f3c958:   ldr		x6, [x21, #0x40]
   0.24%  ?  0x0000000114f3c95c:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c960:   cmp		x11, x6
   2.91%  ?  0x0000000114f3c964:   ldr		x7, [x21, #0x48]
          ?  0x0000000114f3c968:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c96c:   cmp		x11, x7
   2.54%  ?  0x0000000114f3c970:   ldr		x6, [x21, #0x50]
          ?  0x0000000114f3c974:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c978:   cmp		x11, x6
   4.65%  ?  0x0000000114f3c97c:   ldr		x7, [x21, #0x58]
          ?  0x0000000114f3c980:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c984:   cmp		x11, x7
   6.08%  ?  0x0000000114f3c988:   ldr		x6, [x21, #0x60]
          ?  0x0000000114f3c98c:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c990:   cmp		x11, x6
   5.08%  ?  0x0000000114f3c994:   ldr		x7, [x21, #0x68]
          ?  0x0000000114f3c998:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c99c:   cmp		x11, x7
   5.66%  ?  0x0000000114f3c9a0:   ldr		x6, [x21, #0x70]
          ?  0x0000000114f3c9a4:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c9a8:   cmp		x11, x6
   5.49%  ?  0x0000000114f3c9ac:   ldr		x7, [x21, #0x78]
          ?  0x0000000114f3c9b0:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c9b4:   cmp		x11, x7
   5.43%  ?  0x0000000114f3c9b8:   ldr		x6, [x21, #0x80]
   0.05%  ?  0x0000000114f3c9bc:   csel		x11, x11, x7, gt
          ?  0x0000000114f3c9c0:   cmp		x11, x6
  59.60%  ?  0x0000000114f3c9c4:   ldr		x7, [x21, #0x88]
          ?  0x0000000114f3c9c8:   csel		x11, x11, x6, gt
          ?  0x0000000114f3c9cc:   cmp		x11, x7
          ?  0x0000000114f3c9d0:   add		w3, w3, #0x10       ;*iinc {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@30 (line 294)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ?  0x0000000114f3c9d4:   csel		x6, x11, x7, gt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
          ?                                                            ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@26 (line 296)
          ?                                                            ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
          ?  0x0000000114f3c9d8:   cmp		w3, w12
          ?  0x0000000114f3c9dc:   b.lt		#0x114f3c910        ;*if_icmpge {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@11 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.31%     0x0000000114f3c9e0:   ldr		x7, [x28, #0x30]    ; ImmutableOopMap {r13=Oop r15=Oop c_rarg2=Oop c_rarg4=Oop c_rarg1=Derived_oop_c_rarg4 c_rarg5=Oop r19=Oop }
                                                                       ;*goto {reexecute=1 rethrow=0 return_oop=0}
                                                                       ; - (reexecute) org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
   0.02%     0x0000000114f3c9e4:   ldr		wzr, [x7]           ;*goto {reexecute=0 rethrow=0 return_oop=0}
                                                                       ; - org.openjdk.bench.java.lang.MinMaxVector::longReductionSimpleMax@33 (line 294)
                                                                       ; - org.openjdk.bench.java.lang.jmh_generated.MinMaxVector_longReductionSimpleMax_jmhTest::longReductionSimpleMax_thrpt_jmhStub@19 (line 105)
                                                                       ;   {poll}
             0x0000000114f3c9e8:   cmp		w3, w0
             0x0000000114f3c9ec:   b.lt		#0x114f3c8e8
             0x0000000114f3c9f0:   cmp		w3, w10
             0x0000000114f3c9f4:   b.lt		#0x114f3c860
....................................................................................................
#+end_src
* 28.3.25
Added jmh code to resolve xctrace out of SDKROOT.
Created https://bugs.openjdk.org/browse/CODETOOLS-7903982 to improve that.

Tried to run benchmark with that but failed:
#+begin_src bash
TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax" MICRO="OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1" CONF=release BUILD_LOG=warn make test
pushd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make -s
popd
touch /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
~/1/jdk-avoid-cmov-long-min-max ~/1/colata/avoid-cmov-long-min-max-8351409
Building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
Finished building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
~/1/colata/avoid-cmov-long-min-max-8351409
cd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make test
make[1]: Entering directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
Building target 'test' in configuration 'release-darwin-arm64'
Running tests using MICRO control variable 'OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1'
Test selection 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax', will run:
 micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax

Running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Profilers failed to initialize, exiting.
"xctrace version" failed: [dyld[99580]: Library not loaded: @rpath/XCTraceCore.framework/Versions/A/XCTraceCore
  Referenced from: <05ABD51C-583F-305C-BAC6-95F050084452> /nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/usr/bin/xctrace
  Reason: tried: '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file), '/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore' (no such file)
]
Finished running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Test report is stored in build/release-darwin-arm64/test-results/micro_org_openjdk_bench_java_lang_MinMaxVector_longReductionMultiplyMax

==============================
Test summary
==============================
   TEST                                              TOTAL  PASS  FAIL ERROR  SKIP
   micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax
>>                                                       1     0     0     1     0 <<
==============================
TEST FAILURE

make[2]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/Init.gmk:150: main] Error 1
make[1]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/PreInit.gmk:159: test] Error 2
make[1]: Leaving directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
make: *** [../nix-make/OpenJDK.gmk:103: test] Error 2
#+end_src
The issue is that XCTraceCore is not in the devkit.
Created https://bugs.openjdk.org/browse/JDK-8353177

Added XCTraceCore to the devkit and tried again,
but something else is missing, ~InstrumentsTrace~:
#+begin_src bash
[nix-shell:~/1/colata/avoid-cmov-long-min-max-8351409]$ TEST="micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax" MICRO="OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1" CONF=release BUILD_LOG=warn make test
pushd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make -s
popd
touch /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/jdk/bin/java
~/1/jdk-avoid-cmov-long-min-max ~/1/colata/avoid-cmov-long-min-max-8351409
Building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
Finished building target 'default (exploded-image)' in configuration 'release-darwin-arm64'
~/1/colata/avoid-cmov-long-min-max-8351409
cd /Users/galder/1/jdk-avoid-cmov-long-min-max
CONF=release-darwin-arm64 make test
make[1]: Entering directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
Building target 'test' in configuration 'release-darwin-arm64'
Running tests using MICRO control variable 'OPTIONS=-p probability=100 -jvmArgs -XX:-UseSuperWord -prof xctraceasm -v EXTRA;FORK=1'
Test selection 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax', will run:
 micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax

Running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Profilers failed to initialize, exiting.
"xctrace version" failed: [dyld[24506]: Library not loaded: @rpath/InstrumentsTrace.framework/Versions/A/InstrumentsTrace
  Referenced from: <EC019860-6E8F-343C-82AA-B9F9374E9129> /nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/XCTraceCore
  Reason: tried: '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/../../../InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/../../../../../../../SharedFrameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/XCTraceCore.framework/Versions/A/../../../../Independence/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/SharedFrameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Applications/Instruments.app/Contents/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Independence/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file), '/nix/store/fqdg3ybx87d3kpg2gqqxl5h4xlwj4wrq-Xcode16.2-MacOSX15/Xcode/Contents/Developer/Frameworks/InstrumentsTrace.framework/Versions/A/InstrumentsTrace' (no such file)
]
Finished running test 'micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax'
Test report is stored in build/release-darwin-arm64/test-results/micro_org_openjdk_bench_java_lang_MinMaxVector_longReductionMultiplyMax

==============================
Test summary
==============================
   TEST                                              TOTAL  PASS  FAIL ERROR  SKIP
   micro:org.openjdk.bench.java.lang.MinMaxVector.longReductionMultiplyMax
>>                                                       1     0     0     1     0 <<
==============================
TEST FAILURE

make[2]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/Init.gmk:150: main] Error 1
make[1]: *** [/Users/galder/1/jdk-avoid-cmov-long-min-max/make/PreInit.gmk:159: test] Error 2
make[1]: Leaving directory '/Users/galder/1/jdk-avoid-cmov-long-min-max'
make: *** [../nix-make/OpenJDK.gmk:104: test] Error 2
#+end_src
* 27.3.25
To breakpoint to .ad being called,
try putting breakpoint in MatchOper::reg
#+begin_src bash
MachOper::reg(PhaseRegAlloc *, const Node *) const machnode.cpp:39
maxL_reg_regNode::emit(C2_MacroAssembler *, PhaseRegAlloc *) const aarch64.ad:15683
PhaseOutput::scratch_emit_size(const Node *) output.cpp:3385
MachNode::emit_size(PhaseRegAlloc *) const machnode.cpp:157
MachNode::size(PhaseRegAlloc *) const machnode.cpp:149
PhaseOutput::shorten_branches(unsigned int *) output.cpp:539
PhaseOutput::Output() output.cpp:339
Compile::Code_Gen() compile.cpp:3081
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:891
Compile::Compile(ciEnv *, ciMethod *, int, Options, DirectiveSet *) compile.cpp:693
C2Compiler::compile_method(ciEnv *, ciMethod *, int, bool, DirectiveSet *) c2compiler.cpp:141
CompileBroker::invoke_compiler_on_method(CompileTask *) compileBroker.cpp:2331
CompileBroker::compiler_thread_loop() compileBroker.cpp:1975
CompilerThread::thread_entry(JavaThread *, JavaThread *) compilerThread.cpp:67
JavaThread::thread_main_inner() javaThread.cpp:776
JavaThread::run() javaThread.cpp:761
Thread::call_run() thread.cpp:231
thread_native_entry(Thread *) os_bsd.cpp:601
#+end_src
* 25.3.25
todo: run without intrinsic
** benchmarking aarch64
*** branch never taken (option 3)
#+begin_src bash
Benchmark                            (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionSimpleMax            100    2048  thrpt    8  3810.543 ? 98.505  ops/ms
#+end_src
*** branch always taken (option 2)
#+begin_src bash
Benchmark                            (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionSimpleMax            100    2048  thrpt    8  1757.789 ? 39.362  ops/ms
#+end_src
*** cmov (option 1)
#+begin_src bash
Benchmark                            (probability)  (size)   Mode  Cnt     Score    Error   Units
MinMaxVector.longReductionSimpleMax            100    2048  thrpt    8  1095.610 ? 13.587  ops/ms
#+end_src
** source date error
Attempt to run benchmark but had issues building test:

#+begin_src bash
/nix/store/5y040sypyg0amh0igxs9rnx5fmj0d88i-temurin-bin-23.0.2/bin/jar --create --date 1980-01-01T00:00:00Z --file /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/support/modules_libs/java.base/jrt-fs.jar --manifest /Users/galder/1/jdk-avoid-cmov-long-min-max/build/release-darwin-arm64/support/modules_libs/java.base/_the.jrt-fs.jar_manifest
...
date 1980-01-01T00:00:00Z is not within the valid range 1980-01-01T00:00:02Z to 2099-12-31T23:59:59Z
#+end_src

#+begin_src bash
bash configure \
   --disable-precompiled-headers \
   --with-boot-jdk=/nix/store/5y040sypyg0amh0igxs9rnx5fmj0d88i-temurin-bin-23.0.2 \
   --with-conf-name=release-darwin-arm64 \
   --with-jmh=build/jmh/jars \
   --with-devkit=/nix/store/vhsix1jn849mpxggwbw2zh1nbxpy0grc-Xcode16.2-MacOSX15 \
   --enable-hsdis-bundling --with-capstone=/nix/store/g9xz7lq27dsdvrg0i666nwc6322af9p1-capstone-5.0.5 --with-hsdis=capstone
...
checking what hotspot build time to use... 1980-01-01T00:00:00Z (from --with-source-date)
#+end_src

Nix:
#+begin_src bash
checking what source date to use... 315532800, from SOURCE_DATE_EPOCH
#+end_src

Leo:
#+begin_src bash
checking what source date to use... 1742909454, from 'current' (default)
#+end_src

Issue is that nix-shell sets ~SOURCE_DATE_EPOCH~:
#+begin_src bash
$ echo $SOURCE_DATE_EPOCH
315532800
#+end_src

Several ways to fix it.
Either pass in a source date, or unset ~SOURCE_DATE_EPOCH~ env variable:
https://espg.github.io/linux/nix.html

Cause: https://github.com/openjdk/jdk/pull/
** other way, branch always taken
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ cmp(as_Register($src1$$reg), as_Register($src2$$reg));
    __ br(Assembler::GE, done);
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src

#+begin_src asm
  0x00000001382cfd68:   mov		x13, #0xb
  0x00000001382cfd7c:   mul		x14, x14, x13
  ...
  0x00000001382cfdb8:   mov		x0, x14             ; x0 (dst) <- x14 (src1, value)
  0x00000001382cfdbc:   cmp		x14, x12            ; x14 (src1, value) >= x12 (src2, max)
  0x00000001382cfdc0:   b.ge		#0x1382cfdc8        ; yes, it's always greater so branch taken
  0x00000001382cfdc4:   mov		x0, x12             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
  0x00000001382cfdc8:   cmp		w11, #0x3fd
#+end_src
** one way v2, branch never taken
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ cmp(as_Register($src2$$reg), as_Register($src1$$reg));
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
#+begin_src asm
  0x00000001282cfd98:   mul		x12, x12, x13
  ...
  0x00000001282cfdb8:   mov		x0, x12             ; x0 (dst) <- x12 (value)
  0x00000001282cfdbc:   cmp		x12, x14            ; x12 (value), x14 (max)
  0x00000001282cfdc0:   b.lt		#0x1282cfdc8        ; value < max ? never taken branch
  0x00000001282cfdc4:   mov		x0, x14             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
                                                            ; dst (dst) <- x14 max
#+end_src
** one way
Is this right?
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ cmp(as_Register($dst$$reg), as_Register($src1$$reg));
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
#+begin_src asm
  0x0000000137acfd68:   mov		x13, #0xb           ; x13 = 11
  ...
  0x0000000137acfd98:   mul		x12, x12, x13       ; value = 11 * data[i]
  ...
  0x0000000137acfdb8:   mov		x0, x12             ; mov dst <- src2 (value)
  0x0000000137acfdbc:   cmp		x0, x14             ; cmp dst (value), src1 (max)
  0x0000000137acfdc0:   b.lt		#0x137acfdc8        ; branch if (dst (value) < src1 (max)) ; branch won't happen because value always > max
  0x0000000137acfdc4:   mov		x0, x14             ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
                                                            ; mov dst <- src1 (max)
#+end_src
* 21.3.25
** branch one way
#+begin_src asm
instruct maxL_reg_reg(iRegLNoSp dst, iRegL src1, iRegL src2)
%{
  match(Set dst (MaxL src1 src2));
  ins_cost(INSN_COST * 3);

  ins_encode %{
    Label done;
    __ mov(as_Register($dst$$reg), as_Register($src2$$reg));
    __ cmp(as_Register($dst$$reg), as_Register($src1$$reg));
    __ br(Assembler::LT, done);
    __ mov(as_Register($dst$$reg), as_Register($src1$$reg));
    __ bind(done);
  %}
  ins_pipe(pipe_cmp_branch);
%}
#+end_src
** how to write branch code in backend
Create MyMax that does things manually.

Bytecode:
#+begin_src java
  static long test(long[]);
    descriptor: ([J)J
    flags: (0x0008) ACC_STATIC
    Code:
      stack=4, locals=8, args_size=1
         0: ldc2_w        #11                 // long -9223372036854775808l
         3: lstore_1
         4: iconst_0
         5: istore_3
         6: iload_3
         7: sipush        1024
        10: if_icmpge     46
        13: ldc2_w        #13                 // long 11l
        16: aload_0
        17: iload_3
        18: laload
        19: lmul
        20: lstore        4
        22: lload_1
        23: lload         4
        25: lcmp
        26: iflt          33
#+end_src

#+begin_src asm
 ;; 0x8000000000000000
 ;; 0xB
  0x000000012facfdd4:   mov		x12, #0xb
  0x000000012facfdd8:   mul		x11, x11, x12       ;*lmul {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - MyMax::test@19 (line 23)
                                                            ; x11 is value
  0x000000012facfddc:   mov		x8, #-0x8000000000000000
  0x000000012facfde0:   cmp		x11, x8             ; x8 is max
  0x000000012facfde4:   b.le		#0x12facff78        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - MyMax::test@26 (line 24)
 ;; B5: #	out( B28 B6 ) <- in( B4 )  Freq: 0.999996
 ;; 0x1
  0x000000012facfde8:   mov		w2, #1
  0x000000012facfdec:   cmp		w10, #1
  ...
 ;; B29: #	out( B25 ) <- in( B4 )  Freq: 4.76836e-07
 ;; 0x8000000000000000
  0x000000012facff78:   mov		x14, #-0x8000000000000000
  0x000000012facff7c:   mov			w2, wzr
  0x000000012facff80:   mov		x0, x11
  0x000000012facff84:   b		#0x12facff04        ;*iflt {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - MyMax::test@26 (line 24)
#+end_src
** disable macro expansion and implement cmov in backend
Trying to add backend implementation for MinL/MaxL.
Used code in here as base to decide how to approach it:
https://github.com/openjdk/jdk/compare/master...galderz:jdk:topic.intrinsify-max-min-long.0528?expand=1
Removed macro expansion for the nodes.

Java code:
#+begin_src java
     1	import java.util.Arrays;
     2
     3	public class Test
     4	{
     5	    static final int RANGE = 1024;
     6	    static final int ITER = 10_000;
     7
     8	    // Initializes data with increasing values,
     9	    // so max one of the branches is the one that is always taken
    10	    static void init(long[] data)
    11	    {
    12	        for (int i = 0; i < RANGE; i++)
    13	        {
    14	            data[i] = i + 1;
    15	        }
    16	    }
    17
    18	    static long test(long[] data)
    19	    {
    20	        long max = Long.MIN_VALUE;
    21	        for (int i = 0; i < RANGE; i++)
    22	        {
    23	            final long value = 11 * data[i];
    24	            final long tmp = Math.max(max, value);
    25	            max = tmp;
    26	        }
    27	        return max;
    28	    }
    29
    30	    public static void main(String[] args)
    31	    {
    32	        long[] data = new long[RANGE];
    33	        init(data);
    34
    35	        long result = 0;
    36	        for (long i = 0; i < ITER; i++)
    37	        {
    38	            result = test(data);
    39	        }
    40
    41	        // Validate
    42	        if (result == 11 * Arrays.stream(data).max().getAsLong())
    43	        {
    44	            System.out.println("Success");
    45	        }
    46	        else
    47	        {
    48	            throw new AssertionError("Failed");
    49	        }
    50	    }
    51	}
#+end_src

Before, ideal graph:
#+begin_src bash
 467  CMoveL  === _ 466 430 415  [[ 469 471 ]]  #long !orig=[414],[360],[132],377 !jvms: Test::test @ bci:25 (line 24)
 469  CmpL  === _ 467 413  [[ 470 ]]
 470  Bool  === _ 469  [[ 471 ]] [lt]
#+end_src

Before, assemly:
#+begin_src asm
  0x0000000110607dfc:   csel		x0, x10, x0, lt     ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
#+end_src

After, ideal graph:
#+begin_src bash
 412  MaxL  === _ 414 413  [[ 360 ]]  !orig=132,377 !jvms: Test::test @ bci:25 (line 24)
#+end_src

After, assembly:
#+begin_src asm
  0x000000010e6d3db0:   csel		x0, x14, x12, gt    ;*invokestatic max {reexecute=0 rethrow=0 return_oop=0}
                                                            ; - Test::test@25 (line 24)
#+end_src
